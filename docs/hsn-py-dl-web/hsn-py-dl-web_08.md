# 第八章：通过 API 进行深度学习

到目前为止，我们已经熟悉了深度学习项目中遵循的基本流程。在之前的章节中，我们使用 Keras 和 TensorFlow.js 库完成了两个基本的端到端项目。我们已经熟悉了 Python 库，如 NumPy、pandas 和 Keras，我们也看到如何使用 JavaScript 开发深度学习模型。我们还使用 Flask 框架将深度学习模型转换成 API。在 第四章，*开始使用 TensorFlow.js* 中，我们使用了第三方 **应用程序编程接口**（**API**）来创建 web 应用程序。

在本章中，我们将详细学习 API 的整个概念。从 API 的一个非正式定义开始，我们将探讨所有与深度学习相关的 API。我们首先会看看一些广为人知的深度学习 API，然后再了解一些鲜为人知的深度学习 API。我们还将学习如何选择深度学习 API 提供商。

在本章中，我们将涵盖以下主题：

+   什么是 API？

+   API 与库有什么不同？

+   一些广为人知的深度学习 API

+   一些鲜为人知的深度学习 API

+   选择深度学习 API 提供商

# 什么是 API？

让我们首先考虑一个问题场景。

假设你正在开发一个需要集成图像识别模块的 web 应用程序。但是你对计算机视觉和深度学习并不熟悉，你有一个非常严格的项目截止日期。你不能花时间去学习深度学习然后再完成图像识别模块的开发。你现在应该怎么办？你的项目能按时完成吗？

当然不能！然而，借助 API 的力量，你将能够轻松地将图像识别模块集成到你的 web 应用程序中。现在，让我们更详细地讨论一下 API 的概念。

API 是一组函数（虽然从技术上讲，一个 API 也可以只包含一个函数），可以集成到应用程序中执行特定任务。通常，作为开发者，我们会希望将我们喜欢的网站上的某些实用工具集成到我们自己的应用程序中。例如，Twitter 提供了一个 API，用于检索与特定关键词匹配的推文。我们可以使用这个 API 来收集数据，分析数据，最终得出一些有趣的见解。

像 Facebook、Google、Stack Overflow 和 LinkedIn 等公司提供了用于特定任务的 API，对于开发者来说，了解这些 API 非常值得。API 几乎可以类比为网站。当我们点击网站中的某个内容时，我们会被重定向到另一个页面/部分。在大多数情况下，我们会看到一个网页作为输出。但是 API 通常不会生成好看的网页作为输出。API 的设计目的是在代码中使用，它们的输出通常是某种流行的数据交换格式，如 JSON 或 XML。然后，输出会根据应用程序的需求进行处理。API 让您通过提供一套实用工具或一个生态系统来完成您想做的任务，而无需担心细节问题。

如今，您可以测试一个 API，而无需编写一行代码。例如，您可以使用像 Postman 这样的 API 客户端，测试您喜欢的开放 API，而无需编写任何代码来实现这一点。

API 更神奇的一点在于，您可以用 Java 编写代码，并使用一个用 Python 开发的 API。这在团队协作中尤为有用，尤其是当团队成员对使用的编程语言非常讲究时。一个团队成员可能非常熟悉 Java，而另一个成员则可能是 Python 专家。因此，在这些情况下，API 的概念非常实用。

我们接下来将讨论一些由 Google AI、Facebook AI Research 等公司提供的深度学习 API。我们将在接下来的章节中看到如何使用这些 API 来开发智能 web 应用。

# 使用 API 的重要性

除了在需要快速生产或最小工作产品演示时，节省您大量的精力来创建和部署自己的深度学习模型外，API 还可以带来以下几种好处：

+   **标准、稳定的模型**：

    +   深度学习的 API 通常是由一整个开发者团队共同创建的，这些开发者使用行业标准的技术和研究工具，而这些工具可能并不是所有开发者都能接触到的。此外，通过商业 API 部署的模型通常非常稳定，提供了最先进的功能，包括可扩展性、定制性和准确性。因此，如果您在准确性方面遇到问题，这是深度学习模型中常见的情况，选择 API 是一个不错的选择。

+   **高性能模型**：

    +   商业深度学习 API 通常运行在非常强大的服务器上，并经过高度优化，能够非常快速地执行任务。因此，如果您希望加速深度学习生态系统的学习，这类 API 非常方便。

+   **开发者的共同平台**：

    +   虽然从零开始编写代码非常简单，但当最初编写代码的人离开并且没有提供适当的文档，而新的人必须接手时，事情就变得很难了。商业 API 定义了一套标准操作，使用这些 API 构建的应用程序容易维护，因为 API 提供商通常会提供详尽的文档，意味着开发者可以事先了解 API。

+   **定期和无缝更新**：

    +   对于一个处于初创阶段的公司来说，一旦他们开发出了第一个版本的深度学习模型，尤其是当他们的整个商业模式并不完全以人工智能为中心时，承担开发时间以改进深度学习模型往往是昂贵的。任何类似的应用场景都会从 API 的使用中大大受益，因为 API 是由那些定期推送更新和新功能的人来维护的。

考虑到这一切，使用 API 能够提供最新的技术、高性能和不断发展的模型，这些模型可以一次集成到应用程序中，并且多年使用而不必再考虑这些 API。

现在，你可能会问 API 和库有什么区别。让我们在下一节中解答这个问题。

# API 和库有什么不同？

如今，*库*和*API*这两个术语经常互换使用。它们之间有许多相似之处，但在许多方面也有所不同。就像 API 一样，库也提供了一组函数和类，可以根据需要使用。以下是一些帮助你区分库和 API 的要点：

+   库通常是特定于编程语言的。例如，如果你使用 PHP 编程环境，就无法使用 SciPy Python 库。然而，你可以开发一个使用 SciPy 的 API，然后通过 PHP 代码调用这个 API。

+   开发者无法直接访问 API。API 的使用方式与库有所不同。许多 API 在开发者实际使用之前要求进行某种身份验证。而当使用库时，这种情况并不常见。你可以轻松地重载和重写库的函数或类，并根据自己的需要使用它们。

+   库和 API 可以一起使用。许多库内部使用不同的 API，反之亦然。

这些应该能让你对库和 API 之间的基本区别有一定的了解。不过，如果你仍然觉得难以区分，不用担心：我们会看很多例子，到你看完这些例子时，你一定能够区分 API 和库。

现在，我们将介绍一些广泛用于开发深度学习应用程序的 API，其中一些非常知名，另一些则不那么流行。

# 一些广为人知的深度学习 API

在本节中，我们将看看一些最广泛使用的 API，这些 API 部署在多种深度学习任务中，如图像识别、从图像中检测情感、情感分类、语音转文本转换等。为了限制本节的讨论，我们将深度学习任务分为两个大类：

+   计算机视觉和图像处理

+   自然语言处理

然后，我们将列出与这些分类相关的一些常见任务，并讨论可以用来完成这些任务的 API。

现在我们快速列出一些常见的深度学习任务，并将其归类：

+   **计算机视觉和图像处理**：

    +   **图像搜索**：就像 Google 搜索一样，图像搜索引擎允许我们搜索与某一特定图像相似的图像。

    +   **图像检测**：这是检测图像内容的功能，也被称为标签检测。

    +   **对象定位**：给定一张包含多个不同对象的图像，这涉及检测图像中特定的对象。

    +   **内容审核**：给定一张图像，这涉及检测图像中的不当内容。

    +   **图像属性提取**：给定一张图像，这涉及提取图像的不同特征。

+   **自然语言处理**：

    +   **词性标注**：给定一段文本，这涉及提取该文本中包含的词性。

    +   **主题摘要**：给定一段文本，这涉及确定该文本所涉及的主题。

    +   **情感分类**：给定一段文本，这涉及预测该文本所传达的情感。

    +   **命名实体识别**：这涉及自动识别给定句子中的不同实体。

    +   **语音转文本转换**：这涉及从语音中提取包含的文本。

这里列出的所有任务在我们的日常生活中都极为有用，令人兴奋的是，我们可以利用即将讨论的 API 开发出能为我们完成这些任务的应用程序。

还有其他用于大规模推理的深度学习 API，但暂时我们可以忽略它们，集中讨论两大最受深度学习影响的领域。

以下表格汇总了一些在行业中最广泛使用的深度学习 API：

| **提供者** | **API** | **分类** |
| --- | --- | --- |
| Google | Vision API | 计算机视觉和图像处理 |
| 视频智能 API |
| 自然语言 API | 自然语言处理 |
| 语音转文本 API |
| 语音合成 API |
| 翻译 API |
| Dialogflow API |
| Facebook | DensePose | 计算机视觉和图像处理 |
| Detectron |
| Amazon | Amazon Rekognition | 计算机视觉和图像处理 |
| Amazon Comprehend | 自然语言处理 |
| Amazon Textract |
| Amazon Polly |
| Amazon Translate |
| Amazon Transcribe |
| Microsoft | 计算机视觉 | 计算机视觉和图像处理 |
| 视频索引器 |
| 面部识别 |
| 内容审核员 |
| 文本分析 | 自然语言处理 |
| 必应拼写检查 |
| 翻译文本 |
| 语言理解 |

上表中显示的是使用过的、经过良好测试并且具有可扩展性的最流行的深度学习 API。然而，还有一些其他名字虽然还未像这些一样流行，但也正在成长。在下一节中，我们将看看它们。

# 一些较少为人知的深度学习 API

下表给出了一些较少为人知的 API 的详细信息：

| **提供商** | **API** | **类别** |
| --- | --- | --- |
| IBM Watson | Watson 虚拟识别 | 计算机视觉与图像处理 |
| Watson 文本转语音 | 自然语言处理 |
| Watson 自然语言分类器 |
| Watson 对话 |
| Watson 自然语言理解 |
| AT&T | AT&T 语音 | 自然语言处理 |
| Wit.ai | 语音 | 自然语言处理 |
| 消息 |
| 实体 |

现在，在这片广阔（嗯，几乎）API 的海洋中，如何为特定任务选择一个特定的提供商呢？这可能会很棘手，需要深入讨论。在本节中，我们将讨论一些策略，帮助我们有效地做出这些决定。

# 选择深度学习 API 提供商

在长长的深度学习 API 提供商列表中，选择所需的 API 可能是一个令人生畏的任务。然而，你可以遵循一些简单的规则，帮助你找到最适合你需求的 API，我们将在这里详细讨论其中的一些规则：

+   **平台**：

    +   听起来很简单，但在选择 API 提供商时，这可能是最重要的因素。大多数情况下，如果你正在开发一个基于 Google 技术的产品，例如，你可能会倾向于使用 Google 提供的深度学习 API，因为它们与开发应用程序的接口能够无缝集成。

    +   更多时候，开发环境还提供使用其深度学习 API 的模板化解决方案，设置起来非常简单。有时，提供商还会为使用其 API 开发新产品提供额外的奖励。

+   **性能**：

    +   在可以访问多个提供商的 API 来执行单一任务时，你可以比较它们的性能后进行选择。在这种情况下，选择比较和评判不同 API 时使用的度量标准由你决定。

+   **成本**：

    +   不同的提供商使用不同的计费方式，这在决定使用哪个提供商时起着至关重要的作用。某个提供商可能对免费 API 调用次数有一个相对宽松的限制，因此可能是一个很有吸引力的选择。开发者和学生通常选择那些在成本方面最具优势的提供商进行试验。

除了这三个因素，还有一些其他不可忽视的因素，比如公司要求使用某个特定的 API 或者你自己对某个 API 提供商的偏好。然而，除非是大规模应用，否则所选择的提供商通常没有太大影响，因为它们在中小规模的使用中提供的性能差异并不明显。

# 总结

在本章中，我们详细讨论了术语 API。在第三章，*创建你的第一个深度学习 web 应用程序*中，我们看到了如何使用 Flask 在 Python 中编写 API，并且了解了如何在 web 应用程序中使用该 API。现在我们知道了 API 与语言库的区别，以及利用 API 的重要性。我们也熟悉了一些顶级组织提供的各种深度学习 API。

随着我们继续深入接下来的章节，我们将看到如何利用这些 API 来构建强大且智能的 web 应用程序。我们将在下一章开始使用 Google Cloud Platform 提供的深度学习 API。
