- en: '6'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '6'
- en: Reasoning E-Marketing AI Agents
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 推理电子营销AI代理
- en: The foundational concept of a successful advertising campaign is *memory*. Think
    about the advertisements you saw yesterday. What about those from one year ago
    or even several years ago? The ads you remember most vividly are the ones most
    effective for you, but perhaps not for someone else. The primary challenge for
    any advertising agency is designing promotional content that triggers positive
    reactions in diverse individuals. More crucially, successful marketing campaigns
    strive to make consumers remember brands, products, and services.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 成功广告活动的基础概念是**记忆**。想想昨天你看到的广告。那一年前甚至几年前的广告呢？你记得最清晰的是那些对你最有效的广告，但可能对其他人来说并非如此。任何广告公司的主要挑战是设计能够触发不同个体积极反应的促销内容。更重要的是，成功的营销活动努力让消费者记住品牌、产品和服务。
- en: The Nielsen Neuroscience team (Brandt & Nieuwenhuis, 2017) explains why memory
    is so important in advertising. They demonstrate that memory decays significantly
    after just 24 hours, making it difficult for advertisements to have lasting effects.
    Several factors, including repetition and the emotional or intellectual impact
    of the content, can enhance memory retention. The emergence of agentic systems
    such as the GenAISys has reshaped the marketing landscape because these systems
    can replicate human-like expert marketing reasoning.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 尼尔森神经科学团队（Brandt & Nieuwenhuis，2017）解释了为什么记忆在广告中如此重要。他们证明，记忆在仅仅24小时后就显著衰退，这使得广告难以产生持久的效果。包括重复和内容情感或智力影响在内的几个因素可以增强记忆的保持。代理系统如GenAISys的出现重塑了营销格局，因为这些系统能够复制类似人类专家的营销推理。
- en: In this chapter, we will enhance the GenAISys we’ve been building throughout
    previous chapters. First, we’ll design a **consumer memory agent** tailored to
    a specific market segment. The goal of this agent is to analyze how consumers
    encode promotional messages. We’ll begin by exploring why memory matters and how
    it is structured, examining key memory categories such as short-term, long-term,
    explicit, and implicit memory, as well as important dimensions such as intellectual
    and emotional encoding. Next, we’ll expand the architecture of the GenAISys by
    integrating a deeper understanding of consumer memory into its knowledge base.
    We’ll then develop a strategic consumer memory agent leveraging the multimodal
    capabilities introduced in earlier chapters. This agent will employ a neuroscience-inspired
    approach to craft customized marketing messages. By introducing **meta-cognition**
    through OpenAI’s advanced **o3 reasoning model**, we will enable the agent to
    perform sophisticated, near-human self-reflection within its multistep CoT reasoning
    process.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将增强我们在前几章中构建的GenAISys。首先，我们将设计一个针对特定市场段的**消费者记忆代理**。这个代理的目标是分析消费者如何编码促销信息。我们将从探讨记忆为什么重要以及它是如何结构化的开始，检查关键的记忆类别，如短期、长期、显性和隐性记忆，以及重要的维度，如智力编码和情感编码。接下来，我们将通过将消费者记忆的更深入理解整合到其知识库中，扩展GenAISys的架构。然后，我们将开发一个利用前几章中引入的多模态能力的战略消费者记忆代理。这个代理将采用神经科学启发的策略来制作定制化的营销信息。通过引入OpenAI的高级**o3推理模型**中的**元认知**，我们将使代理能够在其多步骤CoT推理过程中执行复杂的、近似人类的自我反思。
- en: Further, we will transform our generative AI model into a neuroscientific-like
    agent capable of analytic reasoning rather than mere content generation. Complex
    systems—like the human brain—are more than the sum of their parts, and the same
    applies to machine intelligence. The strategic consumer memory agent using OpenAI’s
    o3 reasoning model will apply complex neuroscience-informed prompts to analyze
    consumer memory encoding patterns in hotel reviews. The resulting insights will
    feed into a multimodal **thread-of-reasoning pipeline**, building upon the CoT
    framework introduced in [*Chapter 5*](Chapter_5.xhtml#_idTextAnchor140)*, Adding
    Multimodal, Multifunctional Reasoning with Chain of Thought*. Ultimately, the
    GenAISys will leverage this detailed memory analysis to produce tailored marketing
    content using GPT-4o, accompanied by images generated by DALL-E.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们将把我们的生成式AI模型转变为一个类似神经科学的代理，它能够进行推理分析，而不仅仅是内容生成。复杂系统——如人脑——不仅仅是其各部分的简单总和，机器智能也是如此。使用OpenAI的o3推理模型的战略消费者记忆代理将应用复杂的神经科学提示来分析酒店评论中的消费者记忆编码模式。这些洞察将输入到一个多模态的**推理线程管道**，建立在[*第五章*](Chapter_5.xhtml#_idTextAnchor140)中引入的CoT框架之上，即“通过思维链增加多模态、多功能推理”。最终，GenAISys将利用这种详细的记忆分析，通过GPT-4o生成定制营销内容，并辅以DALL-E生成的图像。
- en: Finally, we’ll further enhance the IPython interactive interface by adding new
    features, including a widget capable of triggering agentic meta-cognition for
    memory analysis and customer service tasks. Users will have the option to analyze
    various types of content for memory-related insights or initiate customer-service-oriented
    CoT interactions.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们将通过添加新功能进一步增强IPython交互式界面，包括一个能够触发记忆分析和客户服务任务的代理元认知小部件。用户可以选择分析各种类型的内容以获得与记忆相关的洞察，或启动以客户服务为导向的CoT交互。
- en: By the end of this chapter, you will have learned how to build a customized,
    reasoning-driven GenAISys applicable to any domain based on the architecture of
    our consumer memory agent. We’ll construct it step by step.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 到本章结束时，你将学会如何构建一个基于我们消费者记忆代理架构的定制、推理驱动的GenAISys，适用于任何领域。我们将一步步构建它。
- en: 'This chapter covers the following topics:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖以下主题：
- en: The importance of consumer memory in marketing
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 消费者记忆在营销中的重要性
- en: The high-level structure of human memory
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 人类记忆的高级结构
- en: Building a strategic CoT consumer memory agent
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 构建战略CoT消费者记忆代理
- en: Analyzing hotel reviews with CoT
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用CoT分析酒店评论
- en: Designing neuroscientific-like complex prompts
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设计类似神经科学的复杂提示
- en: Using o3, OpenAI’s reasoning model that can analyze content in depth
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用o3，OpenAI的能够深入分析内容的推理模型
- en: Using OpenAI’s GPT-4o to generate content and DALL-E to generate images
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用OpenAI的GPT-4o生成内容，使用DALL-E生成图像
- en: Assembling reasoning and generation in a thread-of-reasoning function
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在推理线程函数中将推理和生成组装在一起
- en: Generalizing the consumer memory agent CoT to any content
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将消费者记忆代理CoT推广到任何内容
- en: Enhancing the IPython interactive interface
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增强IPython交互式界面
- en: Let’s begin by designing the enhanced GenAISys interface and its AI-driven functionalities.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从设计增强的GenAISys界面及其AI驱动的功能开始。
- en: Designing the consumer GenAISys memory agent
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设计消费者GenAISys记忆代理
- en: Consumer neuroscience can significantly enhance brand memorability through emotionally
    resonant, personalized messaging. In this chapter, we begin by analyzing how consumers
    encode memories. Nicks and Carriou (2016) demonstrate that effective consumer
    neuroscience leverages storytelling through narrative transportation, where consumers
    become emotionally engaged and vividly remember promotional messages.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 消费者神经科学可以通过情感共鸣、个性化的信息显著提升品牌记忆度。在本章中，我们首先分析消费者如何编码记忆。Nicks和Carriou（2016）展示了有效的消费者神经科学通过叙事迁移来利用讲故事，使消费者情感投入并生动地记住促销信息。
- en: In our implementation, we’ll deeply analyze how consumers encode memories, maintaining
    an authentic approach. If a consumer expresses dissatisfaction with a service,
    our system will tailor messages to emphasize improved offerings. Our goal is to
    create genuine connections through memorable, emotionally resonant messages.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的实现中，我们将深入分析消费者如何编码记忆，保持一种真实的方法。如果消费者对一项服务表示不满，我们的系统将定制信息以强调改进的提供。我们的目标是通过对记忆深刻、情感共鸣的信息建立真正的联系。
- en: 'In this section, we will describe how we enhance the GenAISys we have been
    building in the previous chapters:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将描述如何增强我们在前几章中构建的GenAISys：
- en: '**Consumer-memory agent use case**: Shows how an AI-driven agent can apply
    memory principles—drawn from short-term and **long-term memory** (**LTM**) frameworks—to
    interpret consumer feedback.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**消费者记忆代理用例**：展示了如何将来自短期和**长期记忆**（LTM）框架的记忆原则应用于解释消费者反馈。'
- en: '**Defining memory structures**: This extends beyond the basic categories of
    **short-term memory** (**STM**), LTM, episodic memory, and semantic memory that
    we previously examined and introduces new categories and dimensions, providing
    a deeper analysis of the input.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**定义记忆结构**：这超出了我们之前考察的基本类别，如**短期记忆**（STM）、LTM、情景记忆和语义记忆，并引入了新的类别和维度，为输入提供了更深入的分析。'
- en: '**Enhancing the architecture of the GenAISys**: This adds new functionality
    to trigger the AI agent and integrates a new CoT scenario.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**增强GenAISys的架构**：这为触发AI代理添加了新功能，并集成了一个新的CoT场景。'
- en: Let’s first explore the consumer memory agent use case.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们先探索消费者记忆代理用例。
- en: Consumer-memory agent use case
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 消费者记忆代理用例
- en: The use case in this chapter demonstrates how the GenAISys can be enhanced with
    a CoT consumer memory agent. Our goal is to understand a specific consumer’s needs
    when selecting a hotel, using detailed analyses of hotel reviews. The system we
    develop performs comprehensive content analysis, evaluates sentiment, and generates
    personalized marketing content. The CoT agent initiates this process with a detailed
    memory and sentiment analysis of a hotel review. It identifies psychological features,
    emotional markers, and specific memory tags, assigning a sentiment score to each
    analyzed segment. These scores are combined to produce an overall sentiment score
    and a scaled rating (0–5). Through this approach, the agent effectively captures
    how particular hotel experiences are perceived, emotionally processed, and retained
    in a consumer’s memory.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中的用例展示了如何通过一个CoT消费者记忆代理来增强GenAISys。我们的目标是通过对酒店评论的详细分析来理解特定消费者在选择酒店时的需求。我们开发的系统执行全面的内容分析，评估情感，并生成个性化的营销内容。CoT代理通过酒店评论的详细记忆和情感分析启动此过程。它识别心理特征、情感标记和特定的记忆标签，为每个分析段分配情感分数。这些分数被组合起来产生一个整体情感分数和评分（0-5）。通过这种方法，代理有效地捕捉了特定酒店体验是如何被感知、情感处理并在消费者记忆中保留的。
- en: Based on these extracted insights and the resulting cognitive profile, the agent
    uses the scaled rating to determine the appropriate marketing strategy. Ultimately,
    the consumer memory agent produces tailored promotional content, including a customized
    message accompanied by a relevant image. For instance, if the analysis reveals
    a customer who generally dislikes hotels, the travel agency can emphasize alternative
    accommodations or improved services that the customer has previously mentioned
    positively. In such cases, the agent generates a personalized message with an
    engaging image, as illustrated in *Figure 6.1*.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 基于这些提取的见解和由此产生的认知档案，代理使用评分来确定适当的营销策略。最终，消费者记忆代理生成定制的促销内容，包括一个带有相关图像的定制信息。例如，如果分析揭示了一个通常不喜欢酒店的客户，旅行社可以强调客户之前提到过的替代住宿或改进的服务。在这种情况下，代理生成一个带有吸引人图像的个性化信息，如图*图6.1*所示。
- en: '![Figure 6.1: Custom content-based image generated by DALL-E](img/B32304_06_1.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![图6.1：由DALL-E生成的基于自定义内容的图像](img/B32304_06_1.png)'
- en: 'Figure 6.1: Custom content-based image generated by DALL-E'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.1：由DALL-E生成的基于自定义内容的图像
- en: 'The agent crafts a warm, personalized message by analyzing the cognitive profile
    identified from customer hotel reviews:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 代理通过分析从客户酒店评论中确定的认知档案来制作一个温暖、个性化的信息：
- en: '[PRE0]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Generative AI is stochastic, so the same input will not necessarily generate
    the same output. The response may thus change from one run to another.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 生成式AI是随机的，因此相同的输入不一定产生相同的输出。因此，响应可能从一个运行到另一个运行而变化。
- en: Let’s now define the memory structure that the consumer memory agent will use.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们来定义消费者记忆代理将使用的记忆结构。
- en: Defining memory structures
  id: totrans-37
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 定义记忆结构
- en: 'Let’s now expand upon the memory categories introduced in [*Chapter 1*](Chapter_1.xhtml#_idTextAnchor021)
    by outlining the human memory structures essential for building our consumer memory
    agent. Human memory is multifaceted: **STM** temporarily captures the information
    necessary for immediate tasks or emotional processing, quickly fading without
    reinforcement; **LTM** stores significant events, knowledge, and experiences over
    extended periods; **semantic memory** stores general knowledge and facts, independent
    of personal experience; **episodic memory** captures personally experienced events
    with context and detail; **procedural memory** enables unconscious retrieval of
    tasks, such as walking or driving; **emotional memory** categorizes experiences
    based on emotional intensity—positive or negative; and **explicit memory** involves
    conscious recall, whereas **implicit memory** operates unconsciously.'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们现在通过概述构建我们的消费者记忆代理所必需的人类记忆结构来扩展在[*第一章*](Chapter_1.xhtml#_idTextAnchor021)中引入的记忆类别。人类记忆是多方面的：**STM**暂时捕捉执行即时任务或情绪处理所需的信息，如果没有强化会迅速消失；**LTM**在长时间内存储重要事件、知识和经验；**语义记忆**存储一般知识和事实，独立于个人经验；**情景记忆**捕捉带有背景和细节的个人经历；**程序记忆**使无意识的任务检索成为可能，例如走路或驾驶；**情绪记忆**根据情绪强度对经历进行分类——积极或消极；**显性记忆**涉及有意识的回忆，而**隐性记忆**在无意识中运作。
- en: Our consumer memory agent will analyze consumer content using a flexible combination
    of these memory categories, as shown in *Figure 6.2*. The categorization provides
    the o3 OpenAI reasoning model sufficient freedom to interpret consumer data effectively.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的消费者记忆代理将使用这些记忆类别的灵活组合来分析消费者内容，如图*图6.2*所示。这种分类为o3 OpenAI推理模型提供了足够的自由度，以有效地解释消费者数据。
- en: '![Figure 6.2: The memory categories of the memory agent](img/B32304_06_2.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![图6.2：记忆代理的记忆类别](img/B32304_06_2.png)'
- en: 'Figure 6.2: The memory categories of the memory agent'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.2：记忆代理的记忆类别
- en: 'The main categories at the upper level are the following:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 上层的主要类别如下：
- en: '**Memoryless** for systems or humans that do not remember information from
    a past event. These are events that we most forget, such as how many times we
    blinked yesterday.'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**无记忆**指系统或人类无法记住过去事件的信息。这些是我们最易忘记的事件，例如我们昨天眨眼的次数。'
- en: '**Short-Term Memory** for the temporary storage of information to perform a
    task or the process of emotion. This memory decays rapidly if no event stimulates
    it again. It could be the working memory of reading a long text.'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**短期记忆**用于暂时存储信息以执行任务或情绪过程。如果没有事件再次刺激，这种记忆会迅速衰退。这可能是阅读长文本的工作记忆。'
- en: '**Long-Term Memory** for information we store over long periods, from days
    to years. This is a vital memory, such as knowing which country we are in, our
    age, and who our family members are.'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**长期记忆**指我们在长时间内存储的信息，从几天到几年。这是一种至关重要的记忆，例如知道我们身处哪个国家，我们的年龄，以及我们的家庭成员是谁。'
- en: '**Reality Memory** is what we know for sure related to actual events or facts,
    and the external world.'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**现实记忆**是我们确信与实际事件或事实相关的内容，以及外部世界。'
- en: '**Fiction Memory** includes imagined or hypothetical internal events or narratives.'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**虚构记忆**包括想象或假设的内部事件或叙述。'
- en: '**Time Memory** is critical to distinguish past, present, and future events.
    Otherwise, we would think that we had already eaten what we were going to eat
    for lunch tomorrow.'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**时间记忆**对于区分过去、现在和未来事件至关重要。否则，我们会认为我们已经吃掉了我们打算明天午餐要吃的东西。'
- en: 'Notice how memoryless, short-term, and long-term memory form a subset (light
    green), and reality, fiction, and time memory (light orange) are all connected.
    These categories aren’t isolated; they interconnect dynamically in real life.
    Our memory, in other words, doesn’t function in subsets but with what we can call
    *tags* in AI. A memory can be a combination of multiple tags:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 注意到无记忆、短期和长期记忆形成一个子集（浅绿色），而现实、虚构和时间记忆（浅橙色）都是相互连接的。这些类别并不是孤立的；它们在现实生活中动态地相互连接。换句话说，我们的记忆不是在子集中运作，而是在我们称之为*标签*的AI中运作。一个记忆可以是多个标签的组合：
- en: A memoryless fiction, such as a dream
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一种无记忆的虚构，例如梦境
- en: A short-term reality, such as reading the news
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 短期现实，例如阅读新闻
- en: A long-term fiction, such as a novel we read a long time ago
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 长期虚构，例如我们很久以前读过的小说
- en: When examining these memory subcategories, we quickly realize the vast number
    of possible tag combinations with the main memory categories—such as semantic
    STM or episodic LTM. Additionally, memories can seamlessly blend subcategories;
    for instance, the phrase “I visited Rome last year” combines episodic, semantic,
    and temporal memory tags simultaneously. Moreover, our memories range from implicit
    (subconsciously blinking our eyes all day) to explicit (intentionally blinking
    due to an irritation).
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 当检查这些记忆子类别时，我们很快就会意识到与主要记忆类别（如语义STM或情景LTM）可能的标签组合数量众多。此外，记忆可以无缝地融合子类别；例如，短语“我去年访问了罗马”同时结合了情景、语义和时间记忆标签。此外，我们的记忆范围从隐性的（潜意识地整天眨眼）到显性的（由于不适而有意眨眼）。
- en: 'In our consumer memory agent, we will request a thorough analysis of content,
    assigning appropriate memory tags to each text segment. However, even this detailed
    tagging is not sufficient by itself. To effectively capture consumer experiences,
    we will enrich each memory tag with three analytical dimensions:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的消费者记忆代理中，我们将要求对内容进行彻底分析，为每个文本段分配适当的记忆标签。然而，即使这种详细的标签本身也不够。为了有效地捕捉消费者体验，我们将通过三个分析维度丰富每个记忆标签：
- en: '**Intellectual dimension**: Identifies thoughts, logic, and reasoning within
    the text.'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**智力维度**：识别文本中的思想、逻辑和推理。'
- en: '**Emotional dimension**: Pinpoints emotions, feelings, and overall mood—critical
    for effective consumer engagement—and provides a quantifiable sentiment score
    ranging from 0 to 1, scalable to a familiar 1–5 rating used in customer satisfaction
    forms.'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**情感维度**：确定情感、感受和整体情绪——对于有效的消费者参与至关重要——并提供一个从0到1的可量化的情感评分，可扩展到熟悉的1-5评分，用于客户满意度表格。'
- en: '**Physical dimension**: Highlights sensory experiences and physical sensations,
    such as “it was too cold to go swimming” or “my back hurt after sleeping in that
    hotel bed.”'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**物理维度**：突出感官体验和身体感觉，例如“游泳太冷了”或“睡在那家酒店的床上后背疼。”'
- en: With these enhancements in mind, let’s now explore how we’ll integrate them
    into the architecture of our evolving GenAISys.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到这些增强，让我们现在探索如何将它们整合到我们不断发展的GenAISys架构中。
- en: Enhancing the architecture of the GenAISys
  id: totrans-59
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 增强GenAISys的架构
- en: 'In this chapter, we will build upon the existing three-layer architecture of
    the GenAISys, as illustrated previously in *Figure 5.3* and reproduced here:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将基于之前在*图5.3*中展示的GenAISys现有三层架构，如下所示：
- en: '![Figure 6.3: The three layers of the event-driven GenAISys](img/B32304_06_3.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![图6.3：事件驱动的GenAISys的三个层次](img/B32304_06_3.png)'
- en: 'Figure 6.3: The three layers of the event-driven GenAISys'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.3：事件驱动的GenAISys的三个层次
- en: 'Our approach will be bottom-up, starting from the foundational functions and
    proceeding upward through the AI agent to the GenAISys interface:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的方法将是自下而上的，从基础功能开始，然后通过AI代理向上到GenAISys界面：
- en: '**Layer 3 (functions and agents)**: Here, we will introduce additional functionalities
    into our custom OpenAI library (`reason.py`), specifically tailored for the consumer
    memory agent and CoT reasoning. We will also develop a standalone memory analysis
    function that provides neuroscientific-like analyses applicable to any content.'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**第3层（功能和代理）**：在这里，我们将向我们的自定义OpenAI库（`reason.py`）中引入额外的功能，这些功能专门针对消费者记忆代理和CoT推理。我们还将开发一个独立的记忆分析功能，该功能提供类似于神经科学的分析，适用于任何内容。'
- en: '**Layer 2 (AI agent)**: This layer manages the behavior and decisions of our
    GenAISys. We will establish clear input triggers and naming conventions to activate
    and control the AI agent effectively.'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**第2层（AI代理）**：这一层管理我们GenAISys的行为和决策。我们将建立明确的输入触发器和命名规范，以有效地激活和控制AI代理。'
- en: '**Layer 1 (IPython interface)**: The interactive interface will be expanded
    to facilitate user interaction. We will add a new widget, allowing users to conveniently
    select how the consumer memory agent is invoked. Initially, we will focus on hotel
    reviews and subsequently generalize to any form of input.'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**第1层（IPython界面）**：交互式界面将扩展以方便用户交互。我们将添加一个新的小部件，使用户能够方便地选择如何调用消费者记忆代理。最初，我们将专注于酒店评论，然后推广到任何形式的输入。'
- en: Let’s now begin building the consumer memory agent.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们现在开始构建消费者记忆代理。
- en: Building the consumer memory agent
  id: totrans-68
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建消费者记忆代理
- en: 'In this section, we take our GenAISys to the next level by equipping it with
    neuroscientific capabilities for analyzing hotel reviews. The consumer memory
    agent will capture a user’s cognitive, emotional, and physical mindset, decoding
    each review segment through a six-step CoT process, as illustrated in *Figure
    6.4*:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将我们的GenAISys提升到下一个层次，通过为其配备分析酒店评论的神经科学能力。消费者记忆代理将捕捉用户的认知、情感和身体心态，通过六个步骤的CoT过程解码每个评论段，如图*图6.4*所示：
- en: '![Figure 6.4: Chain-of-thought process of the memory agent](img/B32304_06_4.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![图6.4：记忆代理的思维链过程](img/B32304_06_4.png)'
- en: 'Figure 6.4: Chain-of-thought process of the memory agent'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.4：记忆代理的思维链过程
- en: 'The consumer memory agent’s CoT will use OpenAI’s o3, GPT-4o, and DALL-E to
    run its six steps:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 消费者记忆代理的CoT将使用OpenAI的o3、GPT-4o和DALL-E来运行其六个步骤：
- en: '**Step 1: Memory and Sentiment Analysis**: The agent will analyze the content
    of the hotel review with a complex memory structure system message. It will analyze
    and tag the content segment by segment.'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**步骤 1：记忆和情感分析**：代理将使用复杂的记忆结构系统信息分析酒店评论的内容。它将逐段分析和标记内容。'
- en: '**Step 2: Extract Scores**: The agent processes the output of *Step 1* to extract
    the sentiment scores of each content segment.'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**步骤 2：提取评分**：代理处理步骤 1 的输出，以提取每个内容段的情感评分。'
- en: '**Step 3: Statistical Analysis**:The agent uses the scores of all the tagged
    segments to produce an overall cognitive score for the content.'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**步骤 3：统计分析**：代理使用所有标记段的评分来生成内容的整体认知评分。'
- en: '**Step 4: Creating Content**:The agent now has a decision to make based on
    the score. If the score exceeds a positive threshold, it will generate a message
    encouraging the consumer to select hotels. However, if the score is negative,
    a guest house message will be created. Once the decision is made, the agent will
    use the consumer’s memory tags to create a tailored promotional message.'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**步骤 4：创建内容**：代理现在必须根据评分做出决定。如果评分超过积极阈值，它将生成一条鼓励消费者选择酒店的短信。然而，如果评分是负面的，将创建一个客栈信息。一旦做出决定，代理将使用消费者的记忆标签创建一个定制的促销信息。'
- en: '**Step 5: Image Creation**: The agent now uses the output of *Step 4* to create
    an image that will fit the consumer’s mindset.'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**步骤 5：图像创建**：代理现在使用步骤 4 的输出创建一个符合消费者心态的图像。'
- en: '**Step 6: Message Creation**: The agent now has all the information necessary
    to generate a custom message for the consumer.'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**步骤 6：信息创建**：代理现在拥有生成针对消费者定制信息的所有必要信息。'
- en: 'After developing these steps individually, we’ll integrate them fully in the
    upcoming section, *GenAISys interface: From complexity to simplicity*, aiming
    to generalize the CoT functionality beyond hotel reviews.'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在单独开发这些步骤之后，我们将在接下来的部分中完全集成它们，即*GenAISys界面：从复杂到简单*，旨在将CoT功能推广到酒店评论之外。
- en: To begin our journey, open the `1_Building_the_Consumer_Memory_Agent.ipynb`
    notebook, which reuses previously built functionality, within the Chapter06 directory
    on GitHub ([https://github.com/Denis2054/Building-Business-Ready-Generative-AI-Systems/tree/main](https://github.com/Denis2054/Building-Business-Ready-Generative-AI-Systems/tree/main)).
    We will first download a dataset of hotel reviews to provide inputs to the AI
    agent.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始我们的旅程，请打开`1_Building_the_Consumer_Memory_Agent.ipynb`笔记本，该笔记本在GitHub的Chapter06目录中重用了之前构建的功能（[https://github.com/Denis2054/Building-Business-Ready-Generative-AI-Systems/tree/main](https://github.com/Denis2054/Building-Business-Ready-Generative-AI-Systems/tree/main)）。我们首先将下载一组酒店评论数据集，以提供AI代理的输入。
- en: 'The dataset: Hotel reviews'
  id: totrans-81
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据集：酒店评论
- en: We will be using synthetic hotel reviews to build the memory agent. In this
    chapter, we will process hotel reviews but also generalize the memory structure
    of the agent to other content we wish to analyze. For copyright reasons, the dataset
    we are using is a synthetic dataset of reviews created manually and with a generative
    AI copilot.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用合成的酒店评论来构建记忆代理。在本章中，我们将处理酒店评论，并将代理的记忆结构推广到我们希望分析的其他内容。由于版权原因，我们使用的数据集是由人工创建并使用生成式AI辅助创建的合成评论数据集。
- en: If you wish to explore more datasets, you can use a similar dataset containing
    TripAdvisor hotel reviews available on Kaggle for non-commercial private implementations
    at [https://www.kaggle.com/datasets/andrewmvd/trip-advisor-hotel-reviews](https://www.kaggle.com/datasets/andrewmvd/trip-advisor-hotel-reviews).
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想探索更多数据集，可以使用包含Kaggle上TripAdvisor酒店评论的类似数据集，用于非商业私人实施，网址为[https://www.kaggle.com/datasets/andrewmvd/trip-advisor-hotel-reviews](https://www.kaggle.com/datasets/andrewmvd/trip-advisor-hotel-reviews)。
- en: 'Run the *Setting up the Environment* section on GitHub, identical to [*Chapter
    5*](Chapter_5.xhtml#_idTextAnchor140), and download the dataset directly from
    the GitHub repository:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在GitHub上运行**设置环境**部分，与[*第五章*](Chapter_5.xhtml#_idTextAnchor140)相同，并直接从GitHub仓库下载数据集：
- en: '[PRE1]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![](img/3-PPMUMLAP0325.png)**Quick tip**: Enhance your coding experience with
    the **AI Code Explainer** and **Quick Copy** features. Open this book in the next-gen
    Packt Reader. Click the **Copy** button'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '![](img/3-PPMUMLAP0325.png)**提示**：使用**AI代码解释器**和**快速复制**功能增强您的编码体验。在下一代Packt
    Reader中打开此书。点击**复制**按钮'
- en: (**1**) to quickly copy code into your coding environment, or click the **Explain**
    button
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: （**1**）快速将代码复制到您的编码环境，或点击**解释**按钮
- en: (**2**) to get the AI assistant to explain a block of code to you.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: （**2**）让AI助手为您解释一段代码。
- en: '![A white background with a black text  AI-generated content may be incorrect.](img/image_%282%29.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![白色背景，黑色文字  AI生成的内容可能不正确。](img/image_%282%29.png)'
- en: '![](img/4.png)**The next-gen Packt Reader** is included for free with the purchase
    of this book. Scan the QR code OR visit [packtpub.com/unlock](http://packtpub.com/unlock),
    then use the search bar to find this book by name. Double-check the edition shown
    to make sure you get the right one.'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '![](img/4.png)**下一代Packt Reader**随本书免费赠送。扫描二维码或访问[packtpub.com/unlock](http://packtpub.com/unlock)，然后使用搜索栏通过书名查找此书。请仔细核对显示的版本，以确保您获得正确的版本。'
- en: '![A qr code on a white background  AI-generated content may be incorrect.](img/Unlock_Code1.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![白色背景上的二维码  AI生成的内容可能不正确。](img/Unlock_Code1.png)'
- en: 'We will process the dataset with a pandas DataFrame. The program now loads
    the CSV file and displays the data:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用pandas DataFrame处理数据集。程序现在加载CSV文件并显示数据：
- en: '[PRE2]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'This dataset contains two primary columns: `Review` and `Rating`. For instance,
    record 0 has a relatively constructive rating of 3, while record 1 shows a clearly
    positive rating of 5:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 此数据集包含两个主要列：`Review`和`Rating`。例如，记录0有一个相对建设性的评分3，而记录1显示一个明显的正面评分5：
- en: '![Figure 6.5: Excerpt of the hotel review dataset](img/B32304_06_5.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![图6.5：酒店评论数据集摘录](img/B32304_06_5.png)'
- en: 'Figure 6.5: Excerpt of the hotel review dataset'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.5：酒店评论数据集摘录
- en: 'Ratings alone, however, don’t provide sufficient depth—we require a nuanced
    sentiment analysis to fully grasp why a customer was satisfied or dissatisfied.
    We will choose a challenging review to begin our analysis:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，仅凭评分不足以提供足够的深度——我们需要细微的情感分析来完全理解客户为何满意或不满意。我们将选择一篇具有挑战性的评论开始我们的分析：
- en: '[PRE3]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The program now extracts the review and its rating:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 程序现在提取评论及其评分：
- en: '[PRE4]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The output displays the review and its rating:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 输出显示评论及其评分：
- en: '[PRE5]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'We have chosen a difficult review because it contains both negative and positive
    sentiment. The negative aspect of the review will challenge the agent to generate
    constructive solutions. Before continuing, analyze the memory tags, sentiment
    scores, and dimensions of each review segment yourself. This exercise clarifies
    memory category usage and provides a benchmark for comparing your insights to
    the agent’s analysis. Set the extracted review as the initial input:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 我们选择了一篇难度较大的评论，因为它包含负面和正面情感。评论的负面方面将挑战代理生成建设性的解决方案。在继续之前，请自己分析每个评论段的记忆标签、情感分数和维度。这项练习明确了记忆类别使用情况，并为将您的见解与代理的分析进行比较提供了基准。将提取的评论作为初始输入：
- en: '[PRE6]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: We will now design a complex system message for *Step 1* for `input1`.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将为`input1`的**第1步**设计一个复杂系统消息。
- en: 'Step 1: Memory and sentiment analysis'
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第1步：记忆和情感分析
- en: This step introduces advanced reasoning to our consumer memory agent by incorporating
    meta-cognition and meta-reasoning through the OpenAI o3 reasoning model. In other
    words, the agent won’t simply process text—it will actively reflect on its internal
    reasoning, performing a segment-by-segment analysis to categorize memory types
    and assign sentiment scores.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 此步骤通过结合OpenAI o3推理模型中的元认知和元推理，将高级推理引入我们的消费者记忆代理。换句话说，代理不会仅仅处理文本——它将积极反思其内部推理，进行逐段分析以分类记忆类型并分配情感分数。
- en: Specifically, the o3 model will operate within our carefully structured system
    message, which we will design in detail. This system message guides the model
    clearly, prompting deep reasoning and ensuring it assigns memory tags accurately
    based on human-like cognitive processes. We are definitely in the era of reasoning
    and self-reflecting AI!
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 具体来说，o3模型将在我们精心设计的系统消息中运行，我们将详细设计这个系统消息。这个系统消息明确地引导模型，促进深入推理，并确保它根据类似人类的认知过程准确分配记忆标签。我们确实处于推理和自我反思AI的时代！
- en: 'In this section, we will do the following:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将执行以下操作：
- en: Design a complex system message that incorporates the detailed memory structures
    defined earlier. This message, called `system_message_s1`, will be stored separately
    in a Python file for modularity.
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设计一个复杂的系统消息，其中包含之前定义的详细记忆结构。这个消息被称为`system_message_s1`，将单独存储在Python文件中以实现模块化。
- en: Rely on the reasoning abilities of OpenAI’s o3 to do the heavy lifting and execute
    detailed segment-level analysis, relieving us from manual interpretation.
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 依靠OpenAI的o3的推理能力来完成繁重的工作并执行详细的段落级分析，从而减轻我们手动解释的负担。
- en: Note that we use o1 as an umbrella term to signal to the LLM its role as a reasoning
    model. Additionally, the LLM may refer to o1 itself in responses though we call
    o3 as much as possible in the API.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，我们使用o1作为一个总称，向LLM（大型语言模型）表明其作为推理模型的角色。此外，尽管我们在API中尽可能多地使用o3，但LLM在回复中可能会直接提到o1。
- en: Let’s now construct this detailed system message step by step.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们一步一步地构建这个详细的系统消息。
- en: Designing a complex system message for Step 1
  id: totrans-114
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计步骤1的复杂系统消息
- en: We must design a system message comprehensive enough for the model to deeply
    understand and execute a neuroscience-inspired memory analysis. To achieve this,
    we carefully structure the message into clearly labeled sections, each guiding
    the agent through different aspects of the analysis.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 我们必须设计一个足够全面的系统消息，以便模型能够深入理解和执行受神经科学启发的记忆分析。为此，我们仔细地将消息结构化成明确标记的各个部分，每个部分引导代理通过分析的各个方面。
- en: 0\. Model introduction and role of the agent
  id: totrans-116
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 0. 模型介绍和代理的角色
- en: 'The first line sets the tone for the agent at two levels. The first level provides
    the agent with the necessary concepts to understand advanced memory analysis for
    this task. The second level describes the role of the agent in detail:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 第一行在两个层面上为代理设定了基调。第一个层面为代理提供了理解此任务高级记忆分析所必需的概念。第二个层面详细描述了代理的角色：
- en: '[PRE7]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Now, let’s go through the instructions to grasp what the agent is learning
    through this first part of the message:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们通过这些说明来了解代理通过消息的这一部分所学习的内容：
- en: '`generative AI model, an advanced memory-analysis model`: We are setting the
    role of the system in a special way. We are asking the model to think, not just
    to generate text. For this task, we don’t want the model to be created but to
    analyze and reason.'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`生成式AI模型，一个高级记忆分析模型`：我们以一种特殊的方式设定了系统的角色。我们要求模型思考，而不仅仅是生成文本。对于这个任务，我们不希望模型被创建，而是要分析和推理。'
- en: '`examine **each segment**`: We are teaching the model to replicate a neuroscience
    approach. Our brain encodes information in discrete packages. In this case, we
    are asking the model to mimic human memory processes. Each segment of text can
    be a sentence, a sentence piece, or a paragraph. This way, the model will analyze
    the text in a manner similar to how a human brain encodes information in independent
    packages.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`检查**每个段落**`：我们正在教模型复制神经科学方法。我们的大脑以离散的包编码信息。在这种情况下，我们要求模型模仿人类的记忆过程。文本的每个部分可以是一个句子、一个句子片段或一个段落。这样，模型将以类似于人类大脑在独立包中编码信息的方式分析文本。'
- en: '`generate a set of "memory encoding tags," similar to how the human brain encodes
    memories`: Human brains encode memories with *tags*, a term we can use at a high
    level without going into the biological process. Our brains apply tags to every
    bit of information that they encode to differentiate a past event from a future
    event, for example, from semantic data or personal emotional experiences. These
    tags represent the categories of memory we are looking for in human-generated
    text.'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`生成一组“记忆编码标签”，类似于人类大脑编码记忆的方式`：人类大脑使用*标签*来编码记忆，这是一个我们可以在高层次上使用而无需深入了解生物过程的术语。我们的大脑将标签应用于它们编码的每一信息位，以区分过去的事件和未来的事件，例如，从语义数据或个人情感体验中。这些标签代表了我们在人类生成的文本中寻找的记忆类别。'
- en: '`discuss the rationale, and assign additional metadata`: The model must explain
    the rationale behind the category of memory it tags. Each category, such as STM
    or LTM, must be explained. We need to know why a memory tag was attributed to
    the segment. The model is asked to add dimensions to its description, including
    intellectual and emotional reasons.'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`discuss the rationale, and assign additional metadata`: 模型必须解释它标记的记忆类别的理由。每个类别，如STM或LTM，都必须解释。我们需要知道为什么将记忆标签分配给该段。模型被要求在其描述中添加维度，包括理性和情感原因。'
- en: You might notice a Markdown divider (`---`) in the code. It shows the model
    that we are now moving to another topic. This may seem unimportant, but we need
    to emphasize topic changes as we do when giving instructions to humans. Now, we
    will give the model a purpose.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能会在代码中注意到一个 Markdown 分隔符（`---`）。它向模型显示我们现在正在转向另一个主题。这可能看起来并不重要，但我们需要强调主题的变化，就像我们向人类给出指令时那样。现在，我们将给模型一个目的。
- en: 1\. Purpose
  id: totrans-125
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 1. 目的
- en: 'Line 3 is a header that shows the model that we are entering the first significant
    section of the message:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 第3行是一个标题，向模型显示我们正在进入消息的第一个重要部分：
- en: '[PRE8]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Line 4 defines the goal of o3, OpenAI’s reasoning model:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 第4行定义了o3，OpenAI推理模型的目标：
- en: '[PRE9]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Note that the message contains “o1,” which is used as an umbrella term for
    OpenAI’s reasoning models here. The main idea is for the API to understand that
    we expect reasoning. This instruction will activate reasoning no matter which
    reasoning model you select. The key parts of this *Purpose* section insist on
    what we expect:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 注意消息中包含的“o1”，在这里用作OpenAI推理模型的通用术语。主要思想是让API理解我们期望推理。无论选择哪个推理模型，这条指令都将激活推理。*目的*部分的要点坚持我们期望的内容：
- en: '`in-depth memory analysis`: We do not want a classical analysis but a reflection
    that goes into the details of each segment.'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`in-depth memory analysis`: 我们不希望进行经典分析，而是一种深入到每个段落的细节的反思。'
- en: '`Classify and label each segment you find using specific memory categories`:
    This is a strong indicator of the memory categories the model is expected to tag.
    Once again, we remind the agent that we don’t want to generate text but to classify
    and label segments.'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Classify and label each segment you find using specific memory categories`:
    这是一个强烈的指示，表明模型预期要标记的记忆类别。再次提醒智能体，我们不希望生成文本，而是对段落进行分类和标记。'
- en: '`provides insight into how different parts of the text might be encoded in
    human memory`: This is an explicit indication that we expect human-like thinking
    and replicates the way a brain encodes memories.'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`provides insight into how different parts of the text might be encoded in
    human memory`: 这是一个明确的指示，我们期望类似人类的思考，并复制大脑编码记忆的方式。'
- en: We now need to give the agent the heading it needs to learn the categories.
    The first lines provide clear instructions. Now, we have reached section 2 of
    the message.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在需要给智能体提供它需要学习的标题。前几行提供了清晰的指令。现在，我们已经到达了消息的第二节。
- en: 2\. Memory encoding tags
  id: totrans-135
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 2. 记忆编码标签
- en: 'We now teach the agent how to recognize different categories of human encoding
    tags. We are getting to the core of human memory encoding. The memory categories
    are those discussed in the *Defining memory structures* section of this chapter:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在教智能体如何识别不同的人类编码标签类别。我们正在触及人类记忆编码的核心。记忆类别是本章 *定义记忆结构* 部分中讨论的那些：
- en: '[PRE10]'
  id: totrans-137
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'This heading is vital as the agent will learn the tags we expect by taking
    a hint from this heading. Now, the agent has absorbed the heading. We then give
    the model a clear explanation of what actions we expect:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 这个标题至关重要，因为智能体将通过这个标题的提示来学习我们期望的标签。现在，智能体已经吸收了这个标题。然后，我们给模型一个清晰的解释，说明我们期望它采取哪些行动：
- en: '[PRE11]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Let’s focus on the key parts of this message:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们关注这条消息的关键部分：
- en: '`tagging schema`: Aligns the model with the way the human brain encodes different
    categories of memory, distinguishing the past from the present using *tags*'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tagging schema`: 将模型与人类大脑编码不同记忆类别的方式对齐，使用 *标签* 来区分过去和现在'
- en: '`A single segment may exhibit one or more categories`: Explains to the model
    that a memory can be encoded in more than one category, just like in a human brain'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`A single segment may exhibit one or more categories`: 解释给模型知道一个记忆可以编码在多个类别中，就像在人类大脑中一样'
- en: '`If no category seems relevant … memoryless`: Tells the model that it should
    assign a memoryless tag if it cannot determine a category of a memory'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`If no category seems relevant … memoryless`: 告诉模型，如果它无法确定一个记忆的类别，应该分配一个无记忆标签'
- en: 'We then clearly define the categories (e.g., STM, LTM, episodic memory, semantic
    memory, time memory, reality memory, fiction memory, memoryless), as previously
    discussed:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 我们随后明确定义了类别（例如，STM、LTM、情景记忆、语义记忆、时间记忆、现实记忆、虚构记忆、无记忆），如前所述：
- en: '[PRE12]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: The memory tags have been described but are insufficient to capture human memory,
    which relies on other dimensions to encode events.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 记忆标签已经描述，但不足以捕捉人类记忆，人类记忆依赖于其他维度来编码事件。
- en: 3\. Dimensions
  id: totrans-147
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3. 维度
- en: 'The dimensions section adds intellectual, emotional, and physical features
    to the agent’s investigation. The descriptions of these dimensions in the following
    message were described in the *Defining memory structures* section earlier:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 维度部分为智能体调查增添了智力、情感和身体特征。以下信息中这些维度的描述在之前的*定义记忆结构*部分已有描述：
- en: '[PRE13]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: With that, we have defined the memory categories and additional dimensions.
    However, we also need a more refined analysis of emotions.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 有了这些，我们已经定义了记忆类别和额外的维度。然而，我们还需要对情感进行更精细的分析。
- en: 4\. Sentiment score
  id: totrans-151
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 4. 情感得分
- en: 'As defined in the *Defining memory structures* section, the sentiment score
    measures the emotional value of a segment. It provides a numerical score between
    0 (negative) and 1 (positive), or 0.5 (neutral) if no sentiment can be detected:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 如在*定义记忆结构*部分所定义，情感得分衡量一个段落的情感价值。它提供一个介于0（负面）和1（正面）之间的数值得分，如果无法检测到情感，则为0.5（中性）：
- en: '[PRE14]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Note that each section in the message begins and ends with clear Markdown indicators
    that show a change in topic.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，信息中的每个部分都以清晰的Markdown指示符开始和结束，表明主题的变化。
- en: Next, we are going to ask for a specific response format.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将要求一个特定的响应格式。
- en: 5\. Response format
  id: totrans-156
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 5. 响应格式
- en: 'We need the response to clearly display each segment of the original text,
    provide memory tags for each segment, determine the dimension (intellectual, emotional,
    or physical) of each segment, provide a sentiment score, and provide a brief explanation
    to justify the analysis:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要响应清晰地显示原始文本的每个部分，为每个部分提供记忆标签，确定每个部分的维度（智力、情感或身体），提供情感得分，并提供简短的解释以证明分析：
- en: '[PRE15]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'To make sure the model understands what we are asking for, we provide an example
    format:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 为了确保模型理解我们要求的内容，我们提供了一个示例格式：
- en: '[PRE16]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: If we were writing a traditional generative AI model message, we could stop
    here. However, this is a complex message, so we need to add instructions to *insist
    on* what we expect.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们正在编写一个传统的生成式AI模型信息，我们就可以在这里停止。然而，这是一个复杂的信息，因此我们需要添加指令来*坚持*我们期望的内容。
- en: 6\. Additional instructions
  id: totrans-162
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 6. 额外指令
- en: 'We avoided overloading the previous sections of the message. If we try to squeeze
    too many instructions in, the model might get confused. Let’s remind the system
    that we always want a segment-by-segment analysis. We insist that if the model
    doesn’t find a category, we want a “memoryless” tag and not a hallucination. Additionally,
    we only want short and clear explanations:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 我们避免了在信息的前几部分过度加载指令。如果我们试图塞入太多指令，模型可能会感到困惑。让我们提醒系统，我们始终希望进行分段分析。我们坚持认为，如果模型找不到类别，我们希望得到一个“无记忆”标签，而不是幻觉。此外，我们只希望有简短且清晰的解释：
- en: '[PRE17]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Now comes the tricky part. We told the model that if it didn’t find a category
    at all, to use a “memoryless” tag. However, if the model has an idea but is not
    100% sure, then it is allowed to pick the most probable memory tag along with
    a mandatory sentiment score:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是棘手的部分。我们告诉模型，如果它完全找不到类别，则使用“无记忆”标签。然而，如果模型有一个想法但不是100%确定，那么它被允许选择最可能的记忆标签，并附带一个强制性的情感得分：
- en: '[PRE18]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: At this point, we have provided the model with numerous instructions. Let’s
    make sure it remembers its primary task.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经向模型提供了许多指令。让我们确保它记得其主要任务。
- en: 7\. Primary task recall
  id: totrans-168
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 7. 主要任务回忆
- en: 'After all the instructions we have given the model, we will remind the model
    that its primary task is a memory tag analysis of text segments. We also expect
    the format of the output to be structured as defined:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们向模型提供的所有指令之后，我们将提醒模型其主要任务是文本段落的记忆标签分析。我们还期望输出格式按照定义的结构化：
- en: '[PRE19]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Note that we added `[End of System Prompt]` to make sure that the model understands
    that the message part of the global prompt is now completely defined. We use the
    term `prompt` to make sure that it understands it as a set of instructions, not
    just a general message.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，我们添加了 `[系统提示结束]` 以确保模型理解全局提示的信息部分现在已完全定义。我们使用术语 `prompt` 来确保它理解它是一组指令，而不仅仅是一般信息。
- en: We are now ready to run the memory analysis.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已准备好运行记忆分析。
- en: Running the memory analysis
  id: totrans-173
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 运行记忆分析
- en: The complex system message we designed is stored in a variable named `system_message_s1`
    in `cot_message_c6.py` in the `commons` directory of the GitHub repository. The
    goal is to keep this message and those for other steps separate from the function
    calls so that the AI agent of the GenAISys can repurpose the function in this
    step or other steps for different tasks.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 我们设计的复杂系统消息存储在名为`system_message_s1`的变量中，位于GitHub仓库的`commons`目录下的`cot_message_c6.py`中。目标是使这条消息以及其他步骤的消息与函数调用分开，以便GenAISys的AI代理可以在本步骤或其他步骤中重新使用此函数用于不同的任务。
- en: 'We first download the file that contains the messages:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先下载包含消息的文件：
- en: '[PRE20]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Then we import the `system_message_s1` message and the messages we will need
    for *Step 4*, which we will discuss later:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我们导入`system_message_s1`消息以及我们将在*第4步*中需要的消息，我们稍后会讨论：
- en: '[PRE21]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'The `print` function is uncommented and will display the message we just created.
    It can be commented and used at any time to verify whether the message is correctly
    imported. We now prepare the messages for o3:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: '`print`函数取消注释后，将显示我们刚刚创建的消息。它可以在任何时间取消注释并使用，以验证消息是否正确导入。我们现在为o3准备消息：'
- en: '[PRE22]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '`mrole` is `system_message_s1`, the system message we designed'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mrole`是`system_message_s1`，我们设计的系统消息'
- en: '`user_text` is `review`, the review selected from the hotel reviews dataset'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`user_text`是`review`，从酒店评论数据集中选择的评论'
- en: 'We now call o3 and store the result in a variable:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在调用o3并将结果存储在一个变量中：
- en: '[PRE23]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '`make_openai_reasoning_call` is located in `reason`, the AI library of the
    GenAISys. It takes the two arguments we just defined, creates an OpenAI client,
    makes the request, and returns the response:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: '`make_openai_reasoning_call`位于`reason`，GenAISys的AI库。它接受我们刚刚定义的两个参数，创建OpenAI客户端，发出请求，并返回响应：'
- en: '[PRE24]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'For this call, we chose the `o3-mini` version of the `o3` reasoning model series.
    Other versions and reasoning models can be chosen. The program displays the output
    received in `retres`:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这次调用，我们选择了`o3-mini`版本的`o3`推理模型系列。可以选择其他版本和推理模型。程序显示了在`retres`中接收到的输出：
- en: '[PRE25]'
  id: totrans-188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: The output shows the depth of the system message and the o3 reasoning model.
    The AI model has broken the content down into segments and decoded the memory
    tags subconsciously used by the human reviewer, as shown in the first segment.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 输出显示了系统消息和o3推理模型的深度。AI模型已将内容分解为段，并潜意识地解码了人类审阅者使用的记忆标签，如第一段所示。
- en: 'The model first provides the segment number and the content of that segment.
    Let’s focus on segment 7, which requires our attention:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 模型首先提供段落数和该段的内容。让我们关注第7段，它需要我们的注意：
- en: '[PRE26]'
  id: totrans-191
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'It also provides the memory tags that encoded this segment:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 它还提供了编码此段落的记忆标签：
- en: '[PRE27]'
  id: totrans-193
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'It continues by providing the dimension, which is as follows:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 它继续提供维度，如下所示：
- en: '[PRE28]'
  id: totrans-195
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'It then gives a sentiment score, which is as follows:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 接着给出一个情感分数，如下所示：
- en: '[PRE29]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Finally, it produces an explanation that sums up its analysis:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，它产生一个总结其分析的说明：
- en: '[PRE30]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: The model then continues its analysis for all the segments of the review.We
    have now performed a complex memory analysis that sets the stage for the subsequent
    steps. Let’s proceed to extract the sentiment scores.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 模型接着对其评论的所有段进行分析。我们现在已经完成了一个复杂的记忆分析，为后续步骤奠定了基础。让我们继续提取情感分数。
- en: 'Step 2: Extract sentiment scores'
  id: totrans-201
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第2步：提取情感分数
- en: 'From this point on, the original input stored in `review` is not used again.
    The CoT process relies on the output of the previous step, which will continually
    vary depending on the context. The next step involves extracting the sentiment
    scores for all segments produced in *Step 1: Memory and sentiment analysis*. We
    will need this information to make decisions for *Step 4: Content creation*.'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 从这一点开始，存储在`review`中的原始输入不再使用。CoT过程依赖于前一步的输出，这将根据上下文不断变化。下一步涉及从*第1步：记忆和情感分析*产生的所有段提取情感分数。我们需要这些信息来为*第4步：内容创作*做出决策。
- en: 'To extract the scores, we first create an `extraction` function and provide
    detailed instructions:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 为了提取分数，我们首先创建一个`extraction`函数并提供详细的说明：
- en: '[PRE31]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'We have clearly instructed our GenAISys to provide the sentiment scores in
    a clean format only. We will now call GPT-4o with `reason.make_openai_api_call`,
    defined previously, and add `reason.py`, the AI library we began building in the
    previous chapters. The input to the API call is the output of the last step, `retres`,
    appended to the instruction message, `umessage`:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已明确指示我们的GenAISys只以干净的格式提供情感分数。现在我们将使用之前定义的`reason.make_openai_api_call`调用GPT-4o，并添加`reason.py`，这是我们之前章节开始构建的AI库。API调用的输入是最后一步的输出`retres`，附加到指令消息`umessage`：
- en: '[PRE32]'
  id: totrans-206
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'The `system` role reminds the agent of its psychological marketing function:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: '`system`角色提醒代理其心理营销功能：'
- en: '[PRE33]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'The `user` role introduces the user message, `umessage`, and the API call is
    made:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: '`user`角色引入用户消息`umessage`，并执行API调用：'
- en: '[PRE34]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'The agent returns `task_response`, from which we will extract the memory sentiment
    scores, process, and verify:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 代理返回`task_response`，我们将从中提取记忆情感分数，处理并验证：
- en: '[PRE35]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'The output is the list of scores per segment we expected for each memory tag:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 每个记忆标签预期的输出分数列表如下：
- en: '[PRE36]'
  id: totrans-214
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: We now need to consolidate these scores to use them for decision-making.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在需要整合这些分数，以便用于决策。
- en: 'Step 3: Statistics'
  id: totrans-216
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第3步：统计
- en: We will use a simple non-AI **regular expressions** (**re**) module for this
    function for pattern matching and extraction. This shows that a GenAISys CoT can
    contain non-AI functions that expand its scope beyond generative AI models.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用一个简单的非AI **正则表达式**（**re**）模块来执行此函数的匹配和提取。这表明GenAISys CoT可以包含非AI函数，从而扩展其范围，超越生成式AI模型。
- en: 'The text to analyze is the output of the previous step:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 要分析的文字是前一步的输出：
- en: '[PRE37]'
  id: totrans-219
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'We are looking for decimals:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 我们正在寻找小数：
- en: '[PRE38]'
  id: totrans-221
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'We then display the scores:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 我们然后显示分数：
- en: '[PRE39]'
  id: totrans-223
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'The output contains the scores:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 输出包含分数：
- en: '[PRE40]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'We first calculate an overall score if the function returned scores:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 如果函数返回分数，我们首先计算一个总体分数：
- en: '[PRE41]'
  id: totrans-227
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: 'Then we scale the score from 1 to 5:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我们将分数从1到5进行缩放：
- en: '[PRE42]'
  id: totrans-229
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'Finally, we display the overall score and the scaled score:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们显示总体分数和缩放分数：
- en: '[PRE43]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'The output is what we expected:'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 输出是我们预期的：
- en: '[PRE44]'
  id: totrans-233
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'The output requires some human analysis:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 输出需要一些人工分析：
- en: In real-life projects, this process might not go so smoothly! Maybe the AI agent
    will not produce what we expect at all; perhaps it will for one step but not for
    the scores. When that occurs, we have to work on alternative steps. Building a
    GenAISys, as with any AI system, is an iterative process.
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在实际项目中，这个过程可能不会如此顺利！也许AI代理根本不会产生我们期望的结果；也许它会在某一步产生，但不会在分数上。当这种情况发生时，我们必须处理替代步骤。构建GenAISys，就像任何AI系统一样，是一个迭代的过程。
- en: The original rating in the hotel dataset for this review was 3, and we obtained
    3.14, which is more refined. Online ratings are subjective and may not accurately
    reflect the content of the review. An AI agent will provide a more nuanced rating
    through advanced analysis processes similar to the one in this section. We could
    average the hotel review and ours. However, our goal is to generate a tailored
    message for the consumer. In a real-life project, we would reach out to consumers
    in marketing panels, utilizing the consumer memory agent, and obtain real-time
    feedback.
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在酒店数据集中，此评论的原始评分为3，我们获得了3.14，这更加精细。在线评分是主观的，可能无法准确反映评论的内容。AI代理将通过类似本节中所述的高级分析过程提供更细致的评分。我们可以平均酒店评论和我们的评论。然而，我们的目标是生成针对消费者的定制信息。在实际项目中，我们会联系营销小组中的消费者，利用消费者记忆代理，并获取实时反馈。
- en: For now, however, we have the information we need to determine the content to
    create.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，目前我们有了确定要创建的内容所需的信息。
- en: 'Step 4: Content creation'
  id: totrans-238
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第4步：内容创建
- en: 'Before deciding on the content to create, the agent reads the information messages.
    The first message is `umessage4`:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 在决定要创建的内容之前，代理读取信息消息。第一条消息是`umessage4`：
- en: '[PRE45]'
  id: totrans-240
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: The message contains instructions on how to create a promotional campaign. We
    are keeping the message in a variable so that the function can be called with
    different prompts depending on the task.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 消息包含有关如何创建促销活动的说明。我们将消息保存在一个变量中，以便函数可以根据任务使用不同的提示进行调用。
- en: 'The agent must first use the memory tags analyzed to generate, not analyze,
    a text:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 代理必须首先使用分析的内存标签生成文本，而不是分析：
- en: '[PRE46]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'Then, the agent receives instructions on the sentiment analysis:'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，代理接收有关情感分析的说明：
- en: '[PRE47]'
  id: totrans-245
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'Then, the agent receives final instructions on the content to generate:'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，代理接收有关要生成内容的最终说明：
- en: '[PRE48]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'We now create the input by adding the scaled rating we obtained and the memory
    tags the agent found:'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在通过添加我们获得的评分和代理找到的记忆标签来创建输入：
- en: '[PRE49]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'The agent now has a complete representation of the task expected. We explain
    the agent’s role with `imcontent4`:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 代理现在对预期的任务有一个完整的表示。我们用`imcontent4`解释代理的角色：
- en: '[PRE50]'
  id: totrans-251
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'The agent is now ready to run the generation with the `make_openai_api_call`
    call:'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 代理现在准备好使用`make_openai_api_call`调用进行生成：
- en: '[PRE51]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'The response is a `pre_creation_response` response that is empathetic if the
    sentiment is negative or adapts it to the tone of the review otherwise:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 如果情绪是消极的，则响应是一个富有同情心的`pre_creation_response`，否则它会适应评论的语气：
- en: '[PRE52]'
  id: totrans-255
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'The output is in a cognitive format. We’re going to run the same call but with
    a message to clean up and prepare the content for image generation:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 输出是一种认知格式。我们将运行相同的调用，但带有清理和准备内容以生成图片的消息：
- en: '[PRE53]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'The output is a clear instruction to create an image with an exciting *luxurious*
    offer that is always appreciated:'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 输出是一个清晰的指令，要求创建一个包含令人兴奋的*豪华*优惠的图片，这种优惠总是受到欢迎的：
- en: '[PRE54]'
  id: totrans-259
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: The output of the message may vary each time we run the requests, but the tone
    should remain the same. Also, we can adapt the instructions to other content to
    generate. In this case, the agent is all set to use this instruction to create
    an image.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 每次运行请求时，信息的输出可能会有所不同，但语气应保持一致。此外，我们可以调整指令以生成其他内容。在这种情况下，代理已经准备好使用此指令来创建图片。
- en: 'Step 5: Creating an image'
  id: totrans-261
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第5步：创建图片
- en: 'At this stage, the consumer memory agent uses the instructions (`creation_response`)
    generated during *Step 4: Content creation* to create a tailored promotional image
    using OpenAI’s DALL-E:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个阶段，消费者记忆代理使用在*第4步：内容创建*期间生成的指令（`creation_response`）来使用OpenAI的DALL-E创建定制的促销图片：
- en: '[PRE55]'
  id: totrans-263
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'The `generate_image(prompt)` function is reused from the previous chapter.
    By consistently reusing functions, we reduce the development overhead and ensure
    code maintainability. As in[*Chapter 5*](Chapter_5.xhtml#_idTextAnchor140), the
    image is generated and stored in a file as `c_image.png`:'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: '`generate_image(prompt)`函数是从上一章复用的。通过一致地复用函数，我们减少了开发开销并确保了代码的可维护性。正如[*第5章*](Chapter_5.xhtml#_idTextAnchor140)中所述，图片被生成并存储在文件`c_image.png`中：'
- en: '[PRE56]'
  id: totrans-265
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: The image is now ready to accompany our final personalized message. We will
    display the image at the end of the process.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 图片现在准备好与我们的最终个性化信息一起使用。我们将在流程结束时显示该图片：
- en: 'Step 6: Creating a custom message'
  id: totrans-267
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第6步：创建自定义信息
- en: 'With the promotional image prepared, we now generate a concise and engaging
    customer message. First, we confirm that `creation_response` from *Step 5: Creating
    an image* is available:'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 准备好促销图片后，我们现在生成一个简洁而吸引人的客户信息。首先，我们确认*第5步：创建图片*中的`creation_response`是可用的：
- en: '[PRE57]'
  id: totrans-269
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: 'The output from the agent provides a polished message, suitable for customer
    communication:'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 代理的输出提供了一个经过打磨的信息，适合客户沟通：
- en: '[PRE58]'
  id: totrans-271
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: 'We can now display the output in another format if we wish to, with Python’s
    `textwrap`:'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们愿意，现在可以用Python的`textwrap`显示输出格式：
- en: '[PRE59]'
  id: totrans-273
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'The displayed message is clear, professional, and suitable for direct customer
    outreach:'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 显示的信息清晰、专业，适合直接与客户接触：
- en: '[PRE60]'
  id: totrans-275
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: To enhance this message, you might adjust the prompt to omit references to AI
    or any internal system details, focusing purely on customer-oriented language.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 为了增强这条信息，你可能需要调整提示语，以省略对AI或任何内部系统细节的提及，专注于以客户为导向的语言。
- en: 'Finally, the system displays the generated image alongside the message to create
    an appealing, personalized promotional package:'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，系统将生成的图片与信息一起显示，以创建一个吸引人的个性化促销套餐：
- en: '[PRE61]'
  id: totrans-278
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: 'The resulting visual emphasizes the hotel’s upgraded, luxurious offering, perfectly
    aligned with the customer’s expectations based on their review analysis:'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 最终的视觉效果强调了酒店的升级豪华产品，与客户根据他们的评论分析得出的期望完美匹配：
- en: '![Figure 6.6: An upgrade for a stay in the hotel for a customer](img/B32304_06_6.png)'
  id: totrans-280
  prefs: []
  type: TYPE_IMG
  zh: '![图6.6：为顾客在酒店住宿的升级](img/B32304_06_6.png)'
- en: 'Figure 6.6: An upgrade for a stay in the hotel for a customer'
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.6：为顾客在酒店住宿的升级
- en: You can now experiment with additional reviews, testing the depth and flexibility
    of the agent. We have successfully developed a sophisticated, neuroscience-inspired
    CoT consumer memory agent. In the next section, we’ll integrate this full process
    into the `reason.py` AI library and further enhance our GenAISys framework.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在可以尝试使用额外的评论进行实验，测试代理的深度和灵活性。我们已经成功开发了一个复杂的、受神经科学启发的CoT消费者记忆代理。在下一节中，我们将把这个完整的过程集成到`reason.py`AI库中，并进一步增强我们的GenAISys框架。
- en: 'GenAISys interface: From complexity to simplicity'
  id: totrans-283
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: GenAISys界面：从复杂到简单
- en: Our journey in this chapter has taken us deeper into the era of self-reflecting,
    reasoning, and meta-cognitive agentic AI. In this final section, we shift from
    the intricate inner workings of our consumer-memory CoT to a clean, intuitive
    user experience. We’ll add a CoT widget that lets any user trigger memory analysis
    or full content generation on arbitrary text. We’ll then extend the AI agent so
    it reacts to that widget’s options. Finally, we’ll demonstrate the generalized
    workflow on a flight review to show how the same memory logic applies to new domains.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们的旅程带我们深入到自我反思、推理和元认知智能代理的时代。在本节的最后，我们将从复杂的消费者记忆CoT内部工作转移到清晰直观的用户体验。我们将添加一个CoT小部件，允许任何用户在任意文本上触发内存分析或完整内容生成。然后我们将扩展AI代理，使其对那个小部件的选项做出反应。最后，我们将通过一个航班评论演示通用工作流程，以展示相同的记忆逻辑如何应用于新的领域。
- en: Open the `2_Running_the_Reasoning_GenAISys.ipynb` notebook on GitHub. Then run
    the *Setting up the Environment* section, which is identical to the notebook in
    [*Chapter 5*](Chapter_5.xhtml#_idTextAnchor140). We will begin by adding a CoT
    widget to the IPython interface.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 在GitHub上打开`2_Running_the_Reasoning_GenAISys.ipynb`笔记本。然后运行*设置环境*部分，这部分与[*第五章*](Chapter_5.xhtml#_idTextAnchor140)中的笔记本相同。我们将首先向IPython界面添加一个CoT小部件。
- en: Adding the CoT widget
  id: totrans-286
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 添加CoT小部件
- en: 'To make the memory agent simple and intuitive, we introduce a straightforward
    drop-down menu (*Figure 6.6*). Users can effortlessly select the task they wish
    the GenAISys agent to perform:'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使记忆代理简单直观，我们引入了一个简单的下拉菜单（*图 6.6*）。用户可以轻松选择他们希望GenAISys代理执行的任务：
- en: '**None** (default): No reasoning task is activated'
  id: totrans-288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**无**（默认）：不激活任何推理任务'
- en: '**Analysis**: Activates a standalone memory-analysis function'
  id: totrans-289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**分析**：激活独立的内存分析功能'
- en: '**Generation**: Executes the full consumer memory agent workflow (*Steps 1–6*),
    including sentiment analysis, content generation, and custom message creation'
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**生成**：执行完整的消费者记忆代理工作流程（*步骤 1–6*），包括情感分析、内容生成和定制消息创建'
- en: This streamlined user interaction significantly reduces complexity for the end
    user, shifting the sophisticated internal operations into the background.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 这种简化的用户交互显著降低了最终用户的复杂性，将复杂的内部操作移至后台。
- en: '![Figure 6.7: Choosing the reasoning task](img/B32304_06_7.png)'
  id: totrans-292
  prefs: []
  type: TYPE_IMG
  zh: '![图 6.7：选择推理任务](img/B32304_06_7.png)'
- en: 'Figure 6.7: Choosing the reasoning task'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.7：选择推理任务
- en: 'The widget is implemented in three steps—adding the widget, adding an observer,
    and sending the options to the AI agent:'
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 小部件的实现分为三个步骤——添加小部件、添加观察者以及将选项发送到AI代理：
- en: 'Adding the widget is done in a few lines. We define the drop-down menu (`instruct_selector`)
    within the IPython interface:'
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加小部件只需几行代码。我们在IPython界面中定义了下拉菜单（`instruct_selector`）：
- en: '[PRE62]'
  id: totrans-296
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE62]'
- en: 'The dropdown provides clear options, ensuring users easily understand their
    choices: **None**, **Analysis**, or **Generation**. Next, we incorporate `instruct_selector`
    into the existing interface layout (`VBox`):'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 下拉菜单提供了清晰的选择，确保用户容易理解他们的选择：**无**、**分析**或**生成**。接下来，我们将`instruct_selector`集成到现有的界面布局（`VBox`）中：
- en: '[PRE63]'
  id: totrans-298
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: 'When the user submits their choice, a handler updates the output messages for
    the user to see that the choice has been taken into account using standard submission
    code:'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 当用户提交他们的选择时，处理器会更新输出消息，让用户看到他们的选择已被考虑，使用标准的提交代码：
- en: '[PRE64]'
  id: totrans-300
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: We want “Thinking…” to be displayed to signal to the user that the system is
    working.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望显示“正在思考…”，以向用户发出系统正在工作的信号。
- en: 'The second step is to insert an observer that will detect a change the user
    makes and update the display. The `instruct_selector` is called by `instruct_selector.observe`:'
  id: totrans-302
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第二步是插入一个观察者，它会检测用户所做的更改并更新显示。`instruct_selector`通过`instruct_selector.observe`被调用：
- en: '[PRE65]'
  id: totrans-303
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE65]'
- en: 'Finally, we forward the user’s selection seamlessly into the AI agent call.
    The chosen reasoning mode (`active_instruct`) is integrated into the agent’s execution
    path:'
  id: totrans-304
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，我们将用户的选择无缝地传递到AI代理调用中。选定的推理模式（`active_instruct`）集成到代理的执行路径中：
- en: '[PRE66]'
  id: totrans-305
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE66]'
- en: By clearly integrating these few lines, the AI agent dynamically activates the
    appropriate reasoning mode without additional user complexity. We can now enhance
    the AI agent.
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 通过明确集成这几行代码，AI代理动态激活适当的推理模式，而无需额外的用户复杂性。我们现在可以增强AI代理。
- en: Enhancing the AI agent
  id: totrans-307
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 增强AI代理
- en: 'The AI agent will now receive the user’s widget selection in a new argument
    named `active_instruct` that will trigger its decisions:'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: AI代理现在将在名为`active_instruct`的新参数中接收到用户的部件选择，这将触发其决策：
- en: '[PRE67]'
  id: totrans-309
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'When the user selects **Analysis**, the AI agent triggers the previously built
    reasoning function, `make_openai_reasoning_call`, to perform memory analysis:'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 当用户选择**分析**时，AI代理将触发之前构建的推理函数`make_openai_reasoning_call`以执行记忆分析：
- en: '[PRE68]'
  id: totrans-311
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: 'Similarly, when **Generation** is selected, the agent runs the complete memory
    agent workflow using the custom `memory_reasoning_thread` function:'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 类似地，当选择**生成**时，代理使用自定义的`memory_reasoning_thread`函数运行完整的记忆代理工作流程：
- en: '[PRE69]'
  id: totrans-313
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: With these straightforward integrations, the GenAISys interface now provides
    powerful reasoning capabilities transparently.
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这些简单的集成，GenAISys界面现在透明地提供了强大的推理能力。
- en: Generalizing the GenAISys capabilities
  id: totrans-315
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 泛化GenAISys的能力
- en: 'With the enhanced interface, users can easily apply memory agent reasoning
    to diverse content beyond hotel reviews. Let’s illustrate this flexibility with
    a general user comment regarding a flight. The user simply selects **Analysis**,
    then submits a flight review without additional instructions:'
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 通过增强的界面，用户可以轻松地将记忆代理推理应用于酒店评论以外的各种内容。让我们用一个关于航班的普通用户评论来说明这种灵活性。用户只需选择**分析**，然后提交航班评论，无需额外指令：
- en: '[PRE70]'
  id: totrans-317
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: 'The GenAISys instantly returns a detailed, segment-by-segment memory analysis:'
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: GenAISys立即返回详细的、逐段的记忆分析：
- en: '[PRE71]'
  id: totrans-319
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: 'The user then reenters the sentence, but this time with the **Generation**
    option and the **Files** option checked, so that the image generated with the
    text will be displayed. All the user has to do is select the option, enter the
    text, and submit it. Once again, the experience is seamless, no additional instructions
    are required on the part of the user, and the response is complete: the fully
    analysis, process, and final customer message as we designed in the previous section—beginning
    with memory analysis, proceeding to sentiment scoring, content generation, and
    concluding with a tailored customer message and an engaging image (see *Figure
    6.8*) that will be displayed if `Files` is checked in the interface:'
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 用户随后重新输入句子，但这次选择了**生成**选项和**文件**选项，以便显示使用文本生成的图像。用户只需选择选项，输入文本，然后提交即可。再次强调，体验无缝，用户无需额外指令，响应完整：完全分析、处理和最终客户信息，正如我们在上一节中设计的那样——从记忆分析开始，接着是情感评分，内容生成，最后是定制的客户信息和吸引人的图像（见*图6.8*），如果界面中勾选了`文件`：
- en: '[PRE72]'
  id: totrans-321
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: '![Figure 6.8: An engaging customer image to match the personalized message](img/B32304_06_8.png)'
  id: totrans-322
  prefs: []
  type: TYPE_IMG
  zh: '![图6.8：与个性化信息相匹配的吸引人的客户图像](img/B32304_06_8.png)'
- en: 'Figure 6.8: An engaging customer image to match the personalized message'
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.8：与个性化信息相匹配的吸引人的客户图像
- en: We can see that from a user perspective, our GenAISys is running seamlessly.
    We are giving the user the illusion that everything in generative AI is simple.
    Of course, in a real-life project, we would have to spend resources trying all
    types of texts, finding the limitations, and solving the issues to cover edge
    cases and refine outputs. Let’s now sum up our journey in this chapter and take
    the GenAISys to yet another level.
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: 从用户的角度来看，我们的GenAISys运行得非常顺畅。我们给用户一种错觉，即生成式AI中的所有事情都很简单。当然，在实际项目中，我们可能需要投入资源尝试所有类型的文本，找到局限性，并解决问题，以覆盖边缘情况并完善输出。现在让我们总结本章的旅程，并将GenAISys提升到另一个层次。
- en: Summary
  id: totrans-325
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: This chapter pushed our GenAISys far beyond classical AI, into the realm of
    meta-cognitive, self-reflective reasoning. We defined a pragmatic memory model
    combining primary categories (short-term, long-term, reality, fiction, and time)
    with semantic and episodic tags, then layered intellectual, emotional, and physical
    dimensions on top. Using this framework, we built a six-step CoT agent that decodes
    each review segment, tags memory categories, quantifies sentiment, and produces
    an overall cognitive score. Based on the cognitive profile and sentiment score,
    the agent generated personalized promotional text and created a matching DALL-E
    image—then wrapped everything into a polished customer message.
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将我们的GenAISys推进到超越经典AI的领域，进入了元认知、自我反思推理的领域。我们定义了一个实用记忆模型，将主要类别（短期、长期、现实、虚构和时间）与语义和情景标签相结合，然后在上面叠加了智力、情感和物理维度。使用这个框架，我们构建了一个六步推理代理，解码每个评论段，标记记忆类别，量化情感，并生成一个整体认知评分。基于认知配置文件和情感评分，代理生成了个性化的促销文本，并创建了一个匹配的DALL-E图像——然后将一切包装成精致的客户信息。
- en: A new drop-down widget now lets users choose **None**, **Analysis**, or **Generation**,
    making sophisticated reasoning tasks a single-click experience. Behind the scenes,
    the AI agent routes requests to either a standalone memory analysis or the full
    consumer-memory workflow. We finally demonstrated the agent on a flight review,
    showing it can analyze, score, and respond to any text—extending GenAISys from
    hospitality into broader customer service scenarios.
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 现在有一个新的下拉小部件，允许用户选择**无**、**分析**或**生成**，使复杂的推理任务成为单次点击体验。幕后，AI代理将请求路由到独立的记忆分析或完整的消费者记忆工作流程。我们最终在航班评论中展示了代理，展示了它能够分析、评分并对任何文本做出响应——将GenAISys从酒店业扩展到更广泛的客户服务场景。
- en: With these advances, the GenAISys is ready for real-time, production-grade decision-making.
    The next chapter will focus on scaling the functionality of our GenAISys architecture
    for immediate, high-throughput AI operations.
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 随着这些进步，GenAISys已准备好进行实时、生产级决策。下一章将重点介绍扩展我们的GenAISys架构的功能，以实现即时、高吞吐量的AI操作。
- en: Questions
  id: totrans-329
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: Emotional memory is a key factor in e-marketing. (True or False)
  id: totrans-330
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 情感记忆是电子商务的关键因素。（对或错）
- en: OpenAI’s o3 is a reasoning model that can perform complex tasks. (True or False)
  id: totrans-331
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: OpenAI的o3是一个可以执行复杂任务的推理模型。（对或错）
- en: Long-term memory does not include emotional factors. (True or False)
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 长期记忆不包括情感因素。（对或错）
- en: A generative AI model cannot analyze complex memory structures. (True or False)
  id: totrans-333
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个生成式AI模型不能分析复杂的记忆结构。（对或错）
- en: A generative AI model can not only analyze sentiments but also provide numerical
    scores between 0 and 1\. (True or False)
  id: totrans-334
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 生成式AI模型不仅可以分析情感，还可以提供介于0和1之间的数值评分。（对或错）
- en: A Pinecone index can produce complex instructions based on system queries. (True
    or False)
  id: totrans-335
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Pinecone指数可以根据系统查询生成复杂的指令。（对或错）
- en: A thread-of-reasoning agent can think through complex prompts and perform multiple
    coordinated tasks. (True or False)
  id: totrans-336
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个推理线程代理可以思考复杂的提示并执行多个协调任务。（对或错）
- en: A thread-of-reasoning scenario can be triggered with a user input. (True or
    False)
  id: totrans-337
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个推理线程场景可以通过用户输入触发。（对或错）
- en: A reasoning agent can process reviews from sites such as TripAdvisor and generate
    custom messages. (True or False)
  id: totrans-338
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个推理代理可以处理来自TripAdvisor等网站的评论并生成定制信息。（对或错）
- en: A generative AI system cannot process thread-of-reasoning agents. (True or False)
  id: totrans-339
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 生成式AI系统不能处理推理线程代理。（对或错）
- en: References
  id: totrans-340
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参考文献
- en: Brandt, Denise, and Ilja Nieuwenhuis. 2017\. Understanding Memory in Advertising.
    Nielsen. February. [https://www.nielsen.com/insights/2017/understanding-memory-in-advertising/](https://www.nielsen.com/insights/2017/understanding-memory-in-advertising/)
  id: totrans-341
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Brandt, Denise, and Ilja Nieuwenhuis. 2017\. 理解广告中的记忆. 尼尔森. 二月. [https://www.nielsen.com/insights/2017/understanding-memory-in-advertising/](https://www.nielsen.com/insights/2017/understanding-memory-in-advertising/)
- en: 'Nielsen Homepage: [https://www.nielsen.com/](https://www.nielsen.com/)'
  id: totrans-342
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '尼尔森首页: [https://www.nielsen.com/](https://www.nielsen.com/)'
- en: Nicks, Guillaume, and Yannick Carriou. 2016\. Emotion, Attention and Memory
    in Advertising. Ipsos Knowledge Centre. [https://www.ipsos.com/sites/default/files/2017-07/Emotion-Attention-and-Memory-in-Ads.pdf](https://www.ipsos.com/sites/default/files/2017-07/Emotion-Attention-and-Memory-in-Ads.pdf)
  id: totrans-343
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nicks, Guillaume, and Yannick Carriou. 2016\. 情感、注意力和记忆在广告中的应用. Ipsos 知识中心.
    [https://www.ipsos.com/sites/default/files/2017-07/Emotion-Attention-and-Memory-in-Ads.pdf](https://www.ipsos.com/sites/default/files/2017-07/Emotion-Attention-and-Memory-in-Ads.pdf)
- en: 'Ipsos Homepage: [https://www.ipsos.com/](https://www.ipsos.com/)'
  id: totrans-344
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Ipsos 主页: [https://www.ipsos.com/](https://www.ipsos.com/)'
- en: 'OpenAI. 2024\. OpenAI o3 System Card: A Comprehensive Evaluation of the o3
    Model Series, Outlining Advancements in Safety, Reasoning, and Robustness. OpenAI.
    [https://openai.com/index/o3-mini-system-card/](https://openai.com/index/o3-mini-system-card/)'
  id: totrans-345
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OpenAI. 2024\. OpenAI o3 系统卡：o3 模型系列的全面评估，概述了在安全性、推理和鲁棒性方面的进步。OpenAI. [https://openai.com/index/o3-mini-system-card/](https://openai.com/index/o3-mini-system-card/)
- en: Further reading
  id: totrans-346
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'Woodside, Arch G., Sanjay Sood, and Kimberly E. Miller. 2008\. “When Consumers
    and Brands Talk: Storytelling Theory and Research in Psychology and Marketing.”
    Psychology & Marketing 25 (2): 97–145\. [https://www.researchgate.net/publication/229889043_When_consumers_and_brands_talk_Storytelling_theory_and_research_in_psychology_and_marketing](https://www.researchgate.net/publication/229889043_When_consumers_and_brands_talk_Storytelling_theory_and_research_in_psychology_and_marketing)'
  id: totrans-347
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Woodside, Arch G., Sanjay Sood, 和 Kimberly E. Miller. 2008\. “当消费者和品牌对话：心理学和市场营销中的叙事理论及研究.”
    心理学与市场营销 25 (2): 97–145\. [https://www.researchgate.net/publication/229889043_When_consumers_and_brands_talk_Storytelling_theory_and_research_in_psychology_and_marketing](https://www.researchgate.net/publication/229889043_When_consumers_and_brands_talk_Storytelling_theory_and_research_in_psychology_and_marketing)'
- en: Subscribe for a Free eBook
  id: totrans-348
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 免费订阅电子书
- en: New frameworks, evolving architectures, research drops, production breakdowns—*AI_Distilled*
    filters the noise into a weekly briefing for engineers and researchers working
    hands-on with LLMs and GenAI systems. Subscribe now and receive a free eBook,
    along with weekly insights that help you stay focused and informed.
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 新框架、演进的架构、研究更新、生产故障——*AI Distilled* 将噪音过滤成每周简报，供与 LLM 和 GenAI 系统实际操作的研究人员和工程师使用。现在订阅，即可获得免费电子书，以及每周的洞察力，帮助您保持专注并获取信息。
- en: Subscribe at [https://packt.link/TRO5B](Chapter_6.xhtml) or scan the QR code
    below.
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 在 [https://packt.link/TRO5B](Chapter_6.xhtml) 订阅或扫描下面的二维码。
- en: '![](img/Newsletter_QR_Code1.png)'
  id: totrans-351
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Newsletter_QR_Code1.png)'
