- en: Assessing your AI Arsenal
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 评估你的 AI 武器库
- en: In addition to evaluating the effectiveness of their algorithms, it is also
    important to know the techniques that attackers exploit to evade Our AI-empowered
    tools. Only in this way is it possible to gain a realistic idea of the effectiveness
    and reliability of the solutions adopted. Also, the aspects related to the scalability
    of the solutions must be taken into consideration, along with their continuous
    monitoring, in order to guarantee reliability.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 除了评估算法的有效性之外，了解攻击者利用哪些技术来避开我们的 AI 驱动的工具也很重要。只有这样，才能真实地评估所采用解决方案的有效性和可靠性。此外，解决方案的可扩展性以及它们的持续监控也必须加以考虑，以保证其可靠性。
- en: 'In this chapter, we will learn about the following:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将学习以下内容：
- en: How attackers leverage **Artificial Intelligence** (**AI**) to evade **Machine
    Learning** (**ML**) anomaly detectors
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 攻击者如何利用**人工智能**（**AI**）避开**机器学习**（**ML**）异常检测器
- en: The challenges we face when implementing ML anomaly detection
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们在实施 ML 异常检测时面临的挑战
- en: How to test our solutions for data and model quality
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何测试我们的解决方案的数据和模型质量
- en: How to ensure security and reliability of our AI solutions for cybersecurity
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何确保我们 AI 网络安全解决方案的安全性和可靠性
- en: Let's begin with learning how attackers evade ML anomaly detectors.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从学习攻击者如何避开 ML 异常检测器开始。
- en: Evading ML detectors
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 避开 ML 检测器
- en: In [Chapter 8](18f56dc2-fd40-4669-bef1-0b594d9e1572.xhtml), *GANs *– *Attacks
    and Defenses*, we showed how to use **Generative Adversarial Networks** (**GANs**)
    to deceive detection algorithms. Now, we will see that, it is not only GANs that
    pose a threat to our AI-based cybersecurity solutions, but more generally, it
    is possible to exploit Reinforcement Learning (RL) to render our detection tools
    ineffective.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第 8 章](18f56dc2-fd40-4669-bef1-0b594d9e1572.xhtml)，*生成对抗网络（GANs）*——*攻击与防御*中，我们展示了如何利用**生成对抗网络（GANs）**来欺骗检测算法。现在，我们将看到，不仅仅是
    GANs 对我们的基于 AI 的网络安全解决方案构成威胁，更广泛地说，强化学习（RL）也可以被用来使我们的检测工具失效。
- en: To understand how, we need to briefly introduce the fundamental concepts of
    RL.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 为了理解这一点，我们需要简要介绍强化学习（RL）的基本概念。
- en: Understanding RL
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解强化学习（RL）
- en: Compared to the various forms of AI, RL is characterized by implementing a trial
    and error fashion of automated learning. In fact, the RL algorithms adapt their
    learning processes based on the feedback obtained from the environment. This feedback
    can be positive, that is, rewards; or negative, that is, punishments. In addition,
    feedback differs according to the successes and errors of the predictions.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 相比于其他形式的 AI，强化学习（RL）的特点是通过试错的方式进行自动化学习。实际上，RL 算法会根据从环境中获得的反馈调整其学习过程。这些反馈可以是正面的，即奖励；也可以是负面的，即惩罚。此外，反馈根据预测的成功与错误而有所不同。
- en: 'Therefore, we can say that learning takes place on the basis of rewards and
    punishments obtained by an intelligent software: as such, the intelligent software
    (also known as the **agent**) learns from the feedbacks obtained from a given
    domain contest (also known as the **environment**).'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们可以说，学习是基于智能软件获得的奖励和惩罚进行的：这样，智能软件（也称为**智能体**）从所处领域的反馈中学习（该领域也称为**环境**）。
- en: Unlike ML, in RL the learning process does not take place on the basis of a
    training dataset, but on the mutual interaction of the agent with an environment
    that models real-world use cases. Each environment, on the other hand, is characterized
    by a substantial number of parameters and information on the basis of which the
    agent learns how to achieve its goals.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 与 ML 不同，在 RL 中，学习过程并不是基于训练数据集进行的，而是基于智能体与模拟现实世界用例的环境的相互作用。每个环境则由大量的参数和信息组成，智能体通过这些信息学习如何实现自己的目标。
- en: In learning how to achieve its goals, the agent receives various feedback from
    the environment in the form of rewards and punishments.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在学习如何实现目标的过程中，智能体会根据环境中的反馈（奖励和惩罚）进行调整。
- en: 'A typical example of a RL agent''s goal consists of learning how to find the
    solution to games, such as mazes:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 一个典型的 RL 智能体目标的例子是学习如何解答游戏题目，例如迷宫：
- en: '![](img/a6d49b53-2eaf-498e-962c-429dd599564c.png)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a6d49b53-2eaf-498e-962c-429dd599564c.png)'
- en: '(Image Credits: https://commons.wikimedia.org/wiki/File:Reinforcement_learning_diagram.svg)'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: （图片来源：https://commons.wikimedia.org/wiki/File:Reinforcement_learning_diagram.svg）
- en: The environment in which the learning process takes place can be known or even
    unknown to the agent. In achieving its goals, the agent follows the learning strategy
    that maximizes rewards.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 学习过程所发生的环境可以是已知的，也可以是未知的。在实现目标时，智能体遵循最大化奖励的学习策略。
- en: These characteristics make RL particularly suitable for solving problems in
    unknown contexts, such as learning the solutions of mazes.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 这些特点使得强化学习特别适用于解决未知环境中的问题，比如学习迷宫的解决方案。
- en: In solving the maze, the agent's ultimate goal consists of reaching the exit
    as soon as possible, without knowing the maze scheme in advance, by learning the
    route based on trial and error (that is, by leveraging the feedback obtained from
    the environment).
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在解决迷宫问题时，智能体的最终目标是尽可能快地到达出口，而事先并不知道迷宫的布局，而是通过试错法学习路线（即，借助从环境获得的反馈）。
- en: 'To summarize, RL is characterized by the following elements:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 总结一下，RL（强化学习）的特点如下：
- en: One or more agents
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个或多个智能体
- en: An environment
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个环境
- en: States (places reached by the agent)
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 状态（智能体到达的地方）
- en: Actions (moves performed by the agent to reach the different states)
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 动作（智能体为了到达不同状态所执行的移动）
- en: Feedback (the scores associated with specific states)
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 反馈（与特定状态相关的得分）
- en: Let's see how all these elements interact in the learning process.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看这些元素在学习过程中的相互作用。
- en: RL feedback and state transition
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 强化学习的反馈与状态转移
- en: We have said that, in RL, the learning process is guided by feedback, emulating
    a decision-making approach led by trial and error. In achieving a goal such as
    finding the exit of the maze, the agent will perform actions (moves) that are
    associated with feedback (rewards or punishments) from different environments.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 我们之前提到，在强化学习中，学习过程是由反馈引导的，模拟了一种通过试错法进行决策的方法。在实现目标（如找到迷宫出口）时，智能体会执行与反馈（奖励或惩罚）相关的动作（移动），这些反馈来自不同的环境。
- en: The feedback is emitted based on the state assumed by the agent after each action,
    that is, the place occupied by the agent after each move. Feedback is then sent
    from the environment to the agent. As a consequence, the agent iteratively updates
    its predictions for the next states, based on the rewards received, weighing the
    subsequent action's success with probabilistic estimates. By leveraging feedback,
    the agent adapts its behavior to the environment. This adaptation occurs in the
    transition from one state to another, during which the learning process takes
    place. This transition from one state to another is also known as the **state
    transition process**.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 反馈是基于智能体在每次行动后所处的状态发出的，也就是智能体在每次移动后的所在位置。然后，反馈会从环境发送给智能体。因此，智能体会根据收到的奖励迭代地更新其对下一个状态的预测，评估后续行动的成功概率。通过利用反馈，智能体能够调整其行为以适应环境。这种适应发生在从一个状态到另一个状态的过渡中，而学习过程也正是在这一过渡过程中发生的。这种从一个状态到另一个状态的过渡也被称为**状态转移过程**。
- en: After having quickly introduced the fundamental concepts of RL, let's see how
    we can apply them to evading malware ML detectors.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 在简要介绍了强化学习的基本概念后，让我们看看如何将它们应用于规避恶意软件机器学习检测器。
- en: Evading malware detectors with RL
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用强化学习规避恶意软件检测器
- en: In [Chapter 4](3311e837-18a2-4a50-8322-f7b9c12bcbc8.xhtml), *Malware Threat
    Detection*, we thoroughly analyzed the advantages deriving from the implementation
    of malware detectors using ML algorithms.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第4章](3311e837-18a2-4a50-8322-f7b9c12bcbc8.xhtml)，*恶意软件威胁检测*，我们详细分析了使用机器学习算法实现恶意软件检测器的优势。
- en: In [Chapter 8](18f56dc2-fd40-4669-bef1-0b594d9e1572.xhtml), *GANs *– *Attacks
    and Defenses*, we also showed how it is possible to use GANs to deceive these
    detectors.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第8章](18f56dc2-fd40-4669-bef1-0b594d9e1572.xhtml)，*GANs*–*攻击与防御*，我们还展示了如何利用GANs来欺骗这些检测器。
- en: 'We said that the attack methods based on GANs can be distinguished as follows:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 我们提到过，基于GAN（生成对抗网络）的攻击方法可以分为以下几种：
- en: '**White-box attacks**: The attacker knows the structure of the model on which
    the detector is based, and is able to perform queries to understand how to evade
    the detector'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**白盒攻击**：攻击者知道模型的结构，且能够执行查询以理解如何规避检测器。'
- en: '**Black-box attacks**: The attacker does not know the structure or the characteristics
    of the detector, but has indirect access to the underlying model in order to perform
    a model substitution'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**黑盒攻击**：攻击者不知道检测器的结构或特征，但可以间接访问底层模型以执行模型替换。'
- en: Even in the case of black-box attacks, the attacker, although not aware of the
    structure and properties of the detector, must however know the complete features
    (feature space) of the target model. Therefore, to train the substitute model
    and carry out the attack via model substitution, the attacker must be aware of
    the features that characterize the original model, and this is where RL comes
    into play.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 即使在黑盒攻击的情况下，攻击者虽然不知道检测器的结构和特性，但仍然必须了解目标模型的完整特征（特征空间）。因此，为了训练替代模型并通过模型替代进行攻击，攻击者必须了解表征原始模型的特征，这就是强化学习（RL）发挥作用的地方。
- en: Thanks to RL, in fact, the attacker can perform the attack despite being totally
    unaware, not only of the structure and implementation features of the model underlying
    the malware detector, but also of the detection features.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 事实上，得益于强化学习，攻击者可以在完全不知情的情况下进行攻击，不仅不了解恶意软件检测器底层模型的结构和实现特征，还不了解检测特征。
- en: One of the first examples of using RL to attack malware detectors was described
    in the paper entitled *Evading Machine Learning Malware Detection*, by Hyrum S.
    Anderson, Anant Kharkar, Phil Roth, and Bobby Filar, whose results were presented
    at Black Hat USA 2017, July 22–27, 2017, Las Vegas, NV, USA.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 使用强化学习攻击恶意软件检测器的第一个例子之一，描述在名为*《规避机器学习恶意软件检测》*的论文中，该论文由Hyrum S. Anderson、Anant
    Kharkar、Phil Roth和Bobby Filar撰写，其结果在2017年7月22日至27日于美国拉斯维加斯的Black Hat USA 2017大会上进行了展示。
- en: The cited paper shows an example of a black-box attack conducted against classifiers
    using the RL, in which not only the target classifier structure, but also its
    feature space, are completely unknown to the attacker. Nonetheless, the reduced
    information available to the attacker results in a lower attack rate than black-box
    attacks with GANs.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 该论文展示了一个针对分类器进行黑盒攻击的例子，该攻击使用强化学习，其中攻击者完全不知道目标分类器的结构和特征空间。然而，攻击者可用的信息减少导致其攻击成功率低于使用生成对抗网络（GAN）进行的黑盒攻击。
- en: However, the paper demonstrates the possibility of carrying out a black-box
    attack, despite having limited information, by exploiting the RL.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，论文证明了通过利用强化学习，尽管信息有限，依然可以进行黑盒攻击的可能性。
- en: Black-box attacks with RL
  id: totrans-44
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 强化学习的黑盒攻击
- en: In the paper mentioned previously, an RL model is implemented to carry out a
    black-box attack against a malware detector, with the aim of evading a static
    Windows **Portable Executable** (**PE**) malware classifier.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 在前述论文中，实施了一个强化学习模型，以对恶意软件检测器进行黑盒攻击，目的是规避静态Windows **可移植可执行文件**（**PE**）恶意软件分类器。
- en: 'The attack scenario includes the following elements:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 攻击场景包括以下元素：
- en: The RL model consists of an agent and an environment.
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 强化学习模型由一个代理和一个环境组成。
- en: The agent iteratively chooses an action A to execute.
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代理（agent）反复选择一个动作A来执行。
- en: Each action A is associated with a change in state space S.
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个动作A都与状态空间S的变化相关联。
- en: Every change of state is associated with feedback from the environment, in the
    form of a scalar award.
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每次状态变化都与来自环境的反馈相关联，以标量奖励的形式表现出来。
- en: The feedback and their scalar awards are then fed back to the agent. The agent
    determines his next action based on such feedback, following a strategy, that
    is, an objective function that maximizes rewards. This objective function determines
    what action to perform next.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，反馈及其标量奖励被反馈给代理。代理根据这些反馈，遵循一个策略，即最大化奖励的目标函数，来决定下一步的行动。这个目标函数决定了接下来要执行的动作。
- en: In particular, the set of A actions represents the corresponding set of modifications
    that can be performed on the PE format executable file, in order to deceive the
    malware classifier, while maintaining the malware's functionality.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 具体而言，A动作集合代表可以对PE格式的可执行文件进行的相应修改集合，以欺骗恶意软件分类器，同时保持恶意软件的功能。
- en: In relation to each action, the scalar award is evaluated by the environment
    based on the outcome returned by the malware classifier.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 每个动作的标量奖励由环境根据恶意软件分类器返回的结果进行评估。
- en: The authors of the paper also developed an evasion environment malware called
    **EvadeRL **([https://github.com/drhyrum/gym-malware](https://github.com/drhyrum/gym-malware))
    and its source code is released as an open source.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 论文的作者们还开发了一种规避环境恶意软件，名为**EvadeRL**（[https://github.com/drhyrum/gym-malware](https://github.com/drhyrum/gym-malware)），其源代码作为开源发布。
- en: EvadeRL is based on the OpenAI Gym framework ([https://gym.openai.com/](https://gym.openai.com/))
    that offers standardized preconfigured RL environments.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: EvadeRL 基于 OpenAI Gym 框架（[https://gym.openai.com/](https://gym.openai.com/)），提供标准化的预配置强化学习环境。
- en: 'The malware evasion environment consists of the following:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 恶意软件规避环境由以下部分组成：
- en: An initial malware sample
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 初始恶意软件样本
- en: A customizable antimalware engine
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个可定制的反恶意软件引擎
- en: 'Each step provides the following feedback to the agent:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 每个步骤为代理提供以下反馈：
- en: '**Reward**: A value of `10.0` if the malware sample passes the malware engine
    control, or `0.0` if the malware sample fails'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**奖励**：如果恶意软件样本通过恶意软件引擎控制，则为 `10.0`，如果恶意软件样本失败，则为 `0.0`'
- en: '**Observation space**: A vector of features summarizing the composition of
    the malware sample'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**观察空间**：总结恶意软件样本组成的特征向量'
- en: Based on this feedback, the agent chooses the next action consisting of a modification
    performed on the malware sample PE file format, which does not alter the original
    functionality of the executable.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 基于此反馈，代理选择下一步操作，即对恶意软件样本的 PE 文件格式进行修改，但不改变可执行文件的原始功能。
- en: 'The representation of the malware sample inside the environment takes the form
    of a 2,350-dimensional features vector, which includes the usual PE file format
    artifacts categories, such as the following:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 恶意软件样本在环境中的表示形式为一个 2350 维的特征向量，包括常见的 PE 文件格式工件类别，例如以下内容：
- en: PE header
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PE 头
- en: PE sections
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PE 区段
- en: Import and export tables
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 导入和导出表
- en: ASCII strings, such as file paths, URLs, and registry keys
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ASCII 字符串，如文件路径、URL 和注册表键
- en: Each action of the agent corresponds to a change of state that represents one
    of the possible modifications of the sample malware PE file format.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 代理的每个动作对应于一个状态变化，表示恶意软件样本 PE 文件格式的可能修改之一。
- en: 'Having to preserve both the integrity of the PE file format and the integrity
    of the functionality of the malware, the number of possible modifications is therefore
    relatively small, and some examples include the following:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 由于需要同时保持 PE 文件格式的完整性和恶意软件功能的完整性，因此可能的修改数量相对较小，以下是一些示例：
- en: Adding a new function to the **Import Address Table** (**IAT**), without this
    being called by the executable
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向**导入地址表**（**IAT**）添加一个新功能，但该功能不会被可执行文件调用
- en: Modification of the names of the exiting sections
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修改现有区段的名称
- en: Adding new unused sections
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加新的未使用区段
- en: Extra space padding at the end of each section
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个区段末尾的额外空间填充
- en: In the experiment conducted by the authors of the cited paper, a gradient-boosted
    decision tree classifier, whose training was carried out with a training dataset
    of 100,000 samples (both malicious and benign), is successfully attacked, achieving
    a **Area Under the ROC curve** (**AUC**) score equal to `0.96`.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在引用论文的作者进行的实验中，使用包含 100,000 个样本（包括恶意样本和良性样本）的训练数据集进行训练的梯度提升决策树分类器成功遭到攻击，获得了
    **ROC 曲线下面积**（**AUC**）得分 `0.96`。
- en: Challenging ML anomaly detection
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 挑战性的机器学习异常检测
- en: As we saw in [Chapter 5](a6eab48a-f031-44c9-ae4a-0cfd5db2e05e.xhtml), *Network
    Anomaly Detection with AI*, one of the areas in which ML has proved particularly
    useful is that of anomaly detection. However, even in the case of anomaly detection,
    the adoption of AI-based cybersecurity solutions must be carefully evaluated in
    light of the challenges that the complexity of these solutions inevitably introduces.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在[第5章](a6eab48a-f031-44c9-ae4a-0cfd5db2e05e.xhtml)《使用 AI 进行网络异常检测》中所看到的，机器学习在异常检测领域特别有用。然而，即使在异常检测的情况下，基于
    AI 的网络安全解决方案的采用也必须谨慎评估，因为这些解决方案的复杂性不可避免地带来了挑战。
- en: In particular, the possible negative impact, both on the business and on the
    security of the errors originating from the anomaly detection systems, induced
    by both false positives and false negatives, must be carefully evaluated.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 尤其是，必须仔细评估由异常检测系统引发的错误对业务和安全的潜在负面影响，这些错误来源于假阳性和假阴性。
- en: As we know, there is usually a trade-off between false positives and false negatives;
    therefore, attempting to reduce the number of false negatives (the number of attacks
    that go undetected), almost inevitably leads to an increase in false positives
    (the detection of false attacks).
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所知，通常在假阳性和假阴性之间存在权衡；因此，试图减少假阴性（未被检测到的攻击）几乎不可避免地会导致假阳性（检测到的虚假攻击）增加。
- en: 'More often than not, the costs deriving from classification errors are relevant:
    if, in fact, a false negative (that is, an attack that went undetected) can lead
    to the compromise of the integrity of the corporate''s sensitive data (or even
    the compromise of the system). At the same time, an excessive number of false
    positives (that is, the detection of actually non-existent attacks) can determine
    the unreliability of the detection system, preventing the timely recognition of
    real attacks.'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 很多时候，由分类错误带来的成本是相关的：如果一个假阴性（即未检测到的攻击）可能导致企业敏感数据的完整性遭到破坏（甚至系统本身遭到破坏）。同时，过多的假阳性（即检测到实际上不存在的攻击）可能会导致检测系统的不可靠，阻碍实时识别真正的攻击。
- en: These are some of the reasons why **pure** anomaly detection systems (that is,
    detection systems that are based solely on automated procedures), are extremely
    rare in practice.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 这些就是为什么**纯粹**的异常检测系统（即仅基于自动化程序的检测系统）在实践中极为罕见的一些原因。
- en: Both in the cases of the anomaly detection systems, and fraud detection and
    prevention systems (see [Chapter 7](98ce7db1-f53d-47ca-b6ca-ec0e5f882566.xhtml),
    *Fraud Prevention with Cloud AI Solutions*), reliability is increased by integrating
    the automated procedures with the feedback deriving from human operators (therefore
    achieving, for example, a greater reliability of the labels associated with the
    supervised algorithms).
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 无论是异常检测系统，还是欺诈检测和预防系统（见[第七章](98ce7db1-f53d-47ca-b6ca-ec0e5f882566.xhtml)，*云AI解决方案中的欺诈预防*），通过将自动化程序与人工操作员反馈结合，可靠性得到提高（因此，例如，监督算法相关标签的可靠性得到了增强）。
- en: Another order of problems has to do with the requisite of algorithm explainability,
    since the results obtained by the algorithms are often difficult to interpret
    (not surprisingly, the ML algorithms are often treated as black boxes).
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个问题是算法可解释性的要求，因为算法得到的结果往往难以解释（不足为奇，机器学习算法常被视为黑盒）。
- en: The difficulty in interpreting the results obtained by the algorithms can result
    in overwhelming investigative activities, due to the impenetrability of the reasons
    that led the algorithms to detect certain anomalies.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 由于算法结果难以解释，可能导致调查活动陷入困境，因无法理解算法为何会检测到某些异常。
- en: In other words, with the inevitable opacity associated with algorithms, learning
    processes, it is often difficult to reconcile with the need to reconstruct—in
    a precise (and repeatable) way—the process that led the system to report the anomaly.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 换句话说，由于算法和学习过程固有的不可理解性，往往难以与需要精确（且可重复）地重建导致系统报告异常的过程这一需求相协调。
- en: These difficulties are aggravated if we consider the substantially dynamic nature
    of the concrete reality in which the detection systems are employed (due to the
    fact that, in a constantly evolving reality, there are always new **anomalous**
    cases that have not been previously encountered).
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 如果考虑到检测系统所使用的实际环境具有本质上的动态性质（因为在不断发展的现实中，总会有之前未遇到过的新**异常**案例），这些困难会加剧。
- en: Incident response and threat mitigation
  id: totrans-86
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 事件响应与威胁缓解
- en: Obviously, the implementation of an anomaly detection system assumes that the
    alerts generated are properly managed.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，实施异常检测系统需要假设生成的警报得到了适当管理。
- en: With incident response, we indicate the set of activities carried out after
    alerts are delivered.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 事件响应指的是警报发出后进行的一系列活动。
- en: These activities are usually managed by human operators who are specialized
    in the various sectors of competence, engaged in investigating and deepening the
    evidence associated with alerts.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 这些活动通常由专门从事各个领域的人工操作员管理，他们负责调查并深入分析与警报相关的证据。
- en: Given the high level of specialization required to carry out such investigations
    (just think, for example, of digital forensics activities that originate from
    the reporting of a data breach), the adoption of automated procedures are usually
    limited to supporting human operators in their specialized activities, rather
    than replacing them.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于进行此类调查所需的高度专业化（例如，数字取证活动通常来源于数据泄露报告），自动化程序的采用通常仅限于支持人工操作员的专业活动，而不是取而代之。
- en: '**Threat mitigation**, instead, involves the prevention of future attacks or
    intrusions, or the countering of ongoing attacks.'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: '**威胁缓解**，则涉及预防未来的攻击或入侵，或反制正在进行的攻击。'
- en: Although algorithmic procedures that automatically block suspicious activities
    can be successfully implemented in threat mitigation, they can also be exploited
    by attackers (for example, think of an attacker who wants to damage the reputation
    of an e-commerce website by causing the automated block of most parts of customers'
    IP addresses by simulating a **Distributed Denial of Service** (**DDoS**) attack).
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管可以成功实施自动屏蔽可疑活动的算法程序以应对威胁，但这些程序也可能被攻击者利用（例如，设想一个攻击者通过模拟**分布式拒绝服务**（**DDoS**）攻击，试图通过自动屏蔽大部分客户IP地址来破坏一个电子商务网站的声誉）。
- en: Empowering detection systems with human feedback
  id: totrans-93
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通过人类反馈增强检测系统
- en: From what we have seen so far, the best use of anomaly detection systems sees
    the interaction of automated procedures with the specialized activities carried
    out by human operators.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 从我们至今所见，最佳的异常检测系统使用方式是自动化程序与人类操作员所进行的专业活动相结合。
- en: Therefore, the use of the anomaly detection systems as a support tool for human
    specialists allows the mitigation of the costs deriving from false positives,
    at the same time improving the ability to reduce false negatives by exploiting
    human feedback (as in the aforementioned case of improving the reliability of
    the classification sample labels used to train supervised algorithms).
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，将异常检测系统作为人类专家的辅助工具，能够在减轻假阳性带来的成本的同时，通过利用人类反馈（如前述提高用于训练监督算法的分类样本标签的可靠性）提高减少假阴性的能力。
- en: However, this human-machine synergy presupposes that algorithms are less opaque
    and more easily interpreted by humans, therefore increasing the transparency of
    the reasons that led the algorithm to report a specific anomaly (transparency
    that must be reserved only to insiders, to prevent attackers from exploiting it
    to their advantage).
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，这种人机协同假设了算法不再那么晦涩难懂，更容易为人类解读，从而增加了算法报告特定异常的透明度（这种透明度仅限于内部人员，以防止攻击者利用它为自己谋取利益）。
- en: In the same way, an anomaly detection system must be easily maintainable, both
    in the sense of quickly adapting the algorithms to the inevitable changes of context,
    and in the sense of easily correcting the algorithms' classification errors reported
    by operator feedback.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 同样地，异常检测系统必须易于维护，既能迅速适应环境变化，也能方便地通过操作员反馈修正算法的分类错误。
- en: Testing for data and model quality
  id: totrans-98
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 测试数据和模型质量
- en: So far, we have seen the technical difficulties that we face in the implementation
    of our detection systems.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 迄今为止，我们已经看到了在实现检测系统过程中所面临的技术难题。
- en: More generally, every time we decide to use algorithms within our cybersecurity
    solutions, we must take into account the aspects of data quality and model quality,
    in order to ensure not only the accuracy of predictions, but also their reliability.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 更广泛地说，每当我们决定在网络安全解决方案中使用算法时，我们必须考虑数据质量和模型质量的各个方面，以确保不仅是预测的准确性，而且还要确保其可靠性。
- en: Let's continue by analyzing the aspects concerning the data quality process.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将继续分析与数据质量过程相关的各个方面。
- en: Assessing data quality
  id: totrans-102
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 评估数据质量
- en: As we have repeated several times throughout the book, and particularly in [Chapter
    9](55892989-888d-4407-ac91-7f939c0802bd.xhtml), *Evaluating Algorithms*,the choice
    of algorithm is undoubtedly important, but the selection of data is even more
    crucial for the achievement of our objectives.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在本书中多次强调，特别是在[第9章](55892989-888d-4407-ac91-7f939c0802bd.xhtml)《评估算法》中所提到的，*算法的选择无疑是重要的，但数据的选择对于实现我们的目标更为关键*。
- en: In many cases, it is even preferable to use more data to feed a non-optimal
    algorithm, rather than trying to optimize the algorithm.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多情况下，使用更多的数据来训练一个非最优的算法，往往比试图优化该算法更为可取。
- en: It is therefore particularly important to make sure that the data used is reliable,
    as well as available in sufficient quantities to train our algorithms.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，确保所使用的数据是可靠的，并且数量足够用于训练我们的算法，显得尤为重要。
- en: One of the tasks performed by the data quality process is therefore the verification
    of the presence of bias within the sample datasets (not to be confused with the
    bias concerning the algorithms, which is the cause of underfitting, as we saw
    in the previous chapter).
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，数据质量过程的任务之一就是验证样本数据集中的偏差（这与算法偏差不同，后者是导致欠拟合的原因，正如我们在上一章所见）。
- en: Biased datasets
  id: totrans-107
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 偏差数据集
- en: The presence of bias within the sample datasets is often the result of the selection
    methods used to gather the data (known as **selection bias**). For example, in
    the training of malware detectors, we often use samples obtained from honeypots
    within the corporate security perimeter.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集中的偏差通常是由于收集数据时所使用的选择方法所导致的（称为**选择偏差**）。例如，在恶意软件检测器的训练中，我们通常使用从公司安全防护圈内的蜜罐中获得的样本。
- en: 'Honeypots are effective tools for gathering security information: they unveil
    the specific risks of tailored attacks to which the organization is exposed. However,
    honeypots are unlikely to ensure that the samples collected resemble all the different
    types of malware threats in the wild. Therefore, the use of honeypots may introduce
    selection bias into training datasets.'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 蜜罐是收集安全信息的有效工具：它们揭示了组织面临的定制攻击的具体风险。然而，蜜罐不太可能确保收集的样本能代表所有不同类型的实际恶意软件威胁。因此，使用蜜罐可能会在训练数据集中引入选择偏差。
- en: 'Similar considerations can be made regarding the training of anti-spam classifiers:
    the collection of samples will hardly contain all the possible cases of threats
    that make use of emails as the attack vector, as such appropriately representing
    the complete population of possible attacks.'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 对于反垃圾邮件分类器的训练也可以做类似的考虑：收集的样本几乎不可能包含所有可能利用电子邮件作为攻击向量的威胁情况，因此难以恰当地代表所有可能的攻击种类。
- en: In this case, we may face an **exclusion bias**, meaning that some representative
    samples of the population are excluded from the datasets.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，我们可能会遇到**排除偏差**，即某些代表性样本被从数据集中排除。
- en: One of the most effective strategies to prevent the presence of bias within
    the datasets is to limit the scope of our algorithmic detectors, specifically
    identifying the threats that we intend to manage.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 防止数据集中的偏差出现的最有效策略之一是限制我们算法检测器的范围，特别是明确识别我们打算管理的威胁。
- en: In this way, even the data samples we collect to train the algorithms will be
    selected based on the chosen use cases.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这种方式，即使是我们收集的数据样本用于训练算法，也会根据选择的使用案例来进行筛选。
- en: Unbalanced and mislabeled datasets
  id: totrans-114
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 不平衡和错误标注的数据集
- en: Similarly, as we saw in [Chapter 7](98ce7db1-f53d-47ca-b6ca-ec0e5f882566.xhtml),
    *Frauds Prevention with Cloud AI Solutions*, when we analyze data on credit card
    fraud, we may face strongly unbalanced data distributions, or incorrectly classified
    sample datasets, which reduce the effectiveness of supervised algorithms.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，正如我们在[第7章](98ce7db1-f53d-47ca-b6ca-ec0e5f882566.xhtml)《利用云AI解决方案预防欺诈》中看到的，当我们分析信用卡欺诈数据时，可能会面临严重不平衡的数据分布，或者样本数据集被错误分类，从而降低了监督算法的效果。
- en: We have seen how it is possible to tackle and solve the problems related to
    mislabeled datasets by exploiting the feedback obtained from human operators (even
    if this solution is often burdensome in terms of both time and specialized resources
    employed).
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经看到，通过利用人类操作员获得的反馈，如何解决与错误标注数据集相关的问题（即使这种解决方案通常在时间和专业资源方面非常繁重）。
- en: In the case of unbalanced datasets (such as credit card transactions, where
    the samples belonging to the class of legitimate transactions largely exceed the
    samples of fraud transactions), we have seen how useful it is to resort to sampling
    techniques such as the **Synthetic Minority Over-sampling Technique** (**SMOTE**).
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 在不平衡的数据集的情况下（例如信用卡交易，其中属于合法交易类别的样本远远多于欺诈交易的样本），我们已经看到使用诸如**合成少数类过采样技术**（**SMOTE**）等采样技术是多么有效。
- en: Missing values in datasets
  id: totrans-118
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据集中的缺失值
- en: One of the most frequent problems that needs to be addressed during the data
    quality process has to do with missing values ​​within datasets.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在数据质量处理中需要解决的最常见问题之一与数据集中的缺失值有关。
- en: This problem occurs, for example, in cases where not all the values ​​of the
    columns are present, giving rise to null fields. The presence of null fields not
    only represents a problem for relational databases, but also for many ML algorithms.
    It is therefore necessary to eliminate these null fields to allow the algorithms
    to work correctly, without incurring classification errors.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 这个问题发生在例如列中的并非所有值都存在的情况下，从而导致空字段的出现。空字段的存在不仅对关系型数据库构成问题，还对许多机器学习算法构成问题。因此，有必要删除这些空字段，以便算法能够正确运行，避免分类错误。
- en: 'Some of the most common remedies to the problem of missing values ​​include
    the practice of the following:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 解决缺失值问题的常见方法之一包括以下做法：
- en: Excluding the lines that have null fields from the dataset
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从数据集中排除包含空值的行
- en: Excluding the columns that present null fields from the dataset
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从数据集中排除包含空值的列
- en: Replacing the null fields with default values ​​(for example, 0) or recalculating
    the values on the basis of other values ​​in the dataset
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用默认值（例如0）替换空字段，或根据数据集中其他值重新计算值
- en: 'Each of these remedies has disadvantages: in general, the exclusion of rows
    and columns that have null fields can result in the loss of important information
    contained in other non-null fields of the row or column we excluded.'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 这些方法各有缺点：一般来说，排除包含空值的行和列可能导致丢失包含在其他非空字段中的重要信息。
- en: Similarly, the insertion of predefined or recalculated data can introduce bias
    within the dataset, especially in cases where the missing values ​​are numerous.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 类似地，插入预定义或重新计算的数据可能会引入偏差，特别是在缺失值较多的情况下。
- en: Missing values example
  id: totrans-127
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 缺失值示例
- en: To solve the problem of missing values in datasets, the `scikit-learn` library
    provides specialized classes for the purpose.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 为了解决数据集中缺失值的问题，`scikit-learn`库提供了专门的类来完成此任务。
- en: The strategy followed by `scikit-learn` consists of the imputation of the missing
    values by inferring new values from the known part of the dataset.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '`scikit-learn`所采用的策略是通过推断数据集中已知部分的值来进行缺失值的插补。'
- en: 'The value imputation can be of two types:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 值的插补有两种类型：
- en: Univariate imputation
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 单变量插补
- en: Multivariate imputation
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 多变量插补
- en: In the case of univariate imputation, the `SimpleImputer` class is used. This
    allows you to replace null values with a constant value, or with a positional
    statistics metric, such as mean, median, or mode, which is calculated on the remaining
    values of the column that contains the null value.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 在单变量插补的情况下，使用`SimpleImputer`类。它允许你将空值替换为常数值，或使用基于包含空值的列中剩余值计算的统计量（如均值、中位数或众数）。
- en: 'In the following example, we see the replacement of null values (encoded as
    `np.nan`) with the mean value calculated on the values belonging to the same columns
    in which the null values are found:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下示例中，我们看到将空值（以`np.nan`表示）替换为基于同一列中其他值计算的平均值：
- en: '[PRE0]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: In the case of multivariate imputation, the missing values are estimated using
    a round robin strategy that takes into consideration the remaining features.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 在多变量插补的情况下，缺失值通过循环策略进行估算，该策略考虑了剩余特征。
- en: With the round robin strategy (iteratively performed for each feature), a feature
    column is treated as input. The missing value is then estimated by applying a
    regression function.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 使用循环策略（对每个特征进行迭代）时，将特征列作为输入。然后通过应用回归函数来估算缺失值。
- en: 'In the following example, we use the `IterativeImputer` class available in
    the `scikit-learn` package, `sklearn.impute`, to perform the multivariate imputation
    of the missing values:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下示例中，我们使用`scikit-learn`包中的`IterativeImputer`类（位于`sklearn.impute`模块）来执行缺失值的多变量插补：
- en: '[PRE1]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The time has come to take care of the model quality process.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 是时候开始关注模型质量过程了。
- en: Assessing model quality
  id: totrans-141
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 评估模型质量
- en: We have emphasized the importance of data over algorithms, and we have seen
    which strategies to follow in the data quality process.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 我们强调了数据对算法的重要性，并且我们已经看到在数据质量过程中应该遵循哪些策略。
- en: Once we are sure that the data is reliable and complete, we must feed it to
    the algorithms selected for the implementation of our AI solutions, submitting
    the results obtained to the model quality process.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们确定数据可靠且完整，就必须将其输入到为实现AI解决方案而选定的算法中，并将得到的结果提交给模型质量过程。
- en: The model quality process involves all the phases of algorithm deployment.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 模型质量过程涉及算法部署的各个阶段。
- en: In fact, it is essential to monitor the performance of our algorithms, in order
    to constantly perform the fine tuning of the hyperparameters.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 事实上，监控算法的表现至关重要，以便不断地对超参数进行微调。
- en: By hyperparameters, we mean all the parameters that the algorithm receives from
    the outside (that is, parameters that are not set or updated in consequence of
    the learning process), but are decided by the analyst even before starting the
    training (such as the parameter *k* of the k-means clustering algorithm, or the
    number of perceptrons to be used in multilayer perceptron classifiers).
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 所谓超参数，是指算法从外部接收的所有参数（即那些在学习过程中未被设置或更新的参数），而这些参数是在训练开始之前由分析师决定的（例如，k-means 聚类算法中的参数*k*，或多层感知机分类器中使用的感知机数量）。
- en: This is why it is important to constantly monitor the performance of the algorithms,
    in order to be able to optimize these hyperparameters.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是为什么不断监控算法性能很重要，以便能够优化这些超参数。
- en: Fine-tuning hyperparameters
  id: totrans-148
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 微调超参数
- en: While fine-tuning algorithm hyperparameters, we must keep in mind that there
    is no configuration that can be used in all cases; however, we must perform optimization
    on the basis of different scenarios we face, taking into account the different
    goals we want to achieve.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 在微调算法超参数时，我们必须记住，没有一种配置适用于所有情况；然而，我们必须根据面临的不同场景进行优化，考虑到我们想要实现的不同目标。
- en: The fine tuning of hyperparameters presupposes in-depth knowledge of the algorithm
    and its characteristics, in addition to the knowledge of the application domain
    (scenarios and use cases) in which our solution is deployed.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 超参数的微调假设了对算法及其特性有深入了解，除此之外，还需要了解我们的解决方案所部署的应用领域（场景和使用案例）。
- en: Moreover, fine-tuning must also take into consideration the possible impact
    caused by changes in input data (as we saw in [Chapter 3](aaf59353-00b3-4625-8732-63aad02cc8e5.xhtml), *Ham
    or Spam? Detecting Email Cybersecurity Threats with AI*, with regard to phishing
    detection, the use of decision trees involves a high sensitivity, even to small
    changes in input data).
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，微调还必须考虑输入数据变化可能带来的影响（正如我们在[第3章](aaf59353-00b3-4625-8732-63aad02cc8e5.xhtml)中所看到的，*垃圾邮件或正常邮件？利用人工智能检测电子邮件网络安全威胁*一节中提到的，关于钓鱼检测，使用决策树时对输入数据的小变化也非常敏感）。
- en: In many cases, the analyst can resort to his own experience or decide to follow
    empirical heuristics in an attempt to optimize hyperparameters.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多情况下，分析师可以依靠自己的经验或决定遵循经验启发式方法来尝试优化超参数。
- en: Also in this case, the `scikit-learn` library comes to our aid by providing
    us with the `GridSearchCV` class, which helps us to compare the performances of
    different algorithms by leveraging cross validation.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，`scikit-learn`库为我们提供了帮助，通过`GridSearchCV`类，我们可以利用交叉验证来比较不同算法的性能。
- en: Model optimization with cross validation
  id: totrans-154
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用交叉验证进行模型优化
- en: The following example shows how to use the `GridSearchCV` class, available in
    the `sklearn.model_selection` package, to perform the hyperparameter optimization
    of a classifier using cross validation (please refer to the *Algorithms Cross
    Validation* paragraph of [Chapter 9](55892989-888d-4407-ac91-7f939c0802bd.xhtml),
    *Evaluating Algorithms*, for the explanation of cross validation).
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 以下示例展示了如何使用`sklearn.model_selection`包中的`GridSearchCV`类，通过交叉验证对分类器进行超参数优化（请参见[第9章](55892989-888d-4407-ac91-7f939c0802bd.xhtml)的*算法交叉验证*一节，了解交叉验证的解释）。
- en: We use the digit sample dataset that comes with the `scikit-learn` library.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用`scikit-learn`库附带的数字样本数据集。
- en: The dataset is equally divided into training subset and testing subset, using
    the `train_test_split()` method, which is assigned the `test_size=0.5` parameter.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集被平均分成训练子集和测试子集，使用`train_test_split()`方法，并设置`test_size=0.5`参数。
- en: 'The different performances of the **support vector classifier** (**SVC**) are
    then compared—in consequence of fine tuning the precision and recall metrics with
    different combinations of hyperparameters (defined in the `tuned_parameters` variable)—using
    the cross validation strategy implemented by the `GridSearchCV` class:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 通过对不同超参数组合（在`tuned_parameters`变量中定义）微调精度和召回率指标，使用`GridSearchCV`类实施的交叉验证策略，比较**支持向量分类器**（**SVC**）的不同性能：
- en: '[PRE2]'
  id: totrans-159
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The preceding script generates the following output:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的脚本生成了以下输出：
- en: '[PRE3]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Our assessment continues (and concludes) with our AI-empowered cybersecurity
    solutions.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的评估继续（并结束）于我们的人工智能增强的网络安全解决方案。
- en: Ensuring security and reliability
  id: totrans-163
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 确保安全性和可靠性
- en: Managing the security and reliability of our solutions is a critical aspect,
    which can determine its success or failure, regardless of the quality of the models
    implemented.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 管理解决方案的安全性和可靠性是一个关键方面，它可以决定解决方案的成功或失败，无论实现的模型质量如何。
- en: 'Therefore, ensuring security and reliability of AI-empowered solutions translates
    into the following:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，确保AI驱动解决方案的安全性和可靠性可以转化为以下几个方面：
- en: Ensuring performance and scalability
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保性能和可扩展性
- en: Ensuring resilience and availability
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保韧性和可用性
- en: Ensuring confidentiality and privacy
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保机密性和隐私
- en: We begin by analyzing how the performance and scalability requisites affect
    algorithms' reliability.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先分析性能和可扩展性需求如何影响算法的可靠性。
- en: Ensuring performance and scalability
  id: totrans-170
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 确保性能和可扩展性
- en: Without a doubt, the performances of AI-based cybersecurity solutions are crucial
    to guarantee their success, especially if the objective to be achieved is to detect
    intrusion attempts or security breaches as quickly as possible. This translates into
    ensuring the low latency of the responses. However, the requirement of low latency
    contrasts with the very nature of the algorithms, which usually entail high computational
    loads. Furthermore, it is often difficult to guarantee the scalability of AI solutions
    when the amount of data to be processed grows explosively (as is typical in modern
    big data scenarios).
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 毋庸置疑，基于AI的网络安全解决方案的性能对于确保其成功至关重要，特别是当目标是尽可能快速地检测入侵尝试或安全漏洞时。这就转化为确保响应的低延迟。然而，低延迟的需求与算法的本质相悖，通常涉及较高的计算负载。此外，当待处理数据量呈爆炸式增长时（如现代大数据场景中典型的情况），通常很难保证AI解决方案的可扩展性。
- en: In order to guarantee an adequate level of performance, it is therefore necessary
    to act on the various components of the solution, starting with the choice of
    the best performing algorithms, even at the expense of precision. At the same
    time, reducing the dataset dimensionality (that is, the number and type of features
    used) can dramatically improve the performance of our algorithms.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 为了保证足够的性能水平，因此有必要在解决方案的各个组件上采取措施，从选择最具性能的算法开始，即使这可能牺牲精确度。同时，减少数据集的维度（即使用的特征的数量和类型）可以显著提高算法的性能。
- en: In [Chapter 6](f467340a-244d-4714-8a39-68b230db2404.xhtml), *Securing User Authentication*,
    we saw how it is possible to reduce the dimensionality of heavy datasets (such
    as those of images), even those using simple technical expedients, such as the
    **Principal components analysis** (**PCA**).
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第6章](f467340a-244d-4714-8a39-68b230db2404.xhtml)，*确保用户认证安全*中，我们看到如何通过简单的技术手段（如**主成分分析**（**PCA**））减少大数据集的维度（例如图像数据集）。
- en: Also, the scalability of the algorithms is an essential element to improve performances,
    especially if we intend to deploy our solutions into the cloud.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，算法的可扩展性是提高性能的关键要素，特别是当我们打算将解决方案部署到云端时。
- en: However, not all algorithms have been designed to guarantee scalability, while
    some algorithms (such as SVMs) are by their nature less efficient, as they are
    particularly slow in the training phase and require high hardware resources (in
    terms of memory, computational load, and other aspects).
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，并非所有算法都被设计为保证可扩展性，而某些算法（如支持向量机，SVM）本质上效率较低，因为它们在训练阶段特别慢，并且需要大量硬件资源（如内存、计算负载及其他方面）。
- en: It is therefore necessary to carefully evaluate the advantages and disadvantages
    of each algorithm (as we did in the various chapters of the book) before making
    our decisions.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，有必要在做出决策之前，仔细评估每种算法的优缺点（正如我们在书中的各章中所做的那样）。
- en: Ensuring resilience and availability
  id: totrans-177
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 确保韧性和可用性
- en: When we talk about security, we do not only mean the protection from attacks
    carried out through the use of traditional measures, such as the definition of
    the network security perimeter, or the use of antivirus software.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们谈论安全性时，我们不仅仅是指通过传统措施来防范攻击，例如定义网络安全边界或使用杀毒软件。
- en: The requirement of security in complex contexts (such as those in which cloud
    computing is used for both the development and the deployment of solutions) translates
    into assuring the requirements of resilience and high availability.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 在复杂环境中的安全需求（例如在云计算用于解决方案的开发和部署时）转化为确保韧性和高可用性的需求。
- en: The same traditional security measures, starting with antiviruses, up to the
    **intrusion detection system** (**IDS**) depend more and more on AI cloud-based
    solutions to achieve their goals (just think, for example, of the malware detection
    performed by an antivirus software that exploits cloud-based neural networks to
    carry out behavioral analysis of a suspect executable).
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 相同的传统安全措施，从杀毒软件到**入侵检测系统**（**IDS**），越来越依赖基于人工智能的云解决方案来实现其目标（例如，想想杀毒软件如何利用基于云的神经网络进行嫌疑可执行文件的行为分析，从而进行恶意软件检测）。
- en: By now, AI permeates all the value-added services offered to clients by corporates
    that use the internet and the web in their business.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 如今，人工智能渗透到了所有通过互联网和网络为客户提供增值服务的企业中。
- en: 'This is even more true for the cybersecurity sector: for example, consider
    biometric procedures that all adopt some form of AI for user recognition.'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 这在网络安全领域尤为如此：例如，考虑所有采用某种形式的人工智能进行用户识别的生物识别程序。
- en: It is therefore essential to continuously monitor the health status of the systems
    on which the AI-based cybersecurity solutions are deployed.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，持续监控部署人工智能网络安全解决方案的系统健康状态至关重要。
- en: Similarly, guaranteeing the integrity and confidentiality of the data that feeds
    the algorithms is of fundamental importance to assure not only their security,
    but also their reliability.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，确保输入算法的数据的完整性和保密性，对于保证它们的安全性和可靠性至关重要。
- en: An attacker who managed to access the datasets used by the algorithms, would
    not only be able to emulate the behavior of the underlying predictive models,
    but could even poison the data, therefore modifying the predictions of the algorithms
    to their liking.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦攻击者成功访问了算法使用的数据集，不仅能够模拟底层预测模型的行为，还能通过篡改数据，毒化数据，从而改变算法的预测结果。
- en: We will deal with this topic in the next section.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在下一节讨论这个话题。
- en: Ensuring confidentiality and privacy
  id: totrans-187
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 确保保密性和隐私
- en: The centrality of data in the correct functioning of data-driven solutions is
    attested by the principle known as **garbage in**, **garbage out**. Protecting
    the integrity of data is equally important in the AI, since—unlike what is commonly
    thought—algorithms are not **objective**, but can formulate radically different
    predictions based on the data supplied to them in the training phase.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 数据在数据驱动解决方案正确运行中的核心地位，通过所谓的**垃圾输入，垃圾输出**原则得到证明。保护数据的完整性在人工智能中同样重要，因为—与常见的看法相反—算法并不是**客观的**，它们可能根据提供给它们的训练数据，做出截然不同的预测。
- en: It is therefore possible to condition the results of predictive models simply
    by altering the data on which the algorithms work.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，仅仅通过改变算法使用的数据，就能够影响预测模型的结果。
- en: This aspect is particularly delicate, as it transversally raises the need to
    guarantee the security and integrity of the data, together with the explicability
    and repeatability of the results obtained by the algorithms, and can have important
    negative repercussions, especially in the context of the privacy law compliance.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 这一方面尤其敏感，因为它横向地提出了确保数据安全和完整性的需求，以及确保算法结果的可解释性和可重复性，而这在隐私法合规的背景下可能带来重要的负面影响。
- en: As is known, the pervasive diffusion of data-driven technologies (such as AI
    and big data analytics) that make extensive use of users' and consumers' personal
    data, poses serious problems, not only of data security, but also of protection
    of confidentiality.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 众所周知，数据驱动技术（如人工智能和大数据分析）广泛使用用户和消费者的个人数据，带来了严重问题，不仅是数据安全问题，还有隐私保护问题。
- en: In particular, by aggregating a sufficient amount of personal data, it is possible
    to reconstruct the profile of each individual with a high degree of statistical
    verisimilitude.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 尤其是，通过聚合足够多的个人数据，可以以高度的统计真实度重建每个人的个人资料。
- en: When we add the fact that most business decisions are taken on the basis of
    an automated analysis of individual profiles to this, we realize the risks that
    can arise from the incorrect profiling of individuals.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们将大多数商业决策是基于对个人资料的自动化分析这一事实考虑进去时，我们意识到错误的个人资料分析可能带来的风险。
- en: Specifically, if a financial or insurance company denies an individual the signing
    of a financial contract on the basis of incorrect profiling, the individual is
    negatively discriminated because of the inadequate treatment of their personal
    data.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 具体来说，如果一家金融或保险公司因错误的个人画像拒绝个人签署金融合同，那么该个人就会因其个人数据处理不当而遭受负面歧视。
- en: Similarly, if a fraud detection algorithm reports a financial transaction as
    suspect by assessing the creditworthiness of the person who executed the transaction
    on the basis of incorrect profiling, in addition to reputational damage, there
    is a risk of incurring the sanctions envisaged for the illicit treatment of personal
    data.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 同样地，如果一个欺诈检测算法基于错误的个人画像判断某笔金融交易为可疑，评估执行交易的人的信用状况，那么除了名誉损害外，还可能面临因非法处理个人数据而受到的处罚。
- en: Even more serious consequences can be determined if the data being processed
    belongs to special categories (for example, biometric data such as iris, voice,
    fingerprints, face, and DNA) that are widely used in the cybersecurity field,
    for all the purposes of authentication, authorization, and detection.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 如果处理的数据属于特殊类别（例如，广泛用于网络安全领域的生物识别数据，如虹膜、声音、指纹、面部和DNA等），则可能会产生更严重的后果，这些数据被用于所有身份验证、授权和检测的目的。
- en: It therefore appears evident that guaranteeing the confidentiality and integrity
    of the data is of importance, not only in terms of security, but also in terms
    of legal liabilities deriving from failing to comply with national laws protecting
    privacy.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，确保数据的机密性和完整性显得尤为重要，不仅从安全角度来看，还从未遵守保护隐私的国家法律而产生的法律责任角度来看。
- en: To this end, it is appropriate to assure the adoption of data encryption in
    AI-based solutions, making sure to apply encryption to all the different states
    that the data can assume (data **in motion**, **in use**, and **at rest**).
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 为此，适当的做法是确保在基于人工智能的解决方案中采用数据加密，确保对数据可以处于的所有不同状态（**传输中的数据**、**使用中的数据**和**静态数据**）进行加密。
- en: Summary
  id: totrans-199
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we dealt with the assessment of our AI-based cybersecurity
    solutions, analyzing the aspects of security, data, and model quality, in order
    to guarantee the reliability and high availability of solutions deployed in production
    environments, without neglecting the requirements of privacy and confidentiality
    of the sensitive data used by algorithms.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们讨论了基于人工智能的网络安全解决方案的评估，分析了安全性、数据和模型质量的各个方面，以确保在生产环境中部署的解决方案的可靠性和高可用性，同时不忽视算法使用的敏感数据的隐私和机密性要求。
