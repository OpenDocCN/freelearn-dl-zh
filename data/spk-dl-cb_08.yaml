- en: Real Estate Value Prediction Using XGBoost
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 XGBoost 进行房地产价值预测
- en: The real estate market is one of the most competitive markets when it comes
    to pricing. This tends to vary significantly based on a number of factors such
    as the location, age of the property, size, and so on. Therefore, it has become
    a modern-day challenge to accurately predict the prices of properties (especially
    those in the housing market) in order to make better investment decisions. This
    chapter will deal with precisely that.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 房地产市场是定价竞争最激烈的市场之一。价格会因多种因素而大幅波动，例如位置、房产年龄、大小等。因此，准确预测房产（尤其是住房市场）的价格，已成为现代社会的一项挑战，目的是做出更好的投资决策。本章将专门讨论这一问题。
- en: 'After going through this chapter, you will be able to:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本章后，你将能够：
- en: Downloading the King County Housing sales dataset
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下载 King County 房屋销售数据集
- en: Performing exploratory analysis and visualization
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 执行探索性分析与可视化
- en: Plotting correlation between price and other features
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 绘制价格与其他特征之间的相关性
- en: Predicting the price of a house
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预测房屋价格
- en: Downloading the King County House sales dataset
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载 King County 房屋销售数据集
- en: We can't build a model without a dataset.  We will download our data in this
    section.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 我们无法在没有数据集的情况下建立模型。我们将在本节中下载数据。
- en: Getting ready
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: Kaggle ([https://www.kaggle.com/](https://www.kaggle.com/)) is a platform for
    predictive modeling and analytics competitions in which statisticians and data
    miners compete to produce the best models for predicting and describing the datasets
    uploaded by companies and users. The King County House Sales dataset contains
    records of 21,613 houses sold in King County, New York between 1900 and 2015\.
    The dataset also contains 21 different variables such as location, zip code, number
    of bedrooms, area of the living space, and so on, for each house.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: Kaggle ([https://www.kaggle.com/](https://www.kaggle.com/)) 是一个用于预测建模和分析竞赛的平台，统计学家和数据挖掘人员在其中竞争，旨在为公司和用户上传的数据集生成最优模型进行预测和描述。King
    County 房屋销售数据集包含了 1900 年至 2015 年间，在纽约 King County 销售的 21,613 套房屋的记录。数据集还包含了 21
    个不同的变量，如位置、邮政编码、卧室数量、居住空间面积等，每个房屋都有这些信息。
- en: How to do it...
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: The dataset can be accessed from the following website: [https://www.kaggle.com/harlfoxem/housesalesprediction](https://www.kaggle.com/harlfoxem/housesalesprediction). The
    dataset is from the public records of King County and is freely available to download
    and use in any analysis.
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可以从以下网址访问数据集：[https://www.kaggle.com/harlfoxem/housesalesprediction](https://www.kaggle.com/harlfoxem/housesalesprediction)。该数据集来自
    King County 的公共记录，免费下载并可用于任何分析。
- en: 'Once you arrive at the website, you can click on the Download button, as shown
    in the following screenshot:'
  id: totrans-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦进入网站，你可以点击下载按钮，如下图所示：
- en: '![](img/1418843f-ea70-4805-aefe-4217157d8bf5.png)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1418843f-ea70-4805-aefe-4217157d8bf5.png)'
- en: King County House Sales Dataset
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: King County 房屋销售数据集
- en: One file named `kc_house_data.csv` appears from the zipped, downloaded file,
    `housesalesprediction.zip`.
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从压缩的下载文件 `housesalesprediction.zip` 中会出现一个名为`kc_house_data.csv`的文件。
- en: Save the file named `kc_house_data.csv` in the current working directory as
    this will be our dataset. This will be loaded into the IPython notebook for analysis
    and predictions.
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将名为`kc_house_data.csv`的文件保存在当前工作目录中，因为这将是我们的数据集。该文件将被加载到 IPython 笔记本中进行分析和预测。
- en: How it works...
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'Install the necessary libraries for this chapter using the following code:'
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下代码安装本章所需的库：
- en: '[PRE0]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The preceding step should result in an output, as shown in the following screenshot:'
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 上一步应产生一个输出，示例如下图所示：
- en: '![](img/8468bb02-a4f0-4cc7-9c35-e9c233a25314.png)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8468bb02-a4f0-4cc7-9c35-e9c233a25314.png)'
- en: 'It is always a good idea to check the current working directory and set it
    to the directory in which the dataset is stored. This is shown in the following
    screenshot:'
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 始终建议检查当前工作目录，并将其设置为存储数据集的目录。示例如下图所示：
- en: '![](img/754ec71d-52f6-46c5-bb2a-d1ca6df174c2.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![](img/754ec71d-52f6-46c5-bb2a-d1ca6df174c2.png)'
- en: In our case, the folder named `Chapter 10` is set as the current working directory.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的案例中，名为 `Chapter 10` 的文件夹被设为当前工作目录。
- en: 'The data in the file is read into a Pandas dataframe named `dataframe` using
    the `read_csv()` function and the features/headers are listed out using the `list(dataframe)`
    command, as shown in the following screenshot:'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 文件中的数据通过 `read_csv()` 函数读取到名为 `dataframe` 的 Pandas 数据框中，并使用 `list(dataframe)`
    命令列出特征/头部信息，示例如下图所示：
- en: '![](img/9571e0c5-a17f-4c80-90c2-630c6758a39d.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9571e0c5-a17f-4c80-90c2-630c6758a39d.png)'
- en: As you may have noticed, the dataset contains 21 different variables such as
    id, date, price, bedrooms, bathrooms, and so on.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您可能已经注意到的那样，数据集包含 21 个不同的变量，如 id、日期、价格、卧室、浴室等。
- en: There's more...
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更多内容...
- en: 'The libraries used as well as their functions in this chapter are as follows:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 本章使用的库及其函数如下：
- en: '`Numpy`, which is used to wrangle data in the form of arrays as well as store
    lists of names in the form of arrays'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Numpy`，用于整理数组形式的数据以及以数组形式存储名称列表'
- en: '`Pandas`, which is used for all data wrangling and managing data in the form
    of dataframes'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Pandas`，用于所有数据整理和以数据帧形式管理数据'
- en: '`Seaborn`, which is a visualization library required for exploratory analysis
    and plots'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Seaborn`，这是一个用于探索性分析和绘图所需的可视化库'
- en: '`MPL_Toolkits`, which contains a number of functions and dependencies required
    by `Matplotlib`'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`MPL_Toolkits`，其中包含 `Matplotlib` 所需的多个函数和依赖项'
- en: Functions from the `Scikit Learn` library, which is the primary scientific and
    statistical library required in this chapter
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本章需要的科学和统计库 `Scikit Learn` 的函数
- en: We will also require some other libraries such as `XGBoost`, but those will
    be imported as required while building the model
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们还需要一些其他库，如 `XGBoost`，但在构建模型时会根据需要导入
- en: See also
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 另请参阅
- en: 'Further documentation about the different libraries can be found by visiting
    the following links:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过访问以下链接找到有关不同库的进一步文档：
- en: '[http://scikit-learn.org/stable/modules/preprocessing.html](http://scikit-learn.org/stable/modules/preprocessing.html)'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://scikit-learn.org/stable/modules/preprocessing.html](http://scikit-learn.org/stable/modules/preprocessing.html)'
- en: '[http://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.RFE.html](http://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.RFE.html)'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.RFE.html](http://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.RFE.html)'
- en: '[https://seaborn.pydata.org/](https://seaborn.pydata.org/)'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://seaborn.pydata.org/](https://seaborn.pydata.org/)'
- en: '[https://matplotlib.org/mpl_toolkits/index.html](https://matplotlib.org/mpl_toolkits/index.html)'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://matplotlib.org/mpl_toolkits/index.html](https://matplotlib.org/mpl_toolkits/index.html)'
- en: Performing exploratory analysis and visualization
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 执行探索性分析和可视化
- en: In situations where the goal is to predict a variable such as `price`, it helps
    to visualize the data and figure out how the dependent variable is being influenced
    by other variables. The exploratory analysis gives a lot of insight which is not
    readily available by looking at the data. This section of the chapter will describe
    how to visualize and draw insights from big data.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在预测诸如 `price` 这样的变量时，通过可视化数据并查明依赖变量如何受其他变量影响，可以帮助分析。探索性分析提供了许多通过查看数据无法立即获得的见解。本章节将描述如何从大数据中可视化并得出见解。
- en: Getting ready
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'The head of the `dataframe` can be printed using the `dataframe.head()` function
    which produces an output, as shown in the following screenshot:'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以使用 `dataframe.head()` 函数打印 `dataframe` 的头部，该函数产生一个输出，如下截图所示：
- en: '![](img/dfba4c24-6df3-4862-a8a5-0c532014e7b4.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![](img/dfba4c24-6df3-4862-a8a5-0c532014e7b4.png)'
- en: 'Similarly, the tail of the `dataframe` can be printed using the `dataframe.tail()`
    function, which produces an output, as shown in the following screenshot:'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 同样地，可以使用 `dataframe.tail()` 函数打印 `dataframe` 的尾部，该函数产生一个输出，如下截图所示：
- en: '![](img/c040272b-9388-4ddf-8b32-30a2b49bf7a1.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c040272b-9388-4ddf-8b32-30a2b49bf7a1.png)'
- en: 'The `dataframe.describe()` function is used to obtain some basic statistics
    such as the maximum, minimum, and mean values under each column. This is illustrated
    in the following screenshot:'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dataframe.describe()` 函数用于获取每列的最大、最小和平均值等一些基本统计数据。如下截图所示：'
- en: '![](img/04e8fb16-fcee-4045-bc2d-50dc46404791.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![](img/04e8fb16-fcee-4045-bc2d-50dc46404791.png)'
- en: dataframe.describe() function output
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '`dataframe.describe()` 函数的输出'
- en: As you can observe, the dataset has 21,613 records of houses sold between 1900
    and 2015.
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 正如您所见，数据集包含 21,613 条记录，这些记录是在 1900 年至 2015 年之间售出的房屋。
- en: On taking a closer look at the statistics, we realize that most houses sold
    have about three bedrooms on average. We can also see that the minimum number
    of bedrooms in a house is 0 and the largest house has 33 bedrooms and a living
    area of 13,540 square feet.
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 仔细查看统计数据后，我们意识到大多数售出的房屋平均有约三个卧室。我们还可以看到，房屋中卧室数量最少的是 0，而最大的房屋有 33 间卧室和 13,540
    平方英尺的生活空间。
- en: How to do it...
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Let''s plot the count of bedrooms in the whole dataset to see how three bedroom
    houses stand compared to houses with two or one bedrooms. This is done using the
    following code:'
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们绘制整个数据集中卧室数量的分布，看看三卧室房屋与二卧室或一卧室房屋相比如何。这可以通过以下代码完成：
- en: '[PRE1]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'We can also plot a pie chart of the same data using the following commands:'
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们还可以使用以下命令绘制相同数据的饼图：
- en: '[PRE2]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Next, let''s try to see the number of floors in houses that are sold most frequently
    in King County. This may be done by plotting a bar graph using the following commands:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，让我们尝试查看在金县最常售出的房屋的楼层数。这可以通过绘制柱状图来完成，命令如下：
- en: '[PRE3]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Next, we need to have an idea of what locations have the highest number of
    houses sold. We can do this by using the `latitude` and `longitude` variables
    from the dataset, as shown in the following code:'
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们需要了解哪些位置的房屋销售数量最多。我们可以通过使用数据集中的`latitude`和`longitude`变量来实现，代码如下：
- en: '[PRE4]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Let''s also take a look at how the prices compare for houses with different
    numbers of bedrooms by executing the following commands:'
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们通过执行以下命令，看看不同卧室数量的房屋价格如何比较：
- en: '[PRE5]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'A plot of the price of houses versus the number of bedrooms is obtained using
    the following commands:'
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令，我们可以得到房价与卧室数量之间的图表：
- en: '[PRE6]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Similarly, let''s see how the price compares to the living area of all the
    houses sold. This may be done by using the following commands:'
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 同样，让我们看看价格与所有已售房屋的居住面积之间的关系。这可以通过使用以下命令来实现：
- en: '[PRE7]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The condition of houses sold gives us some important information as well. Let''s
    plot this against the prices to get a better idea of the general trends. This
    is done using the following commands:'
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 售出房屋的状况也为我们提供了一些重要信息。让我们将其与价格进行对比，来更好地了解一般的趋势。这可以通过以下命令实现：
- en: '[PRE8]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'We can see which zip codes have the most house sales in King County by using
    the following commands:'
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以使用以下命令查看金县哪些邮政编码区域的房屋销售最多：
- en: '[PRE9]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Finally, plot the grade of each house versus the price to figure out the trends
    in house sales based on the grade given to each house using the following commands:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，绘制每套房屋的等级与价格的关系，以便通过使用以下命令找出基于房屋等级的销售趋势：
- en: '[PRE10]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: How it works...
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'The plot of bedroom counts must give an output, as shown in the following screenshot:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 卧室数量的图表应该生成如下输出：
- en: '![](img/d450a455-de95-4eef-944f-1e75086c0ca2.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d450a455-de95-4eef-944f-1e75086c0ca2.png)'
- en: It is evident that three bedroom houses are sold the most, followed by four
    bedroom houses, then by two bedroom houses, and then surprisingly by five bedroom
    and six bedroom houses.
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 很明显，三卧室房屋是销售最多的，其次是四卧室房屋，然后是二卧室房屋，出乎意料的是，五卧室和六卧室房屋的销售量也不低。
- en: 'The pie chart of the number of bedrooms gives an output that looks like the
    following screenshot:'
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 卧室数量的饼图生成的输出如下所示：
- en: '![](img/79c623be-2806-4f2e-842a-7bc0bdeabad6.png)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![](img/79c623be-2806-4f2e-842a-7bc0bdeabad6.png)'
- en: You will notice that three bedroom houses account for roughly 50% of all houses
    sold in King County. It looks like about 25% are four bedroom houses and the remaining
    25% is made up of houses with two, five, six bedrooms, and so on.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你会注意到，三卧室房屋大约占金县所有已售房屋的50%。看起来大约25%是四卧室房屋，剩下的25%则由二卧室、五卧室、六卧室房屋等组成。
- en: 'On running the script for most houses sold categorized by the number of floors,
    we notice the following output:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行脚本以根据楼层数对大多数出售的房屋进行分类时，我们会看到以下输出：
- en: '![](img/5d8acf59-ea2b-4372-9f1e-f062b3178fd0.png)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5d8acf59-ea2b-4372-9f1e-f062b3178fd0.png)'
- en: It is quite clear that single floor houses sell the most, followed by two-story
    houses. The count of houses with more than two stories is rather low, which is
    perhaps an indication of family sizes and the income of residents living in King
    County.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 很明显，单层房屋销售最多，其次是二层房屋。三层以上的房屋数量相对较少，这或许反映了金县居民的家庭规模和收入水平。
- en: 'On inspecting the density of houses sold at different locations, we obtain
    an output, as shown in the following screenshots. It is pretty clear that some
    locations see a higher density of house sales compared to others:'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查不同位置售出房屋的密度后，我们得到如下输出。从中可以明显看出，一些位置的房屋销售密度高于其他位置：
- en: '![](img/d08cc1fa-e81d-48a6-8733-f771069b394e.png)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d08cc1fa-e81d-48a6-8733-f771069b394e.png)'
- en: '![](img/0b39d95e-5e6a-4867-bfe2-ce6c557792dd.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0b39d95e-5e6a-4867-bfe2-ce6c557792dd.png)'
- en: From the trends observed in the preceding figure, it is easy to notice how a
    greater number of houses are sold between latitudes -122.2 and -122.4\. Similarly,
    the density of houses sold between longitudes 47.5 and 47.8 is higher compared
    to other longitudes. This could perhaps be an indication of safer and better-living
    communities compared to the other communities.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从前面图表观察到的趋势来看，很容易注意到，在经度 -122.2 到 -122.4 之间销售的房屋更多。同样，经度 47.5 到 47.8 之间销售的房屋密度比其他经度更高。这可能是对比其他社区更安全和居住质量更好的指示。
- en: 'On plotting the prices of houses versus the number of bedrooms in the house,
    we realize that the trends regarding the number of bedrooms in a house are directly
    proportional to the price up to six bedrooms, and then it becomes inversely proportional,
    as shown in the following screenshot:'
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当绘制房屋价格与房屋卧室数量的关系时，我们意识到关于房屋卧室数量的趋势与房价成正比，直到六个卧室，然后成为反比，如下面的截图所示：
- en: '![](img/576a5f38-1fbf-4f2e-a3ff-2f6afa6231fe.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![](img/576a5f38-1fbf-4f2e-a3ff-2f6afa6231fe.png)'
- en: 'Plotting the living area of each house against the price gives us an expected
    trend of increasing prices with the increasing size of the house. The most expensive
    house seems to have a living area of 12,000 square feet, as shown in the following
    screenshot:'
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 绘制每个房屋的生活区域与价格的关系图表明，随着房屋面积的增加，价格也在增加。最昂贵的房屋似乎有 12,000 平方英尺的生活面积，如下面的截图所示：
- en: '![](img/eb22a794-38a7-444e-9160-571a9c969178.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![](img/eb22a794-38a7-444e-9160-571a9c969178.png)'
- en: There's more...
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更多内容...
- en: 'On plotting the condition of houses versus price, we again notice an expected
    trend of increasing prices with higher condition ratings, as shown in the following
    screenshot. Interestingly, five bedroom prices have a lower mean price compared
    to four bedroom houses, which is possibly due to lesser buyers for such a big
    house:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当绘制房屋条件与价格的关系时，我们再次注意到一个预期的趋势：随着条件评级的提高，房价也在增加，如下面的截图所示。有趣的是，五卧房的价格比四卧房略低，这可能是因为对这么大的房子的购买者较少：
- en: '![](img/ff3ddb55-21ca-439f-9174-319c28610015.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ff3ddb55-21ca-439f-9174-319c28610015.png)'
- en: 'A plot of the Zipcode of the house versus price shows trends in the prices
    of houses in different zip codes. You may have noticed that certain zip codes,
    like the ones between 98100 and 98125, have a higher density of houses sold compared
    to other areas, while the prices of houses in zip codes like 98040 are higher
    than the average price, perhaps indicating a richer neighborhood, as shown in
    the following screenshot:'
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 房屋的邮政编码与价格的关系图显示了不同邮政编码地区房价的趋势。你可能已经注意到，像 98100 到 98125 这样的一些邮政编码区域，销售的房屋密度比其他地区高，而像
    98040 这样的邮政编码地区的房价高于平均价格，可能表明这是一个更富裕的社区，如下面的截图所示：
- en: '![](img/9dc53dc8-bfaa-4ad3-a050-a6e44201c4c3.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9dc53dc8-bfaa-4ad3-a050-a6e44201c4c3.png)'
- en: 'A plot of the grade of the house versus price shows a consistent increase in
    price with increasing grade. There seems to be a clear linear relationship between
    the two, as observed in the output of the following screenshots:'
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '房屋等级与价格的关系图显示了随着等级的增加，价格稳步增长的趋势。两者之间似乎存在明确的线性关系，正如下面截图中的结果所观察到的： '
- en: '![](img/45feb4d4-cb57-4bb2-9347-4e3e161f9b48.png)![](img/6d2edae4-4a3f-4318-96c0-ee6037cdf158.png)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![](img/45feb4d4-cb57-4bb2-9347-4e3e161f9b48.png)![](img/6d2edae4-4a3f-4318-96c0-ee6037cdf158.png)'
- en: See also
  id: totrans-101
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 另请参阅
- en: 'The following links give a good explanation of why data visualization is so
    important before running any model on the data:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的链接很好地解释了为什么在对数据运行任何模型之前，数据可视化如此重要：
- en: '[https://www.slideshare.net/Centerline_Digital/the-importance-of-data-visualization](https://www.slideshare.net/Centerline_Digital/the-importance-of-data-visualization)'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.slideshare.net/Centerline_Digital/the-importance-of-data-visualization](https://www.slideshare.net/Centerline_Digital/the-importance-of-data-visualization)'
- en: '[https://data-visualization.cioreview.com/cxoinsight/what-is-data-visualization-and-why-is-it-important-nid-11806-cid-163.html](https://data-visualization.cioreview.com/cxoinsight/what-is-data-visualization-and-why-is-it-important-nid-11806-cid-163.html)'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://data-visualization.cioreview.com/cxoinsight/what-is-data-visualization-and-why-is-it-important-nid-11806-cid-163.html](https://data-visualization.cioreview.com/cxoinsight/what-is-data-visualization-and-why-is-it-important-nid-11806-cid-163.html)'
- en: '[https://www.techchange.org/2015/05/19/data-visualization-analysis-international-development/](https://www.techchange.org/2015/05/19/data-visualization-analysis-international-development/)'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.techchange.org/2015/05/19/data-visualization-analysis-international-development/](https://www.techchange.org/2015/05/19/data-visualization-analysis-international-development/)'
- en: Plotting correlation between price and other features
  id: totrans-106
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 绘制价格与其他特征之间的相关性
- en: Now that the initial exploratory analysis is done, we have a better idea of
    how the different variables are contributing to the price of each house. However,
    we have no idea of the importance of each variable when it comes to predicting
    prices. Since we have 21 variables, it becomes difficult to build models by incorporating
    all variables in one single model. Therefore, some variables may need to be discarded
    or neglected if they have lesser significance than other variables.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，初步的探索性分析已经完成，我们对不同变量如何影响每栋房子的价格有了更好的了解。然而，我们并不知道每个变量在预测价格时的重要性。由于我们有 21 个变量，单纯将所有变量放入一个模型中构建会变得困难。因此，可能需要丢弃或忽略某些变量，特别是那些在预测中比其他变量重要性较低的变量。
- en: Getting ready
  id: totrans-108
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Correlation coefficients are used in statistics to measure how strong the relationship
    is between two variables. In particular, Pearson''s correlation coefficient is
    the most commonly used coefficient while performing linear regression. The correlation
    coefficient usually takes on a value between -1 and +1:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 相关系数在统计学中用于衡量两个变量之间关系的强度。特别是，在执行线性回归时，Pearson 相关系数是最常用的系数。相关系数通常在 -1 到 +1 之间取值：
- en: A correlation coefficient of 1 means that for every positive increase in one
    variable, there is a positive increase of a fixed proportion in the other. For
    example, shoe sizes go up in (almost) perfect correlation with foot length.
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 相关系数为 1 表示当一个变量增加时，另一个变量也会按照固定比例增加。例如，鞋码几乎与脚长呈完全正相关。
- en: A correlation coefficient of -1 means that for every positive increase in one
    variable, there is a negative decrease of a fixed proportion in the other. For
    example, the amount of gas in a tank decreases in (almost) perfect correlation
    with acceleration or the gear mechanism (more gas is used up by traveling for
    longer periods in first gear compared to fourth gear).
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 相关系数为 -1 表示当一个变量增加时，另一个变量会按照固定比例减少。例如，油箱中的油量与加速或换档机制几乎呈完全负相关（与第四档相比，在第一档行驶更长时间会消耗更多的油）。
- en: Zero means that for every increase, there isn't a positive or negative increase.
    The two just aren't related.
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 零表示对于每一个增加，既没有正向增加也没有负向增加。这两个变量之间没有关系。
- en: How to do it...
  id: totrans-113
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何进行...
- en: 'Begin by dropping the `id` and `date` features from the dataset using the following
    commands. We will not be using them in our predictions as the ID variables are
    all unique and have no values in our analysis while the dates require a different
    function to handle them correctly. This is left as an exercise for the reader
    to do:'
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先使用以下命令删除数据集中的 `id` 和 `date` 特征。我们在预测中不会使用它们，因为 ID 变量都是唯一的，且在我们的分析中没有值，而日期需要用不同的函数来正确处理。这个任务留给读者完成：
- en: '[PRE11]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Copy the dependent variable (house prices, in this case) into a new `dataframe`
    using the following commands:'
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令将因变量（本例中的房价）复制到一个新的 `dataframe` 中：
- en: '[PRE12]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The correlation between price and every other variable can be manually found
    using the following script:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可以使用以下脚本手动找到价格与其他变量之间的相关性：
- en: '[PRE13]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Besides the preceding method, an easier way to find the correlation between
    one variable and all other variables (or columns) in a `dataframe` is done by
    using just one line in the following manner:'
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 除了前面的方法，还有一种更简单的方法可以通过以下一行代码来查找一个变量与所有其他变量（或列）之间的相关性：
- en: '`x_df.corr().iloc[:,-19]`'
  id: totrans-121
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`x_df.corr().iloc[:,-19]`'
- en: 'The correlated variables may be plotted using the `seaborn` library and the
    following script:'
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可以使用 `seaborn` 库和以下脚本绘制相关变量：
- en: '[PRE14]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: How it works...
  id: totrans-124
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'After dropping the `id` and `date` variables, the new `dataframe`, which is
    named `x_df`, contains 19 variables or columns, as shown in the following screenshots.
    For the purposes of this book, only the first ten entries are printed out:'
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在删除了 `id` 和 `date` 变量后，新的 `dataframe`（命名为 `x_df`）包含 19 个变量或列，如以下截图所示。为了本书的目的，只打印出前十个条目：
- en: '![](img/5947e655-ab68-4eae-ae5e-ff998ebb810e.png)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5947e655-ab68-4eae-ae5e-ff998ebb810e.png)'
- en: First 10 entries of output
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 输出的前 10 个条目
- en: '![](img/dd5594a1-ba51-4ff7-8744-9372e4f8304c.png)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![](img/dd5594a1-ba51-4ff7-8744-9372e4f8304c.png)'
- en: 'On creating a new `dataframe` with only the dependent variable (price), you
    will see an output as follows. This new `dataframe` is named `y_df`. Again, only
    the first ten entries of the price column are printed for illustration purposes:'
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个只包含因变量（价格）的新`dataframe`时，您将看到如下输出。这个新`dataframe`命名为`y_df`。再次说明，这里只打印了价格列的前十条记录，供参考：
- en: '![](img/a3545d84-7266-45ef-8c49-c41be9c5f646.png)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a3545d84-7266-45ef-8c49-c41be9c5f646.png)'
- en: 'The correlation between price and other variables is shown in the following
    screenshot:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 价格与其他变量的相关性如下图所示：
- en: '![](img/e7e60e83-8105-406f-9785-a8ac48ce7b1f.png)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e7e60e83-8105-406f-9785-a8ac48ce7b1f.png)'
- en: You may have noticed that the `sqft_living` variable is most highly correlated
    with the price and has a correlation coefficient of 0.702035\. The next most highly
    correlated variable is `grade`, with a correlation coefficient of 0.667434 followed
    by `sqft_above`, which has a correlation coefficient of 0.605567\. `Zipcode` is
    the least correlated variable with price and has a correlation coefficient of
    -0.053202.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可能已经注意到，`sqft_living`变量与价格的相关性最高，其相关系数为0.702035。下一个最相关的变量是`grade`，其相关系数为0.667434，其次是`sqft_above`，其相关系数为0.605567。`Zipcode`是与价格最不相关的变量，相关系数为-0.053202。
- en: There's more...
  id: totrans-134
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更多内容…
- en: 'The correlation coefficients found using the simplified code gives the exact
    same values but also gives the correlation of price with itself, which turns out
    to be a value of 1.0000, as expected. This is illustrated in the following screenshot:'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用简化代码找到的相关系数给出了完全相同的值，但也给出了价格与其自身的相关系数，结果是1.0000，正如预期的那样。以下截图展示了这一点：
- en: '![](img/a5d1ae99-b800-4cc2-aa7b-a92ea9c816c4.png)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a5d1ae99-b800-4cc2-aa7b-a92ea9c816c4.png)'
- en: 'The coefficients of correlation plotted using the `seaborn` library are presented
    in the following screenshots. Note that price is on the x-axis for each plot:'
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`seaborn`库绘制的相关系数如下图所示。请注意，每个图的x轴上是价格：
- en: '![](img/b7fef6eb-566e-4c45-9d9f-188bac6b7f99.png)![](img/0fdb0e5e-5dae-41a8-9113-3c9d765b1f0c.png)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b7fef6eb-566e-4c45-9d9f-188bac6b7f99.png)![](img/0fdb0e5e-5dae-41a8-9113-3c9d765b1f0c.png)'
- en: Plotting of coefficients of correlation
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 相关系数的绘制
- en: '![](img/776bc86b-758a-40da-b11d-39383026c764.png)![](img/0f000cb8-e2b8-444e-aca2-0b102b8167b4.png)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![](img/776bc86b-758a-40da-b11d-39383026c764.png)![](img/0f000cb8-e2b8-444e-aca2-0b102b8167b4.png)'
- en: '![](img/b61392ab-2b70-4f1b-8eb6-58cc9cbd82bc.png)![](img/9bd74848-802a-4f92-b74d-82aafaeebb77.png)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b61392ab-2b70-4f1b-8eb6-58cc9cbd82bc.png)![](img/9bd74848-802a-4f92-b74d-82aafaeebb77.png)'
- en: '![](img/f0a57645-512a-4e2c-9ae8-a4b444e91017.png)![](img/3f55b2bf-0b18-4d52-b779-0e585dc8922b.png)![](img/becf6059-05a3-46a7-b0c4-2dee64fdc8ac.png)![](img/9eee10f5-0829-463f-a515-9dca39b6b5dc.png)![](img/4ebbfe26-13c3-4a11-8509-aaf80c8b9367.png)![](img/bda3931f-f6f9-464a-8f13-6e37c6384051.png)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f0a57645-512a-4e2c-9ae8-a4b444e91017.png)![](img/3f55b2bf-0b18-4d52-b779-0e585dc8922b.png)![](img/becf6059-05a3-46a7-b0c4-2dee64fdc8ac.png)![](img/9eee10f5-0829-463f-a515-9dca39b6b5dc.png)![](img/4ebbfe26-13c3-4a11-8509-aaf80c8b9367.png)![](img/bda3931f-f6f9-464a-8f13-6e37c6384051.png)'
- en: '![](img/9b0249f3-bd5e-48eb-9072-b13bcedbc464.png)![](img/ad86e758-0970-49ae-8708-821caf02caa8.png)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9b0249f3-bd5e-48eb-9072-b13bcedbc464.png)![](img/ad86e758-0970-49ae-8708-821caf02caa8.png)'
- en: '![](img/160aeefa-e74f-4429-bcf3-3b6916110947.png)![](img/6966a5ef-0441-4718-9145-f5e06680c4c5.png)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![](img/160aeefa-e74f-4429-bcf3-3b6916110947.png)![](img/6966a5ef-0441-4718-9145-f5e06680c4c5.png)'
- en: '![](img/d5d4c4e5-b53a-4f3b-bf6e-48b33e29713e.png)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d5d4c4e5-b53a-4f3b-bf6e-48b33e29713e.png)'
- en: See also
  id: totrans-146
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 另见
- en: 'The following links give an excellent explanation of Pearson''s correlation
    coefficient and how it is manually calculated:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 以下链接对Pearson相关系数及其手动计算方法提供了很好的解释：
- en: '[https://en.wikipedia.org/wiki/Pearson_correlation_coefficient](https://en.wikipedia.org/wiki/Pearson_correlation_coefficient)'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://en.wikipedia.org/wiki/Pearson_correlation_coefficient](https://en.wikipedia.org/wiki/Pearson_correlation_coefficient)'
- en: '[http://www.statisticshowto.com/probability-and-statistics/correlation-coefficient-formula/](http://www.statisticshowto.com/probability-and-statistics/correlation-coefficient-formula/)'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.statisticshowto.com/probability-and-statistics/correlation-coefficient-formula/](http://www.statisticshowto.com/probability-and-statistics/correlation-coefficient-formula/)'
- en: Predicting the price of a house
  id: totrans-150
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 预测房价
- en: This section will deal with building a simple linear model to predict house
    prices using all the features in the current `dataframe`. We will then evaluate
    the model and try to improve the accuracy by using a more complex model in the
    latter half of the section.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 本节将介绍如何使用当前`dataframe`中的所有特征来构建一个简单的线性模型以预测房价。然后，我们将评估该模型，并尝试在本节后半部分通过使用更复杂的模型来提高准确性。
- en: Getting ready
  id: totrans-152
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Visit the following links to understand how linear regression works and how
    to use the linear regression model in the Scikit Learn library:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 访问以下链接，了解线性回归是如何工作的以及如何在Scikit Learn库中使用线性回归模型：
- en: '[https://en.wikipedia.org/wiki/Linear_regression](https://en.wikipedia.org/wiki/Linear_regression)'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://en.wikipedia.org/wiki/Linear_regression](https://en.wikipedia.org/wiki/Linear_regression)'
- en: '[http://www.stat.yale.edu/Courses/1997-98/101/linreg.htm](http://www.stat.yale.edu/Courses/1997-98/101/linreg.htm)'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.stat.yale.edu/Courses/1997-98/101/linreg.htm](http://www.stat.yale.edu/Courses/1997-98/101/linreg.htm)'
- en: '[https://newonlinecourses.science.psu.edu/stat501/node/251/](https://newonlinecourses.science.psu.edu/stat501/node/251/)'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://newonlinecourses.science.psu.edu/stat501/node/251/](https://newonlinecourses.science.psu.edu/stat501/node/251/)'
- en: '[http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html](http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html)'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html](http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html)'
- en: '[http://scikit-learn.org/stable/modules/linear_model.html](http://scikit-learn.org/stable/modules/linear_model.html)'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://scikit-learn.org/stable/modules/linear_model.html](http://scikit-learn.org/stable/modules/linear_model.html)'
- en: How to do it...
  id: totrans-159
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做到...
- en: 'Drop the `Price` column from the `x_df` dataframe and save it into a new `dataframe`
    named `x_df2` using the following script:'
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从`x_df`数据框中删除`Price`列，并使用以下脚本将其保存到一个名为`x_df2`的新数据框中：
- en: '[PRE15]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Declare a variable named `reg` and equate it to the `LinearRegression()` function
    from the Scikit Learn library using the following script:'
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 声明一个名为`reg`的变量，并将其等式赋值给Scikit Learn库中的`LinearRegression()`函数，使用以下脚本：
- en: '[PRE16]'
  id: totrans-163
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Split the dataset into test and train using the following script:'
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下脚本将数据集拆分为测试集和训练集：
- en: '[PRE17]'
  id: totrans-165
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Fit the model over the training set using the following script:'
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下脚本在训练集上拟合模型：
- en: '[PRE18]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Print the coefficients generated from applying linear regression to the training
    and test sets by using the `reg.coef_` command.
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`reg.coef_`命令打印应用线性回归到训练集和测试集后生成的系数。
- en: 'Take a look at the column of predictions generated by the model using the following
    script:'
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下脚本查看模型生成的预测列：
- en: '[PRE19]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Print the accuracy of the model using the following command:'
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令打印模型的准确性：
- en: '[PRE20]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: How it works...
  id: totrans-173
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'The output after fitting the regression model to the training sets must look
    like the following screenshot:'
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在将回归模型拟合到训练集后，输出应如下所示：
- en: '![](img/ae9a4976-9769-413d-ac56-93fcc083c95e.png)'
  id: totrans-175
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ae9a4976-9769-413d-ac56-93fcc083c95e.png)'
- en: 'The `reg.coeff_` command generates 18 coefficients, one for each variable in
    the dataset, as shown in the following screenshot:'
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`reg.coeff_`命令生成18个系数，每个变量对应一个系数，如下截图所示：'
- en: '![](img/b6a35bbc-1717-4e16-85de-5c44ab3e0ac6.png)'
  id: totrans-177
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b6a35bbc-1717-4e16-85de-5c44ab3e0ac6.png)'
- en: The coefficients of features/variables with the most positive values have a
    higher significance on price predictions when compared to the coefficients of
    features/variables which have negative values. This is the main importance of
    the regression coefficients.
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 特征/变量的系数中，值最正的那些对价格预测的影响更大，相比之下，值为负的特征/变量系数对价格预测的影响较小。这就是回归系数的重要性所在。
- en: 'On printing the predictions, you must see an output which is an array of values
    from 1 to 21,612, one value for each row in the dataset, as shown in the following
    screenshot:'
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打印预测结果时，您必须看到一个输出，这是一个从1到21,612的值数组，每一行代表数据集中的一个值，截图如下所示：
- en: '![](img/e892b589-6413-429f-b934-2ec14160be5b.png)'
  id: totrans-180
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e892b589-6413-429f-b934-2ec14160be5b.png)'
- en: 'Finally, on printing the accuracy of the model, we obtained an accuracy of
    70.37%, which is not bad for a linear model. This is illustrated in the following
    screenshot:'
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，在打印模型的准确性时，我们得到了70.37%的准确率，对于一个线性模型来说，这个结果还不错。以下是该截图：
- en: '![](img/720263f1-805b-4f7a-8bba-6acdba8feb87.png)'
  id: totrans-182
  prefs: []
  type: TYPE_IMG
  zh: '![](img/720263f1-805b-4f7a-8bba-6acdba8feb87.png)'
- en: There's more...
  id: totrans-183
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'The linear model does alright at its first attempt, but if we want our model
    to be more accurate, we will have to use a more complex model with some non-linearities
    in order to fit well to all the data points. XGBoost is the model we will be using
    in this section in order to try and improve the accuracy obtained through linear
    regression. This is done in the following manner:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 线性模型在第一次尝试时表现尚可，但如果我们希望模型更准确，我们需要使用一个更复杂的模型，带有一些非线性部分，以便更好地拟合所有数据点。XGBoost是我们在本节中将使用的模型，目的是通过线性回归提高准确性。方法如下：
- en: Import the `XGBoost` library using the `import xgboost` command.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`import xgboost`命令导入`XGBoost`库。
- en: 'In case this produces an error, you will have to do a pip install of the library
    through the terminal. This can be done by opening up a new terminal window and
    issuing the following command:'
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果出现错误，您需要通过终端使用 `pip install` 安装该库。可以通过打开一个新的终端窗口并执行以下命令来完成此操作：
- en: '[PRE21]'
  id: totrans-187
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'At this stage, you must see an output which looks like the one shown in the
    following screenshot:'
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此阶段，您应该会看到类似以下截图的输出：
- en: '![](img/4b328511-f9b9-4f4c-9987-dca58bb592c3.png)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4b328511-f9b9-4f4c-9987-dca58bb592c3.png)'
- en: 'At this stage, you will be prompted to enter your password. After homebrew
    is installed, you will see an output like the one shown in the following screenshot:'
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此阶段，系统会提示您输入密码。安装 homebrew 后，您将看到类似以下截图的输出：
- en: '![](img/0c8777b2-e2b2-4e1b-b775-50723159d79c.png)'
  id: totrans-191
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0c8777b2-e2b2-4e1b-b775-50723159d79c.png)'
- en: 'Next, install Python using the following command:'
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，使用以下命令安装 Python：
- en: '`brew install python`'
  id: totrans-193
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`brew install python`'
- en: Check your installation using the `brew doctor` command and follow homebrew's
    suggestions.
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 `brew doctor` 命令检查您的安装，并根据 homebrew 的建议进行操作。
- en: 'Once `Homebrew` is installed, do a pip install of XGBoost using the following
    command:'
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦 `Homebrew` 安装完成，使用以下命令进行 XGBoost 的 pip 安装：
- en: '`pip install xgboost`'
  id: totrans-196
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`pip install xgboost`'
- en: Once it finishes installing, you should be able to import XGBoost into the IPython
    environment.
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，您应该能够将 XGBoost 导入到 IPython 环境中。
- en: 'Once XGBoost is imported successfully into the Jupyter environment, you will
    be able to use the functions within the library to declare and store the model.
    This can be done in the following steps:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦 XGBoost 成功导入到 Jupyter 环境中，您将能够使用库中的函数来声明并存储模型。可以按照以下步骤进行：
- en: 'Declare a variable named `new_model` to store the model and declare all its
    hyperparameters using the following command:'
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 声明一个名为 `new_model` 的变量来存储模型，并使用以下命令声明所有超参数：
- en: '[PRE22]'
  id: totrans-200
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'The output of the preceding command must look like the one in the following
    screenshot:'
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前述命令的输出必须看起来像以下截图所示：
- en: '![](img/423b4265-fb23-40d7-9e2c-4ccd656ac6b9.png)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
  zh: '![](img/423b4265-fb23-40d7-9e2c-4ccd656ac6b9.png)'
- en: 'Split the data into test and training sets and fit the new model to the split
    data using the following commands:'
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将数据拆分为测试集和训练集，并使用以下命令将新模型拟合到拆分的数据上：
- en: '[PRE23]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'At this point, you will see an output like the one shown in the following screenshot:'
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此时，您将看到类似以下截图的输出：
- en: '![](img/a94abfb7-7ec5-42a3-83a4-4193c2ece623.png)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a94abfb7-7ec5-42a3-83a4-4193c2ece623.png)'
- en: 'Finally, use the newly fitted model to predict the house prices and evaluate
    the new model using the following commands:'
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，使用新训练的模型来预测房价，并使用以下命令评估新模型：
- en: '[PRE24]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'On executing the preceding commands, you must see an output like the one shown
    in the following screenshot:'
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行前述命令后，您应该会看到类似以下截图的输出：
- en: '![](img/1be540f0-1845-4248-82ca-95fa0ffebf74.png)'
  id: totrans-210
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1be540f0-1845-4248-82ca-95fa0ffebf74.png)'
- en: Notice that the new model's accuracy is now 87.79 %, which is approximately
    88%. This is considered optimal.
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请注意，新模型的准确率现在是 87.79%，大约为 88%。这被认为是最优的。
- en: In this case, the `number of estimators` is set to 750\. After experimenting
    between 100 to 1,000, it was determined that 750 estimators gave the most optimal
    accuracy. The `learning rate` is set to 0.09\. `Subsample rate` is set at 65%.
    `Max_depth` is set at 7\. There didn't seem to be too much influence of `max_depth`
    over the model's accuracy. However, the accuracy did show improvement in using
    slower learning rates. By experimenting with various hyperparameters, we were
    able to further improve accuracy to 89%.
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这种情况下，`number of estimators` 设置为 750。经过在 100 到 1,000 之间的实验后，确定 750 个估算器能够提供最佳的准确率。`learning
    rate` 设置为 0.09。`Subsample rate` 设置为 65%。`Max_depth` 设置为 7。似乎 `max_depth` 对模型准确性的影响不大。然而，使用较慢的学习率时，准确率有所提高。通过调整各种超参数，我们进一步将准确率提高到
    89%。
- en: Future steps involve one hot encoding variables such as bedrooms, bathrooms,
    floors, zipcodes, and so on, and normalizing all the variables before model fitting.
    Try to tune the hyperparameters such as learning rate, number of estimators in
    the XGBoost model, subsampling rates, and so on to see how they influence model
    accuracy. This is left as an exercise for the reader.
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来的步骤包括对卧室、浴室、楼层、邮政编码等变量进行独热编码，并在模型拟合之前对所有变量进行标准化。尝试调优超参数，如 XGBoost 模型中的学习率、估算器数量、子采样率等，观察它们如何影响模型的准确性。这部分留给读者作为练习。
- en: Also, you may want to try and use cross-validation along with XGBoost in order
    to figure out the optimal number of trees in the model, which would further improve
    accuracy.
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此外，您可能希望尝试在XGBoost中使用交叉验证，以找出模型中树的最佳数量，这将进一步提高准确性。
- en: Another exercise that can be done is using different sizes of test and train
    datasets as well as incorporating the `date` variable during training. In our
    case, we have split it into a ratio of 80% training data and 20% test data. Try
    to increase the test set to 40% and see how the model accuracy changes.
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 另一个可以尝试的练习是在训练过程中使用不同大小的测试和训练数据集，并在训练中加入`date`变量。在我们的案例中，我们已将其拆分为80%的训练数据和20%的测试数据。尝试将测试集增加到40%，并查看模型准确度的变化。
- en: See also
  id: totrans-216
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 另请参阅
- en: 'Visit the following links to understand how to tune the hyperparameters in
    the XGBoost model as well as how to implement cross-validation with XGBoost:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 访问以下链接了解如何调整XGBoost模型中的超参数以及如何在XGBoost中实施交叉验证：
- en: '[https://xgboost.readthedocs.io/en/latest/python/index.html](https://xgboost.readthedocs.io/en/latest/python/index.html)'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://xgboost.readthedocs.io/en/latest/python/index.html](https://xgboost.readthedocs.io/en/latest/python/index.html)'
- en: '[http://xgboost.readthedocs.io/en/latest/get_started/](http://xgboost.readthedocs.io/en/latest/get_started/)'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://xgboost.readthedocs.io/en/latest/get_started/](http://xgboost.readthedocs.io/en/latest/get_started/)'
- en: '[https://www.kaggle.com/cast42/xg-cv](https://www.kaggle.com/cast42/xg-cv)'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://www.kaggle.com/cast42/xg-cv](https://www.kaggle.com/cast42/xg-cv)'
