- en: '11'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '11'
- en: Privacy and Security
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 隐私与安全
- en: In the preceding chapters, we’ve demonstrated the process of crafting and implementing
    practical solutions using **Azure OpenAI** (**AOAI**) in conjunction with various
    Azure AI services. In this chapter, we will focus on privacy and security considerations
    related to AOAI.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的章节中，我们演示了如何使用 **Azure OpenAI** (**AOAI**) 与各种 Azure AI 服务结合，制定和实施实际解决方案。在本章中，我们将重点讨论与
    AOAI 相关的隐私和安全考虑。
- en: 'In this chapter, we’re going to cover the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论以下主题：
- en: AOAI service compliance
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: AOAI 服务合规性
- en: AOAI data privacy
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: AOAI 数据隐私
- en: Content filtering
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内容过滤
- en: Managed identities
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理身份
- en: '**Virtual Network** (**VNet**) configuration'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**虚拟网络** (**VNet**) 配置'
- en: Private endpoint configuration
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 私有端点配置
- en: Data encryption
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据加密
- en: Responsible AI for AOAI
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 负责任的 AI for AOAI
- en: AOAI service compliance
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: AOAI 服务合规性
- en: 'The AOAI compliance program is a set of policies and practices that Microsoft
    has established to ensure that the AOAI service is used in a responsible and ethical
    manner. The program includes the following aspects:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: AOAI 合规性计划是一系列微软制定的政策和实践，旨在确保 AOAI 服务以负责任和道德的方式使用。该计划包括以下几个方面：
- en: '**Data, privacy, and security**: Microsoft provides details on how data provided
    by customers to the AOAI service is processed, used, and stored.'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据、隐私和安全**：微软提供了客户向 AOAI 服务提供的数据如何被处理、使用和存储的详细信息。'
- en: '**Responsible AI practices**: Microsoft offers technical guidance and tools
    to support customers in responsibly designing, developing, deploying, and utilizing
    AI systems that incorporate AOAI models. These recommendations align with the
    Microsoft Responsible AI Standard and encompass four key stages: Identification,
    Measurement, Mitigation, and Operation.'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**负责任的 AI 实践**：微软提供技术指导和工具，帮助客户负责任地设计、开发、部署和使用集成 AOAI 模型的 AI 系统。这些建议与微软负责任
    AI 标准相一致，涵盖了四个关键阶段：识别、衡量、缓解和操作。'
- en: '**Code of conduct**: Microsoft defines the requirements that all AOAI Service
    implementations must adhere to in good faith. The code of conduct covers topics
    such as acceptable use, harmful content, human interaction, attribution, and feedback.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**行为准则**：微软定义了所有 AOAI 服务实施必须遵守的要求，并要求以诚信的方式执行。行为准则涵盖了可接受的使用、害内容、人际互动、归属以及反馈等主题。'
- en: '**Federal Risk and Authorization Management Program (FedRAMP) High Authorization**:
    Microsoft has obtained FedRAMP High Authorization for the AOAI service within
    the Azure Commercial environment. This means that the service meets the highest
    level of security standards required by the federal government for **cloud service**
    **providers** (**CSPs**).'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**联邦风险与授权管理计划（FedRAMP）高授权**：微软已经获得了 Azure 商业环境下 AOAI 服务的 FedRAMP 高级授权。这意味着该服务符合联邦政府对
    **云服务** **提供商** (**CSPs**) 所要求的最高安全标准。'
- en: '**Health Insurance Portability and Accountability Act (HIPAA) compliance**:
    Microsoft has confirmed that the AOAI service can be used in a HIPAA-compliant
    manner. This means that customers can use the service to process **protected health
    information** (**PHI**) in accordance with the HIPPA in respect of the **Business
    Associate Agreement** (**BAA**). The BAA is a critical document for ensuring that
    PHI is handled securely and in compliance with HIPAA regulations when it is managed
    by third-party business associates.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**健康保险流通与问责法案（HIPAA）合规性**：微软确认 AOAI 服务可以以符合 HIPAA 的方式使用。这意味着客户可以使用该服务处理 **受保护健康信息**
    (**PHI**)，并按照 HIPAA 规定以及 **商业伙伴协议** (**BAA**) 进行处理。BAA 是确保第三方商业伙伴在管理 PHI 时遵守 HIPAA
    规定并安全处理 PHI 的重要文件。'
- en: '**System and Organization Controls (SOC) 1, 2, 3**: SOC 1, SOC 2, and SOC 3
    are compliance standards and frameworks related to the security and integrity
    of service organizations’ systems and data. They are developed and maintained
    by the **American Institute of Certified Public Accountants** (**AICPA**). These
    standards help organizations demonstrate their commitment to protecting sensitive
    information and ensuring the reliability of their systems and services to clients
    and stakeholders. AOAI handles data for delivering its service and for keeping
    an eye out for any misuse that goes against the product terms. Your prompts (inputs)
    and completions (outputs), along with your embeddings and training data, are not
    shared with other customers, OpenAI, Microsoft, or any third-party products or
    services. AOAI models that customers fine-tuned are solely for their own use.
    Microsoft completely manages the AOAI service, hosting OpenAI models in its Azure
    environment, and the service doesn’t connect with any services run by OpenAI.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**系统和组织控制（SOC）1、2、3**：SOC 1、SOC 2和SOC 3是与服务组织系统和数据的安全性及完整性相关的合规标准和框架，由**美国注册会计师协会**（**AICPA**）开发和维护。这些标准帮助组织展示其在保护敏感信息和确保系统及服务的可靠性方面的承诺，服务对象包括客户和利益相关者。AOAI处理数据用于提供服务，并监控任何违反产品条款的滥用行为。您的提示（输入）和完成（输出），以及您的嵌入和训练数据，不会与其他客户、OpenAI、Microsoft或任何第三方产品或服务共享。客户微调的AOAI模型仅供其自身使用。Microsoft完全管理AOAI服务，在其Azure环境中托管OpenAI模型，并且该服务不会与OpenAI运营的任何服务连接。'
- en: The AOAI service complies with various certifications and standards to ensure
    its reliability and security. These include **Cloud Security Alliance Security,
    Trust, Assurance, and Risk** (**CSA STAR**) Certification and Attestation, ISO
    20000-1:2018, ISO 22301:2019, ISO 27001:2022, ISO 27017:2015, ISO 27018:2019,
    ISO 27701:2019, ISO 9001:2015, SOC 1, 2, and 3, **Global System for Mobile Communications
    Security** **Accreditation Scheme-Subscription Management** (**GSMA SAS-SM**),
    HIPAA BAA, the **Health Information Trust Alliance** (**HITRUST**), **Payment
    Card Industry 3-D Secure** (**PCI 3DS**), the **PCI Data Security Standard** (**PCI
    DSS**), **Germany Cloud Computing Compliance Controls Catalog** (**Germany C5**),
    Singapore **Multi-Tier Cloud Security** (**MTCS**) Level 3, and Singapore **Outsourced
    Service Provider’s Audit Report** (**OSPAR**). This adherence to various compliance
    standards ensures that the AOAI service maintains high levels of security and
    reliability for its users.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: AOAI服务遵守多个认证和标准，以确保其可靠性和安全性。这些认证包括**云安全联盟安全、信任、保证与风险**（**CSA STAR**）认证和声明，ISO
    20000-1:2018，ISO 22301:2019，ISO 27001:2022，ISO 27017:2015，ISO 27018:2019，ISO 27701:2019，ISO
    9001:2015，SOC 1、2和3，**全球移动通信系统安全** **认证方案-订阅管理**（**GSMA SAS-SM**），HIPAA BAA，**健康信息信任联盟**（**HITRUST**），**支付卡行业3-D安全**（**PCI
    3DS**），**PCI数据安全标准**（**PCI DSS**），**德国云计算合规控制目录**（**Germany C5**），新加坡**多层次云安全**（**MTCS**）三级认证，以及新加坡**外包服务提供商审计报告**（**OSPAR**）。这些合规标准的遵循确保了AOAI服务为用户提供高水平的安全性和可靠性。
- en: Important note
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 重要说明
- en: 'Azure continually assesses the AOAI service to incorporate additional compliance
    certifications. To access the most up-to-date compliance attestation information
    for various Azure products, please visit the following link: [https://servicetrust.microsoft.com/DocumentPage/7adf2d9e-d7b5-4e71-bad8-713e6a183cf3](https://servicetrust.microsoft.com/DocumentPage/7adf2d9e-d7b5-4e71-bad8-713e6a183cf3).'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: Azure持续评估AOAI服务，以便纳入更多的合规认证。要访问最新的合规认证信息，请访问以下链接：[https://servicetrust.microsoft.com/DocumentPage/7adf2d9e-d7b5-4e71-bad8-713e6a183cf3](https://servicetrust.microsoft.com/DocumentPage/7adf2d9e-d7b5-4e71-bad8-713e6a183cf3)。
- en: Having covered AOAI compliance, let’s now direct our attention to the subject
    of data privacy in the upcoming section.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在介绍完AOAI合规性后，我们将把注意力转向下一节，讨论数据隐私问题。
- en: AOAI data privacy
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: AOAI数据隐私
- en: This section provides insights into the processing, utilization, and storage
    of data you submit to the AOAI service.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 本节将介绍您提交给AOAI服务的数据的处理、使用和存储方式。
- en: AOAI models are stateless, which means that they do not store or remember any
    information from previous inputs or outputs. Instead, they solely process the
    current input and generate an output based on their model parameters, as well
    as any optional settings such as temperature or frequency penalty. This design
    choice enhances the models’ adaptability and scalability but presents challenges
    when dealing with tasks that require context or memory.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: AOAI模型是无状态的，这意味着它们不会存储或记住任何来自先前输入或输出的信息。相反，它们仅处理当前输入，并根据模型参数以及任何可选设置（如温度或频率惩罚）生成输出。这个设计选择提高了模型的适应性和可扩展性，但在处理需要上下文或记忆的任务时会带来挑战。
- en: To address this limitation, you can include relevant context or historical information
    within the input or leverage external data sources to supplement the input with
    additional details. Nevertheless, such practices can introduce potential risks,
    including concerns related to data privacy and security, as well as the potential
    for misuse or abuse of the models. Consequently, Microsoft has instituted various
    safeguards to protect its models and users from these potential threats. These
    measures encompass content filtering, rate limiting, and data processing policies.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 为了应对这一限制，您可以在输入中包含相关的上下文或历史信息，或者利用外部数据源来补充输入的额外细节。然而，这样的做法可能会带来潜在的风险，包括数据隐私和安全方面的顾虑，以及模型滥用或误用的潜在风险。因此，Microsoft已实施多种保障措施，以保护其模型和用户免受这些潜在威胁。这些措施包括内容过滤、速率限制和数据处理政策。
- en: Important note
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 重要说明
- en: Data pertaining to prompts, completions, embeddings, and training is strictly
    confined, with no access granted to others or utilization for improving OpenAI
    or any Microsoft/third-party products. Fine-tuned AOAI models are solely accessible
    for user use, exclusively controlled by Microsoft within the AOAI service, distinct
    from services provided by OpenAI such as ChatGPT or OpenAI API.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 与提示、完成、嵌入和训练相关的数据严格保密，不允许他人访问或用于改进OpenAI或任何Microsoft/第三方产品。微调后的AOAI模型仅供用户使用，完全由Microsoft在AOAI服务中控制，区别于OpenAI提供的服务，如ChatGPT或OpenAI
    API。
- en: 'AOAI handles several categories of data:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: AOAI处理多个类别的数据：
- en: '**Prompts and completion data**: Users submit prompts, and the service generates
    content through operations such as completions and chat completions, as well as
    dealing with images and embeddings'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**提示和完成数据**：用户提交提示，服务通过操作（如完成和对话完成）以及处理图像和嵌入来生成内容。'
- en: '**Augmented data associated with prompts**: Through the On Your Data feature,
    the service accesses data from a specified data store and enhances prompts with
    this data, resulting in content that is directly connected to your dataset'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**与提示相关的增强数据**：通过“您的数据”功能，服务从指定的数据存储中访问数据，并用这些数据增强提示，生成与您的数据集直接相关的内容。'
- en: '**Training and validation data**: Users have the option to supply their own
    training data, consisting of pairs of prompts and completions, which can be used
    to fine-tune an OpenAI model for specific purposes'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**训练和验证数据**：用户可以选择提供自己的训练数据，包括一对对的提示和完成内容，供微调OpenAI模型以实现特定目的。'
- en: 'The diagram provided here outlines the AOAI data processing flow along with
    content filtering, which we will talk about in the next section:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 这里提供的图表概述了AOAI的数据处理流程以及内容过滤，我们将在下一节中讨论这些内容：
- en: '![Figure 11.1: AOAI data flows for inference and fine-tuning](img/B21019_11_1.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.1: AOAI 推理和微调的数据流](img/B21019_11_1.jpg)'
- en: 'Figure 11.1: AOAI data flows for inference and fine-tuning'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '图 11.1: AOAI 推理和微调的数据流'
- en: 'This encompasses three distinct processing scenarios:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 这包括三种不同的处理场景：
- en: '**Processing prompts for content generation**: The top section illustrates
    how the AOAI service takes your prompts and generates content, including cases
    where additional data from an external source is incorporated into prompts using
    the AOAI On Your Data feature.'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**处理内容生成的提示**：顶部部分展示了AOAI服务如何处理您的提示并生成内容，包括将外部数据源的数据通过AOAI的“您的数据”功能融合到提示中的情况。'
- en: '**Creating fine-tuned (custom) models**: The bottom section outlines how the
    AOAI service utilizes your training data to craft fine-tuned models, tailored
    to your specific requirements and preferences.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**创建微调（自定义）模型**：底部部分概述了AOAI服务如何利用您的训练数据来打造微调模型，以满足您的特定需求和偏好。'
- en: '**Content filtering by the AOAI service and Microsoft Personnel**: The diagram
    also demonstrates how the AOAI service, in conjunction with Microsoft Personnel,
    conducts an analysis of prompts, completions, and images. This analysis is designed
    to identify potentially harmful content and patterns that may indicate the misuse
    of the service, in violation of the code of conduct or other relevant product
    terms.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**AOAI 服务与微软人员的内容过滤**：该图还展示了 AOAI 服务如何与微软人员合作，对提示、完成内容和图像进行分析。这项分析旨在识别潜在的有害内容和可能表明服务滥用的模式，这些行为可能违反行为准则或其他相关的产品条款。'
- en: Models, whether they are the base models or fine-tuned versions, that are deployed
    within your resource are responsible for processing the input prompts you provide
    and generating responses, which can include text, images, or embeddings. The service
    operates in a synchronous manner, evaluating the prompt and completion data in
    real time to actively monitor for potentially harmful content types. If generated
    content surpasses the thresholds configured for this purpose, the service will
    halt the generation of such content to maintain a safe and compliant environment.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 不论是基础模型还是经过微调的版本，部署在您的资源中的模型负责处理您提供的输入提示并生成响应，这些响应可以是文本、图像或嵌入。服务以同步方式运行，实时评估提示和完成内容数据，以主动监控可能的有害内容类型。如果生成的内容超出了为此目的配置的阈值，服务将停止生成此类内容，以保持安全和合规的环境。
- en: Let’s discuss the data flows for the On Your Data feature in AOAI. This feature
    involves the interaction between the AOAI service and external data sources to
    augment prompts and generate content.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们讨论一下 AOAI 中“On Your Data”功能的数据流。该功能涉及 AOAI 服务与外部数据源之间的交互，用以增强提示并生成内容。
- en: The On Your Data feature in AOAI enables you to establish connections with external
    data sources, allowing the generated results to be closely tied to your specific
    data. Importantly, this data remains securely stored within the designated data
    source and location; no data is duplicated or copied into the AOAI service itself.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: AOAI 中的“On Your Data”功能使您能够与外部数据源建立连接，从而使生成的结果与您的特定数据紧密相关。重要的是，这些数据会安全地存储在指定的数据源和位置；数据不会被复制或复制到
    AOAI 服务本身。
- en: 'When a user submits a prompt, the service dynamically retrieves pertinent data
    from the connected external data source and enhances the user’s prompt with this
    additional contextual information. Subsequently, the model processes this augmented
    prompt, and the resulting generated content is then returned; this technique is
    called **Retrieval Augmented Generation** (**RAG**). This mechanism ensures that
    the output is grounded in your data without compromising data security or privacy.
    The following diagram illustrates the entire process:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 当用户提交提示时，服务动态地从连接的外部数据源中检索相关数据，并使用这些附加的上下文信息增强用户的提示。随后，模型处理增强后的提示，生成的内容将返回；这种技术称为**检索增强生成**（**RAG**）。该机制确保输出与您的数据相一致，同时不妥协数据安全或隐私。下图展示了整个过程：
- en: '![Figure 11.2: AOAI data flows for On Your Data](img/B21019_11_2.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.2：AOAI 数据流图（On Your Data）](img/B21019_11_2.jpg)'
- en: 'Figure 11.2: AOAI data flows for On Your Data'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.2：AOAI 数据流图（On Your Data）
- en: In both diagrams, you may have observed that AOAI monitors abusive content asynchronously.
    Let’s delve into the upcoming section to gain a better understanding of how AOAI
    prevents abuse and the generation of harmful content.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在这两个图中，您可能已经注意到，AOAI 异步监控滥用内容。让我们深入探讨接下来的部分，以更好地了解 AOAI 如何防止滥用和有害内容的生成。
- en: Preventing abuse and harmful content generation
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 防止滥用和有害内容生成
- en: To mitigate the risk of the AOAI service being used for harmful purposes, it
    incorporates both content filtering and abuse monitoring features.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 为了降低 AOAI 服务被用于有害目的的风险，它结合了内容过滤和滥用监控功能。
- en: Real-time content filtering occurs as the service processes prompts to produce
    content. Prompts and generated results are not used for training, retraining,
    or improving content classifier models, nor are they stored within these models.
    Further details on content filtering will be provided in a subsequent section
    of this chapter.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 实时内容过滤发生在服务处理提示以生成内容时。提示和生成的结果不会用于训练、重新训练或改进内容分类模型，也不会存储在这些模型中。关于内容过滤的更多详细信息将在本章的后续部分提供。
- en: Abuse monitoring involves identifying and handling instances of recurring content
    and behaviors that suggest possible breaches of the code of conduct or other relevant
    product terms. In order to detect and tackle abuse, AOAI securely retains all
    prompts and generated content for a maximum period of 30 days.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 滥用监控涉及识别和处理重复出现的内容和行为，这些行为可能表明违反了行为准则或其他相关产品条款。为了检测并应对滥用行为，AOAI 会安全地保存所有提示和生成内容，最长保留
    30 天。
- en: The data storage system housing prompts and completions is logically separated
    by customer resource, with each request specifying the resource ID of the customer’s
    AOAI resource. In every region where the AOAI service is available, there exists
    a distinct data repository. A customer’s prompts and generated content are stored
    within the Azure region where their AOAI service resource is deployed, all within
    the predefined boundaries of the AOAI service. Human reviewers responsible for
    evaluating potential abuse can access prompt and completion data only when it
    has been flagged by the abuse monitoring system. These reviewers are authorized
    Microsoft employees who access the data through point-wise queries using request
    IDs, **Secure Access Workstations** (**SAWs**), and **Just-In-Time** (**JIT**)
    request approvals provided by team managers. In the instance of AOAI Service deployed
    in the **European Economic Area** (**EEA**), the authorized Microsoft employees
    are situated within the EEA.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 存储提示和完成内容的数据存储系统是按客户资源逻辑分隔的，每个请求都会指定客户 AOAI 资源的资源 ID。在 AOAI 服务可用的每个区域，都存在一个独立的数据存储库。客户的提示和生成的内容存储在其
    AOAI 服务资源部署的 Azure 区域内，且都在 AOAI 服务的预定义边界内。负责评估潜在滥用行为的人类审查员只能在滥用监控系统标记了相关数据时访问提示和完成数据。这些审查员是授权的微软员工，通过使用请求
    ID、**安全访问工作站**（**SAWs**）和由团队经理提供的**即时请求批准**（**JIT**）来进行逐点查询。若 AOAI 服务部署在**欧洲经济区**（**EEA**）内，授权的微软员工将位于
    EEA 内。
- en: 'Certain customers may require the utilization of the AOAI service for handling
    sensitive, highly confidential, or legally regulated input data, despite the minimal
    risk of generating harmful outputs or misuse. These customers may find themselves
    unable or unwilling to grant Microsoft permission to process such data for abuse
    detection, as previously explained, owing to internal policies or relevant legal
    obligations. To mitigate these concerns, Microsoft provides eligible customers,
    who meet specific Limited Access criteria and attest to particular use cases,
    with the opportunity to request adjustments to AOAI content management features.
    This can be done by completing the form available at [https://aka.ms/oai/modifiedaccess](https://aka.ms/oai/modifiedaccess).
    In this form, make sure you tick mark point *#23* to disable abuse monitoring
    as shown next:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 某些客户可能需要使用 AOAI 服务来处理敏感、高度机密或法律监管的数据，尽管生成有害输出或滥用的风险最小。这些客户可能由于内部政策或相关法律义务，无法或不愿授权微软处理这些数据以进行滥用检测，如前所述。为了缓解这些顾虑，微软向符合特定“有限访问”标准并声明特定使用案例的客户提供请求调整
    AOAI 内容管理功能的机会。客户可以通过填写[https://aka.ms/oai/modifiedaccess](https://aka.ms/oai/modifiedaccess)上的表单来完成此操作。在此表单中，请确保勾选
    *#23* 选项以禁用滥用监控，具体如下所示：
- en: '![Figure 11.3: Disabling abuse monitoring](img/B21019_11_3.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.3：禁用滥用监控](img/B21019_11_3.jpg)'
- en: 'Figure 11.3: Disabling abuse monitoring'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.3：禁用滥用监控
- en: Once Microsoft approves a customer’s request to modify abuse monitoring, no
    prompts and completions associated with the approved Azure subscription will be
    stored by Microsoft when abuse monitoring is configured to be inactive. In such
    cases, because there are no prompts and completions stored in the Service Results
    Store, the human review process is neither possible nor conducted.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦微软批准客户修改滥用监控的请求，当滥用监控配置为非活动状态时，任何与已批准 Azure 订阅相关的提示和完成内容将不会被微软存储。在这种情况下，由于服务结果存储中没有存储任何提示和完成内容，因此无法进行人工审查，也不会进行人工审查。
- en: Now, let’s ensure that the required configuration is in place for deactivating
    abuse monitoring.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们确保已配置好所需的设置，以停用滥用监控。
- en: Verification of abuse monitoring deactivation
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 滥用监控停用验证
- en: 'Customers who have been approved to disable abuse monitoring in their Azure
    subscription can confirm that data storage for abuse monitoring has been deactivated
    through two methods:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 已获批准在其 Azure 订阅中禁用滥用监控的客户可以通过两种方式确认滥用监控的数据存储已被停用：
- en: '**Using the** **Azure portal**:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**使用 Azure 门户**：'
- en: Sign in to the Azure portal
  id: totrans-61
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录 Azure 门户
- en: Select the appropriate AOAI service resource.
  id: totrans-62
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择适当的 AOAI 服务资源。
- en: Go to the resource **Overview** page
  id: totrans-63
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到资源 **概览** 页面
- en: 'Click on the **JSON View** link in the top-right corner, as shown in the following
    screenshot:'
  id: totrans-64
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击右上角的 **JSON 视图** 链接，如下图所示：
- en: '![Figure 11.4: Content logging verification](img/B21019_11_4.jpg)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.4：内容日志验证](img/B21019_11_4.jpg)'
- en: 'Figure 11.4: Content logging verification'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.4：内容日志验证
- en: In the list of capabilities, you will find a value named `ContentLogging`, which
    will display as `FALSE` when abuse monitoring logging is turned off.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 在功能列表中，你会找到一个名为 `ContentLogging` 的值，当滥用监控日志被关闭时，它将显示为 `FALSE`。
- en: '**Azure CLI or management API**: Alternatively, customers can use the Azure
    **Command-Line Interface** (**CLI**) or any management API provided by Azure to
    programmatically access and check the abuse monitoring status for their Azure
    subscription. You can execute the following command in Azure CLI to see the same
    JSON data as shown in the Azure portal:'
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**Azure CLI 或管理 API**：或者，客户可以使用 Azure **命令行界面**（**CLI**）或 Azure 提供的任何管理 API，通过编程方式访问并检查其
    Azure 订阅的滥用监控状态。你可以在 Azure CLI 中执行以下命令，以查看与 Azure 门户中相同的 JSON 数据：'
- en: '[PRE0]'
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Important note
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: The `ContentLogging` attribute will only display a value of `false` if data
    storage for abuse monitoring has been deactivated. Otherwise, this property will
    not be visible in either the Azure portal or the output of Azure CLI.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '`ContentLogging` 属性仅在滥用监控的数据存储被停用时，才会显示为 `false`。否则，该属性在 Azure 门户或 Azure CLI
    的输出中都不会显示。'
- en: In the previous section, we discussed various aspects of data privacy, data
    flow, and abuse monitoring. Now, let’s shift our focus to content filtering.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 在前一部分中，我们讨论了数据隐私、数据流动和滥用监控的各个方面。现在，让我们将注意力转向内容过滤。
- en: Content filtering
  id: totrans-73
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 内容过滤
- en: The AOAI service integrates a content filtering mechanism that operates alongside
    its core models. This system functions by subjecting both the prompt and completion
    to a combination of classification models designed to identify and mitigate the
    generation of harmful content. It actively identifies and responds to specific
    types of potentially harmful content in both the prompts provided as input and
    the completions produced as output. It’s worth noting that the filtering behavior
    may vary depending on the specific API configurations and the design of the application.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: AOAI 服务集成了一个与其核心模型一起运行的内容过滤机制。该系统通过将提示和完成提交给一系列分类模型来识别和减少有害内容的生成。它会主动识别并响应输入的提示和生成的完成中可能包含的特定类型的有害内容。值得注意的是，过滤行为可能会根据特定的
    API 配置和应用程序设计有所不同。
- en: 'The content filtering models have undergone dedicated training and testing
    in the following languages: English, German, Japanese, Spanish, French, Italian,
    Portuguese, and Chinese. The service has the capability to function in numerous
    other languages, although the performance quality might differ. In every instance,
    it is advisable to conduct your own testing to confirm its suitability for your
    particular application.'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 内容过滤模型已经在以下语言中进行了专门的训练和测试：英语、德语、日语、西班牙语、法语、意大利语、葡萄牙语和中文。该服务有能力在许多其他语言中运行，尽管性能质量可能有所不同。在每种情况下，建议进行自己的测试，以确认其是否适合你的特定应用。
- en: Important note
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: The AOAI Whisper model doesn’t use content filtering for prompts and completions.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: AOAI Whisper 模型不使用内容过滤来处理提示和完成。
- en: 'The subsequent sections offer details regarding the following:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 以下部分提供了关于以下内容的详细信息：
- en: Content filtering categories
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内容过滤类别
- en: Categories
  id: totrans-80
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 类别
- en: Severity levels
  id: totrans-81
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 严重性级别
- en: Configurability
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可配置性
- en: Best practices
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最佳实践
- en: Implementation
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实施
- en: Content filtering categories
  id: totrans-85
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 内容过滤类别
- en: 'Within the AOAI service, the content filtering system integrates neural multi-class
    classification models, specifically crafted to detect and filter out harmful content.
    These models cover four distinct main categories: **Hate**, **Sexual**, **Violence**,
    and **Self-harm**. Each category is classified into four severity levels: **Safe**,
    **Low**, **Medium**, and **High**. It’s crucial to emphasize that content identified
    at the **Safe** severity level is marked but is excluded from the filtering process
    and cannot be adjusted or customized. There are also optional classification models
    for the detection of jailbreak and protected material for text and code.'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 在AOAI服务中，内容过滤系统集成了神经多类别分类模型，专门设计用于检测和过滤有害内容。这些模型涵盖四个不同的主要类别：**仇恨**、**性别**、**暴力**和**自残**。每个类别分为四个严重级别：**安全**、**低**、**中**和**高**。强调的关键点是，标记为**安全**严重级别的内容会被标记，但不会参与过滤过程，也无法进行调整或定制。还有可选的分类模型，用于检测越狱和文本与代码的受保护材料。
- en: Categories
  id: totrans-87
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 类别
- en: 'These are the four main categories:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是四个主要类别：
- en: '**Hate**: Content that promotes hatred or discrimination against individuals
    or groups based on characteristics such as race, ethnicity, religion, gender,
    sexual orientation, and so on'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**仇恨**：促进对个人或群体的仇恨或歧视，基于种族、族裔、宗教、性别、性取向等特征的内容'
- en: '**Sexual**: Material containing explicit or suggestive sexual language, imagery,
    or themes'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**性别**：包含明确或暗示的性语言、图像或主题的材料'
- en: '**Violence**: Content depicting or advocating physical harm, injury, or violence
    toward individuals or groups'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**暴力**：描绘或提倡对个人或群体的身体伤害、损害或暴力行为的内容'
- en: '**Self-harm**: Material encouraging or glorifying self-injury, suicide, eating
    disorders, or other forms of self-harm'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自残**：鼓励或美化自伤、自杀、饮食障碍或其他形式的自残的材料'
- en: In addition to the four predefined categories, customers have the option to
    create their own custom categories using the **Azure AI Content Safety** service.
    This allows them to train a personalized content classification model tailored
    to their needs. To do this, they will require training data to identify sensitive
    content, moderate user-generated content, or ensure compliance with local regulations.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 除了四个预定义的类别外，客户可以使用**Azure AI内容安全**服务创建自定义类别。这使他们能够训练一个适合自身需求的个性化内容分类模型。为此，他们将需要训练数据来识别敏感内容、管理用户生成内容或确保符合本地法规。
- en: 'Optional categories are the following:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 可选类别如下：
- en: '**Prompt shields for jailbreak attacks**: Jailbreak attacks refer to user prompts
    deliberately crafted to trigger the **generative AI** (**GenAI**) model into demonstrating
    behaviors it was trained to avoid or to violate rules established in the system
    message. These direct attacks can range from elaborate role-playing scenarios
    to subtle attempts to undermine safety protocols.'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**越狱攻击的提示屏蔽**：越狱攻击是指用户故意设计的提示，旨在触发**生成式AI**（**GenAI**）模型表现出其被训练避免的行为或违反系统消息中建立的规则。这些直接攻击可以从精心设计的角色扮演场景到试图破坏安全协议的微妙尝试不等。'
- en: '**Prompt shields for indirect attacks**: Indirect attacks, sometimes known
    as indirect prompt attacks or cross-domain prompt injection attacks, represent
    a potential security flaw where external entities embed harmful instructions within
    documents accessible to the GenAI system. This vulnerability necessitates embedding
    and formatting of the document, especially in RAG kind of architecture.'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**间接攻击的提示屏蔽**：间接攻击，有时称为间接提示攻击或跨域提示注入攻击，代表一种潜在的安全漏洞，外部实体在GenAI系统可访问的文档中嵌入有害指令。这种漏洞需要在文档中嵌入和格式化，特别是在RAG类型的架构中。'
- en: '**Protected material for text**: Protected material text pertains to identifiable
    text content, such as song lyrics, articles, recipes, and selected web content,
    which may be generated by **large language** **models** (**LLMs**).'
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文本受保护材料**：文本受保护材料涉及可识别的文本内容，例如歌词、文章、食谱和选定的网络内容，这些内容可能由**大型语言模型**（**LLMs**）生成。'
- en: '**Protected material for code**: Protected material code denotes source code
    that matches a predefined set of code snippets from public repositories. LLMs
    may output such code without properly citing the original source repositories.'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**受保护的代码材料**：受保护的代码材料指符合公共存储库中预定义代码片段集的源代码。LLMs可能输出这样的代码，而没有恰当引用原始来源存储库。'
- en: Severity levels
  id: totrans-99
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 严重级别
- en: 'These are the four severity levels for each main category:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 每个主类别有四个严重级别：
- en: '**Safe**: Content may indeed involve topics associated with the **Violence**,
    **Self-harm**, **Sexual**, or **Hate** categories. However, these terms may be
    utilized in a general, journalistic, scientific, medical, or similar professional
    context that is suitable for broad audiences and does not involve harmful or offensive
    intent.'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安全**：内容可能涉及与**暴力**、**自残**、**性别**或**仇恨**类别相关的主题。然而，这些术语可能在一般的、新闻性、科学性、医学性或类似的专业背景中使用，适合广泛的观众，并且不涉及有害或冒犯的意图。'
- en: '**Low**: The content in question encompasses expressions of bias, judgment,
    or personal opinions, incorporates offensive language, employs stereotypes, involves
    explorations of fictional realms (for example, in gaming or literature), and portrays
    elements with a low level of intensity.'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**低**：该内容包括偏见、判断或个人意见的表达，包含冒犯性语言，使用刻板印象，涉及虚拟领域的探索（例如，在游戏或文学中），以及以较低强度描绘的元素。'
- en: '**Medium**: The content mentioned involves the utilization of offensive, derogatory,
    ridiculing, intimidating, or belittling language directed at particular identity
    groups. Additionally, it may include depictions of seeking and carrying out harmful
    instructions, fantasies, and the glorification and promotion of harm, all presented
    at a medium level of intensity.'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**中**：该内容涉及使用冒犯性、贬低性、嘲笑性、威胁性或轻视特定身份群体的语言。此外，它可能包括寻求和执行有害指令、幻想，以及对伤害的赞美和推广，所有内容的强度都属于中等水平。'
- en: '**High**: The content in question showcases explicit and highly severe harmful
    instructions, actions, damage, or abuse. It also encompasses the endorsement,
    glorification, or promotion of extremely harmful acts, including those that are
    radical, illegal, or non-consensual in nature, as well as content related to power
    exchange or abuse that occurs without consent.'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**高**：该内容展示了明确且高度严重的有害指令、行为、伤害或虐待。它还包括极端有害行为的支持、赞美或宣传，包括那些激进、非法或非自愿的行为，以及涉及无同意的权力交换或虐待的内容。'
- en: Up until this point, we have discussed various categories of content filtering
    and their associated severity levels. Now, let’s delve into where these severity
    levels can be adjusted or configured.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 到此为止，我们已经讨论了各种内容过滤类别及其相关的严重性级别。现在，让我们深入探讨这些严重性级别可以如何调整或配置。
- en: Customizability
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 可定制性
- en: 'The default setup for content filtering is programmed to initiate the filtering
    process when medium-level severity is detected within any of the four defined
    categories of harmful content, applicable to both user prompts and generated responses.
    This means that when content is flagged as having medium or high severity, it
    will be subjected to filtering. Conversely, content identified as having low severity
    will not trigger the filtering mechanisms. The following tables provide detailed
    information on the customization options available for each severity level:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 默认的内容过滤设置程序会在检测到任何四个已定义的有害内容类别中的中等严重性时启动过滤过程，适用于用户提示和生成的回应。这意味着，当内容被标记为中等或高严重性时，它将受到过滤。相反，标识为低严重性的内容则不会触发过滤机制。以下表格提供了每个严重性级别可用的定制选项的详细信息：
- en: '| **Severity** | **Customizable** **for prompts** | **Customizable** **for
    completions** | **Descriptions** |'
  id: totrans-108
  prefs: []
  type: TYPE_TB
  zh: '| **严重性** | **可定制** **用于提示** | **可定制** **用于完成** | **描述** |'
- en: '| --- | --- | --- | --- |'
  id: totrans-109
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| **Low**, **Medium**, **High** | Yes | Yes | Highest filter level: Filters
    low-, medium-, and high-severity content. |'
  id: totrans-110
  prefs: []
  type: TYPE_TB
  zh: '| **低**，**中**，**高** | 是 | 是 | 最高过滤级别：过滤低、中、高严重性的内容。 |'
- en: '| **Medium**, **High** | Yes | Yes | Default: Filters medium- and high-severity
    content; does not filter low-severity content. |'
  id: totrans-111
  prefs: []
  type: TYPE_TB
  zh: '| **中**，**高** | 是 | 是 | 默认：过滤中等和高严重性内容；不过滤低严重性内容。 |'
- en: '| **High** | Subject to approval* | Subject to approval* | Filters only high-severity
    content. Approval is required for filtering. |'
  id: totrans-112
  prefs: []
  type: TYPE_TB
  zh: '| **高** | 需要批准* | 需要批准* | 仅过滤高严重性内容。过滤需要批准。 |'
- en: '| **No Filters** | Subject to approval* | Subject to approval* | No content
    is filtered, regardless of the detected severity level. |'
  id: totrans-113
  prefs: []
  type: TYPE_TB
  zh: '| **无过滤** | 需要批准* | 需要批准* | 无论检测到的严重性级别如何，都不对内容进行过滤。 |'
- en: 'Table 11.1: Content filtering configurations'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 表 11.1：内容过滤配置
- en: 'Customers who are authorized to alter content filtering settings have full
    authority over these filters. They can opt to set filters to engage only at the
    high severity level or choose to turn off filtering altogether. If you wish to
    request access to modify content filters, please fill out the form at this link:
    [https://aka.ms/oai/modifiedaccess](https://aka.ms/oai/modifiedaccess). When filling
    out the form, please make sure to select point *#23* to activate high-severity
    content filtering. Additionally, in point *#24*, provide justification for this,
    as indicated in the following screenshot:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 获得授权修改内容过滤设置的客户拥有完全的过滤器管理权限。客户可以选择仅在高严重性级别启用过滤，或选择完全关闭过滤功能。如果您希望请求访问修改内容过滤器的权限，请填写此链接中的表格：[https://aka.ms/oai/modifiedaccess](https://aka.ms/oai/modifiedaccess)。在填写表格时，请确保选择*#23*以启用高严重性内容过滤。此外，在*#24*项中提供此请求的理由，具体如下截图所示：
- en: '![Figure 11.5: Modifying content filters](img/B21019_11_5.jpg)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.5：修改内容过滤器](img/B21019_11_5.jpg)'
- en: 'Figure 11.5: Modifying content filters'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.5：修改内容过滤器
- en: So far, you have learned about different AOAI content filters and their configurations.
    Now, let’s discuss some best practices for implementing content filtering.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，您已经了解了不同的 AOAI 内容过滤器及其配置。接下来，让我们讨论一些实施内容过滤的最佳实践。
- en: Best practices
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 最佳实践
- en: 'When the content filtering system identifies harmful content, your interaction
    with the API will yield one of the following outcomes:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 当内容过滤系统识别到有害内容时，您与 API 的交互将产生以下结果之一：
- en: '**Inappropriate prompts**: If the input prompt is determined to contain inappropriate
    content, you will receive an HTTP 400 error.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**不当提示**：如果输入的提示被判定为包含不当内容，您将收到 HTTP 400 错误。'
- en: '`finish_reason` value in the response will be set to `content_filter`. In some
    rare instances with longer responses, a partial result may be returned, with an
    updated `finish_reason` value indicating the content filtering status.'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 响应中的`finish_reason`值将设置为`content_filter`。在一些较长的响应中，可能会返回部分结果，并更新`finish_reason`值，指示内容过滤状态。
- en: '**Streaming completions**: For streaming completions, segments of content will
    be returned as they are generated. The service will maintain its streaming operation
    until it encounters a predetermined stop token, reaches a certain length limit,
    or identifies content that falls under a category and severity level that has
    been set for filtering.'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**流式完成**：对于流式完成，内容段会在生成时逐步返回。服务将保持流式操作，直到遇到预定的停止标记、达到某个长度限制或识别到属于已设置过滤类别和严重性级别的内容。'
- en: 'As you plan your application, it’s important to incorporate the following best
    practices to ensure a positive **user experience** (**UX**) while mitigating potential
    issues:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 在规划您的应用程序时，重要的是要纳入以下最佳实践，以确保良好的**用户体验**（**UX**），同时减少潜在问题：
- en: Determine your approach for addressing situations where users submit prompts
    containing content classified within a filtered category and severity level or
    when they misuse your application
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确定处理用户提交的包含被过滤类别和严重程度内容的提示，或用户滥用您的应用程序时的应对方式
- en: Examine the `finish_reason` value to identify whether a completion has been
    filtered or not
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检查`finish_reason`值以确定是否已过滤完成
- en: Verify the absence of an error object in the `content_filter_result` value,
    which signifies that the content filters were successfully applied and did not
    encounter any issues during processing
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 验证`content_filter_result`值中没有错误对象，这意味着内容过滤器已成功应用，并且在处理过程中未遇到任何问题。
- en: Let’s discuss how you can practically implement content filtering through Azure
    AI Foundry.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们讨论如何通过 Azure AI Foundry 实际实施内容过滤。
- en: Implementation
  id: totrans-129
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 实施
- en: 'The subsequent instructions demonstrate the process of establishing a personalized
    content filtering configuration for your AOAI resource:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 以下指令演示了为您的 AOAI 资源建立个性化内容过滤配置的过程：
- en: 'Log in to Azure AI Foundry and locate the **Content filters** tab by following
    the bottom-left navigation, as indicated by the highlighted red box shown next:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录 Azure AI Foundry 并通过左下方导航找到**内容过滤器**选项卡，如下图红框所示：
- en: '![Figure 11.6: AOAI Content filters tab](img/B21019_11_6.jpg)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.6：AOAI 内容过滤器选项卡](img/B21019_11_6.jpg)'
- en: 'Figure 11.6: AOAI Content filters tab'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.6：AOAI 内容过滤器选项卡
- en: 'Create a new customized content filtering configuration:'
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个新的定制内容过滤配置：
- en: '![Figure 11.7: Creating custom AOAI content filters](img/B21019_11_7.jpg)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.7：创建自定义 AOAI 内容过滤器](img/B21019_11_7.jpg)'
- en: 'Figure 11.7: Creating custom AOAI content filters'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.7：创建自定义 AOAI 内容过滤器
- en: This brings you to the next configuration screen, where you can choose a name
    for your custom content filtering setup.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 这将带您进入下一个配置屏幕，您可以为您的自定义内容过滤设置选择一个名称。
- en: 'On the next screen, set thresholds for content filter categories for both text
    and image for input prompts:'
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个屏幕上，设置输入提示的文本和图像的内容过滤类别阈值：
- en: '![Figure 11.8: AOAI custom content filters’ default settings](img/B21019_11_8.jpg)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.8：AOAI 自定义内容过滤器的默认设置](img/B21019_11_8.jpg)'
- en: 'Figure 11.8: AOAI custom content filters’ default settings'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.8：AOAI 自定义内容过滤器的默认设置
- en: 'This is the standard content moderation settings page, where content is regulated
    at a medium level across all categories. You have the flexibility to customize
    the content moderation severity level separately for prompts and completion of
    the four content categories each. There are three adjustable severity levels for
    each category: **Low**, **Medium**, and **High**.'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 这是标准的内容审核设置页面，在此页面上，所有类别的内容都以中等级别进行管理。您可以灵活地分别自定义每个类别在提示和完成阶段的内容审核严重性级别。每个类别有三个可调整的严重性级别：**低**、**中**和**高**。
- en: 'If your application requires stricter blocking for content categories such
    as **Violence**, **Hate**, **Sexual**, and **Self-harm**, set the threshold to
    **Low**. To permit content in the **Low** category while blocking **Medium** and
    **High** categories, adjust the threshold to **Medium**. Lastly, if you wish to
    allow content in both the **Low** and **Medium** categories but block the **High**
    category, set the threshold to **High**:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的应用需要对内容类别进行更严格的阻止，例如**暴力**、**仇恨**、**色情**和**自残**，请将阈值设置为**低**。要允许**低**类别的内容并阻止**中**和**高**类别的内容，请将阈值调整为**中**。最后，如果希望允许**低**和**中**类别的内容，但阻止**高**类别的内容，请将阈值设置为**高**：
- en: '![Figure 11.9: AOAI custom content filters’ settings](img/B21019_11_9.jpg)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.9：AOAI 自定义内容过滤器的设置](img/B21019_11_9.jpg)'
- en: 'Figure 11.9: AOAI custom content filters’ settings'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.9：AOAI 自定义内容过滤器的设置
- en: Follow the same step for output content from the model and set the threshold
    accordingly.
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对模型的输出内容执行相同步骤，并相应地设置阈值。
- en: 'You also have the option to fully disable content filtering for both input
    and output content by toggling off the **Annotate and block** feature located
    in the bottom-left corner. Alternatively, you can turn off the content filter
    for specific categories by selecting **Off**. If you opt for **Annotate only**,
    the AOAI content filter system will merely flag the content without blocking it:'
  id: totrans-146
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您还可以选择完全禁用输入和输出内容的内容过滤，通过关闭位于左下角的**注释并阻止**功能。或者，您可以通过选择**关闭**来关闭特定类别的内容过滤器。如果选择**仅注释**，AOAI
    内容过滤系统将仅标记内容，而不会阻止它：
- en: '![Figure 11.10: Disabling AOAI custom content filters](img/B21019_11_10.jpg)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.10：禁用 AOAI 自定义内容过滤器](img/B21019_11_10.jpg)'
- en: 'Figure 11.10: Disabling AOAI custom content filters'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.10：禁用 AOAI 自定义内容过滤器
- en: Important note
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 重要说明
- en: 'To carry out step *#3*, it’s essential to obtain approval for modifying the
    content filter by filling out the given form: [https://ncv.microsoft.com/uEfCgnITdR](https://ncv.microsoft.com/uEfCgnITdR).'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 为了执行步骤*#3*，您需要通过填写给定的表格获得修改内容过滤器的批准：[https://ncv.microsoft.com/uEfCgnITdR](https://ncv.microsoft.com/uEfCgnITdR)。
- en: 'To activate a custom content filtering configuration, you need to assign it
    to one or more deployments in your resource. To accomplish this, navigate to the
    **Deployments** tab and choose **Edit deployment**:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要激活自定义内容过滤配置，您需要将其分配给资源中的一个或多个部署。为此，导航到**部署**选项卡并选择**编辑部署**：
- en: '![Figure 11.11: Editing the AOAI model deployment](img/B21019_11_11.jpg)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.11：编辑 AOAI 模型部署](img/B21019_11_11.jpg)'
- en: 'Figure 11.11: Editing the AOAI model deployment'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.11：编辑 AOAI 模型部署
- en: 'Proceed to the **Advanced options** section and choose the appropriate content
    filter configuration for that deployment from the **Content** **Filter** dropdown:'
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 继续到**高级选项**部分，并从**内容过滤器**下拉菜单中选择适合该部署的内容过滤器配置：
- en: '![Figure 11.12: Assigning content filter to AOAI model](img/B21019_11_12.jpg)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.12：将内容过滤器分配给 AOAI 模型](img/B21019_11_12.jpg)'
- en: 'Figure 11.12: Assigning content filter to AOAI model'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.12：将内容过滤器分配给 AOAI 模型
- en: 'Click on **Save and close** to apply the selected configuration to the deployment.
    Post that, you will observe the selected configuration applied to your chosen
    model:'
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **保存并关闭** 以将所选配置应用到部署中。之后，您将看到所选配置已应用到您选择的模型：
- en: '![Figure 11.13: Confirming the content filter for the AOAI model](img/B21019_11_13.jpg)'
  id: totrans-158
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.13：确认 AOAI 模型的内容过滤器](img/B21019_11_13.jpg)'
- en: 'Figure 11.13: Confirming the content filter for the AOAI model'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.13：确认 AOAI 模型的内容过滤器
- en: 'If necessary, you can also modify or delete a content filter configuration.
    To do so, go to the **Content filters** tab and choose the desired configuration.
    Please note that you can only edit or delete one filtering configuration at a
    time:'
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如有必要，您还可以修改或删除内容过滤器配置。为此，请转到 **内容过滤器** 选项卡并选择所需的配置。请注意，您一次只能编辑或删除一个过滤配置：
- en: "![Figure 11.14: Editing or deleting a content filter in \uFEFFAzure AI Foundry](img/B21019_11_14.jpg)"
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.14：在 Azure AI Foundry 中编辑或删除内容过滤器](img/B21019_11_14.jpg)'
- en: 'Figure 11.14: Editing or deleting a content filter in Azure AI Foundry'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.14：在 Azure AI Foundry 中编辑或删除内容过滤器
- en: Important note
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: To remove a content filtering configuration, it’s necessary to detach it from
    any deployment listed under the **Deployments** tab.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 要删除内容过滤配置，必须将其从 **部署** 选项卡下列出的任何部署中解除关联。
- en: You have now acquired the skills to implement an AOAI content filter, which
    ensures that harmful content is neither inputted into nor outputted from the model.
    In the upcoming section, we will explore how content filtering operates in practice.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在已经掌握了实现 AOAI 内容过滤器的技能，确保有害内容既不会输入到模型中，也不会从模型中输出。在接下来的章节中，我们将探讨内容过滤如何在实际中运作。
- en: Content filtering in action
  id: totrans-166
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 内容过滤示例
- en: In the preceding step, as seen in step *#7* of the previous section, custom
    content filtering was implemented for the `gpt-35-turbo` model. Now, we will evaluate
    the content filter both from the AOAI portal and through the API.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的步骤中，如前一节第 *#7* 步所示，已经为 `gpt-35-turbo` 模型实现了自定义内容过滤。现在，我们将通过 AOAI 门户和 API
    来评估内容过滤器。
- en: AOAI portal
  id: totrans-168
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: AOAI 门户
- en: 'Proceed as follows:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 请按以下步骤操作：
- en: Log in to Azure AI Foundry..
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到 Azure AI Foundry。
- en: Choose the **Chat** playground.
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **Chat** 游乐场。
- en: Select **gpt-4** from the **Deployment** options.
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 **部署** 选项中选择 **gpt-4**。
- en: 'Input a user prompt; for example, something like this:'
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入一个用户提示，例如如下所示：
- en: '[PRE1]'
  id: totrans-174
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: In response to the provided user prompt, you will observe that AOAI content
    filtering has been activated and has filtered out the high-severity **Violence**
    content before it is forwarded to the actual model.
  id: totrans-175
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在响应所提供的用户提示时，您将看到 AOAI 内容过滤器已激活，并且在转发到实际模型之前已过滤掉高严重性的 **暴力** 内容。
- en: 'The diagram here illustrates the specifics of the steps described previously:'
  id: totrans-176
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这里的图示展示了之前描述步骤的详细信息：
- en: "![Figure 11.15: Testing the content filter from \uFEFFAzure AI Foundry](img/B21019_11_15.jpg)"
  id: totrans-177
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.15：从 Azure AI Foundry 测试内容过滤器](img/B21019_11_15.jpg)'
- en: 'Figure 11.15: Testing the content filter from Azure AI Foundry'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.15：从 Azure AI Foundry 测试内容过滤器
- en: API
  id: totrans-179
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: API
- en: 'In this section, we will guide you through the process of making your call
    to AOAI using the Python SDK to test the content filtering:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 本节将指导您使用 Python SDK 调用 AOAI 测试内容过滤的过程：
- en: 'Install Python version 3.7.1 or a more recent version on your machine. Alternatively,
    you can utilize an **Azure Machine Learning** (**AML**) notebook to obtain the
    Python environment. In this example, we have used Anaconda with Visual Studio
    Code as an IDE:'
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的机器上安装 Python 版本 3.7.1 或更高版本。或者，您也可以使用 **Azure 机器学习** (**AML**) 笔记本来获取 Python
    环境。在此示例中，我们使用了 Anaconda 和 Visual Studio Code 作为 IDE：
- en: 'Install the OpenAI Python client library by using the following command: `pip`
    `install openai`.'
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令安装 OpenAI Python 客户端库：`pip` `install openai`。
- en: 'To effectively make a request to the AOAI service, you will require the following
    three pieces of information:'
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了有效地向 AOAI 服务发起请求，您需要以下三项信息：
- en: '`ENDPOINT`: This value corresponds to the endpoint of your AOAI resource. You
    can locate it in the `API-KEY`: This value is your API key for accessing the AOAI
    resource. You can find it in the `KEY1` or `KEY2`.'
  id: totrans-184
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ENDPOINT`：此值对应于您的 AOAI 资源的端点。您可以在 `API-KEY` 中找到它：此值是您访问 AOAI 资源的 API 密钥。您可以在
    `KEY1` 或 `KEY2` 中找到它。'
- en: '`DEPLOYMENT-NAME`: This value corresponds to the custom name you selected for
    your deployment during the model deployment process in the *Deploying AOAI* *models*
    section.'
  id: totrans-185
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DEPLOYMENT-NAME`：此值对应您在 *部署 AOAI* *模型* 部分部署过程中为您的部署选择的自定义名称。'
- en: 'To get the first two values, navigate to your resource within the Azure portal.
    You can find `KEY1` or `KEY2`. The presence of two keys enables secure key rotation
    and regeneration without causing service interruptions:'
  id: totrans-186
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要获取前两个值，请在 Azure 门户中导航到你的资源。你可以找到 `KEY1` 或 `KEY2`。两个密钥的存在可以在不引起服务中断的情况下实现安全的密钥轮换和再生：
- en: '![Figure 11.16: Getting AOAI keys and endpoint information](img/B21019_11_16.jpg)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.16：获取 AOAI 密钥和端点信息](img/B21019_11_16.jpg)'
- en: 'Figure 11.16: Getting AOAI keys and endpoint information'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.16：获取 AOAI 密钥和端点信息
- en: 'In your preferred IDE, create a Python file called `content_filtering.py` and
    execute the code shown next:'
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你首选的 IDE 中，创建一个名为 `content_filtering.py` 的 Python 文件，并执行接下来的代码：
- en: 'Import the necessary Python package and define an AOAI key and deployment name:'
  id: totrans-190
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入必要的 Python 包并定义 AOAI 密钥和部署名称：
- en: '[PRE2]'
  id: totrans-191
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Important note
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: Make sure you change the deployment name value to the custom name you provided
    while creating the deployment. Also, in a production environment, it is recommended
    to use a secure method for storing and accessing your credentials, such as Azure
    Key Vault. This ensures the highest level of security for your sensitive information.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 确保将部署名称的值更改为在创建部署时提供的自定义名称。另外，在生产环境中，建议使用安全的方法存储和访问你的凭证，例如使用 Azure Key Vault。这将确保你的敏感信息得到最高级别的安全保护。
- en: 'Send the chat completion request to the AOAI model to get a response:'
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将聊天完成请求发送到 AOAI 模型以获取响应：
- en: '[PRE3]'
  id: totrans-195
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: When you execute the preceding command, you will encounter an `InvalidRequestError`
    exception because the prompt is filtered out by the AOAI content filtering system
    before it reaches the actual model.
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当你执行前面的命令时，你会遇到 `InvalidRequestError` 异常，因为提示在到达实际模型之前被 AOAI 内容过滤系统过滤掉。
- en: 'Here is the actual output:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 这是实际输出：
- en: '[PRE4]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: So far, you’ve observed that in all the examples, we’ve been utilizing an API
    key for making calls to the AOAI resource. This could pose security issues in
    many scenarios. In the following section, we will discuss how to access AOAI resources
    without the need for an API key.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，你已经观察到，在所有的示例中，我们一直在使用 API 密钥来调用 AOAI 资源。在许多场景下，这可能会带来安全问题。在接下来的部分，我们将讨论如何在不需要
    API 密钥的情况下访问 AOAI 资源。
- en: Managed identities
  id: totrans-200
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 托管标识
- en: In software development, one common challenge is the secure management of sensitive
    information such as passwords, keys, and certificates, essential for maintaining
    secure communication between different software components. Managed identities
    present a practical solution that eliminates the need for developers to manually
    juggle these sensitive credentials.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 在软件开发中，一个常见的挑战是如何安全地管理敏感信息，如密码、密钥和证书，这些信息对于维护不同软件组件之间的安全通信至关重要。托管标识提供了一个切实可行的解决方案，消除了开发人员手动管理这些敏感凭证的需求。
- en: While Azure Key Vault provides a secure repository for storing secrets, services
    still require a seamless way to access this vault. Managed identities offer an
    automated solution by providing a managed identity within Microsoft’s Entra ID
    specifically tailored for applications. This identity serves as a secure conduit
    for applications to access resources that rely on Microsoft’s **Azure Active Directory**
    (**AD**) authentication. Through leveraging managed identities, applications can
    seamlessly obtain Azure AD tokens without the hassle of directly managing any
    credentials.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然 Azure Key Vault 提供了一个安全的存储机密的仓库，但服务仍然需要一种无缝访问这个仓库的方式。托管标识通过在 Microsoft 的
    Entra ID 中提供一个专门为应用程序量身定制的托管标识，提供了一个自动化的解决方案。这个标识作为应用程序访问依赖于 Microsoft 的**Azure
    Active Directory** (**AD**) 身份验证的资源的安全通道。通过利用托管标识，应用程序可以无缝获取 Azure AD 令牌，而无需直接管理任何凭证。
- en: 'There are two primary types of managed identities:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 托管标识主要有两种类型：
- en: '**System-assigned**: Azure services offer the option to activate a managed
    identity directly on a service instance. Activating a system-assigned managed
    identity results in the creation of an identity in Azure AD. This identity is
    closely associated with the lifespan of the specific service instance. Azure takes
    care of automatically removing this identity when the associated resource is deleted.
    Importantly, this identity is exclusively intended for use by the corresponding
    Azure resource, enabling it to request tokens from Azure AD.'
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**系统分配**：Azure 服务提供了在服务实例上直接激活托管身份的选项。激活系统分配的托管身份会在 Azure AD 中创建一个身份。此身份与特定服务实例的生命周期紧密相关。Azure
    会自动删除与之关联的资源时，这个身份也会被删除。重要的是，这个身份仅供相应的 Azure 资源使用，使其能够向 Azure AD 请求令牌。'
- en: '**User-assigned**: You have the option to create a managed identity as an independent
    Azure resource. This involves creating a user-assigned managed identity, which
    can then be assigned to one or multiple Azure service instances. With user-assigned
    managed identities, the identity is administered independently from the resources
    that make use of it.'
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户分配**：你可以选择将托管身份作为独立的 Azure 资源创建。这涉及到创建一个用户分配的托管身份，然后将其分配给一个或多个 Azure 服务实例。使用用户分配的托管身份时，身份的管理独立于使用它的资源。'
- en: 'In the following example, we will establish a system-assigned managed identity
    for the purpose of accessing AOAI from an **Azure Machine Learning** (**AML**)
    notebook instance:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下示例中，我们将为从 **Azure 机器学习** (**AML**) 笔记本实例访问 AOAI 建立一个系统分配的托管身份：
- en: '![Figure 11.17: AOAI managed identity](img/B21019_11_17.jpg)'
  id: totrans-207
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.17：AOAI 托管身份](img/B21019_11_17.jpg)'
- en: 'Figure 11.17: AOAI managed identity'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.17：AOAI 托管身份
- en: AML workspace creation
  id: totrans-209
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建 AML 工作区
- en: 'As a first step, you will create an AML workspace and attach a compute instance
    to execute the notebook:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 第一阶段，你将创建一个 AML 工作区并附加一个计算实例来执行笔记本：
- en: 'Sign in to AML Studio: [https://ml.azure.com/](https://ml.azure.com/).'
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录 AML Studio：[https://ml.azure.com/](https://ml.azure.com/)。
- en: Select **Create workspace**.
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **创建工作区**。
- en: 'Provide the following information to configure the workspace:'
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供以下信息以配置工作区：
- en: '**Workspace name**: This must be a unique name.'
  id: totrans-214
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**工作区名称**：此名称必须唯一。'
- en: '**Subscription**: Select your Azure subscription.'
  id: totrans-215
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**订阅**：选择你的 Azure 订阅。'
- en: '**Resource Group**: Use an existing one or create a new one to hold the related
    resources.'
  id: totrans-216
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**资源组**：使用现有的资源组或创建一个新的资源组来承载相关资源。'
- en: '**Region**: Choose your closest Azure region.'
  id: totrans-217
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**区域**：选择离你最近的 Azure 区域。'
- en: Select **Create** to create the workspace.
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **创建** 以创建工作区。
- en: 'After setting up your workspace, the next step is to establish a **compute
    instance** for executing your notebook and Python scripts:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 设置工作区后，下一步是为执行你的笔记本和 Python 脚本创建一个 **计算实例**：
- en: Navigate to the left-hand menu and choose **Notebooks**.
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到左侧菜单并选择 **笔记本**。
- en: 'Choose **Create compute** located in the center of the page:'
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择页面中间的 **创建计算**：
- en: '![Figure 11.18: Creating an AML compute instance](img/B21019_11_18.jpg)'
  id: totrans-222
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.18：创建 AML 计算实例](img/B21019_11_18.jpg)'
- en: 'Figure 11.18: Creating an AML compute instance'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.18：创建 AML 计算实例
- en: Provide a name for the instance while retaining all the default settings on
    the first page and second page.
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在第一页和第二页保留所有默认设置时，提供实例的名称。
- en: 'On the **Security** page, enable the **Assigned** **identity** option:'
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 **安全性** 页面，启用 **分配的** **身份** 选项：
- en: '![Figure 11.19: Assigning a system-managed identity](img/B21019_11_19.jpg)'
  id: totrans-226
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.19：分配系统托管身份](img/B21019_11_19.jpg)'
- en: 'Figure 11.19: Assigning a system-managed identity'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.19：分配系统托管身份
- en: Keep the default values for the rest of the pages.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 保持其余页面的默认值。
- en: Select **Create**. It will take a few minutes to launch the instance.
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **创建**。启动实例需要几分钟时间。
- en: Role assignment
  id: totrans-230
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 角色分配
- en: 'After the compute instance has been launched, the next step is to assign **role-based
    access control** (**RBAC**) from AOAI to the AML compute instance:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 启动计算实例后，下一步是从 AOAI 向 AML 计算实例分配 **基于角色的访问控制** (**RBAC**)：
- en: Proceed with the AOAI resource you previously created.
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 继续使用你之前创建的 AOAI 资源。
- en: On the left-hand menu, choose **Access** **control (IAM)**.
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧菜单中选择 **访问** **控制 (IAM)**。
- en: 'Click on **Add** and choose **Add** **role assignment**:'
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **添加** 并选择 **添加** **角色分配**：
- en: '![Figure 11.20: Adding a role to AOAI](img/B21019_11_20.jpg)'
  id: totrans-235
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.20：为 AOAI 添加角色](img/B21019_11_20.jpg)'
- en: 'Figure 11.20: Adding a role to AOAI'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.20：为 AOAI 添加角色
- en: 'On the next page, choose the **Cognitive Services OpenAI User** role for inference:'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页上，选择 **认知服务 OpenAI 用户** 角色进行推理：
- en: '![Figure 11.21: Assigning a role to AOAI](img/B21019_11_21.jpg)'
  id: totrans-238
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.21：为 AOAI 分配角色](img/B21019_11_21.jpg)'
- en: 'Figure 11.21: Assigning a role to AOAI'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.21：为 AOAI 分配角色
- en: 'On the next page, assign the role to the workspace compute instance that you
    created in the previous steps:'
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页上，为您在前面的步骤中创建的工作区计算实例分配角色：
- en: '![Figure 11.22: Selecting AML workspace compute instance as a member](img/B21019_11_22.jpg)'
  id: totrans-241
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.22：选择 AML 工作区计算实例作为成员](img/B21019_11_22.jpg)'
- en: 'Figure 11.22: Selecting AML workspace compute instance as a member'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.22：选择 AML 工作区计算实例作为成员
- en: Select the workspace compute instance and proceed to **Review + assign**. This
    process will take a few minutes to assign the role.
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择工作区计算实例并继续至 **审核 + 分配**。这个过程会花费几分钟来分配角色。
- en: Managed identity in action
  id: totrans-244
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 托管身份的实际操作
- en: 'After completing the previous steps, it’s now time to test the AOAI call from
    the AML notebook using the managed identity:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 完成前述步骤后，现在是时候从 AML 笔记本中使用托管身份来测试 AOAI 调用：
- en: 'Go to your AML notebook and select **Create** **new file**:'
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往您的 AML 笔记本并选择 **创建** **新文件**：
- en: '![Figure 11.23: Creating a new notebook](img/B21019_11_23.jpg)'
  id: totrans-247
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.23：创建新笔记本](img/B21019_11_23.jpg)'
- en: 'Figure 11.23: Creating a new notebook'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.23：创建新笔记本
- en: 'Select **Authenticate**:'
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **认证**：
- en: '![Figure 11.24: Authenticating the Azure SDK](img/B21019_11_24.jpg)'
  id: totrans-250
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.24：认证 Azure SDK](img/B21019_11_24.jpg)'
- en: 'Figure 11.24: Authenticating the Azure SDK'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.24：认证 Azure SDK
- en: In the notebook, execute the commands shown next.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 在笔记本中，执行接下来的命令。
- en: 'To install the necessary Python package(s), execute the following command:'
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要安装必要的 Python 包，执行以下命令：
- en: '[PRE5]'
  id: totrans-254
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'In the next cell, configure the AOAI endpoint and version details:'
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个单元格中，配置 AOAI 端点和版本详情：
- en: '[PRE6]'
  id: totrans-256
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Retrieve the managed identity token and refresh it before it expires:'
  id: totrans-257
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取托管身份令牌并在过期前刷新它：
- en: '[PRE7]'
  id: totrans-258
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Configure the AOAI model parameters:'
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置 AOAI 模型参数：
- en: '[PRE8]'
  id: totrans-260
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Specify the system message:'
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 指定系统消息：
- en: '[PRE9]'
  id: totrans-262
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Perform an AOAI request using the Python SDK. In the provided cell, it’s important
    to note that you are specifying the `api_type` value as `azure_ad` and not passing
    the AOAI key; instead, you are utilizing the managed identity token within the
    `api_key` parameter:'
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 Python SDK 执行 AOAI 请求。在提供的单元格中，重要的是要注意您正在将 `api_type` 值设置为 `azure_ad`，并且没有传递
    AOAI 密钥；相反，您正在利用托管身份令牌在 `api_key` 参数中：
- en: '[PRE10]'
  id: totrans-264
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Retrieve the result:'
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取结果：
- en: '[PRE11]'
  id: totrans-266
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'The model will respond back as follows:'
  id: totrans-267
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 模型将返回如下响应：
- en: '[PRE12]'
  id: totrans-268
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: This marks the completion of the setup for using a managed identity to access
    AOAI resources. In the next section, our attention will shift toward configuring
    VNets and private endpoints.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 这标志着使用托管身份访问 AOAI 资源的设置完成。在下一节中，我们将重点转向配置 VNet 和私有端点。
- en: VNet configuration
  id: totrans-270
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: VNet 配置
- en: AOAI offers customers a genuinely enterprise-grade service, encompassing content
    filtering as well as network-level security through VNet connectivity and support
    for private endpoints. In this section, we will delve into the configuration process
    for setting up a VNet and private endpoint for AOAI resources.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: AOAI 为客户提供真正的企业级服务，包括内容过滤以及通过 VNet 连接和支持私有端点提供的网络级安全性。本节将深入探讨配置 VNet 和私有端点的过程，以便为
    AOAI 资源进行设置。
- en: Normally, when you make a call to an AOAI resource, the traffic flows to the
    public endpoint of the AOAI resource and is accessible to all networks by default
    within your subscriptions. In essence, anyone with the API key and service endpoint
    can access the AOAI resource, posing a security concern for enterprise environments.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，当您调用 AOAI 资源时，流量会默认流向 AOAI 资源的公共端点，并在您的订阅中的所有网络中可访问。从本质上讲，任何拥有 API 密钥和服务端点的人都可以访问
    AOAI 资源，这对企业环境构成了安全隐患。
- en: 'Through the configuration of VNet settings, you can control and restrict the
    traffic flow originating from an Azure resource within a specific VNet to the
    AOAI public endpoint over the Azure backbone, as depicted here:'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 通过 VNet 设置的配置，您可以控制并限制来自 Azure 资源的流量，通过 Azure 骨干网传输到 AOAI 公共端点，如下所示：
- en: '![Figure 11.25: AOAI with VNet configurations](img/B21019_11_25.jpg)'
  id: totrans-274
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.25：带有 VNet 配置的 AOAI](img/B21019_11_25.jpg)'
- en: 'Figure 11.25: AOAI with VNet configurations'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.25：带有 VNet 配置的 AOAI
- en: To set up VNet settings for accessing the AOAI public endpoint from a **virtual
    machine** (**VM**) within a subnet, please follow the steps outlined here.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 要设置 VNet 设置以便从子网内的**虚拟机**（**VM**）访问 AOAI 公共端点，请按照这里列出的步骤操作。
- en: AOAI networking configurations
  id: totrans-277
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: AOAI 网络配置
- en: 'Follow the next steps:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤操作：
- en: Log in to the Azure portal.
  id: totrans-279
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到 Azure 门户。
- en: Locate the previously created AOAI resource.
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到之前创建的 AOAI 资源。
- en: Go to the **Networking** section and choose the **Selected Network and Private**
    **Endpoints** tab.
  id: totrans-281
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到**网络**部分，并选择**已选网络和私有** **端点**标签。
- en: 'Within the **Virtual networks** section, select **Add new virtual network**
    or choose an existing one if you already have one set up. In this example, we
    have created a new VNet and subnet:'
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**虚拟网络**部分，选择**添加新的虚拟网络**，或者如果已有设置，选择现有的网络。在这个例子中，我们创建了一个新的 VNet 和子网：
- en: '![Figure 11.26: AOAI VNet assignment](img/B21019_11_26.jpg)'
  id: totrans-283
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.26：AOAI VNet 分配](img/B21019_11_26.jpg)'
- en: 'Figure 11.26: AOAI VNet assignment'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.26：AOAI VNet 分配
- en: In the **Firewall** section, if you wish to add your client’s IP address for
    accessing AOAI, you can check the corresponding checkbox.
  id: totrans-285
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**防火墙**部分，如果您希望添加客户的 IP 地址以便访问 AOAI，您可以勾选相应的复选框。
- en: Finally, click on the **Save** button to preserve the settings.
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，点击**保存**按钮以保存设置。
- en: By completing these steps, you have successfully configured the basic settings
    to allow AOAI access from a specific subnet through the service endpoint. Now,
    it’s time to test these settings to ensure that AOAI is only accessible from the
    configured subnet.
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 完成这些步骤后，您已成功配置基本设置，以便通过服务端点允许从指定子网访问 AOAI。现在，是时候测试这些设置，确保 AOAI 只能通过配置的子网访问。
- en: Testing the VNet settings
  id: totrans-288
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 测试 VNet 设置
- en: 'Follow the next steps:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤操作：
- en: Log in to Azure AI Foundry from your local machine and click on **Chat** from
    the playground.
  id: totrans-290
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从本地机器登录到 Azure AI Foundry，并点击**Chat**进入游乐场。
- en: Enter any prompt; for example, `Who is the CEO` `of Microsoft?`.
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入任何提示，例如，`Who is the CEO` `of Microsoft?`。
- en: You will receive an error stating `Access denied due to Virtual` `Network/Firewall
    rules`.
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将收到一个错误提示，显示`Access denied due to Virtual` `Network/Firewall rules`。
- en: 'Now, perform the same test from a VM located within the designated subnet:'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，从位于指定子网内的虚拟机执行相同的测试：
- en: Launch a Windows VM inside the subnet.
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在子网内启动一个 Windows 虚拟机。
- en: Log in to Azure AI Foundry from your local machine and click on **Chat** from
    the playground.
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从本地机器登录到 Azure AI Foundry，并点击**Chat**进入游乐场。
- en: Enter any prompt; for example, `Who is the CEO` `of Microsoft?`.
  id: totrans-296
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入任何提示，例如，`Who is the CEO` `of Microsoft?`。
- en: You will get an answer back as `As of September 2021, the CEO of Microsoft is
    Satya Nadella. He has been serving as the CEO since February` `4, 2014.`
  id: totrans-297
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将收到一个回答：`截至 2021 年 9 月，微软的 CEO 是 Satya Nadella。他自 2014 年 2 月 4 日起担任 CEO。`
- en: 'Open Command Prompt and execute `nslookup` on your AOAI endpoint to confirm
    that the traffic is indeed traversing to the AOAI public endpoint from the specified
    subnet and is using the Azure backbone network:'
  id: totrans-298
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开命令提示符并对您的 AOAI 端点执行 `nslookup`，以确认流量确实是通过指定子网到达 AOAI 公共端点，并且使用了 Azure 主干网络：
- en: '![Figure 11.27: AOAI public endpoint – nslookup](img/B21019_11_27.jpg)'
  id: totrans-299
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.27：AOAI 公共端点 – nslookup](img/B21019_11_27.jpg)'
- en: 'Figure 11.27: AOAI public endpoint – nslookup'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.27：AOAI 公共端点 – nslookup
- en: With this confirmation, it is evident that AOAI is exclusively accessible from
    the designated subnet via a service endpoint over the Azure network. In the next
    section, we will discuss AOAI access over a private endpoint as a measure to address
    this issue.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 有了这个确认，显然 AOAI 仅能通过 Azure 网络上的服务端点从指定子网访问。在下一节中，我们将讨论通过私有端点访问 AOAI，作为解决这个问题的措施。
- en: Private endpoint configuration
  id: totrans-302
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 私有端点配置
- en: 'AOAI private endpoints are a critical solution within the Azure ecosystem.
    They serve as a crucial component in enhancing the connection between your Azure
    resources and OpenAI services. Their primary function is to secure the transmission
    of data, keeping it isolated from exposure to the public internet. Through the
    establishment of a private link, AOAI private endpoints create a secure and efficient
    conduit for data transfer between your infrastructure and the OpenAI service.
    This approach helps in mitigating potential security risks typically associated
    with conventional public endpoints, as shown next:'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: AOAI私有端点是Azure生态系统中的关键解决方案。它们作为增强Azure资源与OpenAI服务之间连接的关键组件，主要功能是确保数据传输的安全，将其隔离于公共互联网之外。通过建立私有链接，AOAI私有端点为数据传输提供了一个安全高效的通道，将您的基础设施与OpenAI服务连接起来。这种方法有助于减轻传统公共端点通常带来的潜在安全风险，如下所示：
- en: '![Figure 11.28: AOAI private endpoint](img/B21019_11_28.jpg)'
  id: totrans-304
  prefs: []
  type: TYPE_IMG
  zh: '![图11.28：AOAI私有端点](img/B21019_11_28.jpg)'
- en: 'Figure 11.28: AOAI private endpoint'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.28：AOAI私有端点
- en: AOAI private endpoint configurations
  id: totrans-306
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: AOAI私有端点配置
- en: 'Follow the next steps:'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤操作：
- en: Log in to the Azure portal.
  id: totrans-308
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到Azure门户。
- en: Locate the previously created AOAI resource.
  id: totrans-309
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定位到之前创建的AOAI资源。
- en: Go to the **Networking** section and choose the **Firewalls and virtual** **networks**
    tab.
  id: totrans-310
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到**网络**部分，选择**防火墙和虚拟** **网络**选项卡。
- en: Choose the **Disabled**” option for **Allow** **access from**.
  id: totrans-311
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**禁用**”选项以设置**允许** **访问**来自。
- en: Go to the **Private endpoint** **connections** tab.
  id: totrans-312
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到**私有端点** **连接**选项卡。
- en: Click on **Private endpoint**.
  id: totrans-313
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**私有端点**。
- en: Enter the private endpoint instance name, network interface name, and region,
    then continue to the next page.
  id: totrans-314
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入私有端点实例名称、网络接口名称和区域，然后继续到下一页。
- en: Leave the default settings unchanged on all other pages and proceed to create
    the private endpoint.
  id: totrans-315
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在所有其他页面上保持默认设置不变，然后继续创建私有端点。
- en: 'Once the private endpoint is created, you will see a private IP and private
    DNS assigned to the AOAI endpoint:'
  id: totrans-316
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦创建了私有端点，您将看到一个私有IP和私有DNS分配给AOAI端点：
- en: '![Figure 11.29: Private endpoint DNS details](img/B21019_11_29.jpg)'
  id: totrans-317
  prefs: []
  type: TYPE_IMG
  zh: '![图11.29：私有端点DNS详细信息](img/B21019_11_29.jpg)'
- en: 'Figure 11.29: Private endpoint DNS details'
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.29：私有端点DNS详细信息
- en: Following these steps, you’ve effectively set up the fundamental configurations
    to permit AOAI access via a private endpoint. The next step involves testing these
    settings to confirm that AOAI is exclusively accessible through the private endpoint.
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 按照这些步骤，您已有效设置了允许通过私有端点访问AOAI的基本配置。下一步是测试这些设置，以确认AOAI仅能通过私有端点访问。
- en: Testing the private endpoint settings
  id: totrans-320
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 测试私有端点设置
- en: 'Follow the next steps:'
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤操作：
- en: Log in to Azure AI Foundry from your local machine and click on **Chat** from
    the playground.
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从本地机器登录到Azure AI Foundry，并点击**Chat**进入操作台。
- en: Enter any prompt; for example, `Who is the CEO` `of Microsoft?`.
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入任何提示，例如 `Who is the CEO` `of Microsoft?`。
- en: You will receive an error stating `Access denied due to Virtual Network/Firewall
    rules`. This is because you disabled the public access completely.
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将收到一个错误，提示 `因虚拟网络/防火墙规则拒绝访问`。这是因为您完全禁用了公共访问。
- en: 'Now, perform the same test from a VM located within the designated subnet where
    the private endpoint has been created:'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，从位于创建了私有端点的指定子网内的虚拟机执行相同的测试：
- en: Launch a Windows VM inside the subnet where you have created the private endpoint.
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您创建私有端点的子网内启动一个Windows虚拟机。
- en: Log in to Azure AI Foundry from your local machine and click on **Chat** from
    the playground.
  id: totrans-327
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从本地机器登录到Azure AI Foundry，并点击**Chat**进入操作台。
- en: Enter any prompt; for example, `Who is the CEO` `of Microsoft?`.
  id: totrans-328
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入任何提示，例如 `Who is the CEO` `of Microsoft?`。
- en: You will get an answer back as `As of September 2021, the CEO of Microsoft is
    Satya Nadella. He has been serving as the CEO since February` `4, 2014`.
  id: totrans-329
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将收到一个答案，类似于 `截至2021年9月，微软的CEO是萨蒂亚·纳德拉。自2014年2月4日起，他一直担任CEO`。
- en: 'Open Command Prompt and execute `nslookup` on your AOAI endpoint to confirm
    that traffic is indeed traversing through the private endpoint from the specified
    subnet:'
  id: totrans-330
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开命令提示符，并在您的AOAI端点上执行`nslookup`，确认流量确实是通过指定子网的私有端点传输：
- en: '![Figure 11.30: AOAI private endpoint – nslookup](img/B21019_11_30.jpg)'
  id: totrans-331
  prefs: []
  type: TYPE_IMG
  zh: '![图11.30：AOAI私有端点 – nslookup](img/B21019_11_30.jpg)'
- en: 'Figure 11.30: AOAI private endpoint – nslookup'
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.30：AOAI私有端点 – nslookup
- en: This confirmation establishes that, with a private endpoint, you can access
    AOAI services without routing traffic over the public internet. This represents
    the most secure configuration for accessing AOAI resources.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 此确认表明，通过私有端点，您可以在不通过公共互联网的情况下访问 AOAI 服务。这是访问 AOAI 资源的最安全配置。
- en: In the upcoming section, we will delve into AOAI service data encryption. Many
    enterprises are not only focused on securing their environments through various
    network settings but also emphasize the need to encrypt data both in transit and
    at rest. This approach not only ensures the integrity and confidentiality of data,
    meeting rigorous SOC audit standards, but also aligns with HIPAA and PCI compliance
    mandates. By safeguarding sensitive information against unauthorized access and
    breaches, enterprises can adhere to regulatory requirements and best practices,
    thereby establishing a robust security framework for their data.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的部分，我们将深入探讨 AOAI 服务的数据加密。许多企业不仅关注通过各种网络设置来保障其环境安全，还强调需要加密数据的传输过程和静态存储过程。这种方法不仅确保了数据的完整性和机密性，满足严格的
    SOC 审计标准，还符合 HIPAA 和 PCI 合规要求。通过保护敏感信息免受未经授权的访问和泄露，企业能够遵守监管要求和最佳实践，从而为其数据建立一个稳固的安全框架。
- en: Data encryption
  id: totrans-335
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据加密
- en: Data encryption for Azure is a way of protecting your data from unauthorized
    access by using various methods, protocols, and algorithms. Azure encrypts your
    data both at rest and in transit, meaning that your data is secure when it is
    stored (at rest) in Azure services and when it is transferred over the network
    (in transit).
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 的数据加密是一种通过使用各种方法、协议和算法来保护数据免受未经授权访问的方式。Azure 会对数据进行静态加密和传输加密，这意味着无论数据是在
    Azure 服务中存储（静态）还是在网络中传输（传输），都能保持安全。
- en: Encryption in transit
  id: totrans-337
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 传输加密
- en: Data encryption in transit for AOAI is managed by Microsoft’s Azure network
    infrastructure. Microsoft employs **Transport Layer Security** (**TLS**) 1.2 as
    the default security protocol for all its services, including AOAI. It also uses
    IPsec and MACsec to encrypt all Azure traffic within a region or between regions,
    utilizing the **Advanced Encryption Standard 256** (**AES-256**) block cipher
    for encryption. Importantly, this traffic remains entirely within Microsoft’s
    global network backbone and does not traverse the public internet (using a private
    endpoint). This approach guarantees that your data is safeguarded from unauthorized
    access or tampering during transmission by the AOAI service.
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: AOAI 的数据传输加密由微软的 Azure 网络基础设施管理。微软使用 **传输层安全性** (**TLS**) 1.2 作为所有服务（包括 AOAI）的默认安全协议。它还使用
    IPsec 和 MACsec 来加密区域内或区域间的所有 Azure 流量，采用 **高级加密标准 256** (**AES-256**) 块加密算法进行加密。重要的是，这些流量完全保持在微软的全球网络骨干中，不会通过公共互联网（使用私有端点）。这种方法确保了在传输过程中，您的数据能够防止未经授权的访问或篡改。
- en: Encryption at rest
  id: totrans-339
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 静态加密
- en: 'Microsoft’s strategy for implementing dual layers of encryption for data at
    rest involves the following:'
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 微软实施双层加密策略来保护静态数据的方案包括以下内容：
- en: '**Microsoft-managed** **keys** (**MMK**)'
  id: totrans-341
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**微软管理的** **密钥** (**MMK**)'
- en: '**Customer-managed** **keys** (**CMK**)'
  id: totrans-342
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**客户管理的** **密钥** (**CMK**)'
- en: MMK
  id: totrans-343
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: MMK
- en: AOAI operates as part of the broader Azure AI services ecosystem, where data
    security is paramount. Within Azure AI services, data is safeguarded using **Federal
    Information** **Processing Standard** (FIPS) 140-2-compliant 256-bit AES encryption.
    This encryption standard ensures robust protection for your data. The encryption
    and decryption procedures are seamlessly integrated, meaning that encryption and
    access management are taken care of automatically. This setup guarantees that
    your data remains inherently secure without requiring any manual code or application
    adjustments to leverage this encryption layer.
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: AOAI 作为更广泛的 Azure AI 服务生态系统的一部分运行，在该生态系统中，数据安全至关重要。在 Azure AI 服务中，数据通过符合 **联邦信息处理标准**
    (**FIPS**) 140-2 的 256 位 AES 加密进行保护。此加密标准确保了对数据的强有力保护。加密和解密过程已无缝集成，这意味着加密和访问管理会自动进行处理。此设置确保您的数据始终处于安全状态，无需手动调整代码或应用程序来利用此加密层。
- en: CMK
  id: totrans-345
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: CMK
- en: For those seeking enhanced control over key management, CMK, sometimes known
    as **Bring Your Own Key** (**BYOK**), offers a greater level of flexibility in
    creating, rotating, disabling, and revoking access controls. Moreover, CMK enables
    you to conduct audits on the encryption keys utilized to protect your data.
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 对于那些希望增强密钥管理控制的用户，CMK，有时也被称为**自带密钥**（**BYOK**），提供了更大的灵活性，允许您创建、轮换、禁用和撤销访问控制。此外，CMK还使您能够对用于保护数据的加密密钥进行审计。
- en: Implementing CMK necessitates the utilization of Azure Key Vault as the designated
    storage solution for your customer-managed keys. You have the option to either
    generate your own keys and store them within a key vault or leverage the Azure
    Key Vault APIs to generate these keys.
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 实施CMK需要使用Azure Key Vault作为存储您客户管理密钥的指定解决方案。您可以选择生成自己的密钥并将其存储在密钥保管库中，或利用Azure
    Key Vault API来生成这些密钥。
- en: Important note
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: 'To ensure seamless integration between the Azure AI service resource and Azure
    Key Vault, they must reside in the same region and be linked to the same Azure
    AD tenant. Although they can belong to different subscriptions, this alignment
    is crucial for their effective functioning. To apply for authorization to employ
    CMK, kindly proceed to complete and submit the form accessible at the following
    link: [https://aka.ms/cogsvc-cmk](https://aka.ms/cogsvc-cmk). Please note that
    the approval process for your request typically takes around 3 to 5 business days.
    For activating CMK, it’s imperative to ensure that both the **Soft Delete** and
    **Do Not Purge** properties are enabled on the associated key vault. It’s important
    to note that only RSA keys with a size of 2048 are supported for encryption within
    Azure AI services.'
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 为确保Azure AI服务资源和Azure Key Vault之间的无缝集成，它们必须位于同一地区，并链接到相同的Azure AD租户。尽管它们可以属于不同的订阅，但这种对齐对于其有效运作至关重要。若要申请使用CMK的授权，请前往并填写以下链接中的表格：[https://aka.ms/cogsvc-cmk](https://aka.ms/cogsvc-cmk)。请注意，您的申请审批过程通常需要约3至5个工作日。要启用CMK，必须确保关联的密钥保管库已启用**软删除**和**不清除**属性。请注意，只有2048大小的RSA密钥才能在Azure
    AI服务中用于加密。
- en: 'Now, let’s proceed with configuring CMK for the AOAI resource:'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们继续为AOAI资源配置CMK：
- en: Sign in to the Azure portal.
  id: totrans-351
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到Azure门户。
- en: Select the appropriate AOAI service resource.
  id: totrans-352
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择适当的AOAI服务资源。
- en: On the left, select **Encryption**.
  id: totrans-353
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧，选择**加密**。
- en: Under **Encryption type**, select **Customer** **Managed Keys**.
  id: totrans-354
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**加密类型**下，选择**客户管理密钥**。
- en: Enter the **Key URI** value or choose **Select from** **Key Vault**.
  id: totrans-355
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入**密钥URI**值或选择**从密钥保管库中选择**。
- en: Save your changes.
  id: totrans-356
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存您的更改。
- en: With these settings in place, you have successfully enabled CMK to encrypt data
    at rest. You can rotate a customer-managed key within the key vault to align with
    your compliance policies. When a key rotation occurs, it’s essential to update
    the Azure AI services resource to use the new key **Uniform Resource** **Identifier**
    (**URI**).
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: 设置完成后，您已成功启用CMK对静态数据进行加密。您可以在密钥保管库中轮换客户管理密钥，以符合您的合规政策。当发生密钥轮换时，必须更新Azure AI服务资源，以使用新的**统一资源标识符**（**URI**）。
- en: Up to this point, we’ve discussed data privacy and security measures that can
    be implemented for the AOAI service to safeguard enterprise data. In the next
    section, we will shift our focus to one of the most crucial topics, which is model
    safety, in accordance with responsible AI practices.
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们讨论了可以为AOAI服务实施的数据隐私和安全措施，以保护企业数据。在下一节中，我们将重点讨论负责任的人工智能实践中的一个最为关键的话题——模型安全。
- en: Responsible AI for AOAI
  id: totrans-359
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: AOAI的负责任人工智能
- en: Recent advancements in LLMs have demonstrated significant progress in various
    sophisticated tasks such as content and code generation, summarization, and search.
    While these developments offer numerous advantages, they also present new challenges
    in ensuring responsible AI usage, including concerns regarding harmful content,
    manipulation, human-like behavior, privacy, and more.
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: 最近，LLM（大语言模型）的进展在内容和代码生成、摘要提取、搜索等多种复杂任务中取得了显著进展。尽管这些发展带来了诸多优势，但它们也提出了确保负责任的人工智能使用的新挑战，包括有关有害内容、操控、人类行为、隐私等方面的担忧。
- en: 'To address these challenges, Microsoft has introduced a comprehensive set of
    technical guidelines and resources to aid users in responsibly incorporating AOAI
    models into their AI systems. These guidelines are based on the Microsoft Responsible
    AI Standard, which sets forth the policy requirements followed by Microsoft’s
    engineering teams. The standard primarily emphasizes the importance of identifying,
    measuring, and mitigating potential harms, as well as planning for the operation
    of AI systems. Consistent with these principles, the recommendations are divided
    into four key stages:'
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 为了应对这些挑战，微软推出了一套全面的技术指南和资源，帮助用户负责任地将AOAI模型整合到他们的AI系统中。这些指南基于微软《负责任AI标准》，该标准规定了微软工程团队遵循的政策要求。该标准主要强调识别、衡量和减轻潜在危害的重要性，并对AI系统的运营进行规划。根据这些原则，推荐的做法分为四个关键阶段：
- en: '**Identify**: This stage involves identifying and prioritizing potential harms
    that may arise from your AI system. This is accomplished through iterative processes
    such as red-teaming, stress-testing, and comprehensive analysis.'
  id: totrans-362
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**识别**：这一阶段涉及识别和优先考虑可能从你的AI系统中产生的潜在危害。这通过如红队测试、压力测试和全面分析等迭代过程来实现。'
- en: '**Measure**: In this stage, you quantify the frequency and severity of identified
    harms by establishing clear metrics, creating test sets for measurement, and conducting
    systematic testing. Both manual and automated testing methods are employed.'
  id: totrans-363
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**衡量**：在这一阶段，你通过建立明确的指标、创建用于衡量的测试集以及进行系统测试来量化已识别危害的频率和严重性。手动和自动化的测试方法都会被使用。'
- en: '**Mitigate**: To address these harms, you implement tools and strategies, including
    prompt engineering and the use of content filters. After implementing mitigations,
    it’s essential to repeat the measurement process to assess the effectiveness of
    these efforts.'
  id: totrans-364
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**减轻**：为了解决这些危害，你需要实施工具和策略，包括提示工程和使用内容过滤器。在实施减轻措施后，必须重复衡量过程，以评估这些努力的效果。'
- en: '**Operate**: In the final stage, you define and execute a deployment and operational
    readiness plan to ensure that the AI system functions smoothly and responsibly.'
  id: totrans-365
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**操作**：在最后阶段，你需要定义并执行一个部署和操作准备计划，以确保AI系统平稳且负责任地运行。'
- en: These stages closely correspond to the functions outlined in the **National
    Institute of Standards and Technology AI Risk Management Framework** (**NIST RMF**),
    enhancing the responsible and effective management of AI systems.
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: 这些阶段与**国家标准与技术研究院AI风险管理框架**（**NIST RMF**）中概述的功能密切对应，有助于负责任且高效地管理AI系统。
- en: Now, let’s delve into the specifics of each of these steps.
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们深入探讨每个步骤的具体内容。
- en: Identify
  id: totrans-368
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 识别
- en: When developing AI systems, it’s crucial to identify potential harms and risks
    early on. This proactive approach enhances the effectiveness of mitigation efforts.
    To assess potential harms, consider the specific contexts in which the AI system
    will be used. This involves conducting impact assessments, iterative testing,
    and comprehensive analysis to pinpoint vulnerabilities and limitations.
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 在开发AI系统时，及早识别潜在的危害和风险至关重要。这种主动的方式增强了减轻措施的有效性。为了评估潜在的危害，考虑AI系统将被使用的具体情境。包括进行影响评估、迭代测试和全面分析，以找出漏洞和局限性。
- en: 'The goal is to create a prioritized list of potential harms for each scenario.
    Here’s a step-by-step approach:'
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: 目标是为每个场景创建一个潜在危害的优先列表。以下是逐步的实施方法：
- en: 'Identify relevant harms:'
  id: totrans-371
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 识别相关的危害：
- en: '**Model-specific considerations**: Recognize potential harms linked to the
    model’s capabilities and limitations, particularly when working with different
    models (for example, GPT-3.5 and GPT-4). Evaluate how these distinctions impact
    your system.'
  id: totrans-372
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**模型特定考虑**：识别与模型能力和局限性相关的潜在危害，特别是在处理不同模型时（例如，GPT-3.5和GPT-4）。评估这些差异如何影响你的系统。'
- en: '**Contextualize potential harms**: Pinpoint additional harms or expanded scope
    of harm that may arise from the intended use of your system. Utilize tools such
    as Responsible AI impact assessments ([https://blogs.microsoft.com/wp-content/uploads/prod/sites/5/2022/06/Microsoft-RAI-Impact-Assessment-Template.pdf](https://blogs.microsoft.com/wp-content/uploads/prod/sites/5/2022/06/Microsoft-RAI-Impact-Assessment-Template.pdf))
    to identify these potential harms.'
  id: totrans-373
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**情境化潜在危害**：确定可能因系统的预期使用而产生的额外危害或扩大危害范围。使用诸如负责任的 AI 影响评估（[https://blogs.microsoft.com/wp-content/uploads/prod/sites/5/2022/06/Microsoft-RAI-Impact-Assessment-Template.pdf](https://blogs.microsoft.com/wp-content/uploads/prod/sites/5/2022/06/Microsoft-RAI-Impact-Assessment-Template.pdf)）等工具来识别这些潜在危害。'
- en: '**Prioritize harms**: Assess risk factors such as frequency and severity. Evaluate
    the level of risk associated with each harm and gauge the likelihood of each risk
    occurring. Collaborate with experts and stakeholders to make informed prioritization
    decisions.'
  id: totrans-374
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**优先考虑危害**：评估风险因素，例如频率和严重性。评估与每个危害相关的风险水平，并衡量每个风险发生的可能性。与专家和利益相关者合作，做出明智的优先排序决策。'
- en: '**Conduct testing**: Engage in red-team testing and stress testing, starting
    with high-priority harms, to understand how identified harms manifest in your
    specific scenario. This process also helps discover potential new harms.'
  id: totrans-375
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**进行测试**：进行红队测试和压力测试，从高优先级危害开始，了解已识别的危害如何在您的特定场景中表现。此过程还帮助发现潜在的新危害。'
- en: '**Share findings**: Document and share identified harms with relevant stakeholders
    through internal compliance procedures.'
  id: totrans-376
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**共享发现**：通过内部合规程序记录并与相关利益相关者分享已识别的危害。'
- en: By the end of this process, you should have a detailed and sorted record of
    identified harms. As you uncover new instances of harms or fresh harms, refine
    and extend this list by repeating the process.
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 在此过程结束时，您应该有一份详细且已排序的已识别危害记录。当您发现新的危害实例或新的危害时，通过重复此过程来完善和扩展此列表。
- en: Measure
  id: totrans-378
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 测量
- en: 'After identifying and prioritizing potential harms, the next step is to develop
    a strategy for systematic evaluation and assessment of the AI system. This can
    be done manually or automatically, with a recommended combination of both approaches,
    starting with manual measurement:'
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: 在识别和优先排序潜在危害之后，下一步是制定一个策略，系统地评估和评估 AI 系统。这可以通过手动或自动方式完成，推荐两者结合的方法，首先从手动测量开始：
- en: Focus on a small set of priority issues and continuously monitor progress until
    adverse effects are mitigated
  id: totrans-380
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 专注于一小部分优先事项，并持续监控进展，直到不良影响得到缓解。
- en: Define and report metrics until an automated evaluation is reliable
  id: totrans-381
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义并报告度量标准，直到自动评估变得可靠。
- en: Conduct periodic spot checks to ensure the accuracy of automated assessment
  id: totrans-382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定期进行抽查，确保自动评估的准确性。
- en: 'Then, proceed to automated measurement:'
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，继续进行自动化测量：
- en: Scale up measurements for broader coverage and more comprehensive results
  id: totrans-384
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扩大测量范围，以便更广泛覆盖并获得更全面的结果。
- en: Continuously monitor for setbacks as the system, usage patterns, and mitigation
    strategies evolve
  id: totrans-385
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 随着系统、使用模式和缓解策略的演变，持续监控可能的挫折。
- en: 'Here are specific suggestions for assessing potential harms in your AI system,
    starting with manual evaluation and defining a strategy for automation:'
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是针对评估您的 AI 系统潜在危害的具体建议，首先进行手动评估并定义自动化策略：
- en: '**Craft input scenarios**: Develop input scenarios likely to trigger each identified
    priority harm. Create diverse examples of targeted inputs that may lead to each
    prioritized harm.'
  id: totrans-387
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**设计输入场景**：开发可能触发每个已识别优先危害的输入场景。创建多样化的目标输入示例，这些示例可能导致每个优先危害的发生。'
- en: '**Generate system outputs**: Use these examples as inputs for the AI system
    and document the corresponding outputs.'
  id: totrans-388
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**生成系统输出**：使用这些示例作为 AI 系统的输入，并记录相应的输出结果。'
- en: '**Assess and** **communicate findings**:'
  id: totrans-389
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**评估并** **传达发现**：'
- en: Define metrics for each application, measuring the frequency and severity of
    harmful outputs.
  id: totrans-390
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为每个应用定义度量标准，衡量有害输出的频率和严重性。
- en: Categorize outputs as detrimental or problematic within the context of your
    system and specific harm category.
  id: totrans-391
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将输出结果分类为在您的系统和特定危害类别中有害或有问题的内容。
- en: Assess system outputs against defined metrics, document occurrences of detrimental
    outputs, and repeat assessments to evaluate mitigations and monitor for regression.
  id: totrans-392
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据定义的度量标准评估系统输出，记录有害输出的发生，并重复评估以评估缓解措施并监控是否有回退。
- en: Share findings with relevant stakeholders through internal compliance procedures.
  id: totrans-393
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过内部合规程序与相关利益相关者共享发现。
- en: By the end of this measurement stage, you should have an established measurement
    strategy, an initial collection of documented outcomes, and refined metrics and
    measurement sets. Continuously update and add metrics for unforeseen harms, and
    regularly update recorded results as you implement and test mitigation strategies.
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个测量阶段结束时，你应该已经建立了测量策略，初步收集了文档化的结果，并且优化了指标和测量集。随着你实施和测试缓解策略，持续更新并添加应对未预见到的危害的指标，定期更新记录的结果。
- en: Mitigate
  id: totrans-395
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 缓解
- en: 'To mitigate the potential risks linked with advanced language models such as
    AOAI, a multi-faceted approach is crucial. This involves a cyclical process of
    testing, evaluation, and adaptation. A comprehensive risk management strategy
    should encompass four layers of countermeasures to address the identified concerns.
    These layers include the following (as seen in *Figure 11**.31*):'
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: 为了缓解与先进语言模型（如AOAI）相关的潜在风险，采取多方位的策略至关重要。这涉及一个循环的测试、评估和适应过程。一个全面的风险管理策略应包括四个层次的对策，以应对已识别的风险。这些层次包括以下内容（如*图
    11.31*所示）：
- en: '![Figure 11.31: AOAI model mitigation layers](img/B21019_11_31.jpg)'
  id: totrans-397
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.31：AOAI模型缓解层](img/B21019_11_31.jpg)'
- en: 'Figure 11.31: AOAI model mitigation layers'
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.31：AOAI模型缓解层
- en: '**Model layer**: When working with AI models, it’s essential to understand
    the specific model’s capabilities and any fine-tuning measures taken by developers
    to align the model with its intended use. These fine-tuning steps help mitigate
    potential risks and harmful outcomes. For instance, some models, such as those
    developed by OpenAI, incorporate techniques such as **reinforcement learning from
    human feedback** (**RLHF**) and fine-tuning to build safety into the model. This
    approach helps prevent unwanted behaviors, as seen in models such as ChatGPT,
    GPT 4, GPT4-o, and so on. For example, ChatGPT has been fine-tuned to avoid generating
    inappropriate or harmful content by incorporating feedback loops where human reviewers
    assess outputs and guide the model toward safer and more useful interactions.
    This ensures that the model responds appropriately in a variety of contexts, reducing
    the likelihood of generating offensive or misleading information.'
  id: totrans-399
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**模型层**：在使用人工智能模型时，了解具体模型的能力以及开发者为使模型符合预期用途所采取的任何微调措施至关重要。这些微调步骤有助于减少潜在的风险和不良结果。例如，一些模型，如OpenAI开发的模型，采用了**人类反馈强化学习**（**RLHF**）和微调技术来构建模型的安全性。这种方法有助于防止不良行为，如在ChatGPT、GPT
    4、GPT4-o等模型中所见。例如，ChatGPT通过引入反馈循环进行微调，以避免生成不适当或有害的内容，反馈循环中，人类审核员评估输出并引导模型朝着更安全、更有用的互动方向发展。这确保了模型在各种上下文中做出适当回应，减少了生成冒犯性或误导性信息的可能性。'
- en: '**Safety system layer**: Selecting a base model is just the first step. Relying
    solely on built-in safety measures is often insufficient, as even fine-tuned LLMs
    can make errors and are vulnerable to attacks such as jailbreaks. To address this,
    a layered **defense-in-depth** (**DiD**) strategy is employed, similar to security
    practices. An AI-driven safety system operates alongside the model, continuously
    monitoring inputs and outputs to prevent attacks and identify errors. At the platform
    level, content filters such as those from AOAI are used to block harmful input
    and output content, enhancing the overall safety and security of the system.'
  id: totrans-400
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安全系统层**：选择基础模型只是第一步。仅仅依赖内置的安全措施通常不足够，因为即便是经过微调的LLM也可能犯错，且容易受到诸如越狱攻击等威胁。为了解决这个问题，采用了分层的**深度防御**（**DiD**）策略，类似于安全实践。人工智能驱动的安全系统与模型协同工作，持续监控输入和输出，以防止攻击并识别错误。在平台层面，使用如AOAI提供的内容过滤器来阻止有害的输入和输出内容，从而增强系统的整体安全性和防护能力。'
- en: '**Application layer**: At the application level, prioritizing safety is crucial.
    Developers can achieve this by utilizing “guided instructions” (also referred
    to as “clear prompts” or “model guidance”) in conjunction with prompt engineering,
    a topic explored in-depth later in this book. These guided instructions involve
    providing explicit directions to the model to steer its behavior, which can significantly
    align the system’s responses with desired outcomes. Additionally, incorporating
    user-centered design principles and implementing UX mitigations are vital strategies
    to prevent AI misuse and reduce the risk of overreliance on AI systems, such as
    the following:'
  id: totrans-401
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**应用层**：在应用层面，优先考虑安全性至关重要。开发人员可以通过使用“引导指令”（也称为“明确提示”或“模型指导”）结合提示工程来实现这一点，这一主题将在本书后续详细探讨。这些引导指令涉及向模型提供明确的指示来引导其行为，这可以显著地使系统的响应与期望结果保持一致。此外，融入以用户为中心的设计原则并实施
    UX 缓解措施是防止 AI 滥用并减少对 AI 系统过度依赖的关键策略，例如以下内容：'
- en: '**Review and edit**: Design the UX to encourage thorough review and editing
    of AI-generated content before final acceptance.'
  id: totrans-402
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**审查与编辑**：设计 UX 以鼓励在最终接受之前彻底审查和编辑 AI 生成的内容。'
- en: '**Transparency**: Inform users about potential inaccuracies in AI-generated
    content from the outset and regularly remind them during use. Highlight specific
    content types with known inaccuracies, such as numbers, to prompt verification
    and external validation.'
  id: totrans-403
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**透明性**：从一开始就告知用户 AI 生成内容可能存在的不准确性，并在使用过程中定期提醒。强调已知不准确性的特定内容类型，如数字，以提示用户验证和外部确认。'
- en: '**User accountability**: Emphasize that users are responsible for the final
    content when reviewing AI-generated material. Remind developers, for instance,
    to thoroughly assess and test code suggestions before acceptance.'
  id: totrans-404
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户责任**：强调用户在审查 AI 生成的材料时对最终内容负责。例如，提醒开发人员在接受代码建议前，彻底评估和测试这些建议。'
- en: '**Citation**: Include clear citations of information sources when generating
    content derived from references provided to the model.'
  id: totrans-405
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**引用**：在生成基于提供给模型的参考信息的内容时，务必明确标注引用来源。'
- en: '**Length limitations**: Limit input and output length when necessary to prevent
    generating undesirable or harmful content, ensuring responsible use and minimizing
    misuse.'
  id: totrans-406
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**长度限制**：在必要时限制输入和输出的长度，以防止生成不良或有害内容，确保负责任的使用并最小化滥用。'
- en: '**Input and output structuring**: Use prompt engineering to structure inputs
    and control the format or pattern of generated outputs, avoiding open-ended responses
    and enabling users to query within specific boundaries.'
  id: totrans-407
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**输入和输出结构化**：使用提示工程来结构化输入并控制生成输出的格式或模式，避免开放式响应，并使用户能够在特定边界内进行查询。'
- en: '**Automated posting restrictions**: Implement controls to limit automatic posting
    of AI-generated content on social media or external sites, and consider preventing
    automated execution of generated code, to maintain responsible and intentional
    usage.'
  id: totrans-408
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自动发布限制**：实施控制措施，限制自动发布 AI 生成的内容到社交媒体或外部网站，并考虑防止自动执行生成的代码，以保持负责任和有意图的使用。'
- en: '**Positioning layer**: In the positioning layer, transparency is key. To empower
    users, provide clear and concise information about the system’s capabilities and
    limitations. Educational resources, such as a dedicated “learn more” section,
    can offer users a deeper understanding of the system’s functionality and boundaries.
    Additionally, promote responsible system use by sharing best practices with users
    and stakeholders. These guidelines can include effective prompt crafting, reviewing
    generated content, and other essential tips. Integrating these resources and guidelines
    into the UX ensures easy access and enhances user understanding.'
  id: totrans-409
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**定位层**：在定位层，透明度至关重要。为了赋能用户，提供关于系统能力和局限性的清晰简洁的信息。教育资源，如专门的“了解更多”部分，可以让用户更深入地理解系统的功能和边界。此外，通过与用户和利益相关者分享最佳实践来促进负责任的系统使用。这些指导方针可以包括有效的提示设计、审查生成的内容以及其他必要的技巧。将这些资源和指导方针集成到
    UX 中，确保易于访问并增强用户理解。'
- en: When implementing measures to address potential harms, it’s crucial to establish
    a systematic process for continuously evaluating their effectiveness. Regularly
    documenting and reviewing measurement results is vital for ongoing system improvement.
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: 在实施应对潜在危害的措施时，建立一个系统的过程来持续评估其有效性至关重要。定期记录和审查测量结果对系统的持续改进至关重要。
- en: Operate
  id: totrans-411
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 操作
- en: 'Once measurement and mitigation systems are in place, the next step is to establish
    and enact a deployment and operational readiness strategy. This phase encompasses
    thorough reviews of your system and mitigation strategies with relevant stakeholders,
    establishing pipelines for telemetry and feedback collection, and devising an
    **incident response** (**IR**) and rollback strategy to ensure seamless system
    operation and preparedness for any potential issues. Outlined next are recommended
    steps for deploying and operating a system leveraging the AOAI service while implementing
    precise and efficient measures to mitigate potential risks:'
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦测量和缓解系统到位，下一步是建立并实施部署和操作准备策略。此阶段包括对系统及缓解策略与相关利益相关者的彻底审查，建立遥测和反馈收集管道，并制定**事件响应**（**IR**）和回滚策略，以确保系统的无缝运行，并为任何潜在问题做好准备。接下来列出了为部署和运营利用AOAI服务的系统而实施精确高效的风险缓解措施的推荐步骤：
- en: '**Collaborate with compliance teams**: Work with your organization’s compliance
    teams to determine the necessary types of reviews for your system, including legal,
    privacy, security, and accessibility assessments. This will help you identify
    potential issues and address them proactively.'
  id: totrans-413
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**与合规团队合作**：与组织的合规团队合作，确定系统所需的审查类型，包括法律、隐私、安全和可访问性评估。这有助于你识别潜在问题并主动解决。'
- en: '**Phased delivery strategy**: Implement a phased delivery approach for launching
    your AOAI service. This involves introducing the system to a small group of users
    initially, collecting feedback, and addressing any issues before a wider release.
    This approach helps manage risk, identifies unanticipated failure modes, and ensures
    proactive mitigation of unforeseen concerns.'
  id: totrans-414
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**分阶段交付策略**：为启动你的AOAI服务实施分阶段交付策略。最初将系统介绍给一小部分用户，收集反馈并解决任何问题，然后再进行更广泛的发布。这种方法有助于管理风险，识别未预见的失败模式，并确保主动缓解意外问题。'
- en: '**IR planning**: Develop a comprehensive **IR plan** (**IRP**), including timelines
    for effective **incident management** (**IM**). This plan should outline procedures
    for addressing and managing incidents efficiently.'
  id: totrans-415
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**IR规划**：制定全面的**IR计划**（**IRP**），包括有效的**事件管理**（**IM**）时间表。该计划应概述高效应对和管理事件的流程。'
- en: '**Rollback planning**: Establish a rollback plan to quickly revert to a previous
    system state in case of an unforeseen incident. This ensures minimal disruption
    and swift recovery.'
  id: totrans-416
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**回滚计划**：建立回滚计划，以便在发生不可预见的事件时，能够快速恢复到先前的系统状态。这可以确保最小化中断并实现快速恢复。'
- en: '**Swift action and mitigation**: Be prepared to take swift action in response
    to unexpected harms. Develop functionalities and procedures to identify and block
    problematic prompts and responses in near real time. In case of unanticipated
    harms, act promptly to block troublesome prompts and responses, implement suitable
    mitigations, investigate incidents thoroughly, and establish sustainable solutions.'
  id: totrans-417
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**迅速行动与缓解**：为应对意外危害做好迅速行动的准备。开发功能和流程，以便在接近实时的情况下识别并封锁问题提示和回应。在遭遇意外危害时，迅速行动，封锁有问题的提示和回应，实施适当的缓解措施，彻底调查事件，并建立可持续的解决方案。'
- en: '**Misuse prevention**: Implement processes to identify and address users who
    violate content policies, such as generating hate speech or using the system for
    harmful purposes. Take appropriate measures, including blocking users who frequently
    generate blocked or flagged content. Consider incorporating an appeals process
    when applicable.'
  id: totrans-418
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**误用防范**：实施流程，识别并处理违反内容政策的用户，例如生成仇恨言论或将系统用于有害目的。采取适当措施，包括阻止频繁生成被封锁或标记内容的用户。在适用时，考虑加入申诉流程。'
- en: '**User feedback mechanisms**: Establish robust user feedback channels for stakeholders
    and the public to submit feedback and report issues related to generated content
    or system use. Document and systematically evaluate feedback to enhance the system.
    Consider incorporating user feedback buttons to categorize content as “inaccurate,”
    “harmful,” or “incomplete.”'
  id: totrans-419
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户反馈机制**：建立健全的用户反馈渠道，允许利益相关者和公众提交反馈并报告与生成内容或系统使用相关的问题。记录并系统性地评估反馈，以改进系统。考虑加入用户反馈按钮，将内容分类为“错误的”、“有害的”或“不完整的”。'
- en: '**Telemetry data collection**: Collect and document telemetry data, considering
    applicable privacy laws and policies. This data should include signals reflecting
    user satisfaction and system usability. Leverage telemetry data to detect shortcomings
    and enhance the system to better meet user needs and expectations.'
  id: totrans-420
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**遥测数据收集**：收集并记录遥测数据，考虑适用的隐私法律和政策。这些数据应包括反映用户满意度和系统可用性的信号。利用遥测数据发现不足之处，并改进系统，更好地满足用户需求和期望。'
- en: Important note
  id: totrans-421
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: This chapter is for informational purposes only and should not be considered
    legal advice. It’s essential to consult with a legal expert to ensure compliance
    with specific regulations and laws applicable to the AI system in your jurisdiction.
    The recommendations provided may not be universally applicable, and it’s crucial
    to recognize that they might be insufficient in certain situations. Please seek
    legal guidance if you have any doubts or concerns about the laws and regulations
    that may apply to your system.
  id: totrans-422
  prefs: []
  type: TYPE_NORMAL
  zh: 本章节仅供参考，不能视为法律意见。确保遵守适用于您所在司法管辖区的特定法规和法律，咨询法律专家至关重要。提供的建议可能并不普遍适用，必须认识到在某些情况下它们可能不足够。如果您对适用于您的系统的法律和法规有任何疑问或担忧，请寻求法律指导。
- en: Summary
  id: totrans-423
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we presented a comprehensive exploration of critical considerations
    for deploying and operating the AOAI service. The focus was on ensuring compliance
    with regulatory requirements and privacy standards, as well as implementing robust
    safeguards for responsible and secure usage. We emphasized the importance of adhering
    to compliance standards and regulations pertinent to your operating jurisdiction,
    enabling legal and ethical AI deployment. Data privacy was highlighted as a non-negotiable
    aspect of AI deployment, with key practices outlined to safeguard user data and
    respect their privacy. The implementation of content filtering mechanisms was
    also identified as crucial to ensure that generated content aligns with ethical
    and safety guidelines. Additionally, we discussed the significance of managed
    identity solutions for securing access to the AOAI service, as well as configurations
    for VNets and private endpoints to enhance network and system security. Finally,
    we explored Microsoft’s layered defense approach, highlighting the significance
    of building and using GenAI responsibly with AOAI. This approach underscores the
    need for iterative, safeguarded strategies encompassing compliance, privacy, security,
    and ethical considerations, providing a robust framework for the responsible deployment
    of GenAI applications.
  id: totrans-424
  prefs: []
  type: TYPE_NORMAL
  zh: 本章节中，我们全面探讨了部署和运营AOAI服务的关键考虑事项。重点是确保遵守监管要求和隐私标准，并实施强有力的保障措施，以确保负责任和安全的使用。我们强调了遵守与您运营司法管辖区相关的合规标准和法规的重要性，从而实现合法和道德的AI部署。数据隐私被强调为AI部署的不可妥协方面，并概述了关键实践以保护用户数据并尊重其隐私。内容过滤机制的实施也被确定为确保生成内容符合道德和安全指南的关键。此外，我们还讨论了托管身份解决方案在确保访问AOAI服务的安全性方面的重要性，以及用于增强网络和系统安全的VNet和私有端点配置。最后，我们探讨了微软的分层防御方法，强调了以负责任的方式使用GenAI与AOAI的意义。这一方法强调了涵盖合规性、隐私、安全性和伦理考虑的迭代、受保护策略的必要性，为GenAI应用的负责任部署提供了强有力的框架。
- en: In the upcoming chapter, we will delve into various techniques for operationalizing
    AOAI, including critical aspects such as monitoring, cost management, quota management,
    **business continuity** (**BC**), and **disaster recovery** (**DR**). These topics
    are pivotal for ensuring the smooth and efficient operation of your AOAI services.
  id: totrans-425
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我们将深入探讨将AOAI投入实际应用的各种技术，包括监控、成本管理、配额管理、**业务连续性**（**BC**）和**灾难恢复**（**DR**）等关键方面。这些主题对于确保您的AOAI服务的顺利和高效运行至关重要。
