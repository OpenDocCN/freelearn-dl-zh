- en: '12'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '12'
- en: Ensuring Security and Privacy in Amazon Bedrock
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Amazon Bedrock中确保安全和隐私
- en: GenAI has been making remarkable developments, enabling machines to produce
    human-like content across various domains, including text, images, and even code.
    However, there have been concerns about the risks and challenges of using GenAI
    models and how the data is handled. In this chapter, we are going to look at security,
    privacy, and **Guardrails for** **Amazon Bedrock**.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 生成式AI（GenAI）正在取得显著进展，使机器能够在各个领域产生类似人类的内容，包括文本、图像甚至代码。然而，人们对使用GenAI模型的风险和挑战以及数据处理方式存在担忧。在本章中，我们将探讨Amazon
    Bedrock的安全、隐私和**限制措施**。
- en: Ensuring data privacy and security is a top priority in today’s digital landscape,
    and Amazon Bedrock has implemented robust measures to address this concern. We
    are going to look at data localization, isolation, and encryption and learn ways
    to ensure that your data remains within your designated AWS region, never shared
    nor stored, and protected through robust encryption protocols. Then, we will understand
    how Amazon Bedrock is integrated with AWS IAM to provide granular control over
    access privileges, ensuring that only authorized personnel can interact with your
    resources.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在当今的数字景观中，确保数据隐私和安全是首要任务，Amazon Bedrock已经实施了强有力的措施来应对这一关切。我们将探讨数据本地化、隔离和加密，并学习确保您的数据始终位于指定的AWS区域，不会被共享或存储，并通过强大的加密协议得到保护。然后，我们将了解Amazon
    Bedrock如何与AWS IAM集成，以提供对访问权限的细粒度控制，确保只有授权人员才能与您的资源交互。
- en: Moreover, we are going to discuss ethical practices and guardrails, allowing
    you to implement safeguards aligned with safe and responsible AI policies, such
    as content filters, denied topics, word filters, and sensitive information filters.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们将讨论道德规范和限制措施，使您能够实施与安全和负责任的AI政策相一致的安全保障，例如内容过滤器、禁止话题、单词过滤器以及敏感信息过滤器。
- en: 'Here are key topics that will be covered in this chapter:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖的关键主题包括：
- en: Security and privacy overview
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安全和隐私概述
- en: Data encryption
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据加密
- en: AWS IAM
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: AWS IAM
- en: Securing the network
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 保护网络
- en: Network flow
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络流量
- en: Ethical practices
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 道德规范
- en: Guardrails for Amazon Bedrock
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Amazon Bedrock的限制措施
- en: Technical requirements
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: This chapter requires you to have access to an AWS account. If you don’t have
    it already, you can go to [https://aws.amazon.com/getting-started/](https://aws.amazon.com/getting-started/)
    and create an AWS account.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 本章要求您拥有AWS账户访问权限。如果您还没有，可以访问[https://aws.amazon.com/getting-started/](https://aws.amazon.com/getting-started/)创建AWS账户。
- en: Secondly, you will need to set up AWS Python SDK (Boto3), which you can do by
    going to [https://docs.aws.amazon.com/bedrock/latest/APIReference/welcome.html](https://docs.aws.amazon.com/bedrock/latest/APIReference/welcome.html).
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 其次，您需要设置AWS Python SDK（Boto3），您可以通过访问[https://docs.aws.amazon.com/bedrock/latest/APIReference/welcome.html](https://docs.aws.amazon.com/bedrock/latest/APIReference/welcome.html)来完成此操作。
- en: 'You can carry out the Python setup in any way: install it on your local machine,
    or use AWS Cloud9, or utilize AWS Lambda, or leverage Amazon SageMaker.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以以任何方式执行Python设置：在本地机器上安装它，或使用AWS Cloud9，或利用AWS Lambda，或利用Amazon SageMaker。
- en: Note
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 备注
- en: There will be a charge associated with the invocation and customization of the
    FMs of Amazon Bedrock. Please refer to [https://aws.amazon.com/bedrock/pricing/](https://aws.amazon.com/bedrock/pricing/)
    to learn more.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 与Amazon Bedrock的FMs调用和定制相关的费用将会产生。请参阅[https://aws.amazon.com/bedrock/pricing/](https://aws.amazon.com/bedrock/pricing/)以获取更多信息。
- en: Security and privacy overview
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安全和隐私概述
- en: 'One of the core security principles of Amazon Bedrock is that you, as a user
    of Amazon Bedrock, are always in control of your data. Your data is never shared
    with other users or customers and is never used to improve or train the FMs. Let
    us look at the intricate layers of protection that Amazon Bedrock provides:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: Amazon Bedrock的核心安全原则之一是，作为Amazon Bedrock的用户，您始终控制着自己的数据。您的数据永远不会与其他用户或客户共享，也永远不会用于改进或训练FMs。让我们看看Amazon
    Bedrock提供的复杂保护层：
- en: '**Data localization**: The inference data or training data for model customization
    remains within the AWS region that you are using. This means that all API requests
    and data processing occur solely within the specified region, eliminating the
    risk of data migration or exposure beyond your designated boundaries. This regional
    isolation guarantees that your data never leaves the designated geographical boundaries,
    so you get an additional layer of protection and compliance with regional data
    regulations.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据本地化**：模型定制的推理数据或训练数据始终保留在您所使用的 AWS 区域内。这意味着所有 API 请求和数据处理都仅在该指定区域内进行，消除了数据迁移或超出指定边界暴露的风险。这种区域隔离确保您的数据永远不会离开指定的地理边界，因此您获得额外的保护层，并符合区域数据法规。'
- en: '**Data isolation**: Your inference or training data for model customization
    is stored in Amazon S3, but is never retained in the service-managed account,
    eliminating the possibility of accidental leaks, unauthorized access, or misuse
    by third parties, including model vendors or AWS itself. The only information
    stored pertains to operational metrics, such as usage data for billing purposes
    and metadata necessary for console functionality.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据隔离**：您用于模型定制的推理数据或训练数据存储在 Amazon S3 中，但永远不会保留在服务管理的账户中，消除了意外泄露、未经授权访问或第三方（包括模型供应商或
    AWS 本身）滥用数据的风险。存储的唯一信息涉及操作指标，例如用于计费目的的使用数据和用于控制台功能的元数据。'
- en: '**Encryption**: When it comes to encrypting data, Amazon Bedrock employs robust
    encryption protocols to safeguard the information. All the communications to,
    from, and within the service are encrypted in transit, with a minimum requirement
    of TLS 1.2 and a recommendation for TLS 1.3\. Additionally, Amazon Bedrock encourages
    the encryption of your customization training data stored in an Amazon S3 bucket
    and customized models using your own KMS keys, ensuring that only authorized parties
    with the correct credentials can access and utilize these resources.'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**加密**：在加密数据方面，Amazon Bedrock 采用强大的加密协议来保护信息。服务内、外部的所有通信在传输过程中都进行了加密，最低要求为
    TLS 1.2，并建议使用 TLS 1.3。此外，Amazon Bedrock 鼓励您使用自己的 KMS 密钥加密存储在 Amazon S3 存储桶中的定制训练数据和自定义模型，确保只有拥有正确凭证的授权方才能访问和使用这些资源。'
- en: '**IAM**: Amazon Bedrock’s integration with AWS IAM empowers you with granular
    control over access privileges. You can selectively allow or deny access to specific
    models, specific API calls, model customization jobs, or Amazon Bedrock itself.
    This fine-grained access control ensures that only authorized personnel can interact
    with your resources, minimizing the risk of unauthorized access or accidental
    modifications.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**IAM**：Amazon Bedrock 与 AWS IAM 的集成赋予您对访问权限的细粒度控制。您可以有选择地允许或拒绝对特定模型、特定 API
    调用、模型定制作业或 Amazon Bedrock 本身的访问。这种细粒度的访问控制确保只有授权人员才能与您的资源交互，最大限度地降低未经授权访问或意外修改的风险。'
- en: '**Comprehensive monitoring and logging**: As we have seen in [*Chapter 11*](B22045_11.xhtml#_idTextAnchor207),
    transparency and auditability are essential components of data privacy and protection.
    Amazon Bedrock offers comprehensive monitoring and logging capabilities, so you
    can track usage metrics, build customized dashboards using Amazon CloudWatch,
    and monitor API activity through AWS CloudTrail. These features provide invaluable
    insights into your data’s usage, aiding in troubleshooting and ensuring compliance
    with regulatory requirements.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**全面的监控和日志记录**：正如我们在[*第 11 章*](B22045_11.xhtml#_idTextAnchor207)中看到的，透明度和可审计性是数据隐私和保护的基本组成部分。Amazon
    Bedrock 提供全面的监控和日志记录功能，因此您可以跟踪使用指标，使用 Amazon CloudWatch 构建自定义仪表板，并通过 AWS CloudTrail
    监控 API 活动。这些功能为您提供了关于数据使用的宝贵见解，有助于故障排除并确保符合监管要求。'
- en: '**Compliance standards**: Amazon Bedrock is committed to meeting the industry
    standards with data privacy and protection. It has multiple accreditations, such
    as **GDPR** (**General Data Protection Regulation**), **HIPAA** (**Health Insurance
    Portability and Accountability Act**), **SOC** (**System and Organization Control**)
    **1**, **2** and **3**, **ISO** (**International Organization for Standardization**),
    **STAR** (**Security Trust Assurance and Risk**), and **PCI-DSS** (**Payment Card
    Industry Data Security Standard**). The comprehensive compliance posture enables
    you to leverage Amazon Bedrock with confidence, knowing that your data is protected
    and handled in accordance with industry best practices and regulatory mandates.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**合规标准**：Amazon Bedrock致力于符合数据隐私和保护行业标准。它拥有多个认证，如**GDPR**（**通用数据保护条例**）、**HIPAA**（**健康保险可携带性和问责制法案**）、**SOC**（**系统和组织控制**）1、2和3、**ISO**（**国际标准化组织**）、**STAR**（**安全信任保证和风险**）以及**PCI-DSS**（**支付卡行业数据安全标准**）。全面的合规态势使您能够有信心地利用Amazon
    Bedrock，知道您的数据受到保护，并且按照行业最佳实践和监管要求进行处理。'
- en: Next, let us look at protecting the data through data encryption.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们看看如何通过数据加密来保护数据。
- en: Data encryption
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据加密
- en: If you have used AWS services before, you might be familiar with the **AWS Shared
    Responsibility Model**, where AWS manages and is responsible for securing underlying
    cloud infrastructure, and you are responsible for protecting the data and applications
    hosted on this infrastructure. If you would like to read through the AWS Shared
    Responsibility Model, you can go to [https://aws.amazon.com/compliance/shared-responsibility-model/](https://aws.amazon.com/compliance/shared-responsibility-model/).
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您之前使用过AWS服务，您可能熟悉**AWS共享责任模型**，其中AWS管理和负责保护底层云基础设施，而您负责保护在此基础设施上托管的数据和应用。如果您想了解AWS共享责任模型，您可以访问[https://aws.amazon.com/compliance/shared-responsibility-model/](https://aws.amazon.com/compliance/shared-responsibility-model/)。
- en: 'When it comes to protecting the data, you can perform encryption on them using
    AWS KMS or you can also perform client-side encryption before writing to AWS resources.
    Let us look at the encryption of different resources that you can perform to safeguard
    your data:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 当涉及到保护数据时，您可以使用AWS KMS对它们进行加密，或者您也可以在写入AWS资源之前在客户端进行加密。让我们看看您可以执行的不同资源的加密，以保护您的数据：
- en: '**Knowledge bases**: KMS can be used to encrypt data that is in transition
    for knowledge bases. During the creation or update of a data source, you can provide
    the KMS key ARN to encrypt the ingested data, ensuring the confidentiality of
    your knowledge base content. *Figure 12**.1* demonstrates **Advanced settings**
    that can be used for working with KMS.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**知识库**：KMS可用于加密知识库中处于传输状态的数据。在创建或更新数据源时，您可以提供KMS密钥的ARN来加密导入的数据，确保您的知识库内容的机密性。*图12.1*展示了可用于与KMS一起使用的**高级设置**。'
- en: '![Figure 12.1 – KMS key for transient data storage](img/B22045_12_01.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![图12.1 – 用于临时数据存储的KMS密钥](img/B22045_12_01.jpg)'
- en: Figure 12.1 – KMS key for transient data storage
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.1 – 用于临时数据存储的KMS密钥
- en: As shown in the preceding figure, when you create or update the data source
    of a knowledge base, you can specify whether to use the default AWS-managed KMS
    key or **Customize encryption settings** where you choose your own customer-managed
    KMS key. Encryption for knowledge bases can happen at various stages. During the
    data ingestion phase, Bedrock employs the KMS encryption key to secure the transient
    data storage. This temporary storage facilitates the secure ingestion of your
    data sources, ensuring that your information remains protected while in transition.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 如前图所示，当您创建或更新知识库的数据源时，您可以指定是否使用默认的AWS管理的KMS密钥或**自定义加密设置**，在那里您可以选择自己的客户管理的KMS密钥。知识库的加密可以在多个阶段发生。在数据导入阶段，Bedrock使用KMS加密密钥来保护临时数据存储。这种临时存储有助于安全地导入您的数据源，确保您的信息在传输过程中保持受保护。
- en: 'If you set up OpenSearch as a vector index for knowledge bases, the information
    passed to this service is also encrypted using a KMS key, providing an additional
    layer of security. Furthermore, Bedrock extends its encryption capabilities to
    the following resources associated with your knowledge bases:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您将OpenSearch配置为知识库的向量索引，传递给此服务的信 息也将使用KMS密钥进行加密，提供额外的安全层。此外，Bedrock将其加密功能扩展到与您的知识库相关的以下资源：
- en: '**Data in S3 bucket**: By encrypting these sources with a KMS key, you can
    be assured that your valuable data remains confidential and inaccessible to unauthorized
    parties.'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**S3存储桶中的数据**：通过使用KMS密钥加密这些资源，您可以确保您的宝贵数据保持机密性，并且不会被未经授权的第三方访问。'
- en: 'You can allow Amazon Bedrock to decrypt the data from the S3 bucket by attaching
    the following IAM policy to the Amazon Bedrock service role:'
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您可以通过附加以下IAM策略到Amazon Bedrock服务角色，允许Amazon Bedrock解密S3存储桶中的数据：
- en: '[PRE0]'
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '[PRE1]'
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '[PRE2]'
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '[PRE3]'
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[PRE4]'
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[PRE5]'
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '[PRE6]'
  id: totrans-44
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[PRE7]'
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Please note that you would need to update the resource in the policy with the
    ARN of the KMS key.
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 请注意，您需要更新策略中的资源，使用KMS密钥的ARN。
- en: '**Third-party vector stores**: If you leverage external vector stores, Bedrock
    allows you to encrypt them using a KMS key, maintaining the security and integrity
    of your knowledge bases across multiple platforms.'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**第三方向量存储**：如果您利用外部向量存储，Bedrock允许您使用KMS密钥加密它们，从而在多个平台上保持您知识库的安全性和完整性。'
- en: For more details and the IAM permissions needed for knowledge base resources,
    you can check out [https://docs.aws.amazon.com/bedrock/latest/userguide/encryption-kb.html](https://docs.aws.amazon.com/bedrock/latest/userguide/encryption-kb.html).
  id: totrans-48
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 更多详情和知识库资源所需的IAM权限，您可以查看[https://docs.aws.amazon.com/bedrock/latest/userguide/encryption-kb.html](https://docs.aws.amazon.com/bedrock/latest/userguide/encryption-kb.html)。
- en: '**Model customization**: When it comes to creating model customization resources,
    it is essential to understand how the platform handles the data during the process.
    Firstly, Amazon Bedrock does not use the training data to improve the base FMs
    and is also never accessible by any of the model providers. When creating the
    customization job, Amazon Bedrock creates a copy of the FM, and your data is used
    to fine-tune that copied model. Importantly, your training data is not used to
    train the base FMs themselves, nor it is shared or seen by model providers.'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**模型定制**：在创建模型定制资源时，了解平台在处理数据过程中的处理方式至关重要。首先，Amazon Bedrock不会使用训练数据来改进基础FM，并且也永远不会被任何模型提供商访问。在创建定制作业时，Amazon
    Bedrock会创建FM的副本，并使用您的数据来微调该副本模型。重要的是，您的训练数据不会用于训练基础FM本身，也不会被共享或被模型提供商看到。'
- en: Additionally, Amazon Bedrock takes measures to protect the confidentiality of
    your data. Once the fine-tuning process is completed, your training or validation
    data is not stored by the service. However, it’s worth noting that fine-tuned
    models may inadvertently reproduce portions of the training data during output
    generation. To mitigate this risk, it’s recommended to filter out any sensitive
    or confidential information from your training data before initiating the customization
    process.
  id: totrans-50
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，Amazon Bedrock还采取措施保护您数据的机密性。一旦微调过程完成，服务不会存储您的训练或验证数据。然而，值得注意的是，微调模型在输出生成过程中可能会无意中重现训练数据的一部分。为了降低这种风险，建议在启动定制过程之前，从您的训练数据中过滤掉任何敏感或机密信息。
- en: 'Regarding the encryption options for customization jobs, by default, custom
    models are encrypted using AWS managed KMS key. Alternatively, you can use your
    own customer-managed KMS key, which provides more control over your data encryption.
    To use a customer-managed key, you would need to create the key, attach a resource-based
    policy granting appropriate permissions, and specify the key when creating the
    customization job:'
  id: totrans-51
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 关于定制作业的加密选项，默认情况下，自定义模型使用AWS管理的KMS密钥进行加密。或者，您可以使用自己的客户管理的KMS密钥，这为您提供了对数据加密的更多控制。要使用客户管理的密钥，您需要创建密钥，附加一个基于资源的策略以授予适当的权限，并在创建定制作业时指定该密钥：
- en: '[PRE8]'
  id: totrans-52
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[PRE9]'
  id: totrans-53
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '[PRE10]'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '[PRE12]'
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[PRE13]'
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '[PRE14]'
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '[PRE15]'
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '[PRE16]'
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '[PRE17]'
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '[PRE18]'
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '[PRE19]'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '[PRE20]'
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '[PRE21]'
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '[PRE22]'
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '[PRE23]'
  id: totrans-67
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '[PRE24]'
  id: totrans-68
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '[PRE25]'
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '[PRE26]'
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '[PRE27]'
  id: totrans-71
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: '[PRE28]'
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '[PRE29]'
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'This policy grants specific permissions related to KMS key management for two
    different roles: `account-id` and `user/role` placeholders with your actual AWS
    account ID and the appropriate IAM user or role names.'
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此策略为两个不同的角色授予了与KMS密钥管理相关的特定权限：`account-id`和`user/role`占位符，分别使用您的实际AWS账户ID和适当的IAM用户或角色名称。
- en: '**Bedrock agent encryption**: Regarding Agents for Amazon Bedrock, by default,
    an AWS-managed key is used by Amazon Bedrock. However, you can encrypt the agent
    resources with your own customer-managed key.'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**基础代理加密**：关于Amazon Bedrock的代理，默认情况下，Amazon Bedrock使用AWS管理的密钥。然而，您可以使用自己的客户管理的密钥加密代理资源。'
- en: 'First, you would need to attach an identity-based policy, such as the following,
    to the IAM user or the role, so Amazon Bedrock can perform encryption/decryption
    on the Bedrock agent resources:'
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 首先，您需要将基于身份的策略，例如以下内容，附加到IAM用户或角色上，以便Amazon Bedrock可以对Bedrock代理资源进行加密/解密：
- en: '[PRE30]'
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: '[PRE31]'
  id: totrans-78
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: '[PRE32]'
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: '[PRE33]'
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: '[PRE34]'
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE34]'
- en: '[PRE35]'
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE35]'
- en: '[PRE36]'
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE36]'
- en: '[PRE37]'
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE37]'
- en: '[PRE38]'
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE38]'
- en: '[PRE39]'
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'In addition, make sure the KMS key has permissions as mentioned in the following
    link: https://docs.aws.amazon.com/bedrock/latest/userguide/encryption-agents.html.'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，请确保 KMS 密钥具有以下链接中提到的权限：https://docs.aws.amazon.com/bedrock/latest/userguide/encryption-agents.html。
- en: '**Guardrails encryption**: By default, Amazon Bedrock uses an AWS-managed encryption
    key to protect your guardrails. However, you have the option to use your own customer-managed
    KMS key for enhanced control and customization. To create a customer-managed KMS
    key for your guardrail, you’ll need to have the necessary permissions in your
    AWS account. For more details on what permissions you would need to set after
    creating the customer-managed key, you can check out the following link: https://docs.aws.amazon.com/bedrock/latest/userguide/guardrails-permissions.html.'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Guardrails 加密**：默认情况下，Amazon Bedrock 使用 AWS 管理的加密密钥来保护您的 guardrails。但是，您可以选择使用自己的客户管理的
    KMS 密钥以增强控制和定制。要为您的 guardrail 创建客户管理的 KMS 密钥，您需要在您的 AWS 账户中拥有必要的权限。有关创建客户管理密钥后需要设置的权限的更多详细信息，您可以查看以下链接：https://docs.aws.amazon.com/bedrock/latest/userguide/guardrails-permissions.html。'
- en: Now that we have looked at the encryption options for Amazon Bedrock, let us
    look at how we can grant users and AWS resources required permissions to Amazon
    Bedrock.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们已经了解了 Amazon Bedrock 的加密选项，让我们看看我们如何可以为用户和 AWS 资源授予对 Amazon Bedrock 所需的权限。
- en: AWS IAM
  id: totrans-90
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: AWS IAM
- en: 'Using IAM, you can provide secure access to only designated users or resources
    to Amazon Bedrock and its capabilities. IAM allows you to create user accounts
    and assign permissions to those accounts, determining what actions they can perform
    on specific resources. Here are some of the key points on how IAM works with Amazon
    Bedrock:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 IAM，您可以为指定的用户或资源提供对 Amazon Bedrock 及其功能的唯一安全访问。IAM 允许您创建用户账户并将权限分配给这些账户，从而确定他们可以在特定资源上执行哪些操作。以下是
    IAM 与 Amazon Bedrock 一起工作的关键要点：
- en: '**Identities**: IAM supports various types of identities, including IAM users,
    groups, and roles. Users represent individual people or applications, groups are
    collections of users, and roles are assumed by trusted entities to gain temporary
    access.'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**身份**：IAM 支持各种类型的身份，包括 IAM 用户、组和角色。用户代表个人或应用程序，组是用户的集合，而角色是由受信任实体假定以获得临时访问权限的。'
- en: '**Authentication**: To use Amazon Bedrock securely, you must first prove your
    identity through authentication. This can be achieved by logging in as an AWS
    root user, an IAM user, or by assuming an IAM role. Additionally, you can authenticate
    using external identities, such as **SAML** (**Security Assertion Markup Language**)
    authentication **identity providers** (**IdPs**). These external identities are
    passed to IAM, which then grants you access to Amazon Bedrock. Your administrator
    will have set up special roles to enable this access.'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**身份验证**：为了安全地使用 Amazon Bedrock，您必须首先通过身份验证证明您的身份。这可以通过作为 AWS 根用户、IAM 用户或假定
    IAM 角色登录来实现。此外，您还可以使用外部身份进行身份验证，例如 **SAML**（**安全断言标记语言**）身份验证 **提供者**（**IdP**）。这些外部身份被传递给
    IAM，然后 IAM 授予您对 Amazon Bedrock 的访问权限。您的管理员将已设置特殊角色以启用此访问。'
- en: Alternatively, you can use social media accounts, such as Google or Facebook,
    to authenticate and gain access to Amazon Bedrock. Again, your administrator will
    have configured the necessary roles and permissions to allow this form of authentication.
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 或者，您可以使用社交媒体账户，如 Google 或 Facebook，来验证并获取对 Amazon Bedrock 的访问权限。同样，您的管理员将已配置必要的角色和权限以允许这种验证方式。
- en: '`bedrock`. For example, the actions can be `bedrock:InvokeModel` or `bedrock:InvokeModelWithResponseStream`.'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`bedrock`。例如，操作可以是 `bedrock:InvokeModel` 或 `bedrock:InvokeModelWithResponseStream`。'
- en: '**Policy resources**: Policies can specify Bedrock resources using ARNs to
    grant or deny access.'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**策略资源**：策略可以使用 ARN 指定 Bedrock 资源以授予或拒绝访问。'
- en: '**Policy condition keys**: Condition keys add an extra layer of control, allowing
    you to specify conditions under which a policy is applicable, such as resource
    tags.'
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**策略条件键**：条件键添加了一个额外的控制层，允许您指定策略适用的条件，例如资源标签。'
- en: '**Cross-account access**:'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**跨账户访问**：'
- en: Roles can be used to grant access to Bedrock resources across different AWS
    accounts
  id: totrans-99
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 角色可用于在不同 AWS 账户之间授予对 Bedrock 资源的访问权限
- en: '**Forward access sessions** (**FAS**) enable Bedrock to perform actions in
    other services on your behalf while maintaining your permissions*   **Service
    roles**: Bedrock uses service roles, which are IAM roles that Bedrock assumes
    to perform actions on your behalf.*   **Temporary credentials**: Bedrock supports
    the use of temporary credentials, which are short-lived access keys that provide
    temporary access to AWS resources, ensuring enhanced security compared to long-term
    access keys. These credentials are automatically generated when you sign in to
    the AWS Management Console using methods such as **single sign-on** (**SSO**)
    or role switching. Alternatively, you can manually create temporary credentials
    using the AWS CLI or API, allowing you to access AWS resources without exposing
    your long-term access keys.*   **Attribute-based access control (ABAC)**: It’s
    a flexible approach to granting access permissions based on attributes or tags
    associated with users, roles, and resources. Instead of relying solely on predefined
    roles or groups, ABAC allows you to define access rules that consider dynamic
    attributes. For example, you could grant read access to a specific AWS S3 bucket
    only to users with a particular department tag, ensuring that data access is restricted
    based on the user’s organizational context. ABAC simplifies access management
    in rapidly evolving environments by eliminating the need for complex policy configurations.'
  id: totrans-100
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**转发访问会话（FAS**）使Bedrock能够在您的 behalf 在其他服务中执行操作，同时保持您的权限。'
- en: By understanding and properly configuring IAM for Amazon Bedrock, you can ensure
    that only authorized individuals and applications have access to your resources,
    minimizing the risk of data breaches and unauthorized access.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 通过理解和正确配置Amazon Bedrock的IAM，您可以确保只有授权的个人和应用程序可以访问您的资源，从而最大限度地降低数据泄露和未经授权访问的风险。
- en: Let us look at some of the patterns of IAM policies that can be used with Amazon
    Bedrock.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看一些可以与Amazon Bedrock一起使用的IAM策略模式。
- en: Deny access
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 拒绝访问
- en: 'With IAM, you can allow or deny access to perform actions to the model. For
    example, a user or a role could be denied invocation to a particular model, but
    they can list the models:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 使用IAM，您可以允许或拒绝对模型执行操作。例如，用户或角色可能被拒绝调用特定模型，但他们可以列出模型：
- en: '[PRE40]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: The preceding IAM policy shows the `Deny` action, where the invocation to a
    specific model has been denied. For instance, the infrastructure team may be granted
    the ability to provision computational capacity for a particular model while being
    restricted from performing inferences on that same model. Conversely, the data
    science team could be solely permitted to perform inferences on a pre-approved
    set of models.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 上述IAM策略显示了`Deny`操作，其中拒绝了对特定模型的调用。例如，基础设施团队可能被授予为特定模型提供计算能力的权限，同时被限制在该模型上执行推理。相反，数据科学团队可能仅被允许对一组预先批准的模型执行推理。
- en: Principle of least privilege
  id: totrans-107
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 最小权限原则
- en: 'The `dev`) team is working on a project where access is only needed for image-generation
    models and listing any FMs. You can then apply the following policy:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 开发者团队正在开发一个项目，其中只需要对图像生成模型和列出任何FM进行访问。然后，您可以应用以下策略：
- en: '[PRE41]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: In this policy, the `bedrock:InvokeModel` action is allowed on the `arn:aws:bedrock:us-east-1::foundation-model/amazon.titan-image-generator-v1`
    resource with the condition that the `Env` resource tag is set to `Dev`. Secondly,
    the `bedrock:ListFoundationModels` action is allowed on all resources (`*`) with
    the condition that the `Env` resource tag is set to `Dev`.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 在此策略中，允许在`arn:aws:bedrock:us-east-1::foundation-model/amazon.titan-image-generator-v1`资源上执行`bedrock:InvokeModel`操作，前提是`Env`资源标签设置为`Dev`。其次，允许在所有资源（`*`）上执行`bedrock:ListFoundationModels`操作，前提是`Env`资源标签设置为`Dev`。
- en: 'The principle of least privilege minimizes the potential attack surface and
    reduces the risk of unintended access or data breaches. Let us look at the best
    practices and implementation steps to help you audit access and enforce the principle
    of least privilege:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 最小权限原则最小化了潜在的攻击面，并降低了意外访问或数据泄露的风险。让我们看看最佳实践和实施步骤，以帮助您审计访问并强制执行最小权限原则：
- en: '**Review and analyze** **access patterns**:'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**审查和分析** **访问模式**：'
- en: Regularly review AWS CloudTrail logs to understand the actions performed by
    users and resources within your environment
  id: totrans-113
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定期审查AWS CloudTrail日志，以了解您环境中用户和资源执行的操作
- en: Use tools such as IAM Access Analyzer to generate policies based on actual usage
    patterns, ensuring that permissions align with real-world requirements
  id: totrans-114
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用IAM访问分析器等工具根据实际使用模式生成策略，确保权限与实际需求相匹配
- en: Leverage IAM access advisor to identify unused permissions and remove them from
    policies, reducing the attack surface
  id: totrans-115
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用IAM访问顾问识别未使用的权限并将它们从策略中删除，以减少攻击面
- en: '**Implement granular** **permissions policies**:'
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**实施细粒度** **权限策略**：'
- en: Create fine-grained permissions policies that grant only the necessary actions
    and resources required for specific job roles or functions
  id: totrans-117
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建细粒度的权限策略，仅授予特定工作角色或功能所需的必要操作和资源
- en: Consider using AWS-managed policies as a starting point for common job functions,
    and then customize them as needed
  id: totrans-118
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 考虑将AWS管理的策略作为常见工作功能的起点，然后根据需要自定义它们
- en: Regularly review and trim overly permissive policies to adhere to the principle
    of least privilege
  id: totrans-119
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定期审查和修剪过度宽容的策略，以符合最小权限原则
- en: '**Limit access to** **production environments**:'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**限制对** **生产环境的访问**：'
- en: Ensure that users have limited access to production environments, granting access
    only when there is a valid use case
  id: totrans-121
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保用户对生产环境有有限的访问权限，仅在存在有效用例时授予访问权限
- en: Revoke production access promptly after the user completes the specific tasks
    requiring that level of access
  id: totrans-122
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户完成特定任务后，立即撤销生产访问权限
- en: '**Leverage** **permissions boundaries**:'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**利用** **权限边界**：'
- en: Implement permissions boundaries, which are managed policies that set the maximum
    permissions an identity-based policy can grant to an IAM entity
  id: totrans-124
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实施权限边界，这些是管理策略，它们设置基于身份的策略可以授予IAM实体的最大权限
- en: Use permissions boundaries to enforce organizational-wide access controls and
    prevent unintended privilege escalation
  id: totrans-125
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用权限边界来强制执行组织范围内的访问控制并防止意外的权限提升
- en: '**Utilize resource tags for** **access control**:'
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**利用资源标签进行** **访问控制**：'
- en: Implement an ABAC model using resource tags, which allows you to grant access
    based on resource attributes such as purpose, owner, or environment
  id: totrans-127
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用资源标签实现ABAC模型，这允许您根据资源属性（如目的、所有者或环境）来授予访问权限
- en: Combine resource tags with permissions policies to achieve fine-grained resource
    access without overly complex custom policies
  id: totrans-128
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将资源标签与权限策略结合使用，以实现细粒度的资源访问，而无需过于复杂的自定义策略
- en: '**Implement service control policies in** **AWS Organizations**:'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**在** **AWS Organizations** **中实施服务控制策略**：'
- en: Use service control policies to centrally control the maximum available permissions
    for member accounts within your AWS organization
  id: totrans-130
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用服务控制策略集中控制AWS组织中成员账户的最大可用权限
- en: Restrict root user permissions in member accounts using service control policies
  id: totrans-131
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用服务控制策略在成员账户中限制root用户的权限
- en: Consider using AWS Control Tower for prescriptive managed controls and defining
    your own custom controls
  id: totrans-132
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 考虑使用AWS Control Tower进行规定性管理控制和定义自己的自定义控制
- en: '**Establish user life** **cycle policies**:'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**建立用户生命周期** **策略**：'
- en: Define and implement user life cycle policies that outline tasks to be performed
    when users are onboarded, change roles, or no longer require access to AWS
  id: totrans-134
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义并实施用户生命周期策略，概述在用户入职、角色变更或不再需要访问AWS时执行的任务
- en: Conduct periodic permission reviews during each step of the user life cycle
    to prevent permissions creep
  id: totrans-135
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在用户生命周期的每个阶段进行定期权限审查，以防止权限蔓延
- en: '**Schedule regular** **permission audits**:'
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安排定期的** **权限审计**：'
- en: Establish a regular schedule to review user permissions and remove any unneeded
    or excessive permissions
  id: totrans-137
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 建立定期审查用户权限并删除任何不必要的或过度权限的日程安排
- en: Leverage tools such as AWS Config and IAM Access Analyzer to assist in auditing
    user permissions and identifying potential issues
  id: totrans-138
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用AWS Config和IAM访问分析器等工具协助审计用户权限并识别潜在问题
- en: '**Develop a job** **role matrix**:'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**开发工作** **角色矩阵**：'
- en: Create a job role matrix that visualizes the various roles and access levels
    required within your AWS footprint
  id: totrans-140
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个工作角色矩阵，以可视化您在 AWS 脚印内所需的各个角色和访问级别。
- en: Use groups to separate permissions based on user responsibilities within your
    organization, rather than applying permissions directly to individual users or
    roles
  id: totrans-141
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用组来根据组织内部用户的责任来分隔权限，而不是直接将权限应用于单个用户或角色。
- en: By following these best practices and implementing the necessary steps, you
    can effectively audit access and ensure that the principle of least privilege
    is enforced.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 通过遵循这些最佳实践并实施必要的步骤，您可以有效地审计访问权限并确保最小权限原则得到执行。
- en: Model customization
  id: totrans-143
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 模型定制
- en: When working with model customization, Amazon Bedrock needs to assume an AWS
    IAM role on your behalf to initiate the fine-tuning job. This requires you to
    establish a trust relationship between Amazon Bedrock and the IAM role you want
    to use.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 当处理模型定制时，Amazon Bedrock 需要代表您假定 AWS IAM 角色，以启动微调作业。这要求您在 Amazon Bedrock 和您希望使用的
    IAM 角色之间建立信任关系。
- en: To set up this trust relationship, you need to add a trust policy to the IAM
    role you wish to use for model customization. The trust policy grants Amazon Bedrock
    permission to assume the role and perform the necessary actions on your behalf.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 要设置这种信任关系，您需要将信任策略添加到您希望用于模型定制的 IAM 角色。信任策略授予 Amazon Bedrock 代表您执行必要操作的权限。
- en: 'Here’s an example of the trust policy you need to add to your IAM role:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是您需要添加到 IAM 角色的信任策略示例：
- en: '[PRE42]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: This trust policy specifies that the AWS service bedrock.amazonaws.com (which
    represents Amazon Bedrock) is allowed to assume the role by calling the `sts:AssumeRole`
    action.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 此信任策略指定 AWS 服务 bedrock.amazonaws.com（代表 Amazon Bedrock）可以通过调用 `sts:AssumeRole`
    操作来假定该角色。
- en: 'To add this trust policy to your IAM role, you can follow these steps:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 要将此信任策略添加到您的 IAM 角色，您可以按照以下步骤操作：
- en: Open the AWS Management Console and navigate to the IAM service.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 AWS 管理控制台，导航到 IAM 服务。
- en: In the left navigation pane, click **Roles**.
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧导航面板中，点击 **角色**。
- en: Find the role you want to use for model customization or create a new role if
    needed.
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到您想要用于模型定制的角色，如果需要，可以创建一个新角色。
- en: Click on the role name to open the role details.
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击角色名称以打开角色详细信息。
- en: In the **Trust relationships** tab, click the **Edit trust** **policy** button.
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 **信任关系** 选项卡中，点击 **编辑信任** **策略** 按钮。
- en: Replace the existing policy document with the provided trust policy.
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将现有的政策文档替换为提供的信任策略。
- en: Click the **Update policy** button to save the changes.
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **更新策略** 按钮以保存更改。
- en: By adding this trust policy, you establish a secure trust relationship between
    Amazon Bedrock and your IAM role, allowing Amazon Bedrock to assume the role and
    perform the necessary actions for model customization on your behalf.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 通过添加此信任策略，您在 Amazon Bedrock 和您的 IAM 角色之间建立了一个安全的信任关系，允许 Amazon Bedrock 假定该角色并代表您执行模型定制的必要操作。
- en: 'Next, the necessary permissions required for the customization process involve
    accessing the training and validation data that is stored in the S3 bucket, and
    the output path where Amazon Bedrock should deliver the results of the fine-tuning
    job. To learn more about the permissions needed for model customization, you can
    go through the following link: https://docs.aws.amazon.com/bedrock/latest/userguide/model-customization-iam-role.html.'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，定制过程所需的必要权限包括访问存储在 S3 桶中的训练和验证数据，以及 Amazon Bedrock 应该交付微调作业结果的输出路径。要了解更多关于模型定制所需权限的信息，您可以点击以下链接：https://docs.aws.amazon.com/bedrock/latest/userguide/model-customization-iam-role.html。
- en: Now that we have looked at patterns of IAM policies needed for Amazon Bedrock,
    let us look at the aspect of network security.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经了解了 Amazon Bedrock 需要的 IAM 策略模式，让我们来看看网络安全方面。
- en: Securing the network
  id: totrans-160
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 保护网络安全
- en: In the previous sections, we looked at the data encryption techniques. Another
    measure to safeguard the data from a network perspective is to use **Amazon VPC**
    for model customization and creating a secure, isolated environment for your workloads.
    By doing so, you gain granular control over network traffic, enabling you to monitor
    and regulate all incoming and outgoing data flows using VPC Flow Logs. The following
    figure shows the VPC settings that you can specify while creating the fine-tuning
    or continued pre-training job.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的章节中，我们探讨了数据加密技术。从网络角度保护数据的一个额外措施是使用**Amazon VPC**进行模型定制，并为您的负载创建一个安全、隔离的环境。通过这样做，您可以获得对网络流量的细粒度控制，从而能够使用VPC流日志监控和调节所有传入和传出的数据流。以下图显示了在创建微调或继续预训练作业时可以指定的VPC设置。
- en: '![Figure 12.2 – VPC settings](img/B22045_12_02.jpg)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![图12.2 – VPC设置](img/B22045_12_02.jpg)'
- en: Figure 12.2 – VPC settings
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.2 – VPC设置
- en: Furthermore, Amazon Bedrock integrates with AWS **PrivateLink**, so you can
    establish a private connection between your VPC and the Amazon Bedrock service.
    This connection is facilitated through the creation of a VPC interface endpoint,
    essentially a private entry point for traffic destined for Amazon Bedrock. In
    addition, Amazon Bedrock does not use public IP addresses or internet gateways,
    ensuring that your data never traverses the public internet, thus minimizing potential
    exposure to cyber threats.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，Amazon Bedrock与AWS **PrivateLink**集成，因此您可以在您的VPC和Amazon Bedrock服务之间建立私有连接。此连接通过创建VPC接口端点来实现，本质上是为流向Amazon
    Bedrock的流量提供的私有入口点。此外，Amazon Bedrock不使用公共IP地址或互联网网关，确保您的数据永远不会穿越公共互联网，从而最大限度地减少潜在的网络威胁。
- en: To enhance security even further, you can implement endpoint policies, which
    are permissions that can be attached to your VPC interface endpoint. These policies
    enable you to precisely define the principals (AWS accounts, IAM users, and IAM
    roles) authorized to perform specific actions on designated resources. By crafting
    custom endpoint policies, you can exercise fine-grained control over the access
    granted to Amazon Bedrock from within your VPC, effectively hardening your security
    posture.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 为了进一步增强安全性，您可以实施端点策略，这些策略可以附加到您的VPC接口端点。这些策略使您能够精确定义授权执行指定资源上特定操作的实体（AWS账户、IAM用户和IAM角色）。通过定制端点策略，您可以精细控制从您的VPC内部授予Amazon
    Bedrock的访问权限，从而有效地加固您的安全态势。
- en: 'Here is an example VPC endpoint policy that grants access to anyone (`"Principal":
    "*"`) to perform `InvokeModel` and `InvokeModelWithResponseStream` of Bedrock:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: '这里是一个示例VPC端点策略，它允许任何人（`"Principal": "*"`）执行Bedrock的`InvokeModel`和`InvokeModelWithResponseStream`操作：'
- en: '[PRE43]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: Now, let us look at what network flow looks like behind the scenes.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看幕后网络流的样子。
- en: Network flow
  id: totrans-169
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 网络流
- en: We have looked at how the encryption with Amazon works and how you can secure
    the network via AWS PrivateLink when you are in Amazon VPC. Now, let us look at
    the network and data flow work behind the scenes for both invocation and model
    customization jobs.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经探讨了如何在Amazon中使用加密以及如何在您处于Amazon VPC时通过AWS PrivateLink来保护网络。现在，让我们看看调用和模型定制作业背后的网络和数据流工作。
- en: On-demand architecture
  id: totrans-171
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 按需架构
- en: With on-demand mode, you share the compute environment of the model with other
    users and are billed based on the usage, without any long-term commitments. *Figure
    12**.3* shows the overview of the on-demand network architecture employed by Amazon
    Bedrock.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 在按需模式下，您与其他用户共享模型的计算环境，并按使用情况计费，没有任何长期承诺。*图12.3*显示了Amazon Bedrock使用的按需网络架构概述。
- en: '![Figure 12.3 – On-demand compute environment architecture](img/B22045_12_03.jpg)'
  id: totrans-173
  prefs: []
  type: TYPE_IMG
  zh: '![图12.3 – 按需计算环境架构](img/B22045_12_03.jpg)'
- en: Figure 12.3 – On-demand compute environment architecture
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.3 – 按需计算环境架构
- en: 'Let us understand the figure in detail:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们详细理解这个图：
- en: In the middle, we have **Amazon Bedrock service account**, which acts as the
    entry point for all incoming requests. This account is managed and controlled
    by Amazon, ensuring secure and reliable access to the service. The Amazon Bedrock
    service is responsible for handling these incoming requests and routing them to
    the appropriate runtime inference environment. This environment is designed to
    process and execute the requested operations on the deployed models.
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在中间，我们看到了**Amazon Bedrock服务账户**，该账户作为所有传入请求的入口点。该账户由Amazon管理和控制，确保对服务的安全可靠访问。Amazon
    Bedrock服务负责处理这些传入请求并将它们路由到适当的运行时推理环境。此环境旨在处理和执行在部署的模型上请求的操作。
- en: On the right, we have **Model deployment account**, which is owned and operated
    by Amazon. Interestingly, there is one such account for each model provider and
    AWS region combination. This segregation ensures that no model vendor can access
    or tamper with the data or models of other vendors, enhancing security and privacy.
    Within the **Model deployment account**, we find the on-demand compute resources,
    which are dynamically provisioned and scaled based on the incoming workload. Additionally,
    this account hosts the base model in S3 bucket, which stores these FMs.
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在右侧，我们看到了**模型部署账户**，该账户由Amazon拥有和运营。有趣的是，对于每个模型提供者和AWS区域组合，都有一个这样的账户。这种隔离确保没有任何模型供应商可以访问或篡改其他供应商的数据或模型，从而增强安全和隐私。在**模型部署账户**中，我们找到了按需计算资源，这些资源根据传入的工作量动态配置和扩展。此外，此账户还托管了存储在S3存储桶中的基础模型，这些存储桶存储了这些FM。
- en: 'The flow of an inference request is as follows:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 推理请求的流程如下：
- en: A user initiates a request, which is received by the API endpoint of the Amazon
    Bedrock service account.
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用户发起一个请求，该请求被Amazon Bedrock服务账户的API端点接收。
- en: The request is authenticated and authorized using the AWS IAM service.
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请求使用AWS IAM服务进行身份验证和授权。
- en: Once validated, the request is forwarded to the runtime inference environment.
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦验证，请求就会被转发到运行时推理环境。
- en: The runtime inference component interacts with the relevant compute cluster
    within the model deployment account, fetching the required model and executing
    the requested operation.
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行时推理组件与模型部署账户内的相关计算集群交互，获取所需的模型并执行请求的操作。
- en: The result is then securely returned to the user via the Amazon Bedrock service
    account.
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 结果随后通过Amazon Bedrock服务账户安全地返回给用户。
- en: 'Throughout this process, several measures are in place to ensure data security
    and privacy:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 在整个过程中，有几种措施在位以确保数据安全和隐私：
- en: All internal traffic is encrypted using TLS 1.2 or higher encryption standards
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有内部流量都使用TLS 1.2或更高版本的加密标准进行加密。
- en: No customer data is stored or persisted within the Amazon Bedrock service account
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Amazon Bedrock服务账户中不存储或持久化任何客户数据。
- en: Detailed logs and audit trails are maintained using AWS CloudTrail and Amazon
    CloudWatch services
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用AWS CloudTrail和Amazon CloudWatch服务维护详细的日志和审计跟踪。
- en: Model providers, including Amazon’s own models like Titan, cannot access or
    influence the customer’s data or models within the model deployment account
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模型供应商，包括Amazon自己的模型如Titan，不能访问或影响模型部署账户中的客户数据或模型
- en: Now, let us look at provisioned throughput capacity architecture.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看配置的吞吐量容量架构。
- en: Provisioned throughput architecture
  id: totrans-190
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 配置的吞吐量架构
- en: Provisioned throughput allows you to purchase the model units for base or customized
    models, designed for large-scale inference workloads requiring guaranteed throughput.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 配置的吞吐量允许您购买用于基础或定制模型的模型单元，这些模型单元是为需要保证吞吐量的大规模推理工作负载设计的。
- en: '**Model units** are a key concept in Amazon Bedrock’s provisioned throughput
    feature, designed to provide consistent and scalable performance for LLM inference.
    One can think of a model unit as a representation of fraction of the underlying
    GPU hardware resources allocated to run a specific model. It’s not a standardized
    measure across all models, but rather model-specific.'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: '**模型单元**是Amazon Bedrock配置的吞吐量功能中的一个关键概念，旨在为LLM推理提供一致和可扩展的性能。可以将模型单元视为运行特定模型所分配的底层GPU硬件资源的一部分表示。它不是所有模型的标准度量，而是模型特定的。'
- en: These model units are purchased allocations of computational resources for a
    specific base model in Amazon Bedrock. Each model unit provides a guaranteed level
    of throughput, measured in tokens processed per minute. This applies to both input
    and output tokens. By using model units, you can ensure consistent performance
    for high-volume AI workloads, with the flexibility to scale resources based on
    your needs.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 这些模型单元是亚马逊Bedrock中特定基模型的计算资源购买分配。每个模型单元提供保证的吞吐量水平，以每分钟处理的令牌数来衡量。这适用于输入和输出令牌。通过使用模型单元，您可以确保高容量AI工作负载的稳定性能，并根据您的需求灵活扩展资源。
- en: '*Figure 12**.4* shows the overview of the provisioned throughput architecture
    employed by Amazon Bedrock.'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: '*图12*.*4*显示了亚马逊Bedrock使用的配置吞吐量架构概述。'
- en: '![Figure 12.4 – Provisioned throughput compute architecture](img/B22045_12_04.jpg)'
  id: totrans-195
  prefs: []
  type: TYPE_IMG
  zh: '![图12.4 – 配置吞吐量计算架构](img/B22045_12_04.jpg)'
- en: Figure 12.4 – Provisioned throughput compute architecture
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.4 – 配置吞吐量计算架构
- en: 'Similar to the on-demand architecture, we have **Amazon Bedrock service account**
    acting as the entry point for incoming requests. This account is managed by Amazon,
    ensuring secure access to the service. Here is a breakdown of the preceding figure:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 与按需架构类似，我们有**亚马逊Bedrock服务账户**作为传入请求的入口点。该账户由亚马逊管理，确保对服务的安全访问。以下是前面图示的分解：
- en: 'Within the **Model deployment account**, we find two distinct components: the
    **Base model S3 bucket** and the **Customized model S3 bucket**. The base model
    bucket stores the base models provided by Amazon and other vendors like AI21,
    Cohere, etc., while the customized model S3 bucket stores the custom models or
    copies of the baseline models tailored to individual requirements.'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**模型部署账户**中，我们发现有两个不同的组件：**基础模型S3存储桶**和**自定义模型S3存储桶**。基础模型存储桶存储由亚马逊和其他供应商（如AI21、Cohere等）提供的基模型，而自定义模型S3存储桶存储定制模型或针对个别需求定制的基模型副本。
- en: The **Runtime inference** component is responsible for processing the incoming
    requests and determining the appropriate compute environment to handle the requested
    operation. This decision is based on whether the request is for a baseline model
    or a customized model.
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**运行时推理**组件负责处理传入的请求并确定处理请求操作适当的计算环境。此决策基于请求是针对基模型还是自定义模型。'
- en: 'The inference can be performed on provisioned throughput mode by called `InvokeModel`
    API or `InvokeModelWithResponseStream` API and specifying the `modelId` as provisioned
    throughput model ARN. The flow of an inference request for a provisioned capacity
    compute environment is as follows:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 在配置吞吐量模式下，可以通过调用`InvokeModel` API或`InvokeModelWithResponseStream` API并指定`modelId`为配置吞吐量模型ARN来执行推理。对于配置容量计算环境的推理请求流程如下：
- en: A customer initiates a request, which is received by the API endpoint of the
    Amazon Bedrock service account.
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 客户发起请求，该请求由亚马逊Bedrock服务账户的API端点接收。
- en: The request is authenticated and authorized using AWS IAM services.
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请求使用AWS IAM服务进行身份验证和授权。
- en: Once validated, the request is forwarded to the runtime inference component.
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦验证通过，请求将被转发到运行时推理组件。
- en: The runtime inference component analyzes the request and determines whether
    it is for a baseline model or a customized model.
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行时推理组件分析请求并确定它是否为基模型或自定义模型。
- en: If the request is for a customized model, the runtime inference component directs
    the request to the dedicated provisioned throughput compute environment associated
    with that customer or model.
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果请求是针对自定义模型的，运行时推理组件将请求定向到与该客户或模型关联的专用配置吞吐量计算环境。
- en: The provisioned throughput compute environment executes the requested operation
    on the specified customized model and returns the result.
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置吞吐量计算环境在指定的自定义模型上执行请求的操作，并返回结果。
- en: The computed result is then securely returned to the customer via the Amazon
    Bedrock service account.
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算结果随后通过亚马逊Bedrock服务账户安全地返回给客户。
- en: 'The provisioned capacity architecture shares several key features with the
    on-demand architecture, including the following:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 配置容量架构与按需架构共享一些关键特性，包括以下内容：
- en: Encrypted internal traffic using TLS 1.2 or higher encryption standards
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用TLS 1.2或更高加密标准加密内部流量。
- en: No customer data storage or persistence within the Amazon Bedrock service account
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在亚马逊Bedrock服务账户内没有客户数据存储或持久化。
- en: Detailed logging and auditing through AWS CloudTrail and Amazon CloudWatch services
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过AWS CloudTrail和Amazon CloudWatch服务进行详细的日志记录和审计
- en: Strict isolation and access controls, ensuring that model providers cannot access
    or influence customer data or models
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 严格的隔离和访问控制，确保模型供应商无法访问或影响客户数据或模型
- en: From a developer’s perspective, the process of invoking a baseline model or
    a customized model is seamless if you are using on-demand or provisioned throughput
    mode.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 从开发者的角度来看，如果您使用的是按需或预配吞吐量模式，调用基线模型或定制模型的流程是无缝的。
- en: Now, let us look at the architecture overview of model customization.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们来看看模型定制的架构概述。
- en: Model customization architecture
  id: totrans-215
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 模型定制架构
- en: Model customization is where we are either fine-tuning or continued pre-training
    the base model tailored to the domain specific use-case. *Figure 12**.5* provides
    an overview of the model customization architecture employed by Amazon Bedrock.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 模型定制是我们对针对特定领域用例定制的基础模型进行微调或继续预训练的地方。*图12.5*提供了Amazon Bedrock采用的模型定制架构概述。
- en: '![Figure 12.5 – Model customization architecture](img/B22045_12_05.jpg)'
  id: totrans-217
  prefs: []
  type: TYPE_IMG
  zh: '![图12.5 – 模型定制架构](img/B22045_12_05.jpg)'
- en: Figure 12.5 – Model customization architecture
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.5 – 模型定制架构
- en: 'Let us look at the steps:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看步骤：
- en: The process begins with the user initiating a request through the API endpoint
    of the Amazon Bedrock service account. This account is managed by Amazon and serves
    as a secure entry point for all incoming requests.
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 该过程从用户通过Amazon Bedrock服务账户的API端点发起请求开始。该账户由Amazon管理，并作为所有传入请求的安全入口点。
- en: The Amazon Bedrock service account routes the request to the training orchestration
    component, which orchestrates the customization process within the relevant model
    deployment account owned and operated by Amazon.
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Amazon Bedrock服务账户将请求路由到训练编排组件，该组件在Amazon拥有和运营的相关模型部署账户内编排定制过程。
- en: 'The training orchestration component initiates an Amazon SageMaker training
    job, which is responsible for the actual model customization process. Amazon SageMaker
    is an AWS ML service, where you can build, train, deploy, and monitor ML models.
    If you are interested in learning about SageMaker, here is an interesting book
    by Julien Simon: *Learn Amazon SageMaker: A guide to building, training, and deploying
    machine learning models for developers and data scientists*, available at https://www.amazon.com/Learn-Amazon-SageMaker-developers-scientists/dp/180020891X.'
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 训练编排组件启动一个Amazon SageMaker训练作业，该作业负责实际的模型定制过程。Amazon SageMaker是AWS机器学习服务，您可以在其中构建、训练、部署和监控机器学习模型。如果您对SageMaker感兴趣，这里有一本由Julien
    Simon撰写的有趣书籍：*《学习Amazon SageMaker：开发者与数据科学家构建、训练和部署机器学习模型的指南*》，可在https://www.amazon.com/Learn-Amazon-SageMaker-developers-scientists/dp/180020891X找到。
- en: 'The training job in the model deployment account leverages the following resources:'
  id: totrans-223
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 模型部署账户中的训练作业利用以下资源：
- en: The base model S3 bucket, which stores the baseline models provided by Amazon
    and other vendors from Meta, Cohere, and AI21.
  id: totrans-224
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基础模型S3桶，其中存储了Amazon和其他供应商（来自Meta、Cohere和AI21）提供的基线模型。
- en: The user’s training data, which is securely retrieved from an S3 bucket within
    the user’s account, optionally via a VPC connection for enhanced security.
  id: totrans-225
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户的训练数据，安全地从用户账户内的S3桶中检索，可选地通过VPC连接以增强安全性。
- en: During the training process, the user’s training data is used to customize the
    selected base model, creating a tailored version specific to your requirements.
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在训练过程中，用户的训练数据用于定制所选的基础模型，创建一个符合您需求的定制版本。
- en: Upon completion of the training job, the customized model is encrypted and stored
    in the customized model S3 bucket within the model deployment account.
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 训练作业完成后，定制模型将被加密并存储在模型部署账户内的定制模型S3桶中。
- en: It’s important to note that at no point do model vendors have access to or visibility
    into the user’s training data or the resulting customized model.
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重要的是要注意，模型供应商在任何时候都无法访问或查看用户的训练数据或生成的定制模型。
- en: Additionally, the training job generates output metrics and logs, which are
    securely delivered to an S3 bucket specified by the user during the initial request.
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此外，训练作业生成输出指标和日志，这些指标和日志在初始请求期间由用户指定的S3桶安全地交付。
- en: 'The model customization architecture incorporates several security and privacy
    measures:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 模型定制架构整合了多项安全和隐私措施：
- en: Strict access controls and isolation ensure that model vendors cannot access
    your data or customized models
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 严格的访问控制和隔离确保模型供应商无法访问您的数据或定制模型
- en: Your training data is securely retrieved from your account, either directly
    from an S3 bucket or via a VPC connection
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您的训练数据将从您的账户安全检索，无论是直接从S3存储桶还是通过VPC连接
- en: Encryption is employed to protect the customized model during storage and transfer
  id: totrans-233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加密用于在存储和传输过程中保护定制模型
- en: Detailed logging and auditing are provided through CloudTrail, IAM, and CloudWatch
    services
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过CloudTrail、IAM和CloudWatch服务提供详细的日志记录和审计
- en: By leveraging this architecture, Amazon Bedrock allows you to tailor the base
    models to your specific needs while maintaining strict data privacy and security
    standards. The separation of responsibilities and the secure data handling mechanisms
    ensure that sensitive information remains protected throughout the customization
    process. For a more detailed exploration of how to adapt models to your unique
    requirements, please refer to [*Chapter 4*](B22045_04.xhtml#_idTextAnchor073).
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 通过利用这种架构，Amazon Bedrock允许您根据特定需求定制基础模型，同时保持严格的数据隐私和安全标准。责任分离和安全的处理机制确保在整个定制过程中敏感信息得到保护。有关如何将模型适应您独特需求的更详细探索，请参阅[*第4章*](B22045_04.xhtml#_idTextAnchor073)。
- en: Now, that we have looked at the security and network flow components, let us
    look at ethical practices, where we cover challenges and risks with GenAI.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们已经了解了安全和网络流组件，让我们来看看道德实践，其中我们涵盖了与GenAI相关的挑战和风险。
- en: Ethical practices
  id: totrans-237
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 道德实践
- en: 'There have been rapid advancements in GenAI, but at the same time, they raise
    new challenges and risks. Some of these are as follows:'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: GenAI取得了快速进步，但同时也带来了新的挑战和风险。以下是一些例子：
- en: Would my data be used with the provider?
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供商是否会使用我的数据？
- en: Could it hurt the legal rights of the company?
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这会不会损害公司的法律权利？
- en: Will the model hallucinate and provide non-sensical, biased, or factually incorrect
    responses in production?
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模型在生产过程中会幻觉并提供非理性、有偏见或事实错误的结果吗？
- en: Would the GenAI models inadvertently use or reproduce intellectual property,
    such as copyrighted text or images, during training or generation?
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GenAI模型在训练或生成过程中是否会无意中使用或复制知识产权，例如受版权保护的文本或图像？
- en: Let us cover these challenges and best practices that can be adopted.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看看这些挑战和可以采用的最佳实践。
- en: Veracity
  id: totrans-244
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 真实性
- en: '**Veracity**, or the truthfulness and accuracy of information generated by
    AI models, is a crucial aspect of ethical practices in the field of GenAI. When
    models produce outputs that are verifiably false or hallucinated, it can lead
    to the spread of misinformation and undermine trust in the technology. One common
    example of hallucinations is when an AI model is asked to provide information
    about a specific topic, such as academic papers by a particular author. Instead
    of searching for and retrieving actual citations, the model will tend to generate
    fictitious paper titles, topics, and co-author names that seem plausible but do
    not correspond to real published works.'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: '**真实性**，即AI模型生成信息的真实性和准确性，是GenAI领域道德实践的一个关键方面。当模型产生可验证为虚假或幻觉的输出时，可能会导致错误信息的传播并损害对技术的信任。幻觉的一个常见例子是，当AI模型被要求提供关于特定主题的信息，例如某位作者的学术论文时。模型不会搜索和检索实际引用，而是倾向于生成看似合理但实际上并不对应于已发表作品的虚构论文标题、主题和合著者姓名。'
- en: 'To mitigate the risk of hallucinations and improve veracity, several best practices
    can be employed:'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 为了减轻幻觉的风险并提高真实性，可以采用以下最佳实践：
- en: '**Prompt engineering**: Providing clear and specific instructions to the AI
    model can help guide it toward generating more accurate and truthful outputs.
    Well-crafted prompts that clearly define the desired output and provide relevant
    context can reduce the likelihood of hallucinations.'
  id: totrans-247
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**提示工程**：向AI模型提供清晰和具体的指令可以帮助引导它生成更准确和真实的输出。精心设计的提示，明确定义所需输出并提供相关背景信息，可以降低幻觉的可能性。'
- en: '**Providing more context**: Techniques such as RAG, continued pre-training,
    fine-tuning, and the use of agents can help ground the model’s outputs in factual
    information by providing additional context and knowledge from external sources.'
  id: totrans-248
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**提供更多背景信息**：如RAG、持续预训练、微调和使用代理等技术，可以通过提供额外的背景信息和外部来源的知识，帮助将模型输出建立在事实信息的基础上。'
- en: '**Inference parameter tuning**: Adjusting parameters such as temperature, Top
    P, and Top K, which control the randomness of the model’s outputs, can help strike
    a balance between creativity and factual accuracy, reducing the likelihood of
    hallucinations while still allowing for novel and useful generations. If you would
    like to learn more about these parameters, please go through [*Chapter 2*](B22045_02.xhtml#_idTextAnchor034).'
  id: totrans-249
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**推理参数调整**：调整温度、Top P和Top K等参数，这些参数控制模型输出的随机性，可以帮助在创造力和事实准确性之间取得平衡，减少幻觉的可能性，同时仍然允许生成新颖和有用的内容。如果您想了解更多关于这些参数的信息，请参阅[*第二章*](B22045_02.xhtml#_idTextAnchor034)。'
- en: By implementing these best practices and continuously validating the veracity
    of AI-generated content, we can promote trust in GenAI models and ensure their
    responsible and ethical deployment in various domains.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 通过实施这些最佳实践并持续验证人工智能生成内容的真实性，我们可以促进对生成式人工智能（GenAI）模型的信任，并确保它们在各种领域的负责任和道德部署。
- en: Intellectual property
  id: totrans-251
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 知识产权
- en: 'One major challenge with early LLMs is their tendency to directly repeat or
    copy portions of the text data they were trained on. This raises privacy concerns,
    as the training data may contain sensitive or personal information. It also raises
    copyright issues, as the models could be reproducing copyrighted content without
    permission. The root cause of this problem lies in how these LLMs are trained.
    They are exposed to massive amounts of data from various sources, including books,
    websites, and databases, many of which are copyrighted works. However, this data
    is ingested without keeping track of sources or obtaining proper licenses. As
    a result, when generating text, the models may regurgitate verbatim sentences
    or passages from their training data, inadvertently exposing copyrighted content
    or private information. Addressing this requires more robust techniques for filtering
    training data, tracking sources, and properly licensing materials used to train
    these powerful language models. Here are some of the key considerations:'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 早期大型语言模型（LLM）的一个主要挑战是它们倾向于直接重复或复制它们训练过的文本数据的一部分。这引发了隐私问题，因为训练数据可能包含敏感或个人信息。这也引发了版权问题，因为模型可能在未经许可的情况下再现受版权保护的内容。这个问题的根本原因在于这些LLM的训练方式。它们接触到了来自各种来源的大量数据，包括书籍、网站和数据库，其中许多是受版权保护的作品。然而，这些数据被摄入时没有追踪来源或获得适当的许可。因此，在生成文本时，模型可能会原封不动地重复其训练数据中的句子或段落，无意中暴露了受版权保护的内容或个人信息。解决这个问题需要更强大的过滤训练数据、追踪来源和为训练这些强大的语言模型使用的材料获得适当许可的技术。以下是一些关键考虑因素：
- en: '**Transparency**: AI providers should be transparent about the training data
    used for their models, disclosing potential sources of copyrighted material, and
    acknowledging the limitations of their systems in handling intellectual property.'
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**透明度**：人工智能提供商应对其模型使用的训练数据保持透明，披露潜在的受版权保护材料的来源，并承认其系统在处理知识产权方面的局限性。'
- en: '**Fair use**: While some use of copyrighted material for training AI models
    may fall under fair use exceptions, it is essential to carefully assess the extent
    and nature of such use to avoid potential infringement.'
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**合理使用**：虽然某些用于训练人工智能模型的受版权保护材料的用途可能属于合理使用例外情况，但仔细评估这种使用的范围和性质对于避免潜在的侵权至关重要。'
- en: '**Licensing and permissions**: Whenever possible, AI developers should obtain
    appropriate licenses or permissions to use copyrighted material in their training
    data, ensuring proper attribution and compensation to the rights holders.'
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**许可和权限**：在可能的情况下，人工智能开发者应获得适当的许可或权限来使用其训练数据中的受版权保护材料，确保对权利所有者进行适当的归属和补偿。'
- en: '**Content filtering**: Implementing robust content filtering mechanisms can
    help mitigate the risk of reproducing copyrighted material in the outputs of AI
    systems. This can involve techniques such as watermarking, fingerprinting, and
    other content recognition technologies.'
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**内容过滤**：实施强大的内容过滤机制可以帮助降低在人工智能系统输出中再现受版权保护材料的风险。这可能涉及水印、指纹和其他内容识别技术等技术。'
- en: '**Human oversight**: Incorporating human oversight and review processes can
    help identify and address potential instances of copyright infringement or unauthorized
    use of intellectual property in the outputs of AI systems.'
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**人工监督**：结合人工监督和审查流程可以帮助识别和解决人工智能系统输出中可能出现的版权侵权或未经授权使用知识产权的情况。'
- en: Safety and toxicity
  id: totrans-258
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安全性和毒性
- en: 'Toxicity and safety are also important considerations when developing and deploying
    AI systems, particularly those involving language generation models. Toxic outputs
    can perpetuate harm, spread misinformation, and undermine the trust and integrity
    of these systems. Therefore, implementing robust measures to mitigate toxicity
    and uphold safety is necessary. Here are some key points to address these concerns:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 毒性和安全性也是开发和部署人工智能系统时的重要考虑因素，尤其是涉及语言生成模型的情况。有毒输出可能会持续造成伤害，传播错误信息，并损害这些系统的信任和完整性。因此，实施强有力的措施来减轻毒性和维护安全是必要的。以下是一些解决这些问题的关键点：
- en: '**Content filtering**: Implementing strict filters to exclude advice or information
    related to individual medical, legal, political, or financial matters, as well
    as instructions for creating weapons or engaging in illegal activities, is essential.
    Such content could potentially cause direct harm or enable dangerous behavior
    if provided without proper oversight.'
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**内容过滤**：实施严格的过滤器，排除与个人医疗、法律、政治或财务事项相关的建议或信息，以及制造武器或参与非法活动的指令，这是至关重要的。如果没有适当的监管，此类内容可能会造成直接伤害或导致危险行为。'
- en: '**Guardrails**: Implementing guardrails, such as content filtering, bias detection,
    and toxic language identification, can help prevent the generation of harmful
    or inappropriate content. Continuously monitoring and updating these guardrails
    is necessary to adapt to evolving language patterns and potential misuse. In the
    next section, we will be covering the guardrails provided by Amazon Bedrock.'
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**防护措施**：实施防护措施，如内容过滤、偏见检测和有毒语言识别，可以帮助防止生成有害或不适当的内容。持续监控和更新这些防护措施是必要的，以适应不断变化的语言模式和潜在的滥用。在下一节中，我们将介绍亚马逊Bedrock提供的防护措施。'
- en: '**Data curation**: Carefully curating and vetting the training data used for
    language models to minimize the propagation of biases, toxic language, or factual
    inaccuracies. Performing regular audits and updates to the training data can help
    improve model performance and safety over time.'
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据策划**：仔细策划和审查用于语言模型的训练数据，以最大限度地减少偏见的传播、有毒语言或事实不准确性的传播。对训练数据进行定期的审计和更新可以帮助随着时间的推移提高模型性能和安全。'
- en: '**Watermarking and traceability**: Embedding watermarks or traceable identifiers
    within generated content can aid in attribution and accountability, discouraging
    misuse and enabling rapid response to incidents involving toxic or harmful content.
    For more details on watermark detection by Amazon Bedrock, refer to [*Chapter
    9*](B22045_09.xhtml#_idTextAnchor171).'
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**水印和可追溯性**：在生成内容中嵌入水印或可追溯的标识符，有助于归属和问责制，阻止滥用并能够迅速应对涉及有毒或有害内容的事件。有关亚马逊Bedrock的水印检测的更多详细信息，请参阅[第9章](B22045_09.xhtml#_idTextAnchor171)。'
- en: '**Responsible AI policies**: Organizations should implement and establish robust
    responsible AI policies, guidelines, and best practices. These policies should
    prioritize ethical considerations, transparency, accountability, and the well-being
    of users and society.'
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**负责任的AI政策**：组织应实施和建立强有力的负责任AI政策、指南和最佳实践。这些政策应优先考虑道德考量、透明度、问责制以及用户和社会的福祉。'
- en: 'We would recommend that you read through the blog post titled *Responsible
    AI in the generative era* by Michael Kearns: [https://www.amazon.science/blog/responsible-ai-in-the-generative-era](https://www.amazon.science/blog/responsible-ai-in-the-generative-era).
    This blog post talks about the challenges around issues such as fairness, toxicity,
    hallucinations, intellectual property violations, and so on, and the active work
    being done by the tech community to address these challenges, from carefully curating
    training data, developing guardrail models to filter outputs, watermarking approaches,
    and leveraging more focused use cases.'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 我们建议您阅读迈克尔·基恩斯（Michael Kearns）撰写的博客文章《生成时代负责任的AI》（[https://www.amazon.science/blog/responsible-ai-in-the-generative-era](https://www.amazon.science/blog/responsible-ai-in-the-generative-era)）。这篇文章讨论了围绕公平性、毒性、幻觉、知识产权侵犯等问题所面临的挑战，以及技术社区为解决这些挑战所进行的积极工作，包括精心策划训练数据、开发防护模型以过滤输出、水印方法以及利用更专注的使用案例。
- en: Let us now look at the guardrails provided by Amazon Bedrock to address some
    of the concerns we discussed.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看亚马逊Bedrock提供的防护措施，以解决我们讨论的一些问题。
- en: Guardrails for Amazon Bedrock
  id: totrans-267
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 亚马逊Bedrock的防护措施
- en: 'With Guardrails for Amazon Bedrock, organizations can implement safeguards
    that align with safe and responsible AI policies. These safeguards provide an
    additional layer of control, complementing the existing protections built in the
    FMs. You can implement these guardrails to all the FMs available within Amazon
    Bedrock, along with any fine-tuned models and Agents for Amazon Bedrock that you
    create. Let us look at some of the examples when the implementation of guardrails
    will be required by various industries:'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 通过Amazon Bedrock的护栏，组织可以实现与安全和负责任的AI政策相一致的安全措施。这些安全措施提供了一层额外的控制，补充了FMs中内置的现有保护。您可以将这些护栏应用于Amazon
    Bedrock中可用的所有FMs，以及您为Amazon Bedrock创建的任何微调模型和代理。让我们看看在以下情况下实施护栏将如何成为各种行业的需求：
- en: '**Healthcare industry**:'
  id: totrans-269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**医疗保健行业**：'
- en: Guardrails can be used in medical chatbots or virtual assistants to prevent
    the exchange of information related to self-diagnosis, prescription drugs, or
    medical advice without proper authorization
  id: totrans-270
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在医疗聊天机器人或虚拟助手中，可以使用护栏来防止未经授权交换与自我诊断、处方药物或医疗建议相关的信息
- en: In applications that analyze medical records or imaging data, guardrails can
    be employed to redact sensitive patient information and ensure compliance with
    privacy regulations such as HIPAA
  id: totrans-271
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在分析医疗记录或成像数据的应用中，可以采用护栏来删除敏感的患者信息，并确保符合如HIPAA之类的隐私法规
- en: '**Legal industry**:'
  id: totrans-272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**法律行业**：'
- en: Guardrails can be used in legal document analysis tools to prevent the disclosure
    of privileged communication between attorneys and clients
  id: totrans-273
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在法律文档分析工具中，可以使用护栏来防止律师和客户之间机密通信的披露
- en: In legal research or contract review applications, guardrails can be implemented
    to prevent the generation of misleading or legally non-compliant content
  id: totrans-274
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在法律研究或合同审查应用中，可以实施护栏以防止生成误导性或法律上不符合规范的内容
- en: '**Financial industry**:'
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**金融行业**：'
- en: Guardrails can be used in financial applications to prevent the generation of
    content related to stock recommendations, investment advice, or insider trading
  id: totrans-276
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在金融应用中，可以使用护栏来防止生成与股票推荐、投资建议或内幕交易相关的内容
- en: In applications that process financial transactions or customer data, guardrails
    can be used to redact sensitive information like account numbers or credit card
    details
  id: totrans-277
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在处理金融交易或客户数据的应用中，可以使用护栏来删除敏感信息，如账户号码或信用卡详情
- en: '**Media and** **entertainment industry**:'
  id: totrans-278
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**媒体和娱乐行业**：'
- en: Guardrails can be used in content generation applications to prevent the creation
    of copyrighted material, hate speech, or explicit content that may violate content
    guidelines or community standards
  id: totrans-279
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在内容生成应用中，可以使用护栏来防止创建受版权保护的材料、仇恨言论或可能违反内容指南或社区标准的露骨内容
- en: In applications related to broadcast media, guardrails can be implemented to
    ensure adherence to strict regulatory guidelines, protect against copyright infringement,
    and maintain appropriate content standards
  id: totrans-280
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在与广播媒体相关的应用中，可以实施护栏以确保遵守严格的监管指南，防止版权侵权，并维持适当的内容标准
- en: '**Retail and** **e-commerce industry**:'
  id: totrans-281
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**零售和电子商务行业**：'
- en: Guardrails can be implemented in e-commerce platforms to protect customer privacy
    by redacting personal information and preventing the unauthorized access or display
    of sensitive data such as payment details or shipping addresses
  id: totrans-282
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在电子商务平台上，可以通过删除个人信息和防止未经授权访问或显示敏感数据（如支付详情或送货地址）来保护客户隐私
- en: In product recommendation or customer service applications, guardrails can be
    used to prevent the promotion of harmful or illegal products, ensuring compliance
    with local regulations and industry standards
  id: totrans-283
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在产品推荐或客户服务应用中，可以使用护栏来防止推广有害或非法产品，确保符合当地法规和行业标准
- en: Now, let us understand how Guardrails for Amazon Bedrock works.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们了解Amazon Bedrock的护栏是如何工作的。
- en: How does Guardrails for Amazon Bedrock work?
  id: totrans-285
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Amazon Bedrock的护栏是如何工作的？
- en: Guardrails examines both the user input prompts and the corresponding model
    responses via four policy filters, as shown in *Figure 12**.6*.
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 护栏通过四个策略过滤器检查用户输入提示和相应的模型响应，如图*12**.6*所示。
- en: '![Figure 12.6 – How Guardrails for Amazon Bedrock works](img/B22045_12_06.jpg)'
  id: totrans-287
  prefs: []
  type: TYPE_IMG
  zh: '![图12.6 – Amazon Bedrock护栏的工作原理](img/B22045_12_06.jpg)'
- en: Figure 12.6 – How Guardrails for Amazon Bedrock works
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.6 – Amazon Bedrock护栏的工作原理
- en: 'Guardrails for Amazon Bedrock is available under the **Safeguards** section
    of the Bedrock console. When you create a guardrail, you will be asked to configure
    four policy filters and a blocked message. The four policy filters in Guardrails
    for Amazon Bedrock are listed as follows:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 亚马逊 Bedrock 的防护栏在 Bedrock 控制台的 **防护措施** 部分可用。当你创建防护栏时，你将被要求配置四个策略过滤器和一条阻止消息。亚马逊
    Bedrock 的四个策略过滤器如下列出：
- en: Content filters
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内容过滤器
- en: Denied topics
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 被拒绝的主题
- en: Word filters
  id: totrans-292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 单词过滤器
- en: Sensitive information filters
  id: totrans-293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 敏感信息过滤器
- en: Based on the policy filter that you select, both input prompts and model responses
    are rigorously vetted against every configured policy.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 根据你选择的策略过滤器，输入提示和模型响应都会被严格审查，以符合每个配置的策略。
- en: If any policy violation is detected, either in the input prompt or response,
    the Guardrails component intervenes by overriding the offending content. For more
    details, please check the *Blocked* *messaging* sub-section.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 如果检测到任何策略违规，无论是输入提示还是响应，Guardrails 组件将通过覆盖违规内容进行干预。有关更多详细信息，请参阅 *阻止* *消息* 子部分。
- en: Let us dive deeper into each of the policy filters.
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们更深入地探讨每个策略过滤器。
- en: Content filters
  id: totrans-297
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 内容过滤器
- en: With **content filters**, you can configure thresholds to detect and block harmful
    content across various categories. You can adjust the filter strength for prompts
    and for responses enabling granular control over the strictness of content filtering,
    as shown in *Figure 12**.7*.
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 **内容过滤器**，你可以配置阈值以检测和阻止各种类别中的有害内容。你可以调整提示和响应的过滤强度，以实现对内容过滤严格度的细粒度控制，如 *图
    12.7* 所示。
- en: '![Figure 12.7 – Configuring content filters](img/B22045_12_07.jpg)'
  id: totrans-299
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.7 – 配置内容过滤器](img/B22045_12_07.jpg)'
- en: Figure 12.7 – Configuring content filters
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.7 – 配置内容过滤器
- en: Categories covered include hate speech, insults, sexual content, violence, misconduct,
    and prompt attacks, allowing you to address a wide range of potential risks. The
    higher the filter strength, the higher the likelihood of filtering out potentially
    harmful content within a given category, providing a flexible way to balance risk
    mitigation and content accessibility.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 涵盖的类别包括仇恨言论、侮辱、色情内容、暴力、不当行为和提示攻击，允许你解决广泛的风险。过滤强度越高，在给定类别中过滤出潜在有害内容的可能性就越高，提供了一种灵活的方式来平衡风险缓解和内容可访问性。
- en: When implementing content filters, it’s essential to consider your use case,
    target audience, and ethical guidelines. A higher filter strength may be appropriate
    for applications serving vulnerable populations or dealing with sensitive topics,
    while a more relaxed approach could be suitable for certain creative or educational
    contexts. In addition, regularly reviewing and updating your filter configurations
    in response to evolving societal norms and organizational policies is recommended.
    By leveraging content filters, you can proactively mitigate the risks associated
    with harmful content generation, encouraging a more trustworthy and responsible
    AI ecosystem.
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 在实施内容过滤器时，考虑你的用例、目标受众和道德规范是至关重要的。对于服务于易受伤害的群体或处理敏感主题的应用程序，可能需要更高的过滤强度，而对于某些创意或教育环境，可能更适合更宽松的方法。此外，根据不断变化的社会规范和组织政策定期审查和更新你的过滤配置也是推荐的。通过利用内容过滤器，你可以主动减轻有害内容生成的风险，鼓励一个更加值得信赖和负责任的人工智能生态系统。
- en: Denied topics
  id: totrans-303
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 被拒绝的主题
- en: '**Denied topics** allow you to proactively prevent your application from engaging
    with or generating content related to specific subjects that may be deemed undesirable
    or inappropriate within your use case.'
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: '**被拒绝的主题** 允许你主动防止你的应用程序与或生成与特定主题相关的可能在你用例中被认为是不受欢迎或不适当的内 容。'
- en: You can define up to 30 denied topics by providing a concise name and a clear
    natural language description for each topic you wish to restrict. These serve
    as the foundation for detecting and blocking user inputs or model responses that
    fall within the defined topic boundaries, ensuring a consistent and reliable filtering
    mechanism.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过为每个你希望限制的主题提供一个简洁的名称和清晰的自然语言描述来定义最多 30 个被拒绝的主题。这些作为检测和阻止用户输入或模型响应的基础，确保了过滤机制的持续和可靠。
- en: When specifying a denied topic, it’s advisable to provide a comprehensive definition
    that captures the essence of the subject matter you aim to exclude, surrounding
    all relevant inquiries, guidance, or recommendations.
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 当指定一个被拒绝的主题时，建议提供一个全面的定义，以捕捉你想要排除的主题内容的本质，围绕所有相关的查询、指导或建议。
- en: For example, in the healthcare domain, maintaining patient privacy and adhering
    to strict ethical guidelines is important. A hospital or medical institution could
    leverage denied topics to prevent the models from engaging in discussions or providing
    information related to specific topics that could potentially violate patient
    confidentiality or medical ethics.
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在医疗保健领域，维护患者隐私和遵守严格的伦理指南非常重要。医院或医疗机构可以利用被拒绝的主题来防止模型参与有关可能违反患者隐私或医疗伦理的特定主题的讨论或提供信息。
- en: One denied topic could be *Disclosing Patient Information*, with a definition
    along the lines of *Sharing or revealing personal details, medical records, or
    any identifying information about patients without* *proper authorization*.
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 一个可能被拒绝的主题可能是*披露患者信息*，其定义大致为*未经适当授权，分享或透露患者的个人细节、医疗记录或任何识别信息*。
- en: Another relevant denied topic might be *Unauthorized Medical Advice*, defined
    as *Providing diagnostic assessments, treatment recommendations, or any form of
    medical guidance without being a licensed healthcare professional or having access
    to a patient’s complete* *medical history*.
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个相关的被拒绝主题可能是*未经授权的医疗建议*，定义为*在没有成为有执照的医疗保健专业人员或无法访问患者完整医疗史的情况下，提供诊断评估、治疗建议或任何形式的医疗指导*。
- en: '*Figure 12**.8* shows how to add denied topics.'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: '*图12.8*展示了如何添加被拒绝的主题。'
- en: '![Figure 12.8 – Adding a denied topic](img/B22045_12_08.jpg)'
  id: totrans-311
  prefs: []
  type: TYPE_IMG
  zh: '![图12.8 – 添加被拒绝的主题](img/B22045_12_08.jpg)'
- en: Figure 12.8 – Adding a denied topic
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.8 – 添加被拒绝的主题
- en: Word filters
  id: totrans-313
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 单词过滤器
- en: 'By configuring **word filters**, you can effectively block undesirable words,
    phrases, and profanity from appearing in user inputs or model responses, promoting
    a positive and inclusive user experience. Here is how:'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 通过配置**单词过滤器**，您可以有效地阻止不希望出现的单词、短语和粗口，从而促进积极和包容的用户体验。以下是操作方法：
- en: The **profanity filter** offers a convenient way to block a predefined list
    of commonly recognized profane words. This list is based on a global definition
    of profanity and is subject to regular updates, ensuring that the filter remains
    aligned with evolving societal norms.
  id: totrans-315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**粗口过滤器**提供了一种方便的方式来阻止预定义的常用粗口词汇列表。这个列表基于全球对粗口的定义，并会定期更新，确保过滤器与不断变化的社会规范保持一致。'
- en: Additionally, you can customize the word filtering experience by specifying
    up to 10,000 custom words and phrases that should be blocked. This flexibility
    allows you to tailor the filters to your specific needs, such as excluding offensive
    terms, competitor names, or any other language that may be deemed inappropriate
    for your use case.
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 此外，您可以通过指定最多10,000个应被阻止的自定义单词和短语来自定义单词过滤体验。这种灵活性允许您根据特定需求定制过滤器，例如排除冒犯性术语、竞争对手名称或任何可能被认为不适合您用例的语言。
- en: Custom words and phrases can be added through various convenient methods, including
    a manual entry in the console, uploading a local file (e.g., `.txt` or `.csv`),
    or populating the list from an Amazon S3 object, providing flexibility in managing
    your word filter list.
  id: totrans-317
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以通过各种方便的方法添加自定义单词和短语，包括在控制台中手动输入、上传本地文件（例如，`.txt`或`.csv`）或从Amazon S3对象中填充列表，从而在管理单词过滤器列表方面提供灵活性。
- en: '*Figure 12**.9* shows how you can configure the word filter with different
    options.'
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: '*图12.9*展示了如何使用不同的选项配置单词过滤器。'
- en: '![Figure 12.9 – Adding word filters](img/B22045_12_09.jpg)'
  id: totrans-319
  prefs: []
  type: TYPE_IMG
  zh: '![图12.9 – 添加单词过滤器](img/B22045_12_09.jpg)'
- en: Figure 12.9 – Adding word filters
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.9 – 添加单词过滤器
- en: By using word filters, you can create a more controlled and inclusive environment
    for your users. For instance, an educational platform could block offensive language
    to promote a positive learning atmosphere, while a corporate application might
    filter out competitor names to maintain brand integrity and avoid potential conflicts.
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使用单词过滤器，您可以为您用户创建一个更加可控和包容的环境。例如，一个教育平台可以阻止冒犯性语言以促进积极的学习氛围，而一个企业应用可能过滤掉竞争对手的名称以维护品牌完整性并避免潜在冲突。
- en: Sensitive information filters
  id: totrans-322
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 敏感信息过滤器
- en: '**Sensitive information filters** allow you to proactively identify and take
    appropriate actions on various types of PII and custom-defined sensitive data
    patterns.'
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: '**敏感信息过滤器**允许您主动识别并对各种类型的个人身份信息（PII）和自定义定义的敏感数据模式采取适当的行动。'
- en: Guardrails offer a comprehensive list of predefined PII types, covering a wide
    range of sensitive information such as names, addresses, email addresses, phone
    numbers, credit card details, and social security numbers. These PII types are
    constantly updated to ensure compliance with evolving regulations and privacy
    norms. For a complete list, you can visit [https://docs.aws.amazon.com/bedrock/latest/userguide/Guardrails-sensitive-filters.html](https://docs.aws.amazon.com/bedrock/latest/userguide/Guardrails-sensitive-filters.html).
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: 防护栏提供了一系列预定义的 PII 类型，涵盖了广泛的敏感信息，如姓名、地址、电子邮件地址、电话号码、信用卡详情和社保号码。这些 PII 类型会不断更新，以确保符合不断变化的法规和隐私规范。要获取完整列表，您可以访问
    [https://docs.aws.amazon.com/bedrock/latest/userguide/Guardrails-sensitive-filters.html](https://docs.aws.amazon.com/bedrock/latest/userguide/Guardrails-sensitive-filters.html)。
- en: 'When sensitive information is detected, you can configure guardrails to either
    block or mask the content:'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 当检测到敏感信息时，您可以配置防护栏以阻止或屏蔽内容：
- en: '**Block mode**: This prevents the sensitive information from being processed
    at all. If applied to the input, it stops the prompt containing sensitive data
    from reaching the model. If applied to the output, it prevents the model’s response
    containing sensitive information from reaching the user.'
  id: totrans-326
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**阻止模式**：这阻止敏感信息被处理。如果应用于输入，它将阻止包含敏感数据的提示到达模型。如果应用于输出，它将阻止包含敏感信息的模型响应到达用户。'
- en: '`123-45-6789` might be replaced with `[SSN]`. This ensures privacy while preserving
    the overall context of the content.'
  id: totrans-327
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`123-45-6789` 可能会被替换为 `[SSN]`。这确保了隐私，同时保留了内容的整体上下文。'
- en: 'Additionally, you can define custom **regular expression** (**regex**) patterns
    to filter specific types of sensitive information relevant to your organization
    or use case. This flexibility allows you to protect proprietary data, such as
    serial numbers, booking IDs, or any other critical information that requires safeguarding.
    For example:'
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，您还可以定义自定义**正则表达式**（**regex**）模式来过滤与您的组织或用例相关的特定类型的敏感信息。这种灵活性允许您保护专有数据，例如序列号、预订
    ID 或任何其他需要保护的关键信息。例如：
- en: '`^ABC-\d{5}-[A-Z]{2}$` (matches patterns such as `ABC-12345-XY`)'
  id: totrans-329
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`^ABC-\d{5}-[A-Z]{2}$`（匹配如 `ABC-12345-XY` 的模式）'
- en: '`^BK-\d{6}-[A-Z]{3}$` (matches patterns such as `BK-123456-NYC`)'
  id: totrans-330
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`^BK-\d{6}-[A-Z]{3}$`（匹配如 `BK-123456-NYC` 的模式）'
- en: '`^EMP-\d{4}-[A-Z]{2}$` (matches patterns such as `EMP-1234-AB`)'
  id: totrans-331
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`^EMP-\d{4}-[A-Z]{2}$`（匹配如 `EMP-1234-AB` 的模式）'
- en: These custom patterns can be used alongside the predefined PII types to create
    a comprehensive sensitive information protection strategy tailored to your specific
    needs.
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 这些自定义模式可以与预定义的 PII 类型一起使用，创建一个针对您特定需求的全面敏感信息保护策略。
- en: '![Figure 12.10 – Adding sensitive information filters](img/B22045_12_10.jpg)'
  id: totrans-333
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.10 – 添加敏感信息过滤器](img/B22045_12_10.jpg)'
- en: Figure 12.10 – Adding sensitive information filters
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.10 – 添加敏感信息过滤器
- en: '*Figure 12**.10* shows the configuration options you can specify for sensitive
    information filters.'
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 12.10* 展示了您可以指定的敏感信息过滤器配置选项。'
- en: By leveraging sensitive information filters, you can ensure that your applications
    maintain the highest standards of privacy and data protection. For instance, a
    healthcare provider could configure guardrails to mask patient information in
    summaries, while a financial institution could block queries related to credit
    card details or account numbers, mitigating the risk of data breaches and maintaining
    regulatory compliance.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 通过利用敏感信息过滤器，您可以确保您的应用程序保持最高的隐私和数据保护标准。例如，医疗保健提供者可以配置防护栏以屏蔽摘要中的患者信息，而金融机构可以阻止与信用卡详情或账户号码相关的查询，从而降低数据泄露风险并保持合规性。
- en: Blocked messaging
  id: totrans-337
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 被阻止的消息
- en: Once we have defined the policy filters, you can then next define the blocked
    messaging, when the guardrail blocks any input prompt or response from the model.
    In such cases, a pre-approved response is provided, tailored to the specific use
    case or organizational guidelines. *Figure 12**.11* shows what messaging you would
    like to display for both input prompts and model responses.
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们定义了策略过滤器，接下来可以定义被阻止的消息，即当防护栏阻止模型任何输入提示或响应时。在这种情况下，将提供预批准的响应，针对特定的用例或组织指南进行定制。*图
    12.11* 展示了您希望为输入提示和模型响应显示的消息。
- en: '![Figure 12.11 – Blocked messaging](img/B22045_12_11.jpg)'
  id: totrans-339
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.11 – 被阻止的消息](img/B22045_12_11.jpg)'
- en: Figure 12.11 – Blocked messaging
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.11 – 被阻止的消息
- en: This approach ensures that the end user receives a safe, appropriate, and compliant
    response, even in scenarios where the initial input or model output raises concerns.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 这种方法确保即使在初始输入或模型输出引起担忧的情况下，最终用户也能收到安全、适当且合规的响应。
- en: Testing and deploying guardrails
  id: totrans-342
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 测试和部署护栏
- en: 'By testing the guardrail, you can iteratively refine and test the models, ensuring
    they align with your intended use case and adhere to ethical standards. Here’s
    how it works:'
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 通过测试护栏，您可以迭代地优化和测试模型，确保它们与您的预期用例一致并遵守道德标准。以下是工作原理：
- en: First, you create a guardrail, which initializes a working draft (`DRAFT`) version.
    Think of this as a sandbox environment where you can experiment without impacting
    live systems. This working draft is something you can continuously edit and tweak
    until you’re satisfied with its performance.
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，您创建一个护栏，这将初始化一个工作草案（`DRAFT`）版本。将其视为一个沙盒环境，您可以在这里实验而不会影响实时系统。这个工作草案是可以持续编辑和调整，直到您对其性能满意。
- en: '![Figure 12.12 – Test Guardrails for Amazon Bedrock](img/B22045_12_12.jpg)'
  id: totrans-345
  prefs: []
  type: TYPE_IMG
  zh: '![图12.12 – 测试亚马逊Bedrock的护栏](img/B22045_12_12.jpg)'
- en: Figure 12.12 – Test Guardrails for Amazon Bedrock
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.12 – 测试亚马逊Bedrock的护栏
- en: '*Figure 12**.12* shows the test results of the working draft. Here, I have
    taken a simple example of soccer, where I have provided `soccer` as a denied topic.
    When I provide a prompt pertaining to soccer, the model blocks the response. You
    can also see from the figure the prompt and model response trace.'
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: '*图12.12* 展示了工作草案的测试结果。在这里，我提供了一个简单的足球示例，其中我提供了 `soccer` 作为拒绝的主题。当我提供与足球相关的提示时，模型会阻止响应。您也可以从图中看到提示和模型响应跟踪。'
- en: 'Once you’ve perfected the working draft, you can create a version – a snapshot
    of the guardrail’s configurations at that point in time. Additionally, these versions
    function as immutable checkpoints in the system. This immutability serves a critical
    purpose: it prevents potential immediate negative impacts on the runtime environment
    that could occur if a draft version were accidentally deployed to production.
    For instance, if an engineer inadvertently made a modification to a draft version
    directly through the console interface, these immutable checkpoints would ensure
    that such changes don’t affect the live production environment. This safeguard
    helps maintain system stability and prevents unintended consequences from impromptu
    modifications.'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您完善了工作草案，您就可以创建一个版本——这是在那一刻的护栏配置的快照。此外，这些版本在系统中充当不可变的检查点。这种不可变性具有关键作用：它防止了如果意外地将草案版本部署到生产环境中可能产生的对运行时环境的潜在负面影响。例如，如果工程师意外地通过控制台界面直接修改了草案版本，这些不可变的检查点将确保这些更改不会影响实时生产环境。这种保护措施有助于维护系统稳定性，并防止意外修改带来的后果。
- en: It’s important to note that any changes made to the working draft will automatically
    update the live application if the draft is being used in the application. You
    must explicitly incorporate the desired version into your application to reflect
    the latest guardrail configurations.
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 重要的是要注意，对工作草案所做的任何更改都会自动更新正在使用的工作草案的应用程序。您必须明确地将所需的版本纳入您的应用程序，以反映最新的护栏配置。
- en: Now that we have created, tested and deployed guardrails, let us look at how
    we can use it.
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经创建了、测试并部署了护栏，让我们看看我们如何使用它。
- en: Using guardrails
  id: totrans-351
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用护栏
- en: 'Guardrails can be used in various ways:'
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 护栏可以以各种方式使用：
- en: '`InvokeModel`, `InvokeModelWithResponseStream`, and `Converse` APIs.'
  id: totrans-353
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`InvokeModel`、`InvokeModelWithResponseStream` 和 `Converse` API。'
- en: '**Knowledge base**: You can include guardrails when querying your knowledge
    base in the Amazon Bedrock console or via APIs.'
  id: totrans-354
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**知识库**：在亚马逊Bedrock控制台或通过API查询您的知识库时，您可以包含护栏。'
- en: '**Guardrail to your agent**: Associate a guardrail with your agent when creating
    or updating an agent in the Amazon Bedrock console or API.'
  id: totrans-355
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**为您的代理设置护栏**：在亚马逊Bedrock控制台或API中创建或更新代理时，将护栏与您的代理关联。'
- en: '*Figure 12**.13* shows the response with and without using Guardrails within
    Amazon Bedrock Playground.'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: '*图12.13* 展示了在亚马逊Bedrock Playground中使用和不使用护栏的响应。'
- en: '![Figure 12.13 – Using Guardrails in Amazon Bedrock Playground](img/B22045_12_13.jpg)'
  id: totrans-357
  prefs: []
  type: TYPE_IMG
  zh: '![图12.13 – 在亚马逊Bedrock Playground中使用护栏](img/B22045_12_13.jpg)'
- en: Figure 12.13 – Using Guardrails in Amazon Bedrock Playground
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.13 – 在亚马逊Bedrock Playground中使用护栏
- en: 'With Amazon Bedrock APIs, you can specify `guardrailIdentifier` and `guardrailIdentifier`
    as shown in the code:'
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: 使用亚马逊Bedrock API，您可以在代码中指定 `guardrailIdentifier` 和 `guardrailIdentifier`，如下所示：
- en: '[PRE44]'
  id: totrans-360
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: When running the preceding code, you can see that the response would be similar
    to what is shown in *Figure 12**.14*.
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 当运行前面的代码时，你可以看到响应将与*图12.14*中显示的类似。
- en: '![Figure 12.14 – Response with Guardrails](img/B22045_12_14.jpg)'
  id: totrans-362
  prefs: []
  type: TYPE_IMG
  zh: '![图12.14 – 带有防护栏的响应](img/B22045_12_14.jpg)'
- en: Figure 12.14 – Response with Guardrails
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.14 – 带有防护栏的响应
- en: You can see that the prompt provided in the code relates to medical treatment,
    for which we have configured Denied Topics filter in `Guardrail`. The code snippet
    includes `guardrailIdentifier` and `guardrailVersion` to enable Bedrock Guardrails,
    which can intervene and modify the model’s output based on the filter that is
    configured.
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以看到代码中提供的提示与医疗治疗相关，我们在“防护栏”中已配置了拒绝主题过滤器。代码片段包括`guardrailIdentifier`和`guardrailVersion`以启用Bedrock防护栏，它可以基于配置的过滤器介入并修改模型的输出。
- en: Furthermore, when using a guardrail with model inference, you can selectively
    evaluate user input by tagging specific content within the input text. This feature
    allows you to apply guardrails to certain parts of the input while leaving other
    parts unprocessed.
  id: totrans-365
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，当使用防护栏进行模型推理时，你可以通过标记输入文本中的特定内容来选择性评估用户输入。此功能允许你将防护栏应用于输入的某些部分，同时保留其他部分未处理。
- en: For example, imagine you’re creating a conversational AI assistant for a banking
    application. While you want your assistant to provide helpful information to users,
    you also need to ensure it doesn’t reveal sensitive account details or encourage
    risky financial behavior. By selectively evaluating user input, you can apply
    guardrails to specific sections of the conversation, like user queries, while
    leaving system prompts and conversation history untouched.
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，想象你正在为银行应用程序创建一个对话式人工智能助手。虽然你希望你的助手为用户提供有用的信息，但你还需要确保它不会泄露敏感的账户细节或鼓励风险金融行为。通过选择性评估用户输入，你可以对对话的特定部分应用防护栏，如用户查询，同时保持系统提示和对话历史不变。
- en: 'Here’s how you could implement this:'
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是你可以这样实现的方式：
- en: Use input tags to mark user queries, for example, `<amazon-bedrock-guardrails-guardContent_abc>How
    much money is in my` `savings account?</amazon-bedrock-guardrails-guardContent_abc>`
  id: totrans-368
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用输入标签来标记用户查询，例如，`<amazon-bedrock-guardrails-guardContent_abc>我的储蓄账户里有多少钱？</amazon-bedrock-guardrails-guardContent_abc>`
- en: Configure a dynamic tag suffix (for example, `abc`) in the `amazon-bedrock-guardrailConfig`
    to prevent prompt injection attacks.
  id: totrans-369
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`amazon-bedrock-guardrailConfig`中配置一个动态标签后缀（例如，`abc`）以防止提示注入攻击。
- en: Any content outside the tags such as system prompts and conversation history
    won’t be processed by guardrails.
  id: totrans-370
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标签之外的内容，如系统提示和对话历史，不会被防护栏处理。
- en: For user queries within the tags, guardrails will ensure the AI assistant’s
    response doesn’t reveal sensitive financial information or promote irresponsible
    money management.
  id: totrans-371
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于标签内的用户查询，防护栏将确保人工智能助手的响应不会泄露敏感的财务信息或推广不负责任的钱财管理。
- en: This approach not only enhances security and control but also optimizes performance
    and reduces costs, as guardrails only evaluate the tagged user input instead of
    the entire prompt.
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 这种方法不仅增强了安全和控制，还优化了性能并降低了成本，因为防护栏只评估标记的用户输入，而不是整个提示。
- en: When using guardrails with streaming responses, you can either configure it
    to **synchronous mode** or **asynchronous mode**. The synchronous mode introduces
    some latency as the guardrail buffers and applies policies to response chunks
    before sending them to the user, ensuring better accuracy. Alternatively, the
    asynchronous mode sends response chunks immediately while applying policies in
    the background, sacrificing accuracy for lower latency.
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用带有流式响应的防护栏时，你可以配置为**同步模式**或**异步模式**。同步模式引入了一些延迟，因为防护栏缓冲并应用策略到响应块之前发送给用户，从而确保更高的准确性。或者，异步模式立即发送响应块，同时在后台应用策略，牺牲准确性以换取更低的延迟。
- en: 'You can enable asynchronous mode by including `"streamProcessingMode": "ASYNCHRONOUS"`
    in `amazon-bedrock-guardrailConfig`. Here is how:'
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: '你可以通过在`amazon-bedrock-guardrailConfig`中包含`"streamProcessingMode": "ASYNCHRONOUS"`来启用异步模式。以下是方法：'
- en: '[PRE45]'
  id: totrans-375
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'For conversational applications built with `Converse` API, you can use guardrails
    to block inappropriate content entered by the user or generated by the model.
    When calling the `Converse` or `ConverseStream` operations, include the guardrail
    configuration in the `guardrailConfig` parameter. Here is how:'
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: 对于使用`Converse` API构建的对话式应用程序，你可以使用防护栏来阻止用户输入或模型生成的不得当内容。在调用`Converse`或`ConverseStream`操作时，将防护栏配置包含在`guardrailConfig`参数中。以下是方法：
- en: '[PRE46]'
  id: totrans-377
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'Here is an example code on how you can guard the conversation by using guardrails
    on `Converse` API : [https://docs.aws.amazon.com/bedrock/latest/userguide/guardrails-use-converse-api.html#converse-api-guardrail-example](https://docs.aws.amazon.com/bedrock/latest/userguide/guardrails-use-converse-api.html#converse-api-guardrail-example).'
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一个示例代码，说明您如何通过在`Converse` API上使用护栏来保护对话：[https://docs.aws.amazon.com/bedrock/latest/userguide/guardrails-use-converse-api.html#converse-api-guardrail-example](https://docs.aws.amazon.com/bedrock/latest/userguide/guardrails-use-converse-api.html#converse-api-guardrail-example)。
- en: Guardrails for Amazon Bedrock is a feature that allows organizations to implement
    safeguards and policy filters to ensure the safe and responsible use of AI models.
    It provides four policy filters – content filters, denied topics, word filters,
    and sensitive information filters – to block or redact unwanted content, topics,
    words, and sensitive information from both user inputs and model outputs. Guardrails
    helps maintain compliance with regulations, protect user privacy, and prevent
    the generation of harmful or unethical content.
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: Amazon Bedrock的护栏功能允许组织实施安全措施和政策过滤器，以确保人工智能模型的安全和负责任的使用。它提供了四种政策过滤器——内容过滤器、禁止主题、单词过滤器和敏感信息过滤器——以阻止或编辑用户输入和模型输出中的不受欢迎的内容、主题、单词和敏感信息。护栏有助于遵守法规、保护用户隐私，并防止生成有害或不道德的内容。
- en: Summary
  id: totrans-380
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: This chapter began by emphasizing the importance of data privacy and protection
    for organizations in today’s digital landscape. It highlighted Amazon Bedrock’s
    robust security measures, which ensure that users maintain complete control over
    their data, along with key aspects such as data localization, isolation, encryption,
    and access management through IAM.
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 本章首先强调了在当今数字景观中，组织对数据隐私和保护的重视。它突出了Amazon Bedrock的强大安全措施，确保用户对其数据保持完全控制，同时包括数据本地化、隔离、加密和通过IAM进行访问管理等关键方面。
- en: 'The chapter then dove deeper into responsible AI practices, addressing challenges
    such as veracity, intellectual property rights, safety, and toxicity. It provided
    guidance on implementing content filtering, guardrails, data curation, watermarking,
    traceability, and establishing robust responsible AI policies. Additionally, the
    chapter introduced Guardrails for Amazon Bedrock, which offers four policy filters:
    content filters, denied topics, word filters, and sensitive information filters.
    These filters enable organizations to implement safeguards aligning with their
    safe and responsible AI policies, promoting ethical AI deployment across various
    industries.'
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: 章节随后深入探讨了负责任的人工智能实践，解决诸如真实性、知识产权、安全性和毒性等挑战。它提供了关于实施内容过滤、护栏、数据整理、水印、可追溯性和建立稳健的负责任人工智能政策的指导。此外，章节介绍了Amazon
    Bedrock的护栏，它提供了四种政策过滤器：内容过滤器、禁止主题、单词过滤器和敏感信息过滤器。这些过滤器使组织能够实施与其安全和负责任的人工智能政策相一致的安全措施，促进各行业道德人工智能的部署。
- en: Congratulations! You have reached the end of this book. By now, you have gained
    deep hands-on knowledge of Amazon Bedrock. From understanding the foundational
    concepts to practical implementations and real-world use cases, we have covered
    a wide range of topics that will provide you with the knowledge and skills to
    build scalable and innovative GenAI applications.
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜！您已经到达了这本书的结尾。到目前为止，您已经获得了对Amazon Bedrock的深入实战知识。从理解基础概念到实际实施和实际用例，我们已经涵盖了广泛的主题，这将为您提供构建可扩展和创新的GenAI应用程序的知识和技能。
- en: Throughout the chapters, we have explored the power of prompt engineering, continuous
    pre-training, fine-tuning models, and RAG, along with the development of intelligent
    agents with Amazon Bedrock.
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: 在整个章节中，我们探讨了提示工程的力量、持续预训练、微调模型和RAG，以及使用Amazon Bedrock开发智能代理。
- en: We explored various architectural patterns, such as text generation, summarization,
    question answering, entity extraction, code generation, and image creation. Additionally,
    we addressed crucial aspects of monitoring, security, and privacy, ensuring that
    you can confidently navigate the intricate world of GenAI with Amazon Bedrock
    while adhering to ethical standards and best practices. You now have a comprehensive
    understanding of Amazon Bedrock, its capabilities, and the techniques required
    to harness its full potential.
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
  zh: 我们探索了各种架构模式，例如文本生成、摘要、问答、实体提取、代码生成和图像创建。此外，我们还解决了监控、安全和隐私的关键方面，确保您可以在遵守道德标准和最佳实践的同时，自信地穿梭于GenAI错综复杂的世界中，并充分利用Amazon
    Bedrock的功能。您现在对Amazon Bedrock、其功能和发挥其全部潜力的技术有了全面的理解。
