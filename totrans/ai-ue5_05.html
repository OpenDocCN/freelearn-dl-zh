<html><head></head><body>
  <div id="_idContainer085">
   <h1 class="chapter-number" id="_idParaDest-97">
    <a id="_idTextAnchor099">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     5
    </span>
   </h1>
   <h1 id="_idParaDest-98">
    <a id="_idTextAnchor100">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Improving Agent Navigation
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     Now that you have a strong grip on the basics of the Unreal Engine pathfinding system, it’s time to get deeper and start delving into the intricate workings of enhancing the agent
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.4.1">
      Navigation System.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.5.1">
     In this chapter, you will discover how to improve your nav mesh generation and agent movement: starting from dynamically generated meshes, going through querying the environment, up until avoiding other
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.6.1">
      agents efficiently.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.7.1">
     By the end of this chapter, you will have some brand-new skills to make your levels more engaging and interesting.
    </span>
    <span class="koboSpan" id="kobo.7.2">
     This knowledge will serve as a fundamental building block in guiding your path toward creating sophisticated games, ultimately enhancing your skills as an AI
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.8.1">
      game programmer.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.9.1">
     In this chapter, we will be covering the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.10.1">
      following topics:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.11.1">
      Generating navigation meshes
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.12.1">
       at runtime
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.13.1">
      Influencing navigation with
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.14.1">
       query filters
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.15.1">
      Implementing
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.16.1">
       agent avoidance
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-99">
    <a id="_idTextAnchor101">
    </a>
    <span class="koboSpan" id="kobo.17.1">
     Technical requirements
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.18.1">
     To follow the topics presented in this chapter, you should have completed the previous ones and understood
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.19.1">
      their content.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.20.1">
     Additionally, if you would prefer to begin with code from the companion repository for this book, you can download the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.21.1">
      .zip
     </span>
    </strong>
    <span class="koboSpan" id="kobo.22.1">
     project files provided in this book’s companion project repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.23.1">
      at
     </span>
    </span>
    <a href="https://github.com/PacktPublishing/Artificial-Intelligence-in-Unreal-Engine-5">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.24.1">
       https://github.com/PacktPublishing/Artificial-Intelligence-in-Unreal-Engine-5
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.25.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.26.1">
     You can download the files corresponding to the end of the last chapter by clicking on the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.27.1">
      Unreal Agility Arena –
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.28.1">
       Chapter 04
      </span>
     </strong>
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.29.1">
      -
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.30.1">
       End
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.31.1">
      link.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-100">
    <a id="_idTextAnchor102">
    </a>
    <span class="koboSpan" id="kobo.32.1">
     Generating navigation meshes at runtime
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.33.1">
     Let’s continue our short novel started in
    </span>
    <a href="B31016_04.xhtml#_idTextAnchor073">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.34.1">
        Chapter 4
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.35.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.36.1">
      Setting Up a
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.37.1">
       Navigation Mesh
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.38.1">
      :
     </span>
    </span>
   </p>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.39.1">
      In the secret research laboratory, a groundbreaking experiment was underway.
     </span>
     <span class="koboSpan" id="kobo.39.2">
      The artificial intelligence dummy puppets, developed by Dr.
     </span>
     <span class="koboSpan" id="kobo.39.3">
      Markus and Professor Viktoria, were primed for a quest: equipped with advanced pathfinding systems, the puppets were cleverly placed in the lab’s complex network of corridors and
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.40.1">
       interconnected rooms.
      </span>
     </em>
    </span>
   </p>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.41.1">
      They faced simulated construction zones, unexpected barriers, and even simulated distractions that obstructed their path.
     </span>
     <span class="koboSpan" id="kobo.41.2">
      However, armed with their state-of-the-art AI capabilities, the puppets swiftly adapted to the changing circumstances, employing their ingenuity to find alternative routes and skillfully navigate through the intricate layout of
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.42.1">
       the laboratory.
      </span>
     </em>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.43.1">
     If you are
    </span>
    <a id="_idIndexMarker204">
    </a>
    <span class="koboSpan" id="kobo.44.1">
     working with nav meshes, chances are you will sooner or later have objects that will be moving around and will cause the agent’s path to the target
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.45.1">
      to change.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.46.1">
     This is why having a static nav mesh generation will become useless; you will need some kind of system that will update the nav mesh at runtime.
    </span>
    <span class="koboSpan" id="kobo.46.2">
     This is why Unreal Engine provides more than one method for generating
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.47.1">
      such meshes.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.48.1">
     As explained in
    </span>
    <a href="B31016_03.xhtml#_idTextAnchor058">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.49.1">
        Chapter 3
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.50.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.51.1">
      Presenting the Unreal Engine Navigation System
     </span>
    </em>
    <span class="koboSpan" id="kobo.52.1">
     , the generation method can be changed from
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.53.1">
      Project Settings
     </span>
    </strong>
    <span class="koboSpan" id="kobo.54.1">
     or the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.55.1">
      Recast Nav Mesh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.56.1">
     actor in a level; as we need to change the nav mesh generation just for this level, we will be selecting the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.57.1">
      second option.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.58.1">
     But first, we need to create a level for our puppet agent to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.59.1">
      walk on!
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-101">
    <a id="_idTextAnchor103">
    </a>
    <span class="koboSpan" id="kobo.60.1">
     Creating the level
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.61.1">
     To create
    </span>
    <a id="_idIndexMarker205">
    </a>
    <span class="koboSpan" id="kobo.62.1">
     this gym, do the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.63.1">
      following steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.64.1">
      From the main menu, select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.65.1">
       File
      </span>
     </strong>
     <span class="koboSpan" id="kobo.66.1">
      |
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.67.1">
        New Level
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.68.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.69.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.70.1">
       Maps/LevelInstances
      </span>
     </strong>
     <span class="koboSpan" id="kobo.71.1">
      folder and drag an instance of
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.72.1">
       LI_Lighting
      </span>
     </strong>
     <span class="koboSpan" id="kobo.73.1">
      inside your level; set its transform
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.74.1">
       Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.75.1">
      value to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.76.1">
       (0,
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.77.1">
        0, 0)
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.78.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.79.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.80.1">
       Maps/PackedLevelActors
      </span>
     </strong>
     <span class="koboSpan" id="kobo.81.1">
      folder and drag an instance of
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.82.1">
       PLA_Lab_02
      </span>
     </strong>
     <span class="koboSpan" id="kobo.83.1">
      inside your level; set its transform
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.84.1">
       Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.85.1">
      value to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.86.1">
       (0,
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.87.1">
        0, 0)
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.88.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.89.1">
      Save the level in the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.90.1">
       Maps
      </span>
     </strong>
     <span class="koboSpan" id="kobo.91.1">
      folder and name
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.92.1">
       it
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.93.1">
        Gym_NavMesh_04
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.94.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.95.1">
     This gym has
    </span>
    <a id="_idIndexMarker206">
    </a>
    <span class="koboSpan" id="kobo.96.1">
     a block of stairs along with a detached platform, as depicted in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.97.1">
       Figure 5
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.98.1">
       .1
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.99.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer067">
     <span class="koboSpan" id="kobo.100.1">
      <img alt="Figure 5.1 – The gym" src="image/B31016_05_1.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.101.1">
     Figure 5.1 – The gym
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.102.1">
     Now, let’s add the nav mesh along with the agent and the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.103.1">
      target point:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.104.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.105.1">
       Nav Mesh Bounds Volume
      </span>
     </strong>
     <span class="koboSpan" id="kobo.106.1">
      actor and set its boundaries so it covers the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.107.1">
       whole level.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.108.1">
      Add the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.109.1">
       NS_Target
      </span>
     </strong>
     <span class="koboSpan" id="kobo.110.1">
      Niagara system at the top of the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.111.1">
       isolated platform.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.112.1">
      Add the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.113.1">
       BP_NavMeshAgent
      </span>
     </strong>
     <span class="koboSpan" id="kobo.114.1">
      Blueprint on the blue tile and set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.115.1">
       Target Actor
      </span>
     </strong>
     <span class="koboSpan" id="kobo.116.1">
      property value to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.117.1">
       NS_Target
      </span>
     </strong>
     <span class="koboSpan" id="kobo.118.1">
      .
     </span>
     <span class="koboSpan" id="kobo.118.2">
      The level should now look
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.119.1">
       as follows:
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer068">
     <span class="koboSpan" id="kobo.120.1">
      <img alt="Figure 5.2 – The gym with the nav mesh" src="image/B31016_05_2.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.121.1">
     Figure 5.2 – The gym with the nav mesh
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.122.1">
     As we are using a
    </span>
    <a id="_idIndexMarker207">
    </a>
    <span class="koboSpan" id="kobo.123.1">
     level that is slightly more complex than those presented in the previous chapter, you may experience a mesh generation that is slightly different from the one depicted in my screenshot; the stairs nav mesh may seem detached from the rest, or you may experience some other issue.
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.124.1">
       Figure 5
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.125.1">
      .3
     </span>
    </em>
    <span class="koboSpan" id="kobo.126.1">
     shows a typical scenario you
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.127.1">
      may encounter:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer069">
     <span class="koboSpan" id="kobo.128.1">
      <img alt="Figure 5.3 – Broken nav mesh" src="image/B31016_05_3.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.129.1">
     Figure 5.3 – Broken nav mesh
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.130.1">
     To solve this type of problem, you will need to tweak the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.131.1">
      Recast Nav Mesh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.132.1">
     actor settings a bit.
    </span>
    <span class="koboSpan" id="kobo.132.2">
     As an example, you may try to do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.133.1">
      the following:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.134.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.135.1">
       Default Cell Height
      </span>
     </strong>
     <span class="koboSpan" id="kobo.136.1">
      property value
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.137.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.138.1">
        40.0
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.139.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.140.1">
      Set
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.141.1">
       Agent Radius
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.142.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.143.1">
        70.0
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.144.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.145.1">
     The first value will make the stairs navigable area connect to the rest of the level, while the second one will add some more padding to the border of the mesh so as to avoid an agent walking too close to the edges.
    </span>
    <span class="koboSpan" id="kobo.145.2">
     Just play around with the values a bit until you get your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.146.1">
      desired result.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.147.1">
     If you test the level right now, you will notice that the agent will try to reach the target point but it will get stuck at the base of the detached platform; obviously, there isn’t a route to the destination, and your little agent may not make it all the way there, but it will give its best shot to get as close as
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.148.1">
      it can.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.149.1">
     Now, try to
    </span>
    <a id="_idIndexMarker208">
    </a>
    <span class="koboSpan" id="kobo.150.1">
     add some obstacles around the level to force your agent to climb the stairs – something like
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.151.1">
       Figure 5
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.152.1">
       .4
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.153.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer070">
     <span class="koboSpan" id="kobo.154.1">
      <img alt="Figure 5.4 – The gym with some obstacles" src="image/B31016_05_4.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.155.1">
     Figure 5.4 – The gym with some obstacles
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.156.1">
     If you test the level, the agent will stop at the very first step of the stairs; this is happening because the step height is too high for the poor fellow!
    </span>
    <span class="koboSpan" id="kobo.156.2">
     To solve this, open the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.157.1">
      BP_NavMeshAgent
     </span>
    </strong>
    <span class="koboSpan" id="kobo.158.1">
     Blueprint, and in the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.159.1">
      Details
     </span>
    </strong>
    <span class="koboSpan" id="kobo.160.1">
     panel, look for the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.161.1">
      Character Movement: Walking
     </span>
    </strong>
    <span class="koboSpan" id="kobo.162.1">
     category and set the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.163.1">
      Max Step Height
     </span>
    </strong>
    <span class="koboSpan" id="kobo.164.1">
     value
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.165.1">
      to
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.166.1">
       55.0
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.167.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.168.1">
     This will allow the agent to take higher steps and climb the stairs.
    </span>
    <span class="koboSpan" id="kobo.168.2">
     Test the level again and you should see the agent climbing the stairs and stopping at the very edge of them.
    </span>
    <span class="koboSpan" id="kobo.168.3">
     The journey to the ultimate destination appears to be quite a challenge for our
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.169.1">
      little friend!
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.170.1">
     Let’s help it out by adding a pathway to the isolated platform, where the target point
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.171.1">
      is located.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-102">
    <a id="_idTextAnchor104">
    </a>
    <span class="koboSpan" id="kobo.172.1">
     Adding a moving platform
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.173.1">
     To make our agent reach
    </span>
    <a id="_idIndexMarker209">
    </a>
    <span class="koboSpan" id="kobo.174.1">
     its target point, we are going to add a moving platform; this will allow us to create a dynamically generated
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.175.1">
      nav mesh.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.176.1">
     Creating the Blueprint
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.177.1">
     To do this, we will start with a static mesh and make it
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.178.1">
      a Blueprint:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.179.1">
      In
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.180.1">
       Content Drawer
      </span>
     </strong>
     <span class="koboSpan" id="kobo.181.1">
      , open the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.182.1">
       KayKit/ProtorypeBits/Models
      </span>
     </strong>
     <span class="koboSpan" id="kobo.183.1">
      folder and drag a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.184.1">
       Primitive_Cube_Primitive_Cube
      </span>
     </strong>
     <span class="koboSpan" id="kobo.185.1">
      instance into
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.186.1">
       the level.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.187.1">
      Set its
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.188.1">
       Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.189.1">
      attribute to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.190.1">
       (380.0, 50.0, 60.0)
      </span>
     </strong>
     <span class="koboSpan" id="kobo.191.1">
      so that it connects the staircase and the isolated
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.192.1">
       yellow platforms.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.193.1">
      Set
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.194.1">
       Mobility
      </span>
     </strong>
     <span class="koboSpan" id="kobo.195.1">
      of this actor
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.196.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.197.1">
        Movable
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.198.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.199.1">
      With this actor selected, convert it into a Blueprint by clicking the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.200.1">
       Convert to
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.201.1">
        Blueprint
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.202.1">
       button.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer071">
     <span class="koboSpan" id="kobo.203.1">
      <img alt="Figure 5.5 – The Convert to Blueprint button" src="image/B31016_05_5.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.204.1">
     Figure 5.5 – The Convert to Blueprint button
    </span>
   </p>
   <ol>
    <li value="5">
     <span class="koboSpan" id="kobo.205.1">
      Save the Blueprint in the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.206.1">
       Blueprints
      </span>
     </strong>
     <span class="koboSpan" id="kobo.207.1">
      folder and name
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.208.1">
       it
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.209.1">
        BP_MovingPlatform
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.210.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.211.1">
      Open the Blueprint by double-clicking
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.212.1">
       the asset.
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.213.1">
     We are now going to add some code logic, in order to make
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.214.1">
      it move.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.215.1">
     Adding the code
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.216.1">
     With the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.217.1">
      BP_MovingPlatform
     </span>
    </strong>
    <span class="koboSpan" id="kobo.218.1">
     Blueprint open, start doing the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.219.1">
      following steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.220.1">
      Create a new variable of the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.221.1">
       Vector
      </span>
     </strong>
     <span class="koboSpan" id="kobo.222.1">
      type and name
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.223.1">
       it
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.224.1">
        StartLocation
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.225.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.226.1">
      Create a new variable of the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.227.1">
       Float
      </span>
     </strong>
     <span class="koboSpan" id="kobo.228.1">
      type and name it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.229.1">
       VerticalOffset
      </span>
     </strong>
     <span class="koboSpan" id="kobo.230.1">
      .
     </span>
     <span class="koboSpan" id="kobo.230.2">
      From the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.231.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.232.1">
      panel, check the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.233.1">
       Instance
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.234.1">
        Editable
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.235.1">
       property.
      </span>
     </span>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.236.1">
       These two variables will store the initial position of the platform and the vertical distance it will cover while moving, respectively.
      </span>
      <span class="koboSpan" id="kobo.236.2">
       The second one has also been made editable from
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.237.1">
        the level.
       </span>
      </span>
     </p>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.238.1">
       Now, in
      </span>
      <strong class="bold">
       <span class="koboSpan" id="kobo.239.1">
        Event Graph
       </span>
      </strong>
      <span class="koboSpan" id="kobo.240.1">
       , perform the
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.241.1">
        following steps:
       </span>
      </span>
     </p>
    </li>
    <li>
     <span class="koboSpan" id="kobo.242.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.243.1">
       Set Start Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.244.1">
      node and connect its incoming execution pin to the outgoing execution pin of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.245.1">
       Event Begin
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.246.1">
        Play
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.247.1">
       node.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.248.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.249.1">
       Get Actor Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.250.1">
      node and connect its
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.251.1">
       Return Value
      </span>
     </strong>
     <span class="koboSpan" id="kobo.252.1">
      outgoing pin to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.253.1">
       Start Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.254.1">
      incoming pin of the previously added
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.255.1">
       setter node.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.256.1">
      From the outgoing execution pin of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.257.1">
       Set Start Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.258.1">
      node, add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.259.1">
       Timeline
      </span>
     </strong>
     <span class="koboSpan" id="kobo.260.1">
      node and double-click on it to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.261.1">
       start editing.
      </span>
     </span>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.262.1">
       This part of the code stores
      </span>
      <a id="_idIndexMarker210">
      </a>
      <span class="koboSpan" id="kobo.263.1">
       the platform’s initial position and initializes a timeline to set up the platform animation.
      </span>
      <span class="koboSpan" id="kobo.263.2">
       The code so far is shown in
      </span>
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.264.1">
         Figure 5
        </span>
       </em>
      </span>
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.265.1">
         .6
        </span>
       </em>
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.266.1">
        :
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer072">
     <span class="koboSpan" id="kobo.267.1">
      <img alt="Figure 5.6 – The first part of the graph" src="image/B31016_05_6.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.268.1">
     Figure 5.6 – The first part of the graph
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.269.1">
     The timeline is going to be a simple sinusoidal curve that will control the vertical offset of the platform.
    </span>
    <span class="koboSpan" id="kobo.269.2">
     To create the curve, perform the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.270.1">
      following steps:
     </span>
    </span>
   </p>
   <ol>
    <li value="6">
     <span class="koboSpan" id="kobo.271.1">
      Click the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.272.1">
       + Track
      </span>
     </strong>
     <span class="koboSpan" id="kobo.273.1">
      button and, from the dropdown menu, select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.274.1">
       Add
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.275.1">
        Float Track
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.276.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.277.1">
      Name the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.278.1">
       track
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.279.1">
        Alpha
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.280.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.281.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.282.1">
       Length
      </span>
     </strong>
     <span class="koboSpan" id="kobo.283.1">
      value of the curve
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.284.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.285.1">
        15.00
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.286.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.287.1">
      Click the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.288.1">
       Loop
      </span>
     </strong>
     <span class="koboSpan" id="kobo.289.1">
      button to make the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.290.1">
       Timeline
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.291.1">
       repeat indefinitely.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.292.1">
      In the curve graph, add three keys by right-clicking and selecting the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.293.1">
       Add key
      </span>
     </strong>
     <span class="koboSpan" id="kobo.294.1">
      option.
     </span>
     <span class="koboSpan" id="kobo.294.2">
      Set the keys’ values, respectively, to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.295.1">
       the following:
      </span>
     </span>
     <ul>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.296.1">
         Time
        </span>
       </strong>
       <span class="koboSpan" id="kobo.297.1">
        to
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.298.1">
         0.0
        </span>
       </strong>
       <span class="koboSpan" id="kobo.299.1">
        and
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.300.1">
         Value
        </span>
       </strong>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.301.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.302.1">
          0.0
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.303.1">
         .
        </span>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.304.1">
         Time
        </span>
       </strong>
       <span class="koboSpan" id="kobo.305.1">
        to
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.306.1">
         7.5
        </span>
       </strong>
       <span class="koboSpan" id="kobo.307.1">
        and
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.308.1">
         Value
        </span>
       </strong>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.309.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.310.1">
          1.0
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.311.1">
         .
        </span>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.312.1">
         Time
        </span>
       </strong>
       <span class="koboSpan" id="kobo.313.1">
        to
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.314.1">
         15.0
        </span>
       </strong>
       <span class="koboSpan" id="kobo.315.1">
        and
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.316.1">
         Value
        </span>
       </strong>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.317.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.318.1">
          0.0
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.319.1">
         .
        </span>
       </span>
      </li>
     </ul>
    </li>
    <li>
     <span class="koboSpan" id="kobo.320.1">
      Right-click on each key and set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.321.1">
       KEY INTERPOLATION
      </span>
     </strong>
     <span class="koboSpan" id="kobo.322.1">
      value to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.323.1">
       Auto
      </span>
     </strong>
     <span class="koboSpan" id="kobo.324.1">
      ; this will make the curve sinusoidal and not linear.
     </span>
     <span class="koboSpan" id="kobo.324.2">
      The resulting curve is shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.325.1">
        Figure 5
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.326.1">
        .7
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.327.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer073">
     <span class="koboSpan" id="kobo.328.1">
      <img alt="Figure 5.7 – Timeline curve" src="image/B31016_05_7.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.329.1">
     Figure 5.7 – Timeline curve
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.330.1">
     Get back to
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.331.1">
      Event Graph
     </span>
    </strong>
    <span class="koboSpan" id="kobo.332.1">
     and you
    </span>
    <a id="_idIndexMarker211">
    </a>
    <span class="koboSpan" id="kobo.333.1">
     should notice that the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.334.1">
      Timeline
     </span>
    </strong>
    <span class="koboSpan" id="kobo.335.1">
     node now has an
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.336.1">
      Alpha
     </span>
    </strong>
    <span class="koboSpan" id="kobo.337.1">
     outgoing pin; we will use it to control the vertical position of the platform.
    </span>
    <span class="koboSpan" id="kobo.337.2">
     Start doing the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.338.1">
      following steps:
     </span>
    </span>
   </p>
   <ol>
    <li value="12">
     <span class="koboSpan" id="kobo.339.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.340.1">
       Get Vertical
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.341.1">
        Offset
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.342.1">
       node.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.343.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.344.1">
       Get Start Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.345.1">
      node; right-click on its outgoing pin and select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.346.1">
       Split Struct Pin
      </span>
     </strong>
     <span class="koboSpan" id="kobo.347.1">
      to expose the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.348.1">
       X
      </span>
     </strong>
     <span class="koboSpan" id="kobo.349.1">
      ,
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.350.1">
       Y
      </span>
     </strong>
     <span class="koboSpan" id="kobo.351.1">
      , and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.352.1">
       Z
      </span>
     </strong>
     <span class="koboSpan" id="kobo.353.1">
      pins of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.354.1">
       the structure.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.355.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.356.1">
       Multiply
      </span>
     </strong>
     <span class="koboSpan" id="kobo.357.1">
      node and connect its two incoming pins to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.358.1">
       Vertical Offset
      </span>
     </strong>
     <span class="koboSpan" id="kobo.359.1">
      outgoing pin and to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.360.1">
       Alpha
      </span>
     </strong>
     <span class="koboSpan" id="kobo.361.1">
      outgoing pin
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.362.1">
       of
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.363.1">
        Timeline
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.364.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.365.1">
      Add an
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.366.1">
       Add
      </span>
     </strong>
     <span class="koboSpan" id="kobo.367.1">
      node and connect its two incoming pins to the outgoing pin of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.368.1">
       Multiply
      </span>
     </strong>
     <span class="koboSpan" id="kobo.369.1">
      node and the outgoing
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.370.1">
       Start Location Z
      </span>
     </strong>
     <span class="koboSpan" id="kobo.371.1">
      pin of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.372.1">
       Get Start
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.373.1">
        Location
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.374.1">
       node.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.375.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.376.1">
       Set Actor Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.377.1">
      node to the graph, connect its incoming execution pin to the outgoing execution pin of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.378.1">
       Timeline
      </span>
     </strong>
     <span class="koboSpan" id="kobo.379.1">
      node, and do
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.380.1">
       the following:
      </span>
     </span>
     <ol>
      <li class="upper-roman">
       <span class="koboSpan" id="kobo.381.1">
        Right-click on the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.382.1">
         New Location
        </span>
       </strong>
       <span class="koboSpan" id="kobo.383.1">
        incoming pin and select
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.384.1">
         Split Struct Pin
        </span>
       </strong>
       <span class="koboSpan" id="kobo.385.1">
        to expose the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.386.1">
         X
        </span>
       </strong>
       <span class="koboSpan" id="kobo.387.1">
        ,
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.388.1">
         Y
        </span>
       </strong>
       <span class="koboSpan" id="kobo.389.1">
        , and
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.390.1">
         Z
        </span>
       </strong>
       <span class="koboSpan" id="kobo.391.1">
        pins of
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.392.1">
         the structure.
        </span>
       </span>
      </li>
      <li class="upper-roman">
       <span class="koboSpan" id="kobo.393.1">
        Connect the incoming
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.394.1">
         New Location X
        </span>
       </strong>
       <span class="koboSpan" id="kobo.395.1">
        pin to the outgoing
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.396.1">
         Start Location X
        </span>
       </strong>
       <span class="koboSpan" id="kobo.397.1">
        pin of the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.398.1">
         Get Start
        </span>
       </strong>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.399.1">
          Location
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.400.1">
         node.
        </span>
       </span>
      </li>
      <li class="upper-roman">
       <span class="koboSpan" id="kobo.401.1">
        Connect the incoming
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.402.1">
         New Location Y
        </span>
       </strong>
       <span class="koboSpan" id="kobo.403.1">
        pin to the outgoing
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.404.1">
         Start Location Y
        </span>
       </strong>
       <span class="koboSpan" id="kobo.405.1">
        pin of the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.406.1">
         Get Start
        </span>
       </strong>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.407.1">
          Location
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.408.1">
         node.
        </span>
       </span>
      </li>
      <li class="upper-roman">
       <span class="koboSpan" id="kobo.409.1">
        Connect the
       </span>
       <a id="_idIndexMarker212">
       </a>
       <span class="koboSpan" id="kobo.410.1">
        incoming
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.411.1">
         New Location Z
        </span>
       </strong>
       <span class="koboSpan" id="kobo.412.1">
        pin to the outgoing pin of the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.413.1">
         Add
        </span>
       </strong>
       <span class="koboSpan" id="kobo.414.1">
        node.
       </span>
       <span class="koboSpan" id="kobo.414.2">
        The result of this part of the graph is shown in
       </span>
       <span class="No-Break">
        <em class="italic">
         <span class="koboSpan" id="kobo.415.1">
          Figure 5
         </span>
        </em>
       </span>
       <span class="No-Break">
        <em class="italic">
         <span class="koboSpan" id="kobo.416.1">
          .8
         </span>
        </em>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.417.1">
         :
        </span>
       </span>
      </li>
     </ol>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer074">
     <span class="koboSpan" id="kobo.418.1">
      <img alt="Figure 5.8 – The second part of the graph" src="image/B31016_05_8.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.419.1">
     Figure 5.8 – The second part of the graph
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.420.1">
     Although quite lengthy, this code is pretty straightforward; it simply uses the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.421.1">
      Timeline
     </span>
    </strong>
    <span class="koboSpan" id="kobo.422.1">
     node to compute an offset over time and applies it to the platform’s
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.423.1">
      Z
     </span>
    </strong>
    <span class="koboSpan" id="kobo.424.1">
     position.
    </span>
    <span class="koboSpan" id="kobo.424.2">
     At runtime, the platform will keep going up and down, creating a passage to the target point once every 15 seconds – that is, the duration of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.425.1">
      the loop.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.426.1">
     If you simulate the gym right now – with the nav mesh visible – something weird will happen; although the platform will be moving up and down, the nav mesh will stay as originally generated, leaving a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.427.1">
      floating passage.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer075">
     <span class="koboSpan" id="kobo.428.1">
      <img alt="Figure 5.9 – Static generation" src="image/B31016_05_9.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.429.1">
     Figure 5.9 – Static generation
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.430.1">
     This issue is happening because the nav mesh is generated statically and won’t be changed at runtime; the poor little fellow will drop off while trying to reach its target point, believing that a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.431.1">
      passage exists!
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.432.1">
     Let’s fix this immediately by making the nav
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.433.1">
      mesh dynamic.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-103">
    <a id="_idTextAnchor105">
    </a>
    <span class="koboSpan" id="kobo.434.1">
     Making the nav mesh dynamic
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.435.1">
     As stated at the beginning
    </span>
    <a id="_idIndexMarker213">
    </a>
    <span class="koboSpan" id="kobo.436.1">
     of this section, we are going to set the mesh runtime generation active just for this level, so we need to change the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.437.1">
      Recast Nav Mesh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.438.1">
     actor.
    </span>
    <span class="koboSpan" id="kobo.438.2">
     To do this, select the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.439.1">
      Recast Nav Mesh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.440.1">
     actor and, in the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.441.1">
      Details
     </span>
    </strong>
    <span class="koboSpan" id="kobo.442.1">
     panel, locate the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.443.1">
      Runtime
     </span>
    </strong>
    <span class="koboSpan" id="kobo.444.1">
     category.
    </span>
    <span class="koboSpan" id="kobo.444.2">
     Set the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.445.1">
      Runtime Generation
     </span>
    </strong>
    <span class="koboSpan" id="kobo.446.1">
     dropdown value
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.447.1">
      to
     </span>
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.448.1">
       Dynamic
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.449.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.450.1">
     If you test the gym, you will now see the nav mesh updating at regular intervals and the passage will
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.451.1">
      be interrupted.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer076">
     <span class="koboSpan" id="kobo.452.1">
      <img alt="Figure 5.10 – Dynamic generation" src="image/B31016_05_10.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.453.1">
     Figure 5.10 – Dynamic generation
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.454.1">
     You may notice that the
    </span>
    <a id="_idIndexMarker214">
    </a>
    <span class="koboSpan" id="kobo.455.1">
     agent will stop at the edge of the stairs platform and won’t go on when the moving platform creates the passage.
    </span>
    <span class="koboSpan" id="kobo.455.2">
     To fix this small issue, do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.456.1">
      the following:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.457.1">
      Open
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.458.1">
       BP_NavMeshAgent
      </span>
     </strong>
     <span class="koboSpan" id="kobo.459.1">
      and disconnect the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.460.1">
       Event
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.461.1">
        BeginPlay
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.462.1">
       node.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.463.1">
      Connect the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.464.1">
       Move to Actor
      </span>
     </strong>
     <span class="koboSpan" id="kobo.465.1">
      incoming execution pin to the outgoing execution pin of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.466.1">
       Event
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.467.1">
        Tick
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.468.1">
       node.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.469.1">
      Open the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.470.1">
       Class Defaults
      </span>
     </strong>
     <span class="koboSpan" id="kobo.471.1">
      tab and set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.472.1">
       Tick Interval (secs)
      </span>
     </strong>
     <span class="koboSpan" id="kobo.473.1">
      attribute to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.474.1">
       0.5
      </span>
     </strong>
     <span class="koboSpan" id="kobo.475.1">
      , to make the update a bit sparser.
     </span>
     <span class="koboSpan" id="kobo.475.2">
      The updated Blueprint is shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.476.1">
        Figure 5
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.477.1">
        .11
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.478.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer077">
     <span class="koboSpan" id="kobo.479.1">
      <img alt="Figure 5.11 – Updated Blueprint" src="image/B31016_05_11.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.480.1">
     Figure 5.11 – Updated Blueprint
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.481.1">
     What we have done here is pretty simple; instead of executing the code once at the start of the game, we set it to be executed once every tick – set to half a second – in order to keep on setting the final destination.
    </span>
    <span class="koboSpan" id="kobo.481.2">
     This may not be the most performance-efficient solution, but it should work well for our
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.482.1">
      small prototype.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.483.1">
     Note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.484.1">
     Keep in mind that updating a nav mesh at runtime is heavy on computation; this means that you should use this feature only when necessary and stick to the static generation most of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.485.1">
      the time.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.486.1">
     Now that you have mastered creating dynamic nav meshes, your tiny little agent will be in for a challenge as it navigates toward its target point.
    </span>
    <span class="koboSpan" id="kobo.486.2">
     Life – or rather, artificial life – won’t be as simple for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.487.1">
      it anymore!
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.488.1">
     In the next section, I’m going to introduce you to navigation filters, a feature that will let you change the way an agent behaves on the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.489.1">
      nav mesh.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-104">
    <a id="_idTextAnchor106">
    </a>
    <span class="koboSpan" id="kobo.490.1">
     Influencing navigation with query filters
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.491.1">
     As already mentioned in
    </span>
    <a href="B31016_03.xhtml#_idTextAnchor058">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.492.1">
        Chapter 3
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.493.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.494.1">
      Presenting the Unreal Engine Navigation System
     </span>
    </em>
    <span class="koboSpan" id="kobo.495.1">
     , with query
    </span>
    <a id="_idIndexMarker215">
    </a>
    <span class="koboSpan" id="kobo.496.1">
     filters, you can custom tailor the navigation paths of AI agents, enabling you to enhance and optimize their movement in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.497.1">
      the environment.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.498.1">
     You may have noticed that the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.499.1">
      Move to Actor
     </span>
    </strong>
    <span class="koboSpan" id="kobo.500.1">
     method in the previously created graph has an attribute named
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.501.1">
      Filter Class
     </span>
    </strong>
    <span class="koboSpan" id="kobo.502.1">
     (see
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.503.1">
       Figure 5
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.504.1">
      .11
     </span>
    </em>
    <span class="koboSpan" id="kobo.505.1">
     ); this will allow us to customize the way our agent behaves on a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.506.1">
      nav mesh.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.507.1">
     A filter is created by extending the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.508.1">
      NavigationQueryFilter
     </span>
    </strong>
    <span class="koboSpan" id="kobo.509.1">
     class and setting some appropriate values, so let’s start by creating one such class and see how
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.510.1">
      it works.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-105">
    <a id="_idTextAnchor107">
    </a>
    <span class="koboSpan" id="kobo.511.1">
     Creating the level
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.512.1">
     As a first step, we will need a
    </span>
    <a id="_idIndexMarker216">
    </a>
    <span class="koboSpan" id="kobo.513.1">
     gym for testing filters; in this case, we are going to duplicate a pre-existing one and tweak it
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.514.1">
      a bit:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.515.1">
      Duplicate the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.516.1">
       Gym_NavMesh_02
      </span>
     </strong>
     <span class="koboSpan" id="kobo.517.1">
      map, rename it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.518.1">
       Gym_NavMesh_05
      </span>
     </strong>
     <span class="koboSpan" id="kobo.519.1">
      , and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.520.1">
       open it.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.521.1">
      Remove all the obstacles from the bridge –
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.522.1">
       if any.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.523.1">
      Duplicate the agent and put it at the side of the first one, on the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.524.1">
       blue tile.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.525.1">
      To make the agents recognizable, you may wish to change the material of the duplicate; in my case, I opted for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.526.1">
       MI_Prototype_B
      </span>
     </strong>
     <span class="koboSpan" id="kobo.527.1">
      .
     </span>
     <span class="koboSpan" id="kobo.527.2">
      The final level should be like the one depicted in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.528.1">
        Figure 5
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.529.1">
        .12
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.530.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer078">
     <span class="koboSpan" id="kobo.531.1">
      <img alt="Figure 5.12 – The base gym" src="image/B31016_05_12.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.532.1">
     Figure 5.12 – The base gym
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.533.1">
     If you test the level, unsurprisingly, both agents will go toward the bridge, traverse it, and get to the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.534.1">
      target point.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.535.1">
     Let’s spice things up a bit,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.536.1">
      shall we?
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-106">
    <a id="_idTextAnchor108">
    </a>
    <span class="koboSpan" id="kobo.537.1">
     Creating the query filter class
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.538.1">
     We are now going to
    </span>
    <a id="_idIndexMarker217">
    </a>
    <span class="koboSpan" id="kobo.539.1">
     create a query filter that will override the way navigation modifiers are considered; we want the mud area to be considered less costly and easily traversable, but just for a single agent.
    </span>
    <span class="koboSpan" id="kobo.539.2">
     To do this, follow
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.540.1">
      these steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.541.1">
      Open
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.542.1">
       Content Drawer
      </span>
     </strong>
     <span class="koboSpan" id="kobo.543.1">
      and, in the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.544.1">
       Blueprints
      </span>
     </strong>
     <span class="koboSpan" id="kobo.545.1">
      folder, create a new Blueprint class of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.546.1">
       Navigation Query
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.547.1">
        Filter
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.548.1">
       type.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.549.1">
      Name the asset
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.550.1">
       NavFilter_MudWalker
      </span>
     </strong>
     <span class="koboSpan" id="kobo.551.1">
      and double-click on it to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.552.1">
       open it.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.553.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.554.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.555.1">
      panel, you will see an
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.556.1">
       Areas
      </span>
     </strong>
     <span class="koboSpan" id="kobo.557.1">
      array attribute; click on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.558.1">
       +
      </span>
     </strong>
     <span class="koboSpan" id="kobo.559.1">
      button to add
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.560.1">
       an element.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.561.1">
      Open the element and do
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.562.1">
       the following:
      </span>
     </span>
     <ul>
      <li>
       <span class="koboSpan" id="kobo.563.1">
        From the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.564.1">
         Area Class
        </span>
       </strong>
       <span class="koboSpan" id="kobo.565.1">
        dropdown menu,
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.566.1">
         select
        </span>
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.567.1">
          NavArea_Mud
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.568.1">
         .
        </span>
       </span>
      </li>
      <li>
       <span class="koboSpan" id="kobo.569.1">
        Check the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.570.1">
         Travel Cost Override
        </span>
       </strong>
       <span class="koboSpan" id="kobo.571.1">
        checkbox and set its value
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.572.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.573.1">
          1.0
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.574.1">
         .
        </span>
       </span>
      </li>
      <li>
       <span class="koboSpan" id="kobo.575.1">
        Check the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.576.1">
         Entering Cost Override
        </span>
       </strong>
       <span class="koboSpan" id="kobo.577.1">
        checkbox and set its value
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.578.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.579.1">
          0.0
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.580.1">
         .
        </span>
       </span>
      </li>
     </ul>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer079">
     <span class="koboSpan" id="kobo.581.1">
      <img alt="Figure 5.13 – Query filter settings" src="image/B31016_05_13.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.582.1">
     Figure 5.13 – Query filter settings
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.583.1">
     We are basically
    </span>
    <a id="_idIndexMarker218">
    </a>
    <span class="koboSpan" id="kobo.584.1">
     creating a different cost for the muddy area of our level – that is, where the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.585.1">
      NavArea_Mud
     </span>
    </strong>
    <span class="koboSpan" id="kobo.586.1">
     modifiers
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.587.1">
      are placed.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.588.1">
     We now need to modify the AI agent a bit, so it will accept this kind
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.589.1">
      of modifier.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-107">
    <a id="_idTextAnchor109">
    </a>
    <span class="koboSpan" id="kobo.590.1">
     Modifying the agent
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.591.1">
     We need to make a
    </span>
    <a id="_idIndexMarker219">
    </a>
    <span class="koboSpan" id="kobo.592.1">
     slight modification to the agent, so open the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.593.1">
      BP_NavMeshAgent
     </span>
    </strong>
    <span class="koboSpan" id="kobo.594.1">
     Blueprint class and do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.595.1">
      the following:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.596.1">
      From the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.597.1">
       Move to Actor
      </span>
     </strong>
     <span class="koboSpan" id="kobo.598.1">
      node, click and drag on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.599.1">
       Filter Class
      </span>
     </strong>
     <span class="koboSpan" id="kobo.600.1">
      incoming pin, and, once released, select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.601.1">
       Promote
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.602.1">
        to variable
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.603.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.604.1">
      Name the newly created variable
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.605.1">
       FilterClass
      </span>
     </strong>
     <span class="koboSpan" id="kobo.606.1">
      and make it
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.607.1">
       Instance Editable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.608.1">
      by checking the corresponding attribute in the
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.609.1">
        Details
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.610.1">
       panel.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.611.1">
      Compile the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.612.1">
       Blueprint
      </span>
     </strong>
     <span class="koboSpan" id="kobo.613.1">
      and double-check in the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.614.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.615.1">
      panel that
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.616.1">
       Default Value
      </span>
     </strong>
     <span class="koboSpan" id="kobo.617.1">
      is set
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.618.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.619.1">
        None
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.620.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.621.1">
     Whenever you tell the agent to move to a target point, it will use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.622.1">
      FilterClass
     </span>
    </strong>
    <span class="koboSpan" id="kobo.623.1">
     variable – if set to any value – to override the nav mesh
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.624.1">
      cost rules.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.625.1">
     Let’s test it out in action.
    </span>
    <span class="koboSpan" id="kobo.625.2">
     Open your gym and select the second agent; then, from the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.626.1">
      Details
     </span>
    </strong>
    <span class="koboSpan" id="kobo.627.1">
     panel, from the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.628.1">
      Filter Class
     </span>
    </strong>
    <span class="koboSpan" id="kobo.629.1">
     dropdown,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.630.1">
      select
     </span>
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.631.1">
       NavFilter_MudWalker
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.632.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.633.1">
     Test the gym and you will now notice the second agent go straight to the target point, moving through the mud.
    </span>
    <span class="koboSpan" id="kobo.633.2">
     This cheeky AI agent has gone rogue and decided to play dirty,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.634.1">
      hasn’t it?
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.635.1">
     In this section, you have discovered the ability to override the cost of a nav mesh, which grants you significant power in creating highly customizable AI characters.
    </span>
    <span class="koboSpan" id="kobo.635.2">
     With this newfound capability, you can make your AI characters behave distinctively and stand out from the rest of the crowd.
    </span>
    <span class="koboSpan" id="kobo.635.3">
     I am pretty confident you will understand that this opens up a world of possibilities for creating unique and dynamic
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.636.1">
      gameplay experiences.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.637.1">
     In the next section, I will show you another important technique in AI pathfinding, and that’s how to make your AI agents avoid
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.638.1">
      each other.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-108">
    <a id="_idTextAnchor110">
    </a>
    <span class="koboSpan" id="kobo.639.1">
     Implementing agent avoidance
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.640.1">
     It comes as no surprise that, most of the
    </span>
    <a id="_idIndexMarker220">
    </a>
    <span class="koboSpan" id="kobo.641.1">
     time, you will be working with more than a single agent in a level, and this means there will be a high probability that they will have crossing pathfinding rules; this means that your poor AI entities will be at a significant risk of colliding with each other.
    </span>
    <span class="koboSpan" id="kobo.641.2">
     As funny as it may be, I guess that’s not the intended behavior in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.642.1">
      your game.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.643.1">
     That’s why Unreal Engine provides an out-of-the-box – but disabled by default – avoidance system.
    </span>
    <span class="koboSpan" id="kobo.643.2">
     In this section, we are going to consider how to make AI agents avoid
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.644.1">
      each other.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.645.1">
     As always, we will start with a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.646.1">
      brand-new gym.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-109">
    <a id="_idTextAnchor111">
    </a>
    <span class="koboSpan" id="kobo.647.1">
     Creating the level
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.648.1">
     As a first step, we will need a gym
    </span>
    <a id="_idIndexMarker221">
    </a>
    <span class="koboSpan" id="kobo.649.1">
     with some obstacles around.
    </span>
    <span class="koboSpan" id="kobo.649.2">
     To get started, do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.650.1">
      the following:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.651.1">
      From the main menu, select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.652.1">
       File
      </span>
     </strong>
     <span class="koboSpan" id="kobo.653.1">
      |
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.654.1">
        New Level
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.655.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.656.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.657.1">
       Maps/LevelInstances
      </span>
     </strong>
     <span class="koboSpan" id="kobo.658.1">
      folder and drag an instance of
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.659.1">
       LI_Lighting
      </span>
     </strong>
     <span class="koboSpan" id="kobo.660.1">
      inside your level; set its transform
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.661.1">
       Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.662.1">
      value to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.663.1">
       (0,
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.664.1">
        0, 0)
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.665.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.666.1">
      Navigate to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.667.1">
       Maps/PackedLevelActors
      </span>
     </strong>
     <span class="koboSpan" id="kobo.668.1">
      folder and drag an instance of
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.669.1">
       PLA_Lab_05
      </span>
     </strong>
     <span class="koboSpan" id="kobo.670.1">
      inside your level; set its transform
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.671.1">
       Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.672.1">
      value to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.673.1">
       (0,
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.674.1">
        0, 0)
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.675.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.676.1">
      Save the level in the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.677.1">
       Maps
      </span>
     </strong>
     <span class="koboSpan" id="kobo.678.1">
      folder and name
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.679.1">
       it
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.680.1">
        Gym_NavMesh_06
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.681.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.682.1">
     This gym is slightly bigger
    </span>
    <a id="_idIndexMarker222">
    </a>
    <span class="koboSpan" id="kobo.683.1">
     than the previous ones and has some obstacles to make things more interesting.
    </span>
    <span class="koboSpan" id="kobo.683.2">
     Additionally, there are eight blue tiles – we’re going to use eight agents – as depicted in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.684.1">
       Figure 5
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.685.1">
       .14
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.686.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer080">
     <span class="koboSpan" id="kobo.687.1">
      <img alt="Figure 5.14 – The gym" src="image/B31016_05_14.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.688.1">
     Figure 5.14 – The gym
    </span>
   </p>
   <h2 id="_idParaDest-110">
    <a id="_idTextAnchor112">
    </a>
    <span class="koboSpan" id="kobo.689.1">
     Adding the agents
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.690.1">
     As previously mentioned, we are
    </span>
    <a id="_idIndexMarker223">
    </a>
    <span class="koboSpan" id="kobo.691.1">
     going to add several agents – eight in total – to check how they behave in a crowded environment.
    </span>
    <span class="koboSpan" id="kobo.691.2">
     So, follow
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.692.1">
      these steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.693.1">
      Add eight instances of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.694.1">
       BP_NavMeshAgent
      </span>
     </strong>
     <span class="koboSpan" id="kobo.695.1">
      Blueprint on the level and put each one in a blue tile in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.696.1">
       the level.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.697.1">
      Add eight instances of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.698.1">
       NS_Target
      </span>
     </strong>
     <span class="koboSpan" id="kobo.699.1">
      Niagara system and put them just behind each
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.700.1">
       blue tile.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.701.1">
      For each agent, set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.702.1">
       Target Actor
      </span>
     </strong>
     <span class="koboSpan" id="kobo.703.1">
      property value to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.704.1">
       NS_Target
      </span>
     </strong>
     <span class="koboSpan" id="kobo.705.1">
      Niagara system that is on the opposite side of the gym.
     </span>
     <span class="koboSpan" id="kobo.705.2">
      The level should now look like
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.706.1">
        Figure 5
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.707.1">
        .15
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.708.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer081">
     <span class="koboSpan" id="kobo.709.1">
      <img alt="Figure 5.15 – The finished gym" src="image/B31016_05_15.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.710.1">
     Figure 5.15 – The finished gym
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.711.1">
     If you try testing the
    </span>
    <a id="_idIndexMarker224">
    </a>
    <span class="koboSpan" id="kobo.712.1">
     gym, chances are that some of your agents will collide with some other agent moving in the opposite direction, as depicted in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.713.1">
       Figure 5
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.714.1">
       .16
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.715.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer082">
     <span class="koboSpan" id="kobo.716.1">
      <img alt="Figure 5.16 – Ouch, this hurts!" src="image/B31016_05_16.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.717.1">
     Figure 5.16 – Ouch, this hurts!
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.718.1">
     Luckily, our agents are geared up with safety helmets, unlike the characters in your game who might be cruising without any protection!
    </span>
    <span class="koboSpan" id="kobo.718.2">
     That’s why we are going to make the agents’ pathfinding
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.719.1">
      slightly cleverer.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-111">
    <a id="_idTextAnchor113">
    </a>
    <span class="koboSpan" id="kobo.720.1">
     Activating avoidance
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.721.1">
     Once you have
    </span>
    <a id="_idIndexMarker225">
    </a>
    <span class="koboSpan" id="kobo.722.1">
     opened the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.723.1">
      BP_NavMeshAgent
     </span>
    </strong>
    <span class="koboSpan" id="kobo.724.1">
     Blueprint, you are ready to enable the avoidance system.
    </span>
    <span class="koboSpan" id="kobo.724.2">
     To do this, follow
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.725.1">
      these steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.726.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.727.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.728.1">
      panel, locate the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.729.1">
       Character Movement: Avoidance
      </span>
     </strong>
     <span class="koboSpan" id="kobo.730.1">
      category and check the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.731.1">
       Use
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.732.1">
        RVOAvoidance
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.733.1">
       property.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.734.1">
      Set
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.735.1">
       Avoidance Consideration Radius
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.736.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.737.1">
        2000.0
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.738.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.739.1">
     As stated in
    </span>
    <a href="B31016_03.xhtml#_idTextAnchor058">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.740.1">
        Chapter 3
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.741.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.742.1">
      Presenting the Unreal Engine Navigation System
     </span>
    </em>
    <span class="koboSpan" id="kobo.743.1">
     , RVO refers to a feature that enables AI agents to avoid collisions with
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.744.1">
      each other.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.745.1">
     When the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.746.1">
      Use RVOAvoidance
     </span>
    </strong>
    <span class="koboSpan" id="kobo.747.1">
     property is enabled for a character or agent, it allows them to dynamically adjust their movement to avoid colliding with other agents in the environment.
    </span>
    <span class="koboSpan" id="kobo.747.2">
     The
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.748.1">
      Avoidance Consideration Radius
     </span>
    </strong>
    <span class="koboSpan" id="kobo.749.1">
     property is used to define the radius within which an agent considers other agents for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.750.1">
      collision avoidance.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.751.1">
     Testing the gym at this point will let you see the avoidance system at work; agents will avoid each other while reaching their
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.752.1">
      target point.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-112">
    <a id="_idTextAnchor114">
    </a>
    <span class="koboSpan" id="kobo.753.1">
     Testing a worst-case scenario
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.754.1">
     Let’s test something
    </span>
    <a id="_idIndexMarker226">
    </a>
    <span class="koboSpan" id="kobo.755.1">
     different; we will be creating a gym where spaces will be a bit more challenging for the agents.
    </span>
    <span class="koboSpan" id="kobo.755.2">
     The new gym will be a duplicate of the previous one.
    </span>
    <span class="koboSpan" id="kobo.755.3">
     Start by following
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.756.1">
      these steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.757.1">
      Duplicate the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.758.1">
       Gym_NavMesh_06
      </span>
     </strong>
     <span class="koboSpan" id="kobo.759.1">
      map and call
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.760.1">
       it
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.761.1">
        Gym_NavMesh_07
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.762.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.763.1">
      Add some obstacles that will create a narrow path, almost forcing the characters to follow a single, specific route.
     </span>
     <span class="koboSpan" id="kobo.763.2">
      My gym is shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.764.1">
        Figure 5
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.765.1">
        .17
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.766.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer083">
     <span class="koboSpan" id="kobo.767.1">
      <img alt="Figure 5.17 – Worst-case scenario" src="image/B31016_05_17.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.768.1">
     Figure 5.17 – Worst-case scenario
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.769.1">
     Test the game, and you will witness all the agents diligently making efforts to avoid colliding with one another.
    </span>
    <span class="koboSpan" id="kobo.769.2">
     You can make a countertest and uncheck the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.770.1">
      Use RVOAvoidance
     </span>
    </strong>
    <span class="koboSpan" id="kobo.771.1">
     property; you will notice that all the agents initially cluster together and collide with each
    </span>
    <a id="_idIndexMarker227">
    </a>
    <span class="koboSpan" id="kobo.772.1">
     other before eventually resolving their paths and reaching their respective
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.773.1">
      target points.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer084">
     <span class="koboSpan" id="kobo.774.1">
      <img alt="Figure 5.18 – Mass collision" src="image/B31016_05_18.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.775.1">
     Figure 5.18 – Mass collision
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.776.1">
     In this section, you have learned how to implement collision avoidance for agents moving on a nav mesh, ensuring that they can successfully navigate while actively avoiding collisions with
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.777.1">
      other agents.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-113">
    <a id="_idTextAnchor115">
    </a>
    <span class="koboSpan" id="kobo.778.1">
     Summary
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.779.1">
     In this chapter, we were introduced to some more advanced features of the Unreal Engine pathfinding system.
    </span>
    <span class="koboSpan" id="kobo.779.2">
     Firstly, we saw how to create a nav mesh that can be updated at runtime.
    </span>
    <span class="koboSpan" id="kobo.779.3">
     Next, we saw how you can override the way an agent interprets the cost of a nav mesh section.
    </span>
    <span class="koboSpan" id="kobo.779.4">
     Finally, we saw how to use the built-in avoidance system so that AI agents won’t collide with
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.780.1">
      each other.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.781.1">
     In the upcoming chapter, we will explore the final component of the pathfinding system: debugging and optimization techniques.
    </span>
    <span class="koboSpan" id="kobo.781.2">
     We will explore ways to identify and resolve any issues that may arise and optimize the system for improved performance.
    </span>
    <span class="koboSpan" id="kobo.781.3">
     Get ready for an exciting and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.782.1">
      informative session!
     </span>
    </span>
   </p>
  </div>
 </body></html>