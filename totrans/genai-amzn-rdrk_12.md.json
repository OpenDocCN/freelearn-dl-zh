["```py\n    {\n    ```", "```py\n    \"Version\": \"2012-10-17\",\n    ```", "```py\n    \"Statement\": [{\n    ```", "```py\n    \"Effect\": \"Allow\",\n    ```", "```py\n    \"Action\": [\"KMS:Decrypt\"],\n    ```", "```py\n    \"Resource\": [\"arn:aws:kms:region:account-id:key/key-id\"],\n    ```", "```py\n    \"Condition\": {\"StringEquals\": {\"kms:ViaService\": [\"s3.region.amazonaws.com\"]}}}]\n    ```", "```py\n    }\n    ```", "```py\n    {\n    ```", "```py\n        \"Version\": \"2012-10-17\",\n    ```", "```py\n        \"Id\": \"KMS Key Policy\",\n    ```", "```py\n        \"Statement\": [{\n    ```", "```py\n                \"Sid\": \"Permissions for custom model builders\",\n    ```", "```py\n                \"Effect\": \"Allow\",\n    ```", "```py\n                \"Principal\": {\"AWS\": \"arn:aws:iam::account-id:user/role\"},\n    ```", "```py\n                \"Action\": [\n    ```", "```py\n                    \"kms:Decrypt\",\n    ```", "```py\n                    \"kms:GenerateDataKey\",\n    ```", "```py\n                    \"kms:DescribeKey\",\n    ```", "```py\n                    \"kms:CreateGrant\"\n    ```", "```py\n                ],\n    ```", "```py\n                \"Resource\": \"*\"},\n    ```", "```py\n            {\n    ```", "```py\n                \"Sid\": \"Permissions for custom model users\",\n    ```", "```py\n                \"Effect\": \"Allow\",\n    ```", "```py\n                \"Principal\": {\"AWS\": \"arn:aws:iam::account-id:user/role\"},\n    ```", "```py\n                \"Action\": \"kms:Decrypt\",\n    ```", "```py\n                \"Resource\": \"*\"\n    ```", "```py\n            }\n    ```", "```py\n    }\n    ```", "```py\n    {\n    ```", "```py\n        \"Version\": \"2012-10-17\",\n    ```", "```py\n        \"Statement\": [{\n    ```", "```py\n                \"Sid\": \"Allow Bedrock to encrypt/decrypt the bedrock agent resources ,\n    ```", "```py\n                \"Effect\": \"Allow\",    \"Action\":[\"kms:GenerateDataKey\",\"kms:Decrypt\"],\n    ```", "```py\n                \"Resource\": \"arn:aws:kms:${region}:${account-id}:key/${key-id}\",\n    ```", "```py\n                \"Condition\": {\"StringEquals\": {\n    ```", "```py\n    \"kms:EncryptionContext:aws:bedrock:arn\": \"arn:aws:bedrock:${region}:${account-id}:agent/${agent-id}\"\n    ```", "```py\n                    }}}]\n    ```", "```py\n    }\n    ```", "```py\n{\n    \"Version\": \"2012-10-17\",\n    \"Statement\":\n    {\n        \"Sid\": \"DenyInference\",\n        \"Effect\": \"Deny\",\n        \"Action\": \"bedrock:InvokeModel\",\n        \"Resource\": \"arn:aws:bedrock:::foundation-model/<model-id>\"\n    }\n }\n```", "```py\n{\n     \"Version\": \"2012-10-17\",\n     \"Statement\": [\n          {\n               \"Sid\": \"Bedrock Invoke model\",\n               \"Effect\": \"Allow\",\n               \"Action\": \"bedrock:InvokeModel\",\n               \"Resource\": \"arn:aws:bedrock:us-east-1::foundation-model/amazon.titan-image-generator-v1\",\n               \"Condition\": {\n                    \"StringLike\": {\n                         \"aws:ResourceTag/Env\": \"Dev\"\n                    }\n               }\n          },\n          {\n               \"Sid\": \"List FMs\",\n               \"Effect\": \"Allow\",\n               \"Action\": \"bedrock:ListFoundationModels\",\n               \"Resource\": \"*\",\n               \"Condition\": {\n                    \"StringLike\": {\n                         \"aws:ResourceTag/Env\": \"Dev\"\n                    }\n               }\n          }\n     ]\n}\n```", "```py\n{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Principal\": {\n                \"Service\": \"bedrock.amazonaws.com\"\n            },\n            \"Action\": \"sts:AssumeRole\"\n        }\n    ]\n }\n```", "```py\n{\n   \"Version\": \"2012-10-17\",\n   \"Statement\": [\n      {\n         \"Principal\": \"*\",\n         \"Effect\": \"Allow\",\n         \"Action\": [\n            \"bedrock:InvokeModel\",\n            \"bedrock:InvokeModelWithResponseStream\"\n         ],\n         \"Resource\":\"*\"\n      }\n   ]\n}\n```", "```py\n%pip install boto3 botocore\n#import the main packages and libraries\nimport os\nimport boto3\nimport json\nimport botocore\nbedrock_runtime = boto3.client('bedrock-runtime') # Provide the desired region\nprompt = \"Can you tell me about the treatment for chronic condition?\"\nbody = json.dumps({\"inputText\": prompt,\n                   \"textGenerationConfig\":{\n                       \"maxTokenCount\":4096,\n                       \"stopSequences\":[],\n                       \"temperature\":0,\n                       \"topP\":1\n                   },\n                  })\nmodelId = 'amazon.titan-tg1-large' # change this to use a different version from the model provider\naccept = 'application/json'\ncontentType = 'application/json'\nresponse1 = bedrock_runtime.invoke_model(body=body,\n                                        modelId=modelId,\n                                        accept=accept,\n                                        contentType\n                                          =contentType,\n                                        trace=\"ENABLED\",\n                                        guardrailIdentifier\n                                          = 'vtfzfvd8ccoz',\n                                        guardrailVersion=\n                                          \"1\"\n                                        )\nresponse_g = json.loads(response1.get('body').read())\n#print(response_body.get('results')[0].get('outputText'))\n#output_body = json.loads(response1[\"body\"].read().decode())\naction = response_g[\"amazon-bedrock-guardrailAction\"]\nif action == \"INTERVENED\":\n    print(\"Guardrail Intervention: {}\".format(json.dumps(response_g[\"amazon-bedrock-trace\"][\"guardrail\"], indent=2)))\nprint(\"Guardrail action: {}\".format(response_g[\"amazon-bedrock-guardrailAction\"]))\nprint(\"Output text: {}\".format(response_g[\"results\"][0][\"outputText\"]))\n```", "```py\n{\n   \"amazon-bedrock-guardrailConfig\": {\n   \"streamProcessingMode\": \"ASYNCHRONOUS\"\n   }\n}\n```", "```py\n{\n        \"guardrailIdentifier\": \"Guardrail ID\",\n        \"guardrailVersion\": \"Guardrail version\",\n        \"trace\": \"enabled\"\n}\n```"]