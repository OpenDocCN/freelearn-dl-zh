<html><head></head><body>
		<div id="_idContainer040">
			<h1 id="_idParaDest-36"><em class="italic"><a id="_idTextAnchor039"/>Chapter <a id="_idTextAnchor040"/>3</em>: <a id="_idTextAnchor041"/>Diving into Core Nodes and Data in n8n</h1>
			<p>If you have ever been to a construction site just as they are starting to build a home, it can sometimes be challenging to envision what the final home will be like, and the future owners are probably very excited to get into the home and make it their own. If they had their way, they would probably skip this part of the home build and focus on all the details such as paint color, room layout, and furniture placement.</p>
			<p>But if all home builders were to do this, none of their homes would last very long. They would not have a proper foundation upon which to sit, and the frame of the home would quickly fail.</p>
			<p>The same thing can be said for learning to design computer programs. If a new developer does not learn the foundational parts and concepts of a programming system, then the application build goes very slowly and tends to be of poor quality. But unlike with a traditional computer programmer, it is not necessary to understand complex syntax or coding structure to become proficient at developing with a no-code solution.</p>
			<p>It is crucial to properly understand the core nodes and how data is structured in n8n. Without these foundational concepts, you will not get very far with n8n.</p>
			<p>This chapter covers the following topics:</p>
			<ul>
				<li>Introduction to the data structure in n8n</li>
				<li>Function node—Custom JavaScript in workflows</li>
				<li>The items array</li>
				<li>HTTP Request node—Talk to any <strong class="bold">application programming interface</strong> (<strong class="bold">API</strong>)</li>
				<li>Webhook node — Handling real-time events</li>
				<li>Working with arrays and <strong class="bold">JavaScript Object Notation</strong> (<strong class="bold">JSON</strong>) objects</li>
			</ul>
			<p>By the end of the chapter, you will have learned how to do the following:</p>
			<ul>
				<li>Use n8n's data structure to manipulate and transform data inside workflows</li>
				<li>Use JavaScript inside your low-code workflows to unlock custom functionalities</li>
				<li>Call <strong class="bold">REpresentational State Transfer</strong> (<strong class="bold">REST</strong>) APIs from inside your workflows using the <strong class="source-inline">HTTP Request</strong> node</li>
				<li>Handle real-time events using the <strong class="source-inline">Webhook</strong> node and trigger workflows based on this data</li>
				<li>Work with arrays and JSON objects inside n8n, understand when to use what kind of data format, and transform data inside the workflows</li>
			</ul>
			<h1 id="_idParaDest-37"><a id="_idTextAnchor042"/>Technical requirements</h1>
			<ul>
				<li>You should have installed n8n</li>
				<li>n8n should be running, and the Editor <strong class="bold">user interface</strong> (<strong class="bold">UI</strong>) is open</li>
				<li>You have access to the GitHub repository, which can be found here: <a href="https://github.com/PacktPublishing/Rapid-Product-Development-with-n8n">https://github.com/PacktPublishing/Rapid-Product-Development-with-n8n</a><a href="https://github.com/PacktPublishing/Enabling-Workflow-Automation-with-n8n "/></li>
			</ul>
			<h1 id="_idParaDest-38"><a id="_idTextAnchor043"/>Introduction to the data structure in n8n</h1>
			<p>I love traveling to<a id="_idIndexMarker087"/> different countries and experiencing life from a different perspective. Different cultures and customs fascinate me. </p>
			<p>But unfortunately, I often find myself running into trouble because I am only fluent in a single language. Without having a language in common, it is easy to misunderstand what someone else is trying to communicate to me.</p>
			<p>n8n also has its version of a language that it uses to communicate between nodes. This "language" is known as JSON and is a simple text format that is easy for both computers and humans to read. Using JSON, n8n can transfer both text and non-text (known as <strong class="bold">binary</strong>) information.</p>
			<p>The developers at n8n designed each node in the workflow to receive and output data in this specific JSON format. This standard data structure allows n8n to chain these nodes together in infinite workflow combinations to produce a wide variety of different solutions.</p>
			<p>It is essential to have a strong understanding of JSON in general and, specifically, how n8n uses JSON. This section talks about how JSON represents information and two different ways of grouping it—objects and arrays. We also delve into how n8n uses JSON to communicate inside a workflow and store the two main types of data inside a workflow—JSON and binary data.</p>
			<p>In the following code snippet, you will find a sample of JSON-formatted information. This example<a id="_idIndexMarker088"/> describes a 2021 red car with automatic transmission:</p>
			<p class="source-code">[</p>
			<p class="source-code">  {</p>
			<p class="source-code">    "vehicle": {</p>
			<p class="source-code">      "type": "car",</p>
			<p class="source-code">       "colour": "red",</p>
			<p class="source-code">       "year": 2021,</p>
			<p class="source-code">       "automatic": true</p>
			<p class="source-code">    }</p>
			<p class="source-code">  }</p>
			<p class="source-code">]</p>
			<h2 id="_idParaDest-39"><a id="_idTextAnchor044"/>JSON syntax</h2>
			<p>There are a<a id="_idIndexMarker089"/> few syntax <a id="_idIndexMarker090"/>items to cover, making it easier to understand these JSON files. These items can be broken<a id="_idIndexMarker091"/> down into the following categories:</p>
			<ul>
				<li><strong class="bold">Values</strong>—Data or information</li>
				<li><strong class="bold">Key-value pairs</strong>—Name of the information and the information itself</li>
				<li><strong class="bold">Objects</strong>—Groups of key-value pairs</li>
				<li><strong class="bold">Arrays</strong>—Groups of values</li>
			</ul>
			<p>We will be learning <a id="_idIndexMarker092"/>more about these in the following sections.</p>
			<h3>Values</h3>
			<p>A value is a<a id="_idIndexMarker093"/> piece of data represented in JSON. A value can be:</p>
			<ul>
				<li>A string (a series of alphanumeric symbols)</li>
				<li>A number (standard numeric value)</li>
				<li>A JSON object (see the <em class="italic">Objects</em> section)</li>
				<li>An array (see the <em class="italic">Arrays</em> section)</li>
				<li>A Boolean (<strong class="source-inline">true</strong> or <strong class="source-inline">false</strong> value)</li>
			</ul>
			<h3>Key-value pairs</h3>
			<p>The first piece<a id="_idIndexMarker094"/> of JSON information to understand is key-value pairs. These are made of a field name in double quotes and a value separated by a colon. </p>
			<p>For example, <strong class="source-inline">"fruit": "apple"</strong> is a key-value pair, with <strong class="source-inline">"fruit"</strong> being the key and <strong class="source-inline">"apple"</strong> being the value.</p>
			<p>You can reference a key in n8n to retrieve the value that is paired with it.</p>
			<h3>Objects</h3>
			<p>An object is a <a id="_idIndexMarker095"/>group of key-pair values enclosed within curly brackets and separated by a comma. For example, <strong class="source-inline">{"name": "Jill", "age": 27, "certified": true}</strong> is an object with three keys (<strong class="source-inline">name</strong>, <strong class="source-inline">age</strong>, and <strong class="source-inline">certified</strong>), and each key has a value (<strong class="source-inline">Jill</strong>, <strong class="source-inline">27</strong>, and <strong class="source-inline">true</strong>).</p>
			<p>Their key can reference values in the object.</p>
			<p>To take this a step further, let's imagine we have the following JSON object:</p>
			<p class="source-code">{"user1":</p>
			<p class="source-code">     {"name": "Jill", "age": 27, "certified": true},</p>
			<p class="source-code"> "user2":</p>
			<p class="source-code">     {"name": "James", "age": 43, "certified": false}</p>
			<p class="source-code">}</p>
			<p>In this <a id="_idIndexMarker096"/>example, <strong class="source-inline">user1.name</strong> would be <strong class="source-inline">Jill</strong> and <strong class="source-inline">user2.name</strong> would be <strong class="source-inline">James</strong>.</p>
			<h3>Arrays</h3>
			<p>An array is a group <a id="_idIndexMarker097"/>of values enclosed within square brackets and separated by a comma. For example, <strong class="source-inline">[ "zero", "one", "two" ]</strong> is an array with three values.</p>
			<p>Arrays are similar to objects, except they do not have keys, so their index references the values. </p>
			<p>An index is the position of a value in the array. The index value starts with zero (0) and increases by one for each portion in the array. In our example, these are the indexes of the array and their values:</p>
			<ul>
				<li><strong class="source-inline">0</strong>—<strong class="source-inline">"zero"</strong></li>
				<li>1—"one"</li>
				<li>2—"two"</li>
			</ul>
			<h2 id="_idParaDest-40"><a id="_idTextAnchor045"/>n8n JSON structure</h2>
			<p>The JSON<a id="_idIndexMarker098"/> that is passed between nodes in n8n is a<a id="_idIndexMarker099"/> particular structure. It is made up of an array of at least one object. </p>
			<p>That object has either one or two sub-objects inside it. The two object keys are <strong class="source-inline">json</strong> and <strong class="source-inline">binary</strong>.</p>
			<h3>The json object</h3>
			<p>The <strong class="source-inline">json</strong> object<a id="_idIndexMarker100"/> is a required <a id="_idIndexMarker101"/>object. Inside it is all of the JSON data that you will see as the result of a node execution.</p>
			<p>The contents of the <strong class="source-inline">json</strong> object are flexible and can be a mixture of other objects, arrays, and key-value pairs.</p>
			<p>For example, if you have a set note that sets the key <strong class="source-inline">colour</strong> to a <strong class="source-inline">red</strong> value, the node output will appear like this in JSON:</p>
			<p class="source-code">[ { "colour": "red" } ]</p>
			<p>But when this information is stored in the n8n JSON format, it is passed between nodes, looking like this:</p>
			<p class="source-code">[</p>
			<p class="source-code">  {</p>
			<p class="source-code">    "json": {</p>
			<p class="source-code">      "colour": "red"</p>
			<p class="source-code">    }</p>
			<p class="source-code">  }</p>
			<p class="source-code">]</p>
			<p>This way, the nodes understand that the information is meant to be for them and identify the information as test information. There is also an optional binary section to go along with the json section, and that will be covered a bit later.</p>
			<p>The following diagram illustrates the format in which data is passed between nodes. It represents the framework for the data:</p>
			<div>
				<div id="_idContainer030" class="IMG---Figure">
					<img src="image/Figure_3.01_B17493.jpg" alt="Figure 3.1 – n8n data structure&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 3.1 – n8n data structure</p>
			<p>The entire set of data that is passed between nodes is built into a JSON array. Inside that array, there are two JSON objects—one called <strong class="source-inline">JSON</strong> and another called <strong class="source-inline">Binary</strong>. The <strong class="source-inline">JSON</strong> object <a id="_idIndexMarker102"/>contains<a id="_idIndexMarker103"/> key-value pairs representing text data. Meanwhile, the <strong class="source-inline">Binary </strong>object contains binary information (think of this as a file). Along with the actual data of the <strong class="source-inline">Binary</strong> object, there is some metadata such as <strong class="source-inline">mimeType</strong> (this is the type of file the data contains), <strong class="source-inline">fileExtension</strong>, and <strong class="source-inline">fileName</strong>. </p>
			<h3>The binary object</h3>
			<p>The second <a id="_idIndexMarker104"/>object in<a id="_idIndexMarker105"/> the n8n JSON data structure is the <strong class="source-inline">binary</strong> object. The <strong class="source-inline">binary</strong> object is an optional component since not every JSON dataset contains a binary element. But when it is provided, this object contains information that generally represents a file in a filesystem.</p>
			<p>But if you are to include this object in your n8n JSON data, it has a particular structure. Inside the <strong class="source-inline">binary</strong> object is a key named whatever you wish (for our example, we will call it <strong class="source-inline">binaryKeyName</strong>). The value associated with this key is another object. This object is made up of up to four key-value pairs:</p>
			<ul>
				<li><strong class="source-inline">data</strong> (required)—Base64-encoded binary data or unique data ID reference</li>
				<li><strong class="source-inline">mimeType</strong> (optional)—The type of data stored in the <strong class="source-inline">data</strong> value based on standard mime types</li>
				<li><strong class="source-inline">fileExtension</strong> (optional)—The extension that the file representing the information in the <strong class="source-inline">data</strong> value has</li>
				<li><strong class="source-inline">fileName</strong> (optional)—The name of the file describing the data in the <strong class="source-inline">data</strong> value</li>
				<li><strong class="source-inline">path</strong> (optional) - The location of the file on the system</li>
			</ul>
			<p>When the <strong class="source-inline">binary</strong> object is set in the n8n JSON data, you will see an extra <strong class="bold">Binary</strong> tab at the top of the open node. It will contain the information that is in the <strong class="source-inline">binary</strong> object, as illustrated in the following screenshot: </p>
			<div>
				<div id="_idContainer031" class="IMG---Figure">
					<img src="image/Figure_3.02_B17493.jpg" alt="Figure 3.2 – Binary data in n8n Editor UI&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 3.2 – Binary data in n8n Editor UI</p>
			<p>In the next section, we are going to take a look at the <strong class="source-inline">Function</strong> node. It allows you to create custom code in JavaScript in case there is no node to perform the exact action you need. This is where understanding the n8n data structure becomes extremely important for <a id="_idIndexMarker106"/>manipulating <a id="_idIndexMarker107"/>information using JavaScript code.</p>
			<h1 id="_idParaDest-41"><a id="_idTextAnchor046"/>Function node – Custom JavaScript in workflows</h1>
			<p>Sometimes, the <a id="_idIndexMarker108"/>perfect n8n node for the action you want to complete simply doesn't exist. This makes sense because there are an infinite number of different actions that could take place. This is why n8n created the <strong class="source-inline">Function</strong> node: so that we would have a way of creating our own custom actions, and we are going to learn how to do that next. </p>
			<p>The <strong class="source-inline">Function</strong> node is the most versatile node in the n8n toolbox. It can execute JavaScript to manipulate data output from other nodes and then output it in the standard n8n data structure. You can see a screenshot representation of it here:</p>
			<div>
				<div id="_idContainer032" class="IMG---Figure">
					<img src="image/Figure_3.03_B17493.jpg" alt="Figure 3.3 – Function node&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 3.3 – Function node</p>
			<p>But the flexibility of the <strong class="source-inline">Function</strong> node does require you to be able to use some JavaScript. Unlike many other nodes with several options and parameters to pick and choose from, the <strong class="source-inline">Function</strong> node only has a single parameter—the JavaScript code field. It is in this field that you will do all of your work.</p>
			<p>The JavaScript code field contains, surprisingly, JavaScript. You will use this programming language to do all data manipulations within the <strong class="source-inline">Function</strong> node. While you don't need to be a JavaScript expert, there is some value in getting to know this language better. For what we will be talking about in this book, a basic understanding of JavaScript will suffice.</p>
			<p>The first time you open up the JavaScript code field in a new <strong class="source-inline">Function</strong> node, you will notice that there are<a id="_idIndexMarker109"/> already several lines of code: </p>
			<p class="source-code">// Code here will run only once, no matter how many input items there are.</p>
			<p class="source-code">// More info and help: https://docs.n8n.io/nodes/n8n-nodes-base.function</p>
			<p class="source-code">// Loop over inputs and add a new field called 'myNewField' to the JSON of each one</p>
			<p class="source-code">for (item of items) {</p>
			<p class="source-code">  item.json.myNewField = 1;</p>
			<p class="source-code">}</p>
			<p class="source-code">// You can write logs to the browser console</p>
			<p class="source-code">console.log('Done!');</p>
			<p class="source-code">return items;</p>
			<p>This gives you an excellent example of how the <strong class="source-inline">Function</strong> node works. This script assigns the value of <strong class="source-inline">1</strong> to the <strong class="source-inline">myNewField</strong> key in every item in the JSON object of the n8n data structure. It then writes to the web browser console that the action is done. Finally, it outputs the results.</p>
			<p>If you execute this <strong class="source-inline">Function</strong> node, you will get the following output as a result:</p>
			<p class="source-code">[</p>
			<p class="source-code">  {</p>
			<p class="source-code">    " myNewField": 1</p>
			<p class="source-code">  }</p>
			<p class="source-code">]</p>
			<p>So, just how did <a id="_idIndexMarker110"/>this work? It worked because of the <strong class="source-inline">items</strong> array, which we are going to be covering in the next section.</p>
			<h1 id="_idParaDest-42"><a id="_idTextAnchor047"/>The items array</h1>
			<p>The key to this <a id="_idIndexMarker111"/>code is the <strong class="source-inline">items</strong> array. This stores all of the information in the n8n data structure passed to the <strong class="source-inline">Function</strong> node from the previous node. The value in the square brackets represents the index of the JSON object in the <strong class="source-inline">items</strong> array with which you wish to work. </p>
			<p>The most basic <strong class="source-inline">items</strong> array only has a single object represented by the zero (0) index number, but it is possible to have several more objects in the <strong class="source-inline">items</strong> array, and you can access each of these objects using the array index number associated with that object.</p>
			<p>In the next sections, we are going to talk a bit about referencing different parts of the <strong class="source-inline">items</strong> array using dot notation, along with how to output the information once we have transformed it. Plus, we will also cover how to access data in different nodes other than the one that immediately preceded the node you are in. </p>
			<h2 id="_idParaDest-43"><a id="_idTextAnchor048"/>Dot notation</h2>
			<p>Once you have<a id="_idIndexMarker112"/> chosen the proper object within the <strong class="source-inline">items</strong> array by indicating its index number, you need to determine if you will work with the JSON or the binary object. You can do this by using what is referred to as <strong class="bold">dot notation</strong>. Dot <a id="_idIndexMarker113"/>notation allows you to work your way deeper into an array or object by distinguishing parent and child items with a dot or period (<strong class="source-inline">.</strong>). In <em class="italic">line 1</em> of our code, the dot between <strong class="source-inline">items[0]</strong> and <strong class="source-inline">json</strong> tells n8n to reference the <strong class="source-inline">json</strong> object in the <strong class="source-inline">items</strong> array with the <strong class="source-inline">0</strong> index.</p>
			<p>Most of the time, you will be working in the <strong class="source-inline">json</strong> object, but there are situations where you would use the <strong class="source-inline">binary</strong> object.</p>
			<p>To better understand the dot notation used to reference different parts of the <strong class="source-inline">items</strong> array, refer to the following table with the dot notation name on the left and the piece of the JSON it is referencing on the right:</p>
			<div>
				<div id="_idContainer033" class="IMG---Figure">
					<img src="image/Table_3.05_B17493.jpg" alt=""/>
				</div>
			</div>
			<h2 id="_idParaDest-44"><a id="_idTextAnchor049"/>Outputting data</h2>
			<p>As with functions in <a id="_idIndexMarker114"/>other programming languages, the <strong class="source-inline">Function</strong> node needs to indicate which information gets passed to the rest of the program. This is accomplished by the second line of code, which returns the newly updated <strong class="source-inline">items</strong> array to the next node.</p>
			<p>While it is a best practice to modify the value of the <strong class="source-inline">items</strong> array and pass it on to the next node, this is technically not required, and you can return any array that follows the proper n8n data <a id="_idIndexMarker115"/>structure. </p>
			<h2 id="_idParaDest-45"><a id="_idTextAnchor050"/>Data from other nodes (the $items method)</h2>
			<p>Sometimes, it is <a id="_idIndexMarker116"/>necessary to reference the output of a node <a id="_idIndexMarker117"/>that is not directly connected to the <strong class="source-inline">Function</strong> node that you are working with but has been executed before your node. In this instance, referencing the <strong class="source-inline">items</strong> array will not give you the correct information.</p>
			<p>To resolve this issue, you can use the <strong class="source-inline">$items</strong> method. This method allows you to access all of the data in a node as long as that node is before the present node you are working in and has already been executed.</p>
			<p>Let's take a look at this in action. Let's build the following workflow:</p>
			<div>
				<div id="_idContainer034" class="IMG---Figure">
					<img src="image/Figure_3.04_B17493.jpg" alt="Figure 3.4 – Basic workflow with three Function nodes&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 3.4 – Basic workflow with three Function nodes</p>
			<p>Since this is a default <strong class="source-inline">Function</strong> node, the output of the <strong class="source-inline">myFunction</strong> node is this:</p>
			<p class="source-code">[</p>
			<p class="source-code">  {</p>
			<p class="source-code">    "myVariable": 0</p>
			<p class="source-code">  },</p>
			<p class="source-code">  {</p>
			<p class="source-code">    "myVariable": 1</p>
			<p class="source-code">  }</p>
			<p class="source-code">]</p>
			<p>The <strong class="source-inline">Reset</strong> node then deletes everything that it receives and sets the output to empty, as indicated here:</p>
			<p class="source-code">[</p>
			<p class="source-code">  {</p>
			<p class="source-code">  }</p>
			<p class="source-code">]</p>
			<p>We set the JavaScript in the <strong class="source-inline">Function</strong> node to output the information from the previous node, as follows:</p>
			<p class="source-code">return items;</p>
			<p>As you will see, we end up with the same results as we have from the <strong class="source-inline">Reset</strong> node.</p>
			<p>Now, let's use the <strong class="source-inline">$items</strong> method to pull the data from the <strong class="source-inline">myFunction</strong> node, essentially skipping the <strong class="source-inline">Reset</strong> node. Change the JavaScript in the <strong class="source-inline">Function</strong> node to this:</p>
			<p class="source-code">items = $items("myFunction");</p>
			<p class="source-code">return items;</p>
			<p>When you run the workflow now, you will see that the output of the <strong class="source-inline">Function</strong> node matches the output of the <strong class="source-inline">myFunction</strong> node.</p>
			<p>As with the <strong class="source-inline">items</strong> array, you can specify which item in the <strong class="source-inline">$items</strong> method to reference by setting the index in square brackets. Along with using the array index, you can also use<a id="_idIndexMarker118"/> dot <a id="_idIndexMarker119"/>notation to reference deeper into the array and objects. For example, this is a perfectly acceptable way of accessing specific information from a node:</p>
			<p class="source-code">items[0].json = $items("myFunction")[1].json;</p>
			<h2 id="_idParaDest-46"><a id="_idTextAnchor051"/>Manipulating data</h2>
			<p>Because the <strong class="source-inline">Function</strong> node <a id="_idIndexMarker120"/>uses JavaScript, you have all of the power of JavaScript at your disposal for manipulating data. A deep dive into JavaScript and its capabilities is outside of the scope of this book, but there are some useful commands that we have put together to give you a head start.</p>
			<h3>Strings</h3>
			<p>For these<a id="_idIndexMarker121"/> examples, we will assume that we have a variable called <strong class="source-inline">fullName</strong>, and the value assigned to it is <strong class="source-inline">Jim Nasium</strong>. Have a look at the following table:</p>
			<div>
				<div id="_idContainer035" class="IMG---Figure">
					<img src="image/Table_3.01_B17493.jpg" alt=""/>
				</div>
			</div>
			<h3>Mathematics</h3>
			<p>JavaScript also<a id="_idIndexMarker122"/> has potent mathematical abilities. Here are some practical examples:</p>
			<div>
				<div id="_idContainer036" class="IMG---Figure">
					<img src="image/Table_3.02_B17493.jpg" alt=""/>
				</div>
			</div>
			<p>As you should now realize, the <strong class="source-inline">Function</strong> node is extremely powerful. We have learned how to reference data both inside the node and from other nodes, manipulate both strings and numbers, and output the data so that it can be used by other nodes.</p>
			<p>Now that we have a better understanding of the power of the <strong class="source-inline">Function</strong> node and some ideas of <a id="_idIndexMarker123"/>what can be done with the data, let's look at getting some data from remote systems via their API using the <strong class="source-inline">HTTP Request</strong> node.</p>
			<h1 id="_idParaDest-47"><a id="_idTextAnchor052"/>HTTP Request node – Talk to any API</h1>
			<p>Computer systems <a id="_idIndexMarker124"/>are fantastic for storing and processing massive amounts of data, but computer users and developers very quickly discovered that there was no actual standard for allowing these computers to share information.</p>
			<p>Someone had the bright idea to use the new web standard to create a way for these systems to communicate. They would use standard request methods to retrieve, add, delete, or update information on remote computers. Along with these functions, they would even provide the ability to secure these connections using various methods to ensure only authorized individuals could get to the data.</p>
			<p>This system setup is collectively referred to as a web API, which is one of the most popular ways of working with remote data today. There are thousands of different APIs available, providing access to an extensive range of data and information.</p>
			<p>Since one of the primary functions of n8n is to connect different systems to share data, it only makes sense to talk to these web APIs. </p>
			<p>In this section, we are going to learn how APIs work, how they are formatted, ways that data can be passed through APIs, and primary methods supported by APIs, along with the response codes that they return. Finally, we will perform some basic API calls, as well as look at <a id="_idIndexMarker125"/>how to secure these calls.</p>
			<h2 id="_idParaDest-48"><a id="_idTextAnchor053"/>Web API 101</h2>
			<p>Before we look <a id="_idIndexMarker126"/>at the <strong class="source-inline">HTTP Request</strong> node, let's first do a<a id="_idIndexMarker127"/> quick overview of how APIs work to better understand how they allow systems to interact with them.</p>
			<p>Web APIs run on the same technology as most of the websites on the internet, but instead of dishing up your favorite web pages or cat videos, web servers configured to run APIs allow remote systems to make a request and then reply to the request with data based on the input received earlier. The data that is sent between the systems is often formatted in JSON.</p>
			<p>To see the most basic API in action, let's take a look at the Random User API. Open up your web browser, and in the address bar, enter <a href="https://randomuser.me/api/">https://randomuser.me/api/</a>. When you press the <em class="italic">Enter</em> key, you will see a bunch of text similar to this:</p>
			<p class="source-code">{"results":[{"gender":"female","name":{"title":"Miss","first":"Hanna","last":"Farias"},"location":{"street":{"number":4304,"name":"Rua São Paulo "},"city":"São Luís","state":"Piauí","country":"Brazil","postcode":35435,"coordinates":{"latitude":"-77.5289","longitude":"3.6948"},"timezone":{"offset":"-11:00","description":"Midway Island, Samoa"}},"email":"hanna.farias@example.com","login":{"uuid":"66406cea-46a3-47c4-a9aa-0717ab96ae41","username":"redbear531","password":"onlyme","salt":"xOlBVsMM","md5":"e5aaa5fa1141ced7a3d0b83edbd76ef5","sha1":"cacfc3f023c50af7c9da3a1bafdd5cd653663eab","sha256":"91e134083ebaf9a721a3f7890be3a186b56a0dde8e406f37abf4b68cb41e91a0"},"dob":{"date":"1951-02-27T05:42:48.601Z","age":70},"registered":{"date":"2010-05-19T04:21:25.465Z","age":11},"phone":"(65) 4693-1327","cell":"(81) 4446-9285","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/women/64.jpg","medium":"https://randomuser.me/api/portraits/med/women/64.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/64.jpg","medium":"https://randomuser.me/api/portraits/med/women/64.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/64.jpg"},"nat":"BR"}],"info":{"seed":"3e10360b4732e141","results":1,"page":1,"version":"1.3"}}</p>
			<p>While this may look like a lot of gibberish, you will see a few characters that look familiar from our <strong class="source-inline">Function</strong> node chapter if you look closely. What we've come across is <a id="_idIndexMarker128"/>compressed <a id="_idIndexMarker129"/>or unformatted JSON!</p>
			<h2 id="_idParaDest-49"><a id="_idTextAnchor054"/>Anatomy of an API URL</h2>
			<p>To access an API, one<a id="_idIndexMarker130"/> of the essential items you <a id="_idIndexMarker131"/>will need is a <strong class="bold">Uniform Resource Locator</strong> (<strong class="bold">URL</strong>). It is vital to understand the <a id="_idIndexMarker132"/>different parts of a URL because you or your system will often be required to build the URL yourself so that you can work with your desired information.</p>
			<p>Let's look at a fictional API URL, dissect the different parts of the URL, and determine their purpose. For this exercise, we are going to use the following URL: <a href="https://api.example.com/v3/computers?type=laptop&amp;ram=32&amp;hdd=1024">https://api.example.com/v3/computers?type=laptop&amp;ram=32&amp;hdd=1024</a></p>
			<p>The parts of the API URL are explained in the following sections.</p>
			<h3>Protocol</h3>
			<p>In our example, this<a id="_idIndexMarker133"/> is the https:// portion of the URL. This will generally be either http:// or https://. This is important because if the protocol is http://, the data is not encrypted between the API server and the client. Anyone can see what information is passing between these two computers, including passwords.</p>
			<p>Always make sure that the protocol is https://.</p>
			<h3>Base URL</h3>
			<p>The base <a id="_idIndexMarker134"/>URL in<a id="_idIndexMarker135"/> our <a id="_idIndexMarker136"/>example is <a href="http://api.example.com">api.example.com</a>. It is <a id="_idIndexMarker137"/>sometimes referred to as the <strong class="bold">hostname</strong>, <strong class="bold">domain name</strong>, or <strong class="bold">Domain Name System (DNS) name</strong>. These all refer to the same thing. The base URL is generally the server that<a id="_idIndexMarker138"/> is hosting the API.</p>
			<h3>Endpoint</h3>
			<p>For our example, the<a id="_idIndexMarker139"/> endpoint is /v3/computers. It is sometimes referred to as the API path. The endpoint is either static (that is, it stays the same) or dynamic (that is, it changes based on the information that is being requested). While there is no absolute standard for how endpoints are used, there are some common practices. </p>
			<p>From our example, the /v3 portion tells us that this is version 3 of the API, and the /computers portion tells us that we can expect one or more records to be returned by this endpoint.</p>
			<h3>Query parameters</h3>
			<p>The example<a id="_idIndexMarker140"/> has three query parameters—<strong class="source-inline">type=laptop</strong>, <strong class="source-inline">ram=32</strong>, and <strong class="source-inline">hdd=1024</strong>. Two delimiters identify the query parameters. The <strong class="source-inline">?</strong> delimiter separates the query parameters from the rest of the URL, and the <strong class="source-inline">&amp;</strong> delimiter separates each query parameter.</p>
			<p>Much as with JSON key-value pairs, the key is the portion before the equals sign (<strong class="source-inline">=</strong>), and the value is the portion after the equals sign (<strong class="source-inline">=</strong>).</p>
			<h2 id="_idParaDest-50"><a id="_idTextAnchor055"/>Other parameters</h2>
			<p>While using <a id="_idIndexMarker141"/>specific endpoints and query parameters are the most common ways of controlling the type of information that is passed between the API client and server, other parameters can further modify the information flow.</p>
			<h3>Headers</h3>
			<p>Headers are<a id="_idIndexMarker142"/> typically used to provide metadata about the API request. They often give information on the type of data being transmitted, security tokens, or server information.</p>
			<p>These are generally transmitted in a key-value pair.</p>
			<h3>Body parameters</h3>
			<p>The body of a<a id="_idIndexMarker143"/> request typically carries information or data required to complete the request or is supplied by the server based on the request made by the client.</p>
			<p>This information is generally sent in a key-value pair.</p>
			<h2 id="_idParaDest-51"><a id="_idTextAnchor056"/>HTTP methods</h2>
			<p>There are different<a id="_idIndexMarker144"/> ways of interacting with APIs, each producing a different result on the server hosting the API and the client requesting the action. These are referred to as <strong class="bold">methods</strong> and can be thought of as action verbs that allow the system to know how to deal with the request. The next sections provide a brief overview of each method and its general use.</p>
			<h3>GET</h3>
			<p><strong class="source-inline">GET</strong> is the <a id="_idIndexMarker145"/>most common method. It is used every<a id="_idIndexMarker146"/> time you use a web browser to retrieve information from a web server.</p>
			<p><strong class="source-inline">GET</strong> is typically used for retrieving data from an API.</p>
			<h3>POST</h3>
			<p>The <strong class="source-inline">POST</strong> method is <a id="_idIndexMarker147"/>the other most commonly <a id="_idIndexMarker148"/>used method. Web browsers will often use this method to submit information from a web form.</p>
			<p><strong class="source-inline">POST</strong> is generally used for submitting information to an API that is then stored by the API as a new record.</p>
			<h3>DELETE</h3>
			<p>The <strong class="source-inline">DELETE</strong> method <a id="_idIndexMarker149"/>is usually used to delete a<a id="_idIndexMarker150"/> resource or record on the API's remote server.</p>
			<h3>HEAD</h3>
			<p>The <strong class="source-inline">HEAD</strong> method <a id="_idIndexMarker151"/>works <a id="_idIndexMarker152"/>very much like the <strong class="source-inline">GET</strong> method, except that the API only returns header information and no other data.</p>
			<h3>PATCH</h3>
			<p>Patching a<a id="_idIndexMarker153"/> resource <a id="_idIndexMarker154"/>allows you to change only part of the information in the record, leaving everything else the same as it was before.</p>
			<h3>PUT</h3>
			<p><strong class="source-inline">PUT</strong> is similar<a id="_idIndexMarker155"/> to the <strong class="source-inline">POST</strong> method in that it creates <a id="_idIndexMarker156"/>a new record on the API server if no record exists. But if the information being put to the API has a matching record, this record will be overwritten and replaced by the new information.</p>
			<h2 id="_idParaDest-52"><a id="_idTextAnchor057"/>Response codes</h2>
			<p>When a request<a id="_idIndexMarker157"/> is made to an API server and the data and metadata is returned to the client, there is also a response code. While diving deep into what each response code means and how you can use them for detailed troubleshooting is beyond the scope of this book, it is essential to know each classification of response code and what they represent.</p>
			<h3>1xx (informational)</h3>
			<p>The request<a id="_idIndexMarker158"/> was received by the server and is still being processed. Please wait for it to finish.</p>
			<h3>2xx (success)</h3>
			<p>Everything <a id="_idIndexMarker159"/>worked as expected, more or less. </p>
			<h3>3xx (redirection)</h3>
			<p>The API is no longer <a id="_idIndexMarker160"/>at the location you requested. Check the error message to get a better idea of the new API location.</p>
			<h3>4xx (client error)</h3>
			<p>Something is <a id="_idIndexMarker161"/>wrong with how you formed the API request. Check the error message and then update the request.</p>
			<h3>5xx (server error)</h3>
			<p>There's a problem<a id="_idIndexMarker162"/> with the server, and generally, there is little that you can do to resolve the issue. If you have the contact information for the person/team managing the API server, you could report the error to them and see if they can assist.</p>
			<p>Now that we understand what APIs are about, let's start using n8n's <strong class="source-inline">HTTP Request</strong> node to connect to a few APIs.</p>
			<h2 id="_idParaDest-53"><a id="_idTextAnchor058"/>Basic API call</h2>
			<p>Let's start with <a id="_idIndexMarker163"/>a simple API call. Let's get information from GitHub about the n8n project.</p>
			<p>Add a new <strong class="source-inline">HTTP Request</strong> node to the canvas in the n8n Editor UI and open the node. Please leave all of the parameters at their defaults, except for the <strong class="source-inline">URL</strong> value. Set the <strong class="source-inline">URL</strong> value to https://api.github.com/users/n8n-io/.</p>
			<p>And that's it! We are now ready to retrieve the data from the server via the API! Click on <strong class="bold">Execute Node</strong> to perform the API request. You should get a response that looks something like this:</p>
			<p class="source-code">[</p>
			<p class="source-code">  {</p>
			<p class="source-code">     "login": "n8n-io",</p>
			<p class="source-code">     "id": 45487711,</p>
			<p class="source-code">     "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1NDg3NzEx",</p>
			<p class="source-code">     "avatar_url": "https://avatars.</p>
			<p class="source-code">       githubusercontent.com/u/45487711?v=4",</p>
			<p class="source-code">     "gravatar_id": "",</p>
			<p class="source-code">     "url": "https://api.github.com/users/n8n-io",</p>
			<p class="source-code">     "html_url": "https://github.com/n8n-io",</p>
			<p class="source-code">     "followers_url": "https://api.github.com/users/n8n-</p>
			<p class="source-code">       io/followers",</p>
			<p class="source-code">     "following_url": "https://api.github.com/users/n8n-</p>
			<p class="source-code">       io/following{/other_user}",</p>
			<p class="source-code">     "gists_url": "https://api.github.com/users/n8n-</p>
			<p class="source-code">       io/gists{/gist_id}",</p>
			<p class="source-code">     "starred_url": "https://api.github.com/users/n8n-</p>
			<p class="source-code">       io/starred{/owner}{/repo}",</p>
			<p class="source-code">     "subscriptions_url": "https://api.github.com/</p>
			<p class="source-code">       users/n8n-io/subscriptions",</p>
			<p class="source-code">     "organizations_url": "https://api.github.com/</p>
			<p class="source-code">       users/n8n-io/orgs",</p>
			<p class="source-code">     "repos_url": "https://api.github.com/users/n8n-</p>
			<p class="source-code">       io/repos",</p>
			<p class="source-code">     "events_url": "https://api.github.com/users/n8n-</p>
			<p class="source-code">       io/events{/privacy}",</p>
			<p class="source-code">     "received_events_url": "https://api.github.com/</p>
			<p class="source-code">       users/n8n-io/received_events",</p>
			<p class="source-code">     "type": "Organization",</p>
			<p class="source-code">     "site_admin": false,</p>
			<p class="source-code">     "name": "n8n - Workflow Automation",</p>
			<p class="source-code">     "company": null,</p>
			<p class="source-code">     "blog": "https://n8n.io",</p>
			<p class="source-code">     "location": "Berlin, Germany",</p>
			<p class="source-code">     "email": "hello@n8n.io",</p>
			<p class="source-code">     "hireable": null,</p>
			<p class="source-code">     "bio": "Free and open fair-code licensed node based </p>
			<p class="source-code">       Workflow Automation Tool.",</p>
			<p class="source-code">     "twitter_username": "n8n_io",</p>
			<p class="source-code">     "public_repos": 12,</p>
			<p class="source-code">     "public_gists": 0,</p>
			<p class="source-code">     "followers": 0,</p>
			<p class="source-code">     "following": 0,</p>
			<p class="source-code">     "created_at": "2018-11-30T12:19:59Z",</p>
			<p class="source-code">     "updated_at": "2022-01-07T17:49:22Z"  }</p>
			<p class="source-code">]</p>
			<p>You can now connect other nodes to the output of the <strong class="source-inline">HTTP Request</strong> node and process the <a id="_idIndexMarker164"/>information however you wish, or send it to another system.</p>
			<h2 id="_idParaDest-54"><a id="_idTextAnchor059"/>Using basic authentication</h2>
			<p>Now, let's try<a id="_idIndexMarker165"/> something a bit more complicated. We're <a id="_idIndexMarker166"/>going to look up <strong class="bold">Universal Product Code</strong> (<strong class="bold">UPC</strong>) values at <em class="italic">UPC Database</em>. Follow these instructions to set up the user account, get a token for API authentication, and configure a new <strong class="source-inline">HTTP Request</strong> node to query the API:</p>
			<ol>
				<li>Browse to <a href="https://upcdatabase.org/signup">https://upcdatabase.org/signup</a> and create an account.</li>
				<li>Once you have your account created, go to <a href="https://upcdatabase.org/apikeys">https://upcdatabase.org/apikeys</a> and copy the token on that page. If there is no token on the page, create a new token and then copy it.</li>
				<li>In the n8n Editor UI, add a new <strong class="source-inline">HTTP Request</strong> node to the canvas.</li>
				<li>For the <strong class="bold">Authentication</strong> parameter, select <strong class="bold">Basic Auth</strong>.</li>
				<li>Next, click <strong class="bold">Create New</strong> to open up a new credential window for the <strong class="bold">Basic Auth</strong> parameter.</li>
				<li>Enter in a value for <strong class="bold">Credentials Name</strong> (for example, <strong class="source-inline">UPC</strong>), enter your email address in the <strong class="bold">User</strong> field, and paste your token into the <strong class="bold">Password</strong> field.</li>
				<li>Click on the <strong class="bold">Create</strong> button. This will save the credentials and return you to the <strong class="source-inline">HTTP Request</strong> node. Notice that the <strong class="bold">Basic Auth</strong> parameter now has the name of the credentials that you just created.</li>
				<li>In the URL parameter field, enter <a href="https://api.upcdatabase.org/product/765756931182">https://api.upcdatabase.org/product/765756931182</a>.</li>
				<li>Your <strong class="source-inline">HTTP Request</strong> node should be ready to go. Hit <strong class="bold">Execute Node</strong> and check out your <a id="_idIndexMarker167"/>results. They should look something like this:</li>
			</ol>
			<p class="source-code">[</p>
			<p class="source-code">  {</p>
			<p class="source-code">    "added_time": "2020-04-03 00:28:03",</p>
			<p class="source-code">    "modified_time": "2020-04-03 00:28:03",</p>
			<p class="source-code">    "title": "Raspberry Pi 4 4GB model - New 2019 4GB Ram",</p>
			<p class="source-code">    "alias": "",</p>
			<p class="source-code">    "description": "",</p>
			<p class="source-code">    "brand": "Raspberry Pi",</p>
			<p class="source-code">    "manufacturer": "",</p>
			<p class="source-code">    "mpn": "",</p>
			<p class="source-code">    "msrp": "64.99",</p>
			<p class="source-code">    "ASIN": "",</p>
			<p class="source-code">    "category": "",</p>
			<p class="source-code">    "metadata": {</p>
			<p class="source-code">      "age": null,</p>
			<p class="source-code">      "size": null,</p>
			<p class="source-code">      "color": null,</p>
			<p class="source-code">      "gender": null</p>
			<p class="source-code">    },</p>
			<p class="source-code">    "stores": null,</p>
			<p class="source-code">    "barcode": "765756931182",</p>
			<p class="source-code">    "success": true,</p>
			<p class="source-code">    "timestamp": 1620901566,</p>
			<p class="source-code">    "images": null</p>
			<p class="source-code">  }</p>
			<p class="source-code">]</p>
			<p>Try changing the number at the end of the URL and replace it with other UPCs you have around your home, and see what information you can find out about the products.</p>
			<p>In this section, we covered the basics of APIs including the parts that make up an API, how information is <a id="_idIndexMarker168"/>transmitted using APIs, the different <strong class="bold">HyperText Transfer Protocol</strong> (<strong class="bold">HTTP</strong>) methods, and their corresponding response codes. We then made both basic and secured API calls.</p>
			<p>Now that we <a id="_idIndexMarker169"/>better understand APIs, let's move away from retrieving information that we request from other servers and take a look at receiving information that is pushed to n8n.</p>
			<h1 id="_idParaDest-55"><a id="_idTextAnchor060"/>Webhook node – Handling real-time events</h1>
			<p>You can think<a id="_idIndexMarker170"/> of Webhooks <a id="_idIndexMarker171"/>as the cousin of APIs. In fact, you can create an API server using the <strong class="source-inline">Webhook</strong> node!</p>
			<p>A Webhook listens for <strong class="source-inline">GET</strong>, <strong class="source-inline">HEAD</strong>, or <strong class="source-inline">POST</strong> requests and then starts a workflow when it detects one. The <strong class="source-inline">Webhook</strong> node can do this because it is a trigger node. </p>
			<p>In this section, we are going to learn how to create a Webhook using n8n. As part of this build, we will learn how to send information to the Webhook and how to respond back with the requested information.</p>
			<h2 id="_idParaDest-56"><a id="_idTextAnchor061"/>Creating a basic test Webhook</h2>
			<p>To build a <a id="_idIndexMarker172"/>basic Webhook, follow these instructions:</p>
			<ol>
				<li value="1">Add a <strong class="source-inline">Webhook</strong> node to the n8n Editor UI canvas and open the node.</li>
				<li>Leave all of the parameter values at their defaults.</li>
				<li>Expand the <strong class="bold">Webhook URLs</strong> section by clicking on the <strong class="bold">Webhook URLs</strong> text.</li>
				<li>Click on the <strong class="bold">Test URL</strong> toggle under the <strong class="bold">Display URL for</strong> section.</li>
				<li>Click on the URL to copy it to your clipboard (for example, <a href="https://tephlon.app.n8n.cloud/webhook-test/373227bb-5fda-49e9-b491-54ef33db3eed">https://tephlon.app.n8n.cloud/webhook-test/373227bb-5fda-49e9-b491-54ef33db3eed</a>).</li>
				<li>Close the <strong class="source-inline">Webhook</strong> node.</li>
				<li>Save the workflow. This is important because the Webhook URL can't register until the workflow is saved.</li>
			</ol>
			<p>That's it! You've just created your first basic Webhook!</p>
			<p>Now, let's test it to see if it is working! Follow these steps:</p>
			<ol>
				<li value="1">In the n8n Editor UI, open up the <strong class="source-inline">Webhook</strong> node.</li>
				<li>Click on the <strong class="bold">Execute Node</strong> button to start the Webhook listening.</li>
				<li>Open up a new web browser, paste the Webhook URL you copied earlier into the address bar, and press <em class="italic">Enter</em>.</li>
			</ol>
			<p>If everything is working correctly, you should see two things happen, as follows:</p>
			<ol>
				<li value="1">In the web browser window, you should get the following message:<p class="source-code">{"message":"Workflow got started."}</p></li>
				<li>In the n8n Editor UI, you should receive a bunch of information in the <strong class="source-inline">Webhook</strong> node output<a id="_idIndexMarker173"/> window, similar to this:<p class="source-code">[</p><p class="source-code">  {</p><p class="source-code">    "headers": {</p><p class="source-code">      "host": "tephlon.app.n8n.cloud",</p><p class="source-code">      "x-request-id": </p><p class="source-code">        "30d32a403776b5bbce58ce0ef8a4c245",</p><p class="source-code">      "x-real-ip": "10.40.0.4",</p><p class="source-code">      "x-forwarded-for": "10.40.0.4",</p><p class="source-code">      "x-forwarded-host": "tephlon.app.n8n.cloud",</p><p class="source-code">      "x-forwarded-port": "443",</p><p class="source-code">      "x-forwarded-proto": "https",</p><p class="source-code">      "x-scheme": "https",</p><p class="source-code">      "sec-ch-ua-mobile": "?0",</p><p class="source-code">      "dnt": "1",</p><p class="source-code">      "upgrade-insecure-requests": "1",</p><p class="source-code">      "user-agent": "Mozilla/5.0 (Windows NT 10.0; </p><p class="source-code">        Win64; x64) AppleWebKit/537.36 (KHTML, like </p><p class="source-code">        Gecko) Chrome/90.0.4430.212 Safari/537.36",</p><p class="source-code">      "accept": "text/html,application/xhtml+xml,</p><p class="source-code">        application/xml;q=0.9,image/avif,image/</p><p class="source-code">        webp,image/apng,*/*;q=0.8,application/signed-</p><p class="source-code">        exchange;v=b3;q=0.9",</p><p class="source-code">      "sec-fetch-site": "none",</p><p class="source-code">      "sec-fetch-mode": "navigate",</p><p class="source-code">      "sec-fetch-user": "?1",</p><p class="source-code">      "sec-fetch-dest": "document",</p><p class="source-code">      "accept-encoding": "gzip, deflate, br",</p><p class="source-code">      "accept-language": "en-CA,en-GB;q=0.9,en-</p><p class="source-code">        US;q=0.8,en;q=0.7",</p><p class="source-code">      "cookie": </p><p class="source-code">        "token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.</p><p class="source-code">         eyJpc3MiOiJjbG91ZCIsInN1YiI6NDAzMSwi</p><p class="source-code">         dXNlcm5hbWUiOiJ0ZXBobG9uIiwiaWF0IjoxNj</p><p class="source-code">         IwODIwMDYzLCJleHAiOjE2MjE0MjQ4NjN9.</p><p class="source-code">         Q77PkeKY6OUbSJI5Ms56lWvTg8jqSvNOKCp325kTjKo"</p><p class="source-code">    },</p><p class="source-code">    "params": {},</p><p class="source-code">    "query": {},</p><p class="source-code">    "body": {}</p><p class="source-code">  }</p><p class="source-code">]</p></li>
			</ol>
			<p>This is all of the information that has been sent to n8n from the web browser. While there is some <a id="_idIndexMarker174"/>interesting data here, there isn't anything helpful at this time.</p>
			<h2 id="_idParaDest-57"><a id="_idTextAnchor062"/>Sending information to n8n</h2>
			<p>Since we have<a id="_idIndexMarker175"/> a basic Webhook running, let's see <a id="_idIndexMarker176"/>what happens when we send some information to it as a query in the URL. Follow these steps:</p>
			<ol>
				<li value="1">In the n8n Editor UI, open up the <strong class="source-inline">Webhook</strong> node and press the <strong class="bold">Execute Node</strong> button.</li>
				<li>In the web browser window that you used previously, paste the Webhook URL into the address bar, but before you press <em class="italic">Enter</em>, add <strong class="source-inline">?fname=Jim&amp;lname=Nasium</strong> to the end of the URL. Then, press <em class="italic">Enter</em>. </li>
			</ol>
			<p>Everything looks the same in the web browser, but let's look closely at the <strong class="source-inline">query</strong> section in the <strong class="source-inline">Webhook</strong> node output window, which you can see here:</p>
			<p class="source-code">"query": {</p>
			<p class="source-code">  "fname": "Jim",</p>
			<p class="source-code">  "lname": "Nasium"</p>
			<p class="source-code">},</p>
			<p>These values match the values entered at the end of the URL that was entered into the web browser. You can now use this information received from the client in the rest of your workflow.</p>
			<h2 id="_idParaDest-58"><a id="_idTextAnchor063"/>Responding to the client</h2>
			<p>Now that we <a id="_idIndexMarker177"/>know we can receive information from the client, let's send a confirmation message to the sender! Follow these steps:</p>
			<ol>
				<li value="1">In the <strong class="source-inline">Webhook</strong> node, change <strong class="source-inline">Response Mode</strong> to <strong class="source-inline">Last Node</strong>.</li>
				<li>Under the <strong class="bold">Options</strong> section of the <strong class="source-inline">Webhook</strong> node, add a <strong class="bold">Property Name</strong> option and give it a value of <strong class="source-inline">html</strong>.</li>
				<li>Next, add a <strong class="bold">Raw Body</strong> option to the <strong class="source-inline">Webhook</strong> node and enable the option.</li>
				<li>Close the <strong class="source-inline">Webhook</strong> node.</li>
				<li>Add a <strong class="source-inline">Set</strong> node to the n8n Editor UI and connect it to the output of the <strong class="source-inline">Webhook</strong> node.</li>
				<li>Open the <strong class="source-inline">Set</strong> node and add a <strong class="source-inline">string</strong> value.</li>
				<li>Name the value <strong class="source-inline">html</strong>.</li>
				<li>Click on<a id="_idIndexMarker178"/> the gears next to <strong class="bold">Value</strong> and click on the <strong class="bold">Add Expression</strong> option.</li>
				<li>In the <strong class="bold">Expression Editor</strong>, paste <strong class="source-inline">&lt;H1&gt;Thanks for visiting, {{$json["query"]["fname"]}} {{$json["query"]["lname"]}}!&lt;/H1&gt;</strong> in the <strong class="bold">Expression</strong> field.</li>
				<li>Close the <strong class="bold">Expression Editor</strong> and the <strong class="source-inline">Set</strong> node.</li>
			</ol>
			<p>Let's see what this does for us. In the n8n Editor UI, click on the <strong class="bold">Execute Workflow</strong> button. Then, go back to your web browser and enter the URL you used last time, ending with <strong class="source-inline">?fname=Jim&amp;lname=Nasium</strong>.</p>
			<p>If everything has been set up correctly, you should get a message in large letters stating "<strong class="source-inline">Thanks for visiting, Jim Nasium!</strong>".</p>
			<h3>How does that work?</h3>
			<p>When the web browser sends the information to the Webhook, the Webhook grabs the <strong class="source-inline">fname=Jim&amp;lname=Nasium</strong> portion of the URL and sends it on to the <strong class="source-inline">Set</strong> node. The <strong class="source-inline">Set</strong> node then <a id="_idIndexMarker179"/>uses the values for <strong class="source-inline">fname</strong> and <strong class="source-inline">lname</strong> to dynamically generate <strong class="bold">HyperText Markup Language</strong> (<strong class="bold">HTML</strong>), which the Webhook uses to send back to the web browser. The web browser then displays the HTML accordingly.</p>
			<p>We've essentially turned n8n into a web server that can generate real-time dynamic web pages!</p>
			<p>We have one last section that we want to cover before we close out this chapter. Let's talk about manipulating data stored in arrays and JSON objects.</p>
			<h1 id="_idParaDest-59"><a id="_idTextAnchor064"/>Working with arrays and JSON objects</h1>
			<p>n8n uses a lot <a id="_idIndexMarker180"/>of arrays<a id="_idIndexMarker181"/> and JSON objects, and it is important that you are comfortable working with them. In this section, we will learn how to manipulate arrays and objects by splitting, combining, and writing to these items.</p>
			<p>There is a lot of data flying around an n8n workflow, and it can be constructive to learn a few tips and tricks about manipulating this data stored in arrays and JSON objects.</p>
			<p>For these examples, we are going to use an array with three JSON objects with the same keys, as illustrated in the following code snippet:</p>
			<p class="source-code">[</p>
			<p class="source-code">  {</p>
			<p class="source-code">    "species": "dog",</p>
			<p class="source-code">    "name": "Cocoa",</p>
			<p class="source-code">    "color": "brown"</p>
			<p class="source-code">  },</p>
			<p class="source-code">  {</p>
			<p class="source-code">    "species": "cat",</p>
			<p class="source-code">    "name": "Lucky",</p>
			<p class="source-code">    "color": "brown"</p>
			<p class="source-code">  },</p>
			<p class="source-code">  {</p>
			<p class="source-code">    "species": "cat",</p>
			<p class="source-code">    "name": "Skittles",</p>
			<p class="source-code">    "color": "grey"</p>
			<p class="source-code">  }</p>
			<p class="source-code">]</p>
			<p>If you look at this information using the <strong class="bold">Table</strong> tab at the top of the n8n node generating this information, it will look something like this:</p>
			<div>
				<div id="_idContainer037" class="IMG---Figure">
					<img src="image/Table_3.03_B17493.jpg" alt=""/>
				</div>
			</div>
			<p>You can <a id="_idIndexMarker182"/>generate<a id="_idIndexMarker183"/> this table in a <strong class="source-inline">Function</strong> node by adding a <strong class="source-inline">Function</strong> node to the n8n Editor UI and then pasting the following into the JavaScript code field:</p>
			<p class="source-code">items = [ { "json": { "species": "dog", "name": "Cocoa", "color": "brown"}}, { "json": { "species": "cat", "name": "Lucky", "color": "brown"}}, { "json": { "species": "cat", "name": "Skittles", "color": "grey"} } ];</p>
			<p class="source-code">return items;</p>
			<p>Now, the output of the <strong class="source-inline">Function</strong> node should match the preceding table.</p>
			<p>Next, let's learn how to split data from the <strong class="source-inline">Function</strong> node using the <strong class="source-inline">IF</strong> node. </p>
			<h2 id="_idParaDest-60"><a id="_idTextAnchor065"/>Separating the cats from the dogs</h2>
			<p>The first <a id="_idIndexMarker184"/>thing we are going to do is split this array <a id="_idIndexMarker185"/>into two arrays using the <strong class="source-inline">IF</strong> node. We are going to send all of the dogs to the <strong class="source-inline">true</strong> output and all of the cats to the <strong class="source-inline">false</strong> output.</p>
			<p>To do this, follow these steps:</p>
			<ol>
				<li value="1">Attach an <strong class="source-inline">IF</strong> node to the output of the node generating the array.</li>
				<li>Open the <strong class="source-inline">IF</strong> node and add a <strong class="source-inline">string</strong> condition to the node.</li>
				<li>In the <strong class="source-inline">Value 1</strong> field, click on the gears icon and select <strong class="bold">Add Expression</strong>.</li>
				<li>In the <strong class="bold">Expression Editor</strong>, enter <strong class="source-inline">{{$json["species"]}}</strong> into the <strong class="bold">Expression</strong> field and close the Expression editor.</li>
				<li>In the <strong class="source-inline">Value 2</strong> field, type <strong class="source-inline">dog</strong> for the value.</li>
				<li>Close the <strong class="source-inline">IF</strong> node and execute the workflow.</li>
				<li>Open the <strong class="source-inline">IF</strong> node and take a look at the results for the <strong class="source-inline">true</strong> and <strong class="source-inline">false</strong> outputs. You <a id="_idIndexMarker186"/>should see that there are<a id="_idIndexMarker187"/> two entries in the <strong class="source-inline">false</strong> output and one in the <strong class="source-inline">true</strong> output.</li>
			</ol>
			<h2 id="_idParaDest-61"><a id="_idTextAnchor066"/>Combining two arrays</h2>
			<p>Now that we have <a id="_idIndexMarker188"/>split the array apart, let's see if we can bring them back together again. We're going to do this using the <strong class="source-inline">Merge</strong> node. Follow these steps:</p>
			<ol>
				<li value="1">Add a <strong class="source-inline">Merge</strong> node to the n8n Editor UI.</li>
				<li>Connect the <strong class="source-inline">true</strong> output from the <strong class="source-inline">IF</strong> node to <strong class="source-inline">Input 1</strong> of the <strong class="source-inline">Merge</strong> node.</li>
				<li>Connect the <strong class="source-inline">false</strong> output from the <strong class="source-inline">IF</strong> node to <strong class="source-inline">Input 2</strong> of the <strong class="source-inline">Merge</strong> node</li>
				<li>Open the <strong class="source-inline">Merge</strong> node.</li>
				<li>For the <strong class="source-inline">Mode</strong> parameter, select <strong class="bold">Append</strong>.</li>
				<li>Close the <strong class="source-inline">Merge</strong> node.</li>
			</ol>
			<p>Your final workflow should look something like this:</p>
			<div>
				<div id="_idContainer038" class="IMG---Figure">
					<img src="image/Figure_3.05_B17493.jpg" alt="Figure 3.5 – Splitting and merging an array workflow&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 3.5 – Splitting and merging an array workflow</p>
			<p>It's now time to test it out! Execute the workflow. When it finishes running, open up the <strong class="source-inline">Merge</strong> node. The<a id="_idIndexMarker189"/> output windows should show that the array is once again back together.</p>
			<h2 id="_idParaDest-62"><a id="_idTextAnchor067"/>Adding the same value to all JSON objects</h2>
			<p>Now, let's imagine<a id="_idIndexMarker190"/> we want to add another key to all records in the array coming out from the <strong class="source-inline">Merge</strong> node. Let's also assume that each copy of the key will be the same.</p>
			<p>We can accomplish this by using the <strong class="source-inline">Set</strong> node. Here are the steps you need to follow:</p>
			<ol>
				<li value="1">Add a <strong class="source-inline">Set</strong> node to the n8n Editor UI and attach it to the output of the <strong class="source-inline">Merge</strong> node.</li>
				<li>Open the <strong class="source-inline">Set</strong> node.</li>
				<li>Add a new Boolean value and name it <strong class="source-inline">adopted</strong>.</li>
				<li>Set the value of <strong class="source-inline">adopted</strong> to <strong class="source-inline">true</strong>.</li>
				<li>Close the <strong class="source-inline">Set</strong> node.</li>
			</ol>
			<p>To check if it worked, execute the workflow and open up the <strong class="source-inline">IF</strong> node. The table in the output window should now look like this:</p>
			<div>
				<div id="_idContainer039" class="IMG---Figure">
					<img src="image/Table_3.04_B17493.jpg" alt=""/>
				</div>
			</div>
			<p>Using the <strong class="source-inline">IF</strong>, <strong class="source-inline">Merge</strong>, and <strong class="source-inline">Set</strong> nodes allows us to perform some instrumental data manipulation tasks quickly and <a id="_idIndexMarker191"/>easily without resorting to custom coding using the <strong class="source-inline">Function</strong> node.</p>
			<h1 id="_idParaDest-63"><a id="_idTextAnchor068"/>Summary</h1>
			<p>This chapter covered some critical concepts, and in it, we learned how to build some powerful tools within n8n.</p>
			<p>We first covered how n8n structures data with JSON using the primary components of key-value pairs, objects, and arrays. We followed this by showing how n8n stores JSON and binary data internally. Then we talked about using the <strong class="source-inline">Function</strong> node and understanding the <strong class="source-inline">items</strong> array, dot notation, and the <strong class="source-inline">$items</strong> method. Once functions were figured out, we learned about APIs and how to send and receive data using basic and authenticated calls. Next, we reviewed Webhooks and used them in n8n to send information and generate HTML files. Finally, we went over how n8n works with JSON objects and arrays, including manipulating data that is stored in these items.</p>
			<p>With this new information under your belt, you are well on your way to building practical tools using n8n.</p>
			<p>In the next chapter, you will put this new knowledge to use and build three applications in n8n!</p>
		</div>
	</body></html>