- en: '15'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '15'
- en: Accelerate Building Solutions on AWS
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 AWS 上加速构建解决方案
- en: 'In this chapter, we will look at the following key topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将探讨以下关键主题：
- en: Key steps for building solutions on AWS
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 AWS 上构建解决方案的关键步骤
- en: Use case for leveraging Amazon Q features during the build process on AWS
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 AWS 上构建过程中的 Amazon Q 功能用例
- en: Awareness of AWS account resources
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解 AWS 账户资源
- en: At this time, it’s no secret that organizations are moving their IT infrastructure
    to the cloud at a rapid pace, with AWS being a market leader in offering cloud
    computing services for building their technology stack. When transitioning existing
    applications to AWS or creating new ones natively using many of the AWS services,
    there are certain steps that all builders need to take. A builder is a key persona
    in every organization, and those who leverage AWS services for their IT needs
    utilize AWS builders to address their business use cases.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，组织正在以快速的速度将 IT 基础设施迁移到云端，AWS 在提供云计算服务以构建其技术堆栈方面是市场领导者。当将现有应用程序迁移到 AWS 或使用许多
    AWS 服务原生创建新应用程序时，所有构建者都需要采取某些步骤。构建者是每个组织的关键角色，那些利用 AWS 服务满足其 IT 需求的人使用 AWS 构建者来解决他们的业务用例。
- en: An AWS builder is an individual who uses AWS to design, develop, deploy, and
    manage applications and solutions on the AWS cloud platform. These individuals
    may be developers, engineers, architects, data scientists, or other professionals
    working with AWS services to build innovative and scalable solutions for their
    organizations or clients. AWS builders leverage the wide array of tools and services
    provided by AWS to create robust and efficient applications that meet the specific
    needs and requirements of their projects. They are responsible for understanding
    AWS services, implementing best practices, and continuously improving their skills
    to drive innovation and success in their projects.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: AWS 构建者是一个使用 AWS 设计、开发、部署和管理 AWS 云平台上的应用程序和解决方案的个人。这些人可能是开发者、工程师、架构师、数据科学家或其他与
    AWS 服务合作以为其组织或客户构建创新和可扩展解决方案的专业人士。AWS 构建者利用 AWS 提供的广泛工具和服务来创建强大且高效的应用程序，以满足其项目的特定需求和要求。他们负责理解
    AWS 服务、实施最佳实践，并不断改进他们的技能，以推动项目中的创新和成功。
- en: There is no denying that cloud computing has accelerated the IT build process
    compared to the on-premises world. However, large and complex projects still require
    significant time and effort before they can be brought into the production environment.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 不可否认，与本地环境相比，云计算加速了 IT 构建过程。然而，大型和复杂的项目在进入生产环境之前仍然需要大量的时间和努力。
- en: Let’s quickly look at some of the key steps builders need to take to build projects
    on AWS.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们快速看一下构建者在 AWS 上构建项目时需要采取的一些关键步骤。
- en: Key steps for building solutions on AWS
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 AWS 上构建解决方案的关键步骤
- en: 'The process builders typically go through to solve a use case using AWS services
    involves several steps:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 构建者通常通过以下步骤使用 AWS 服务来解决用例：涉及几个步骤：
- en: '**Understanding requirements**: Builders first need to understand the requirements
    of the use case, including the problem to be solved, desired outcomes, and any
    constraints or limitations.'
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**理解需求**：构建者首先需要理解用例的需求，包括要解决的问题、期望的结果以及任何约束或限制。'
- en: '**Selection of AWS services**: Based on the requirements, builders select the
    appropriate AWS services that best fit the use case. This may involve researching
    and evaluating various AWS services to determine which ones provide the required
    features and capabilities.'
  id: totrans-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**选择 AWS 服务**：根据需求，构建者选择最适合用例的 AWS 服务。这可能涉及研究和评估各种 AWS 服务，以确定哪些服务提供所需的功能和能力。'
- en: '**Designing the solution architecture**: Builders design the architecture of
    the solution, including the overall system design, data flow, integration points,
    and scalability considerations. This involves creating diagrams, such as architecture
    diagrams or data flow diagrams, to visualize the solution.'
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**设计解决方案架构**：构建者设计解决方案的架构，包括整体系统设计、数据流、集成点和可扩展性考虑。这涉及到创建图表，例如架构图或数据流图，以可视化解决方案。'
- en: '**Setting up AWS resources**: Builders provision and configure the necessary
    AWS resources to implement the solution. This may include setting up compute instances
    (e.g., EC2), storage (e.g., S3), databases (e.g., RDS), networking (e.g., VPC),
    and other services as required.'
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**设置AWS资源**：构建者配置必要的AWS资源以实现解决方案。这可能包括设置计算实例（例如，EC2）、存储（例如，S3）、数据库（例如，RDS）、网络（例如，VPC）和其他所需服务。'
- en: '**Developing application code**: Builders develop the application code or scripts
    needed to implement the solution. This may involve writing code in programming
    languages such as Python, Java, or Node.js, as well as creating configuration
    files or scripts for **infrastructure as code** (**IaC**) tools such as AWS CloudFormation
    or AWS **Cloud Development** **Kit** (**CDK**).'
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**开发应用程序代码**：构建者开发实现解决方案所需的应用程序代码或脚本。这可能涉及使用Python、Java或Node.js等编程语言编写代码，以及为**基础设施即代码**（**IaC**）工具（如AWS
    CloudFormation或AWS **云开发** **套件**（**CDK**））创建配置文件或脚本。'
- en: '**Testing and debugging**: Builders test the solution to ensure that it functions
    as expected and meets the requirements. This includes unit testing, integration
    testing, and end-to-end testing to validate the functionality and performance
    of the solution. Builders also debug any issues or errors that arise during testing.'
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**测试和调试**：构建者测试解决方案以确保其按预期工作并满足要求。这包括单元测试、集成测试和端到端测试，以验证解决方案的功能和性能。构建者还会调试测试过程中出现的任何问题或错误。'
- en: '**Deployment and rollout**: Once testing is complete, builders deploy the solution
    to the production environment. This may involve deploying application code to
    compute instances, configuring load balancers and auto-scaling groups, and configuring
    DNS settings. Builders carefully plan and execute the deployment to minimize downtime
    and disruptions to users.'
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**部署和推广**：一旦测试完成，构建者将解决方案部署到生产环境。这可能涉及将应用程序代码部署到计算实例，配置负载均衡器和自动扩展组，以及配置DNS设置。构建者会仔细规划和执行部署，以最小化停机时间和对用户的影响。'
- en: '**Monitoring and optimization**: After deployment, builders monitor the solution
    to ensure that it continues to operate smoothly and meets performance objectives.
    This involves monitoring metrics, logs, and alarms using AWS CloudWatch and other
    monitoring tools. Builders also optimize the solution for cost, performance, and
    scalability as needed.'
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**监控和优化**：部署后，构建者监控解决方案以确保其继续平稳运行并满足性能目标。这涉及使用AWS CloudWatch和其他监控工具监控指标、日志和警报。构建者根据需要优化解决方案以降低成本、提高性能和可扩展性。'
- en: '**Documentation and knowledge sharing**: Builders document the solution architecture,
    configuration, and deployment process to facilitate knowledge sharing and future
    maintenance. This documentation helps other team members understand how the solution
    works and how to troubleshoot issues if they arise.'
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**文档和知识共享**：构建者记录解决方案架构、配置和部署过程，以促进知识共享和未来的维护。这些文档有助于其他团队成员了解解决方案的工作原理以及如何解决可能出现的问题。'
- en: As you can see, there are many steps involved in building a solution for a given
    use case using many of the AWS purpose-built services. Each step presents its
    own challenges, and every builder has their own approach to navigating through
    them. The key point here is that, often, building complex solutions takes time,
    with much of it devoted to research. This research may involve looking into similar
    use cases solved previously, weighing the pros and cons of specific AWS services,
    exploring design patterns and their implementation, and likely troubleshooting
    issues and errors encountered during the build process.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，使用许多AWS专用服务构建特定用例的解决方案涉及许多步骤。每个步骤都提出了自己的挑战，每位构建者都有自己通过这些步骤的方法。关键点是，构建复杂解决方案通常需要时间，其中很大一部分时间用于研究。这项研究可能包括研究之前解决的类似用例，权衡特定AWS服务的利弊，探索设计模式和其实施，以及很可能在构建过程中遇到的问题和错误的调试。
- en: Let’s dive right into how you can accelerate the process of building solutions
    on AWS using Amazon Q, which focuses on the area where builders often spend a
    significant amount of time – research.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们直接探讨如何使用Amazon Q加速在AWS上构建解决方案的过程，Amazon Q专注于构建者经常花费大量时间的领域——研究。
- en: Use case for leveraging Amazon Q features during the build process on AWS
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在AWS构建过程中的构建阶段利用Amazon Q功能的用例
- en: To better understand how Amazon Q can help accelerate the build process on AWS,
    we will introduce a use case and then go through the steps of solving it. Along
    the way, we will highlight the many features of Amazon Q that can reduce the time
    a builder would otherwise spend.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更好地了解Amazon Q如何帮助加速在AWS上的构建过程，我们将介绍一个用例，然后通过解决它的步骤。在这个过程中，我们将突出Amazon Q的许多功能，这些功能可以减少构建者本应花费的时间。
- en: Keep in mind that, for simplicity, we are presenting a straightforward use case
    that can be solved in many different ways. However, once you go through the flow
    of the use case, it will help you understand the various features of Amazon Q
    when it comes to building solutions using AWS services. These features can be
    applied to any other complex use case an AWS builder might encounter in their
    organization. The key takeaway is to understand how these features save time and
    improve productivity, ultimately enhancing the experiences of AWS builders. Repeat
    after me – no AWS builder should be unhappy. Let’s jump straight into the use
    case.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，为了简单起见，我们在这里展示的是一个可以用许多不同方式解决的简单用例。然而，一旦你通过了用例的流程，它将帮助你理解Amazon Q在构建使用AWS服务解决方案时的各种功能。这些功能可以应用于AWS构建者在他们的组织中可能遇到的任何其他复杂用例。关键是要理解这些功能如何节省时间并提高生产力，最终增强AWS构建者的体验。跟我重复一遍——没有AWS构建者应该不高兴。让我们直接进入用例。
- en: A company wants to build a web application where users can upload images for
    various purposes, such as profile pictures, product images, or content illustrations.
    To ensure optimal performance and user experience, the company aims to implement
    a scalable and efficient image processing pipeline to resize and optimize these
    images before storing them in the backend storage system.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 一家公司希望构建一个网络应用程序，用户可以上传图像用于各种目的，例如个人资料图片、产品图片或内容插图。为了确保最佳性能和用户体验，该公司旨在实施一个可扩展且高效的图像处理管道，在将这些图像存储到后端存储系统之前对其进行调整大小和优化。
- en: Since AWS is their preferred cloud services provider, the business wants the
    IT team to create a simple and cost-effective solution in a short time using AWS
    services.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 由于AWS是他们首选的云服务提供商，该业务希望IT团队在短时间内使用AWS服务创建一个简单且成本效益高的解决方案。
- en: The use case may be simple here, but often, AWS builders in the organization
    receive complex requirements from the business that require methodical planning,
    research, and execution. The assumption is that AWS builders have a general sense
    of many of the AWS services, their features, and how they can help solve a use
    case. However, not every builder is the same, and not everyone has the same level
    of expertise. Some are entry-level builders who rely heavily on research and guidance
    from senior builders, while others know how to solve a use case but may not be
    familiar with all the best practices and alternative design patterns.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这里的用例可能很简单，但通常，组织中的AWS构建者会从业务那里收到复杂的需求，这些需求需要周密的规划、研究和执行。假设是AWS构建者对许多AWS服务、其功能和它们如何帮助解决用例有一个大致的了解。然而，并非每个构建者都一样，也不是每个人的专业知识水平都相同。有些人可能是入门级构建者，他们严重依赖资深构建者的研究和指导，而其他人可能知道如何解决用例，但可能不熟悉所有最佳实践和替代设计模式。
- en: 'Important reminder: LLM-based solutions do not always return the same results'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提醒：基于LLM的解决方案并不总是返回相同的结果
- en: 'LLMs do not inherently produce idempotent results when deployed in applications.
    There are a few reasons for this:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: LLM在部署到应用程序中时并不天生产生幂等结果。这有几个原因：
- en: '**Stochasticity**: Most LLMs use some element of randomness when generating
    outputs, such as sampling from a probability distribution. This means each invocation
    will produce slightly different results.'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '**随机性**：大多数LLM在生成输出时都会使用一些随机元素，例如从概率分布中进行采样。这意味着每次调用都会产生略微不同的结果。'
- en: '**Continuous learning**: Many deployed LLMs continue training on new data,
    constantly updating their parameters. The model is essentially continuously changing,
    so results will evolve.'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '**持续学习**：许多部署的LLM会继续在新数据上训练，不断更新其参数。模型本质上是在不断变化的，因此结果会演变。'
- en: '**Interactivity**: Conversational AI systems based on LLMs accumulate context
    and history, which impacts subsequent responses. The results depend on prior interactions.'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: '**交互性**：基于LLM的对话式AI系统会积累上下文和历史，这会影响后续的响应。结果取决于之前的交互。'
- en: '**External dependencies**: Applications may pull in external data that influences
    the LLM’s outputs. If that data changes, the outputs will as well.'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '**外部依赖**：应用程序可能会引入影响LLM输出的外部数据。如果这些数据发生变化，输出也会随之变化。'
- en: '**Multimodal inputs**: For LLMs that process images, audio, and so on, in addition
    to text, variations in those inputs lead to different outputs.'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '**多模态输入**：对于处理图像、音频等内容的LLM，除了文本外，这些输入的变化会导致不同的输出。'
- en: Since Amazon Q is also an LLM-based service, the results you see for this use
    case, as well as any use case you solve, may not always return the same output.
    Therefore, it is important to have a human in the loop to prompt it appropriately
    and also test and verify before deploying solutions in production.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 由于Amazon Q也是一个基于LLM的服务，因此对于这个用例以及你解决的任何用例，结果可能并不总是返回相同的输出。因此，在将解决方案部署到生产环境中之前，有一个人类参与适当提示并测试验证是很重要的。
- en: Hope you didn’t skip the preceding reminder note! Now, let’s jump straight into
    how Amazon Q will help expedite solving this use case.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 希望你没有跳过前面的提醒笔记！现在，让我们直接进入Amazon Q如何帮助加速解决这个用例。
- en: Conversational Q&A capability
  id: totrans-38
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 对话式问答能力
- en: The conversational ability of Amazon Q will help us through the initial steps
    to better understand the use case. You can ask Amazon Q different questions, and
    it will try to understand what you want to do. If you are an AWS builder with
    some knowledge of AWS services relevant to solving this use case, you can start
    with a broad question to Amazon Q and then narrow down options by prompting. For
    example, in the following screenshot, we ask for a solution to the use case without
    going into too much detail about what it should look like on AWS.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: Amazon Q的对话能力将帮助我们更好地理解用例的初始步骤。你可以向Amazon Q提出不同的问题，它会尝试理解你想要做什么。如果你是一个对AWS服务有一定了解的AWS构建者，并且与解决这个用例相关，你可以从向Amazon
    Q提出一个广泛的问题开始，然后通过提示缩小选项。例如，在以下截图中，我们请求一个解决方案，而没有过多地详细说明它应该在AWS上看起来是什么样子。
- en: '![Figure 15.1 – Amazon Q conversational capability – general question](img/B21378_15_1.jpg)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![图15.1 – Amazon Q对话能力 – 一般问题](img/B21378_15_1.jpg)'
- en: Figure 15.1 – Amazon Q conversational capability – general question
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.1 – Amazon Q对话能力 – 一般问题
- en: Since there weren’t specific instructions in the question, Amazon Q provided
    a general outline of what the solution might look like. This is where you can
    further prompt the system to narrow down a possible solution. Since the use case
    requires us to build and host a simple website, we prompt Amazon Q to refine its
    recommendation further. The following screenshot shows this prompt and Q’s response.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 由于问题中没有具体的指令，Amazon Q提供了一个可能的解决方案的一般概述。这就是你可以进一步提示系统缩小可能解决方案的地方。由于用例要求我们构建和托管一个简单的网站，我们提示Amazon
    Q进一步细化其推荐。以下截图显示了此提示和Q的响应。
- en: '![Figure 15.2 – Amazon Q conversational capability – prompt 1](img/B21378_15_2.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![图15.2 – Amazon Q对话能力 – 提示1](img/B21378_15_2.jpg)'
- en: Figure 15.2 – Amazon Q conversational capability – prompt 1
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.2 – Amazon Q对话能力 – 提示1
- en: Q understood the prompt, and it provided a recommendation to use the **AWS Amplify**
    service as a simple way to host the website. As you can see through this simple
    example, prompting the system is a crucial step in obtaining results that are
    customized to the use case you are trying to solve. Since the use case requires
    us to build a website and it will not just be a static web page, the prompt in
    the following screenshot further refines the output from Q.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: Q理解了提示，并建议使用**AWS Amplify**服务作为托管网站的一种简单方式。正如你通过这个简单的例子所看到的，提示系统是获得针对你试图解决的问题定制的结果的
    crucial步骤。由于用例要求我们构建一个网站，并且它不会只是一个静态网页，以下截图中的提示进一步细化了Q的输出。
- en: '![Figure 15.3 – Amazon Q conversational capability – prompt 2](img/B21378_15_3.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![图15.3 – Amazon Q对话能力 – 提示2](img/B21378_15_3.jpg)'
- en: Figure 15.3 – Amazon Q conversational capability – prompt 2
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.3 – Amazon Q对话能力 – 提示2
- en: You can continue along this path of prompting until you receive enough recommendations
    to help solve a particular use case. Amazon Q also provides sources of information
    so that you can read more about it.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以继续沿着这个提示路径，直到你收到足够的建议来帮助解决特定的用例。Amazon Q还提供了信息来源，以便你可以了解更多关于它。
- en: If you happen to have an idea of which AWS services you want to use for the
    use case, you can directly construct the very first question you ask Amazon Q
    with all the relevant considerations the system should make when coming up with
    a recommended solution. For example, in our use case, if we know that we could
    host the website on EC2 and then use S3 as a store to store the original and resized
    images, then we can prompt the system all at once, as seen in the following screenshot.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您已经有了关于您想用于此用例的AWS服务的想法，您可以直接构建您要问Amazon Q的第一个问题，包括系统在提出推荐解决方案时应考虑的所有相关因素。例如，在我们的用例中，如果我们知道我们可以将网站托管在EC2上，然后使用S3作为存储来存储原始和调整大小的图像，那么我们可以一次性提示系统，如下面的截图所示。
- en: '![Figure 15.4 – Amazon Q conversational capability – well-defined requirements](img/B21378_15_4.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![图15.4 – Amazon Q对话能力 – 明确的需求](img/B21378_15_4.jpg)'
- en: Figure 15.4 – Amazon Q conversational capability – well-defined requirements
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.4 – Amazon Q对话能力 – 明确的需求
- en: As you can see from the recommendation, Amazon Q was able to come up with a
    solution using some of the AWS services you would like to use to solve the use
    case.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 如您从推荐中看到的，Amazon Q能够提出一个解决方案，使用您想用于解决此用例的一些AWS服务。
- en: 'For the sake of a clear solution, let’s assume that with the assistance of
    Amazon Q, we were able to nail down the flow of the solution as follows:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 为了清晰起见，让我们假设在Amazon Q的帮助下，我们能够将解决方案的流程确定如下：
- en: The user uploads an image through the web application interface.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用户通过Web应用程序界面上传图像。
- en: The web application sends the uploaded image to an Amazon S3 bucket.
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 网络应用程序将上传的图像发送到Amazon S3存储桶。
- en: An S3 event notification triggers an AWS Lambda function.
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个S3事件通知触发一个AWS Lambda函数。
- en: The Lambda function retrieves the uploaded image from the S3 bucket and initiates
    the image processing directly.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Lambda函数从S3存储桶检索上传的图像并直接启动图像处理。
- en: The image processing tasks, such as resizing and compression, are performed
    within the Lambda function using libraries such as OpenCV or PIL.
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 图像处理任务，如调整大小和压缩，在Lambda函数中使用OpenCV或PIL等库执行。
- en: Once the image processing is complete, the Lambda function saves the processed
    image back to the S3 bucket or a designated location.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦图像处理完成，Lambda函数将处理后的图像保存回S3存储桶或指定位置。
- en: Optionally, metadata about the processed image can be stored in a database or
    logging system for monitoring and analytics purposes.
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可选地，处理后的图像的元数据可以存储在数据库或日志系统中，用于监控和分析目的。
- en: The processed image is now ready for retrieval and display within the web application
    or any other downstream systems.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 处理后的图像现在可以用于在Web应用程序或任何其他下游系统中检索和显示。
- en: The following diagram shows the solution architecture for this particular use
    case.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的图示显示了此特定用例的解决方案架构。
- en: '![Figure 15.5 – Image processing pipeline – solution architecture](img/B21378_15_5.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![图15.5 – 图像处理管道 – 解决方案架构](img/B21378_15_5.jpg)'
- en: Figure 15.5 – Image processing pipeline – solution architecture
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.5 – 图像处理管道 – 解决方案架构
- en: Since we are highlighting features of Amazon Q that would help fast-track building
    solutions on AWS, not all the steps will be covered in detail here. Also, the
    responses you receive from Q may be different from what we are getting, so we
    may not be able to show all the step-by-step instructions in this chapter for
    you to build this use case. The idea here is to show you how you can leverage
    these features of Q for your own use case, and at the end of the process, you
    will be able to quantify how much time Amazon Q saved you in the whole process
    based on all the steps you took, including design, development, building, testing,
    debugging, deployment, and documentation.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们在这里强调的是Amazon Q的功能，这些功能有助于快速构建AWS上的解决方案，因此并非所有步骤都会在这里详细说明。此外，您从Q收到的响应可能与我们所得到的有所不同，因此我们可能无法在此章节中展示所有逐步说明，以便您构建此用例。这里的目的是向您展示您如何利用Q的这些功能来满足自己的用例，并且在整个流程结束时，您将能够根据您所采取的所有步骤（包括设计、开发、构建、测试、调试、部署和文档）来量化Amazon
    Q在整个过程中为您节省了多少时间。
- en: 'We now understand how the conversational feature of Q was able to help narrow
    the general flow of the solution along with its architecture. Let’s understand
    the next feature of Amazon Q: optimally selecting the correct EC2 instance for
    the use case – something builders often have to decide based on the use case,
    taking into consideration the pros and cons of each such instance.'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在理解了Q的对话功能是如何帮助缩小解决方案的一般流程及其架构的。让我们了解Amazon Q的下一个功能：根据用例最优选择正确的EC2实例 – 构建者通常需要根据用例来决定，同时考虑每个此类实例的优缺点。
- en: Selecting the optimal Amazon EC2 instance
  id: totrans-67
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 选择最优的Amazon EC2实例
- en: To host the website, we need to get an Amazon EC2 instance up and running with
    an Apache HTTP server. The next question for the builder would be which EC2 instance
    should they select? Let’s see how Amazon Q can help.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 要托管网站，我们需要启动一个带有Apache HTTP服务器的Amazon EC2实例。构建者接下来要问的问题是应该选择哪种EC2实例？让我们看看Amazon
    Q如何帮助。
- en: When you go to the EC2 console to launch an EC2 instance, there is now an advisor
    link in the **Instance type** section. The following screenshot shows the **Get**
    **advice** link.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 当您前往EC2控制台启动EC2实例时，现在在**实例类型**部分有一个顾问链接。以下截图显示了**获取建议**链接。
- en: '![Figure 15.6 – Amazon Q – EC2 instance selection advisor](img/B21378_15_6.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![图15.6 – Amazon Q – EC2实例选择顾问](img/B21378_15_6.jpg)'
- en: Figure 15.6 – Amazon Q – EC2 instance selection advisor
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.6 – Amazon Q – EC2实例选择顾问
- en: For our use case, we need a low-cost EC2 instance for hosting the website. We
    will pick the appropriate use case option, as shown in the following screenshot.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 对于我们的用例，我们需要一个低成本的EC2实例来托管网站。我们将选择适当的使用案例选项，如下面的截图所示。
- en: '![Figure 15.7 – Amazon Q – EC2 instance selection for web hosting](img/B21378_15_7.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![图15.7 – Amazon Q – EC2实例选择用于网站托管](img/B21378_15_7.jpg)'
- en: Figure 15.7 – Amazon Q – EC2 instance selection for web hosting
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.7 – Amazon Q – EC2实例选择用于网站托管
- en: Based on our criteria, Q responds with optimal EC2 instances that we can start
    with for our use case. Q just helps narrow down the choices; the actual benchmarking
    of cost/performance still needs to be done as part of the process.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 根据我们的标准，Q会响应最优的EC2实例，我们可以从这些实例开始我们的用例。Q只是帮助缩小选择范围；实际的成本/性能基准测试仍需要作为过程的一部分来完成。
- en: The following screenshot shows the recommended EC2 instances for web hosting,
    keeping costs low.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了用于网站托管的推荐EC2实例，同时保持低成本。
- en: '![Figure 15.8 – Amazon Q – EC2 instance type recommendation for web hosting](img/B21378_15_8.jpg)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![图15.8 – Amazon Q – EC2实例类型推荐用于网站托管](img/B21378_15_8.jpg)'
- en: Figure 15.8 – Amazon Q – EC2 instance type recommendation for web hosting
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.8 – Amazon Q – EC2实例类型推荐用于网站托管
- en: In this section, we demonstrated how Amazon Q helped select the correct type
    of EC2 instance based on the use case. The remaining setup to enable a website
    on an EC2 instance can vary depending on how the HTTP server is set up. The web
    server can either be bootstrapped and started when the EC2 instance is being booted
    or, in many cases, an **Amazon Machine Image** (**AMI**) that has all the necessary
    setup is used to start the web server. Implementation details are out of the scope
    of this book as they may vary for individual use cases.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们展示了Amazon Q如何根据用例选择正确的EC2实例类型。在EC2实例上启用网站的剩余设置可能因HTTP服务器的设置方式而异。Web服务器可以在启动EC2实例时启动，或者，在许多情况下，使用已经完成所有必要设置的**Amazon机器镜像**（**AMI**）来启动Web服务器。实现细节超出了本书的范围，因为它们可能因个别用例而异。
- en: 'The next feature of Amazon Q addresses a topic that frustrates builders the
    most: networking issues. Builders are passionate about building applications.
    When they are ready to test or deploy something, networking issues can strike
    and derail the progress. The most frustrating part about networking is that, often,
    it’s very difficult to know the exact issue just based on the error message. Getting
    to the root cause of the issue requires networking knowledge and troubleshooting
    skills. This process sometimes takes a lot of time.'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: Amazon Q的下一个功能解决了一个让构建者最头疼的问题：网络问题。构建者热衷于构建应用程序。当他们准备测试或部署某些内容时，网络问题可能会出现并阻碍进度。关于网络最令人沮丧的部分是，通常，仅根据错误信息很难知道确切的问题。找到问题的根本原因需要网络知识和故障排除技能。这个过程有时会花费很多时间。
- en: To assist with this topic, Amazon Q provides a network troubleshooting feature
    that allows fast resolution of such issues in the AWS Management Console itself.
    Let’s get into the details of this feature.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 为了帮助这个主题，亚马逊Q提供了一个网络故障排除功能，允许在AWS管理控制台中快速解决此类问题。让我们深入了解这个功能。
- en: Network troubleshooting assistance
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 网络故障排除协助
- en: Most times, especially in production environments, all the infrastructure required
    for the project is configured and maintained via IaC. If the developer is tasked
    with setting up the networking themselves, preferably in a dev account, then they
    can start by asking Amazon Q about the steps required to set up networking for
    our use case.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数时候，尤其是在生产环境中，项目所需的所有基础设施都是通过IaC（基础设施即代码）配置和维护的。如果开发者负责自行设置网络，最好是使用开发账户，那么他们可以从询问亚马逊Q关于为我们的用例设置网络所需的步骤开始。
- en: The following screenshot shows the steps listed by Q for setting up networking
    for a public-facing website.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了Q列出的为公开网站设置网络的步骤。
- en: '![Figure 15.9 – Amazon Q – networking recommendation for web hosting](img/B21378_15_9.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![图15.9 – 亚马逊Q – 网络推荐用于网站托管](img/B21378_15_9.jpg)'
- en: Figure 15.9 – Amazon Q – networking recommendation for web hosting
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.9 – 亚马逊Q – 网站托管网络推荐
- en: Once you set up all the networking elements such as a VPC, a subnet, route tables,
    and so forth, you can then verify whether the setup is correct or not. For specific
    network analysis, Amazon Q relies on VPC Reachability Analyzer to provide explanations
    and detailed path analysis.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你设置了所有网络元素，如VPC、子网、路由表等，然后你可以验证设置是否正确。对于特定的网络分析，亚马逊Q依赖于VPC可达性分析器来提供解释和详细的路径分析。
- en: In the following screenshot, Amazon Q’s network troubleshooting feature checked
    whether the VPC we set up can connect to the internet.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下屏幕截图中，亚马逊Q的网络故障排除功能检查了我们设置的网络是否可以连接到互联网。
- en: '![Figure 15.10 – Amazon Q – networking recommendation for web hosting](img/B21378_15_10.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![图15.10 – 亚马逊Q – 网络推荐用于网站托管](img/B21378_15_10.jpg)'
- en: Figure 15.10 – Amazon Q – networking recommendation for web hosting
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.10 – 亚马逊Q – 网络推荐用于网站托管
- en: The ability of Amazon Q to work in tandem with VPC Reachability Analyzer saves
    countless hours spent trying to troubleshoot what went wrong in the networking
    configuration. Once you fix the issues, you can also confirm whether the desired
    networking state is achieved by asking Amazon Q simple questions.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 亚马逊Q与VPC可达性分析器的协同工作能力可以节省无数用于尝试解决网络配置中出现问题的时间。一旦修复了问题，你也可以通过向亚马逊Q提出简单的问题来确认是否达到了所需的网络状态。
- en: For instance, the following screenshot shows the builder checking whether the
    EC2 instance has connectivity to the internet, and Q will provide the result along
    with the networking path details.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，以下屏幕截图显示了构建者正在检查EC2实例是否可以连接到互联网，Q将提供结果以及网络路径详细信息。
- en: '![Figure 15.11 – Amazon Q – internet connection check for web hosting](img/B21378_15_11.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![图15.11 – 亚马逊Q – 网站托管互联网连接检查](img/B21378_15_11.jpg)'
- en: Figure 15.11 – Amazon Q – internet connection check for web hosting
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.11 – 亚马逊Q – 网站托管互联网连接检查
- en: 'We just showed a couple of questions to showcase the capability of Amazon Q;
    however, in real scenarios, you can ask it many more networking questions, such
    as the following:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 我们只展示了几个问题来展示亚马逊Q的能力；然而，在实际场景中，你可以提出更多关于网络的疑问，例如以下问题：
- en: Can you help me figure out why I can’t connect from the bastion host to my private
    instance in the application subnet?
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你能帮我弄清楚为什么我无法从堡垒主机连接到应用子网中的私有实例吗？
- en: Which of my security groups are preventing access to my Amazon Aurora database?
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 哪些安全组阻止了对我的亚马逊Aurora数据库的访问？
- en: Why am I not able to SSH into EC2 instance i-xxxx?
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为什么我无法SSH进入i-xxxx EC2实例？
- en: Sometimes problems are not easy to solve or there might be some other issues
    with the service you are using. In such instances, you can also use Amazon Q to
    quickly raise a support case with AWS. Let’s quickly look at this aspect.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 有时问题不容易解决，或者你可能在使用的服务中遇到其他问题。在这种情况下，你还可以使用亚马逊Q快速向AWS提出支持案例。让我们快速看一下这个方面。
- en: Chatting with AWS Support
  id: totrans-100
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 与AWS支持聊天
- en: If at any point you are not able to troubleshoot an issue, you can ask Amazon
    Q to help you talk to someone in support, by asking Q to engage support directly.
    The following screenshot shows the options provided if you have just a basic support
    plan. When you have premium plans, it will allow you to create a support case
    right from the Q console. A link to different AWS Support plans is provided in
    the *References* section at the end of this chapter.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 如果在任何时候您无法解决问题，您可以要求Amazon Q帮助您与支持人员交谈，通过要求Q直接参与支持。以下截图显示了如果您只有基本支持计划时提供的选项。如果您有高级计划，它将允许您从Q控制台直接创建支持案例。在本书末尾的*参考文献*部分提供了不同AWS支持计划的链接。
- en: '![Figure 15.12 – Amazon Q – support case](img/B21378_15_12.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![图15.12 – Amazon Q –支持案例](img/B21378_15_12.jpg)'
- en: Figure 15.12 – Amazon Q – support case
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.12 – Amazon Q –支持案例
- en: The other option is to first see if Q can assist with the issue. If the response
    provided by Q does not seem to help, you can also click the thumbs-down icon in
    Q, and it will help you create a support case, as seen in the following screenshot.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个选项是首先看看Q是否可以帮助解决问题。如果Q提供的响应似乎没有帮助，您也可以在Q中点击不喜欢图标，它将帮助您创建支持案例，如以下截图所示。
- en: '![Figure 15.13 – Amazon Q –support case by clicking the thumbs-down icon](img/B21378_15_13.jpg)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![图15.13 – Amazon Q –通过点击不喜欢图标创建支持案例](img/B21378_15_13.jpg)'
- en: Figure 15.13 – Amazon Q –support case by clicking the thumbs-down icon
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.13 – Amazon Q –通过点击不喜欢图标创建支持案例
- en: This way, it will also allow you to create a support case from the Q chat itself,
    with the issue context auto-populating support case fields. This saves time as
    you don’t have to leave the screen to fill out a separate support case.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 这样，它还将允许您从Q聊天本身创建支持案例，问题上下文将自动填充支持案例字段。这节省了时间，因为您不需要离开屏幕来填写单独的支持案例。
- en: Our use case can now move forward with the next building block. Let’s continue,
    and while solving the next portion of our use case, we will also introduce another
    key feature of Amazon Q.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的使用案例现在可以继续前进到下一个构建块。让我们继续前进，在解决我们用例的下一个部分的同时，我们还将介绍Amazon Q的另一个关键功能。
- en: Troubleshooting console errors with Amazon Q
  id: totrans-109
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用Amazon Q解决控制台错误
- en: To demonstrate the next feature of Amazon Q, let’s move on to the next step
    of the solution, which involves creating a Lambda function. This function will
    be triggered when an image is uploaded to the S3 bucket from the website. The
    Lambda function will utilize an image processing library to resize the image and
    then place it in another S3 bucket. Additionally, the Lambda function will update
    the metadata for the resized image in a database, enabling the website to reference
    it and retrieve the correct image from the S3 bucket to display on certain web
    pages.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 为了演示Amazon Q的下一个功能，让我们继续到解决方案的下一步，这涉及到创建一个Lambda函数。此函数将在从网站上传图像到S3存储桶时触发。Lambda函数将使用图像处理库来调整图像大小，并将其放置在另一个S3存储桶中。此外，Lambda函数还将更新数据库中调整大小后的图像的元数据，使网站能够引用它并从S3存储桶检索正确的图像以显示在某些网页上。
- en: 'In the previous chapter, we demonstrated how Amazon Q can accelerate AWS Lambda
    code generation. Using the same techniques, you can auto-generate the Lambda function
    logic for this use case as well. The following is a sample Lambda function for
    our use case. It highlights the core image processing part without all the necessary
    additional features. The code is for your reference only and you can use Amazon
    Q to help generate the code on your behalf. The output may vary if we try to regenerate
    it, so care should be taken to validate its correctness:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们展示了Amazon Q如何加速AWS Lambda代码生成。使用相同的技巧，你也可以为这个用例自动生成Lambda函数逻辑。以下是我们用例的示例Lambda函数。它突出了核心图像处理部分，而没有所有必要的附加功能。代码仅供参考，您可以使用Amazon
    Q帮助您生成代码。如果尝试重新生成，输出可能会变化，因此应仔细验证其正确性：
- en: '[PRE0]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: We will set up this Lambda function and add a trigger for invocation whenever
    an object is created in the source S3 bucket. So, every time the website uploads
    an image to this bucket, the “create object” event in S3 will trigger the Lambda
    function.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将设置此Lambda函数，并为在源S3存储桶中创建对象时添加一个触发调用。因此，每次网站将图像上传到该存储桶时，S3中的“创建对象”事件将触发Lambda函数。
- en: The following screenshot shows the Lambda trigger that we added.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了我们所添加的Lambda触发器。
- en: '![Figure 15.14 – AWS Lambda function – event trigger](img/B21378_15_14.jpg)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![图15.14 – AWS Lambda函数 – 事件触发](img/B21378_15_14.jpg)'
- en: Figure 15.14 – AWS Lambda function – event trigger
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.14 – AWS Lambda函数 – 事件触发
- en: During the build lifecycle, builders often spend a significant amount of time
    debugging and fixing issues encountered during testing. Before Amazon Q, builders
    had to do their own research to understand what an error was and how to fix it.
    But now, with Amazon Q, builders can troubleshoot errors directly from the AWS
    Management Console. Let’s explore this feature and understand how we can use it
    to troubleshoot issues for our use case.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建生命周期中，构建者通常会在调试和修复测试期间遇到的问题上花费大量时间。在 Amazon Q 之前，构建者必须自己进行研究来了解错误是什么以及如何修复它。但现在，有了
    Amazon Q，构建者可以直接从 AWS 管理控制台进行故障排除。让我们探索这个功能，了解我们如何使用它来解决我们的用例中的问题。
- en: Troubleshooting Lambda errors with Amazon Q
  id: totrans-118
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 Amazon Q 故障排除 Lambda 错误
- en: In the AWS Management Console, Amazon Q can diagnose and address errors encountered
    while utilizing AWS services, including instances of insufficient permissions,
    misconfigurations, and exceeding service limits. This functionality is accessible
    for errors occurring within services such as Amazon EC2, Amazon ECS, Amazon S3,
    and AWS Lambda. While Amazon Q can resolve many common console errors, it does
    not handle basic validation errors, and it does not retain a record of previous
    troubleshooting sessions.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在 AWS 管理控制台中，Amazon Q 可以诊断并解决使用 AWS 服务时遇到的问题，包括权限不足、配置错误和超出服务限制的情况。此功能适用于 Amazon
    EC2、Amazon ECS、Amazon S3 和 AWS Lambda 等服务中发生的错误。虽然 Amazon Q 可以解决许多常见的控制台错误，但它不处理基本的验证错误，并且不保留之前的故障排除会话记录。
- en: 'Let’s understand how we can use this feature for our use case. Now, to test
    whether our Lambda function is working correctly, we will use the test option
    available in the AWS Lambda console. For the test, we will pre-upload a sample
    image in the source bucket and then execute the following test:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们了解我们如何使用此功能来满足我们的用例。现在，为了测试我们的 Lambda 函数是否正常工作，我们将在 AWS Lambda 控制台中使用测试选项。对于测试，我们将在源存储桶中预先上传一个样本图像，然后执行以下测试：
- en: '[PRE1]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: This test simply simulates the event message the Lambda function would receive
    when an image is uploaded to the source bucket. The test feature in the Lambda
    console allows builders to verify whether the lambda is working as intended before
    the code is put into production.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 此测试只是模拟 Lambda 函数在图像上传到源存储桶时接收的事件消息。Lambda 控制台中的测试功能允许构建者在代码投入生产之前验证 lambda
    是否按预期工作。
- en: When we click the **Test** button in the AWS Lambda console, we immediately
    encounter an error, as seen in the following screenshot.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们在 AWS Lambda 控制台中点击**测试**按钮时，我们会立即遇到错误，如下面的截图所示。
- en: '![Figure 15.15 – AWS Lambda function – error during test](img/B21378_15_15.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![图15.15 – AWS Lambda 函数 – 测试期间错误](img/B21378_15_15.jpg)'
- en: Figure 15.15 – AWS Lambda function – error during test
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.15 – AWS Lambda 函数 – 测试期间错误
- en: As seen from this error, it appears that the PIL module is not being recognized.
    The **Troubleshoot with Amazon Q** option appears next to the error. When you
    click that option, Amazon Q will first analyze the issue and provide an analysis
    of the issue, as seen in this case in the following screenshot.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 从这个错误中可以看出，似乎 PIL 模块没有被识别。错误旁边的**使用 Amazon Q 故障排除**选项出现。当你点击该选项时，Amazon Q 将首先分析问题，并提供问题的分析，如以下截图所示。
- en: '![Figure 15.16 – Amazon Q – troubleshoot AWS Lambda error](img/B21378_15_16.jpg)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![图15.16 – Amazon Q – 故障排除 AWS Lambda 错误](img/B21378_15_16.jpg)'
- en: Figure 15.16 – Amazon Q – troubleshoot AWS Lambda error
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.16 – Amazon Q – 故障排除 AWS Lambda 错误
- en: When you select the **Help me resolve** option, Amazon Q will provide a possible
    resolution to the problem. This way, builders don’t have to conduct external research
    on how to fix the error. The following screenshot shows the resolution steps for
    our Lambda function error.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 当你选择**帮助我解决问题**选项时，Amazon Q 将提供可能的解决方案。这样，构建者就不必进行外部研究来了解如何修复错误。以下截图显示了我们的 Lambda
    函数错误解决步骤。
- en: '![Figure 15.17 – Amazon Q – resolution for AWS Lambda error](img/B21378_15_17.jpg)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![图15.17 – Amazon Q – AWS Lambda 错误的解决方案](img/B21378_15_17.jpg)'
- en: Figure 15.17 – Amazon Q – resolution for AWS Lambda error
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.17 – Amazon Q – AWS Lambda 错误的解决方案
- en: So basically, the Python Imaging Library was missing, and Amazon Q suggested
    steps to add it to the Lambda function. At the beginning of this use case, I added
    an important note regarding solutions provided by LLM-based assistants such as
    Amazon Q. The solution offered may vary for different invocations of Amazon Q.
    To demonstrate this point, I closed the resolution window and requested that Q
    troubleshoot the same issue again. This time, Amazon Q came up with a different
    recommendation to solve this problem.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 所以基本上，Python Imaging Library缺失了，Amazon Q建议将库添加到Lambda函数中。在这个用例的开始，我添加了一个关于LLM（大型语言模型）助手如Amazon
    Q提供的解决方案的重要备注。提供的解决方案可能因Amazon Q的不同调用而异。为了说明这一点，我关闭了解决方案窗口，并要求Q再次对同一问题进行故障排除。这次，Amazon
    Q提出了不同的建议来解决此问题。
- en: '![Figure 15.18 – Amazon Q – resolution for AWS Lambda error – variation 1](img/B21378_15_18.jpg)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![图15.18 – Amazon Q – AWS Lambda错误解决 – 变体1](img/B21378_15_18.jpg)'
- en: Figure 15.18 – Amazon Q – resolution for AWS Lambda error – variation 1
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.18 – Amazon Q – AWS Lambda错误解决 – 变体1
- en: If I seek another instance of troubleshooting, this time, I receive another
    recommendation to solve the same issue, as seen in the following screenshot.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我寻求另一个故障排除实例，这次，我收到了另一个解决相同问题的建议，如下面的截图所示。
- en: '![Figure 15.19 – Amazon Q – resolution to AWS Lambda error – variation 2](img/B21378_15_19.jpg)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![图15.19 – Amazon Q – AWS Lambda错误解决 – 变体2](img/B21378_15_19.jpg)'
- en: Figure 15.19 – Amazon Q – resolution to AWS Lambda error – variation 2
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.19 – Amazon Q – AWS Lambda错误解决 – 变体2
- en: Now, you may wonder why this happened in this case. Firstly, a problem may have
    multiple solutions, and each solution has its own steps. Which solution would
    be the best fit for our problem is up to the builders to try and decide. Not every
    solution may be the best fit, as Amazon Q may not be aware of any external dependencies
    your team or specific implementation of the project may have. Builders need to
    do their due diligence in how they implement the final solution. Amazon Q just
    assists you in narrowing down options that may have taken you longer to research
    on your own.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你可能想知道为什么这种情况会发生。首先，一个问题可能有多个解决方案，每个解决方案都有自己的步骤。哪个解决方案最适合我们的问题取决于构建者去尝试和决定。并非每个解决方案都可能是最佳选择，因为Amazon
    Q可能不了解您的团队或项目的特定实现可能具有的任何外部依赖。构建者需要在实施最终解决方案时进行尽职调查。Amazon Q只是帮助您缩小可能需要您自己花费更多时间研究的研究选项。
- en: To keep moving, I adopted the recommendation provided by Amazon Q in *Figure
    15**.14*. To get a quick resolution to the library issue, I added an external
    ARN, `'arn:aws:lambda:us-west-2:770693421928:layer:Klayers-p312-Pillow:1'`, as
    a reference to the PIL library in my Lambda function layer section.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 为了继续前进，我采纳了图15.14中提供的Amazon Q建议。为了快速解决库问题，我在Lambda函数层部分添加了一个外部ARN，`'arn:aws:lambda:us-west-2:770693421928:layer:Klayers-p312-Pillow:1'`，作为PIL库的参考。
- en: I reran the test to see if that resolved my issue. But, immediately, I encountered
    a different error, as seen in the following screenshot.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 我重新运行了测试，看看是否解决了我的问题。但是，立即，我遇到了另一个错误，如下面的截图所示。
- en: '![Figure 15.20 – Amazon Q – another AWS Lambda error](img/B21378_15_20.jpg)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![图15.20 – Amazon Q – 另一个AWS Lambda错误](img/B21378_15_20.jpg)'
- en: Figure 15.20 – Amazon Q – another AWS Lambda error
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.20 – Amazon Q – 另一个AWS Lambda错误
- en: Looks like the library issue got resolved, but the function timed out. Instead
    of combing through the logs for the reason for this issue, I clicked the **Troubleshoot
    with Amazon Q** button again. The following screenshot shows the analysis of the
    issue along with the resolution provided by Amazon Q.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 看起来库的问题已经解决了，但函数超时了。为了找出这个问题的原因，我没有逐行检查日志，而是再次点击了**使用Amazon Q进行故障排除**按钮。下面的截图显示了Amazon
    Q提供的错误分析和解决方案。
- en: '![Figure 15.21 – Amazon Q – analysis and resolution for the AWS Lambda timeout
    error](img/B21378_15_21.jpg)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![图15.21 – Amazon Q – AWS Lambda超时错误的分析和解决](img/B21378_15_21.jpg)'
- en: Figure 15.21 – Amazon Q – analysis and resolution for the AWS Lambda timeout
    error
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.21 – Amazon Q – AWS Lambda超时错误的分析和解决
- en: Sometimes, simple issues cause frustration and waste time trying to figure out
    the cause. Amazon Q understood the issue and provided exact steps to resolve the
    problem in seconds. This example may be simple but it highlights the productivity
    gains all AWS builders will experience once they start leveraging Amazon Q to
    troubleshoot issues in the AWS Management Console.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，简单的问题会导致挫败感，并浪费时间去试图找出原因。Amazon Q理解了这个问题，并在几秒钟内提供了解决问题的确切步骤。这个例子可能很简单，但它突出了所有开始利用Amazon
    Q在AWS管理控制台中解决问题的AWS构建者将体验到的生产力提升。
- en: Finally, after increasing the timeout, the Lambda test was completed successfully,
    and the following screenshot confirms that the image was resized.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在增加超时时间后，Lambda测试成功完成，以下截图确认了图像已被调整大小。
- en: '![Figure 15.22 – Amazon Q – successful execution of the AWS Lambda function](img/B21378_15_22.jpg)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![图15.22 – Amazon Q – AWS Lambda函数成功执行](img/B21378_15_22.jpg)'
- en: Figure 15.22 – Amazon Q – successful execution of the AWS Lambda function
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.22 – Amazon Q – AWS Lambda函数成功执行
- en: You can check the destination S3 bucket to find a resized image in there.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以检查目标S3存储桶，以找到其中的调整大小后的图像。
- en: This brings us to the end of our use case; however, another feature of Q can
    help you understand what resources exist in your account. In other words, Amazon
    Q is also aware of the AWS resources that are being used in your accounts.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 这使我们的用例结束；然而，Q的另一个功能可以帮助您了解账户中存在哪些资源。换句话说，Amazon Q也了解您账户中正在使用的AWS资源。
- en: Awareness of AWS account resources
  id: totrans-152
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 了解AWS账户资源
- en: So far in this chapter, we have seen how Amazon Q assists builders in creating
    solutions on AWS by generating architecture patterns, best practices, and also
    code. But what if the builders need assistance with AWS resources that are already
    built in their AWS account and want to know more details about them without having
    to find this information individually? Amazon Q is now not only aware of the AWS
    resources in your account but can also answer questions about costs, helping you
    better understand and create optimization strategies. Let’s quickly look at these
    features.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，在本章中，我们已经看到Amazon Q如何通过生成架构模式、最佳实践以及代码来帮助构建者在AWS上创建解决方案。但如果构建者需要帮助处理他们AWS账户中已经构建的AWS资源，并希望了解更多细节，而无需单独查找这些信息呢？现在，Amazon
    Q不仅了解您账户中的AWS资源，还可以回答有关成本的问题，帮助您更好地理解和创建优化策略。让我们快速查看这些功能。
- en: Analyzing resources with Amazon Q
  id: totrans-154
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用Amazon Q分析资源
- en: Before you ask Q to analyze your resources, ensure that IAM permissions are
    granted for the action you are asking Q to perform. For example, if you are asking
    Q to list all S3 buckets in your account, then the `s3:ListAllMyBuckets` IAM permission
    must be granted.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 在您要求Q分析您的资源之前，请确保为Q要执行的操作授予了IAM权限。例如，如果您要求Q列出您账户中的所有S3存储桶，那么必须授予`s3:ListAllMyBuckets`
    IAM权限。
- en: The following screenshot shows all the EC2 instances I used for my use case.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了我在我的用例中使用的所有EC2实例。
- en: '![Figure 15.23 – Amazon Q – AWS resource analysis](img/B21378_15_23.jpg)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![图15.23 – Amazon Q – AWS资源分析](img/B21378_15_23.jpg)'
- en: Figure 15.23 – Amazon Q – AWS resource analysis
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.23 – Amazon Q – AWS资源分析
- en: You can ask refined questions to get many such insights into the AWS resources
    that you have provisioned. In the following screenshot, we are checking the encryption
    settings for the bucket we provisioned for our use case in this chapter.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以提出更精确的问题，以获得对您已配置的AWS资源的许多此类洞察。在以下截图中，我们正在检查我们为本章中的用例配置的存储桶的加密设置。
- en: '![Figure 15.24 – Amazon Q – AWS resource setting analysis](img/B21378_15_24.jpg)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![图15.24 – Amazon Q – AWS资源设置分析](img/B21378_15_24.jpg)'
- en: Figure 15.24 – Amazon Q – AWS resource setting analysis
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.24 – Amazon Q – AWS资源设置分析
- en: Before we conclude this chapter, we definitely want to know the costs associated
    with the use case. In fact, all teams using AWS for their workloads explore costs
    along with their management to ensure expenses do not proliferate due to unnecessary
    actions. Amazon Q can help with this aspect too.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们结束本章之前，我们肯定想了解与用例相关的成本。实际上，所有使用AWS处理其工作负载的团队都会探索成本及其管理，以确保由于不必要的操作而导致支出激增。Amazon
    Q也可以在这方面提供帮助。
- en: Analyzing costs with Amazon Q
  id: totrans-163
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用Amazon Q分析成本
- en: Amazon Q enables seamless cost management by retrieving, explaining, and analyzing
    your cost data, allowing you to understand your expenses.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: Amazon Q 通过检索、解释和分析您的成本数据，实现了无缝的成本管理，使您能够了解您的支出。
- en: When you inquire about your costs, Amazon Q provides detailed responses that
    include specific cost figures, associated metrics, time periods, and granular
    details, along with any applied groups or filters. Additionally, it offers a link
    to an AWS Cost Explorer view with the same specifications, enabling you to visualize
    or download the data for further analysis.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 当你查询你的成本时，Amazon Q提供详细的响应，包括具体的成本数字、相关指标、时间段以及细粒度细节，以及任何应用的组或过滤器。此外，它还提供了一个链接到具有相同规范的AWS
    Cost Explorer视图，使你能够可视化或下载数据以进行进一步分析。
- en: The following is a simple example of asking Q for costs for our EC2 instances
    for a particular month of the year.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个简单的例子，说明如何询问Q为我们特定月份的EC2实例的成本。
- en: '![Figure 15.25 – Amazon Q – AWS cost analysis](img/B21378_15_25.jpg)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![图15.25 – Amazon Q – AWS成本分析](img/B21378_15_25.jpg)'
- en: Figure 15.25 – Amazon Q – AWS cost analysis
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 图15.25 – Amazon Q – AWS成本分析
- en: 'For Amazon Q to analyze the costs, AWS Cost Explorer needs to be enabled. After
    that, you can chat with Q and ask any variation of cost exploration questions,
    such as the following:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 为了让Amazon Q分析成本，需要启用AWS Cost Explorer。之后，你可以与Q聊天并询问任何成本探索问题的变体，如下所示：
- en: How much did we spend on EC2 in 2024?
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们在2024年在EC2上花费了多少钱？
- en: What were my EC2 costs by instance types for the past 6 months?
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 过去6个月中，我的EC2成本按实例类型如何？
- en: Which linked accounts spent the most on Redshift last month?
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 哪些链接账户在上个月花费在Redshift上的最多？
- en: This brings us to the end of the chapter; however, we are just scratching the
    surface in terms of what Amazon Q can do. With generative AI rapidly evolving,
    expect many more new features and capabilities in Amazon Q pertaining to solving
    use cases in AWS.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 这使我们到达了本章的结尾；然而，在Amazon Q能做什么方面，我们只是触及了表面。随着生成式AI的快速发展，预计Amazon Q将会有更多的新功能和能力，涉及解决AWS中的用例。
- en: Summary
  id: totrans-174
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we covered how Amazon Q can assist in building solutions on
    AWS. Amazon Q helps with many aspects of the build process, including providing
    architecture patterns and best practices, diagnosing AWS console errors, troubleshooting
    networking issues, creating support cases, and understanding all provisioned AWS
    resources along with their costs.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们介绍了如何使用Amazon Q在AWS上构建解决方案。Amazon Q在构建过程的许多方面提供帮助，包括提供架构模式和最佳实践、诊断AWS控制台错误、解决网络问题、创建支持案例以及理解所有已配置的AWS资源及其成本。
- en: In the next and final chapter, we will look at another key aspect for DevOps
    builders and how Amazon Q can help fast-track many aspects of it.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章和最后一章中，我们将探讨DevOps构建者的另一个关键方面，以及Amazon Q如何帮助快速推进其许多方面。
- en: References
  id: totrans-177
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参考文献
- en: 'AWS support plans: [https://aws.amazon.com/premiumsupport/plans/](https://aws.amazon.com/premiumsupport/plans/)'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: AWS支持计划：[https://aws.amazon.com/premiumsupport/plans/](https://aws.amazon.com/premiumsupport/plans/)
