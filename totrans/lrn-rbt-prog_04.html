<html><head></head><body><div id="sbo-rt-content"><div id="_idContainer047">
			<h1 id="_idParaDest-50"><em class="italic"><a id="_idTextAnchor050"/>Chapter 3</em>: Exploring the Raspberry Pi</h1>
			<p>In the previous chapter, we saw the Raspberry Pi in the deconstruction of a robot. It's no surprise, then, that we'll build a robot using the <strong class="bold">Raspberry Pi</strong>.</p>
			<p>In this chapter, we will be using the <strong class="bold">Raspberry Pi 3A+</strong> as a <strong class="bold">controller</strong>. We'll look at various options when examining this choice, and look at features such as the connections on the Raspberry Pi and how we will use them to understand our decision. We'll move on to exploring <strong class="bold">Raspberry Pi OS</strong>, and will finish by preparing the OS for use on the Raspberry Pi.</p>
			<p>The following topics will be covered in this chapter:</p>
			<ul>
				<li>Exploring the Raspberry Pi's capabilities</li>
				<li>Choosing the connections</li>
				<li>What is Raspberry Pi OS?</li>
				<li>Preparing an SD card with Raspberry Pi OS</li>
			</ul>
			<h1 id="_idParaDest-51"><a id="_idTextAnchor051"/>Technical requirements</h1>
			<p>For this chapter, you will need the following:</p>
			<ul>
				<li>A Micro SD card storing 16 GB or more</li>
				<li>A Raspberry Pi 3A+</li>
				<li>A Windows, Linux, or macOS computer or laptop connected to the internet and able to read/write to SD cards</li>
			</ul>
			<p>Check out the following video to see the code in action: <a href="https://bit.ly/3bBJQt9">https://bit.ly/3bBJQt9</a>.</p>
			<h1 id="_idParaDest-52"><a id="_idTextAnchor052"/>Exploring the Raspberry Pi's capabilities</h1>
			<p>As we saw in <a href="B15660_02_Final_ASB_ePub.xhtml#_idTextAnchor033"><em class="italic">Chapter 2</em></a>, <em class="italic">Exploring Robot Building Blocks – Code and Electronics</em>, the controllers <a id="_idIndexMarker109"/>used for a robot can be one of the most critical choices you make. This will determine what kinds of inputs and outputs you have, what the power requirements of your electronics will be, what types of sensors you will be able to use, and what code you will run. Changing a controller could mean rewriting the code, redesigning where the controller would fit, and changing the power requirements.</p>
			<p>The Raspberry Pi is a range of small computers designed for use in education. Having I/O pins for connecting it to custom hardware, while being a complete computer, makes it a favorite of makers (a term for people who like to make things for a hobby, like robots and gadgets). This is helped by the relatively cheap cost and small size of a microcontroller compared to standard computing devices. All Raspberry Pi models have abilities including attaching a camera, display, and keyboard, as well as some kind of networking.</p>
			<h2 id="_idParaDest-53"><a id="_idTextAnchor053"/>Speed and power</h2>
			<p>The Raspberry Pi<a id="_idIndexMarker110"/> is powerful enough to handle some visual <a id="_idIndexMarker111"/>processing tasks, such as facial recognition and tracking objects, with later models being able to perform this faster. The same can be said for voice recognition tasks too. It is for this reason that the faster 4B, 3B+, and 3A+ models are recommended. The Zero and Zero W models are much slower, and although the system will still work, the speed may be frustrating.</p>
			<p>The Raspberry Pi<a id="_idIndexMarker112"/> is a <strong class="bold">Single-Board Computer</strong> (<strong class="bold">SBC</strong>) that is powerful enough to run a complete computer OS, specifically versions of <strong class="bold">Linux</strong>. We will explore this in the <em class="italic">What is Raspberry Pi OS?</em> section, but this allows us to use <strong class="bold">Python</strong> to perform <a id="_idIndexMarker113"/>visual processing and voice processing using libraries and tools that are <a id="_idIndexMarker114"/>well maintained by others. Microcontrollers, such<a id="_idIndexMarker115"/> as the <strong class="bold">Arduino</strong>, <strong class="bold">Esp8266</strong>, and <strong class="bold">micro:bit</strong>, simply do not have the capabilities to perform these tasks.</p>
			<p>Some <a id="_idIndexMarker116"/>alternative <a id="_idIndexMarker117"/>SBCs<a id="_idIndexMarker118"/> that are <a id="_idIndexMarker119"/>usable <a id="_idIndexMarker120"/>as<a id="_idIndexMarker121"/> controllers <a id="_idIndexMarker122"/>run <a id="_idIndexMarker123"/>Linux, such as the <strong class="bold">BeagleBone</strong>, <strong class="bold">CHIP</strong>, <strong class="bold">OnionIoT</strong>, and <strong class="bold">Gumstix Linux</strong> computers, but these are either more costly than the Raspberry Pi or less capable. Only some come with camera integration. Although the BeagleBone has superior analog IO connectivity, the Raspberry Pi 3A+ is more of an all-rounder and has many options to extend it.</p>
			<h2 id="_idParaDest-54"><a id="_idTextAnchor054"/>Connectivity and networking</h2>
			<p>The Raspberry <a id="_idIndexMarker124"/>Pi 3A+ comes with USB ports and HDMI<a id="_idIndexMarker125"/> ports too. We don't plan on using them in this book, although they are handy for debugging if things go wrong and you lose contact with a robot. With that in mind, having an additional screen and keyboard available is recommended.</p>
			<p>The Raspberry Pi 4, 3, and Zero W series all have Wi-Fi and Bluetooth onboard. Throughout this book, we will be using Wi-Fi to connect to the robot, so we recommend a model that has this. Wi-Fi can be used to program the robot, drive it, and start code running on it.</p>
			<p>The Raspberry Pi has I/O <a id="_idIndexMarker126"/>pins to allow you to connect it to the sensors. In the Raspberry Pi 3A+, the <strong class="bold">General Purpose Input/Output</strong> (<strong class="bold">GPIO</strong>) connections are ready to use, due to having the pins (known as headers) already soldered in place. The Raspberry Pi Zero and Zero W models come without the headers attached. The first Raspberry Pi boards also had different I/O connectors. These reasons make the 3 and 4 series Raspberry Pi the best choice.</p>
			<h2 id="_idParaDest-55"><a id="_idTextAnchor055"/>Picking the Raspberry Pi 3A+</h2>
			<p>Putting all this<a id="_idIndexMarker127"/> together, the Raspberry Pi 3A+ is a complete computer. The following list of features meets all our needs:</p>
			<ul>
				<li>I/O</li>
				<li>A connector for a camera</li>
				<li>Capable of visual and speech processing</li>
				<li>Onboard Wi-Fi and Bluetooth</li>
				<li>Runs Python code</li>
				<li>Pre-soldered headers ready for connecting to robot devices</li>
				<li>Small and relatively cheap</li>
			</ul>
			<p>In addition to this, the 3A+ has a quad-core ARM-based CPU running at 1.4 GHz, which will be enough for our use case. Later Raspberry Pi versions may supersede this model with faster processing and additional capabilities.</p>
			<h1 id="_idParaDest-56"><a id="_idTextAnchor056"/>Choosing the connections</h1>
			<p>When building the <a id="_idIndexMarker128"/>robot, we will use a subset of the connections the Raspberry Pi has to offer. Let's take a look at what those connections are and how we will use them. As we connect sensors and parts to the Raspberry Pi, we will cover the connections in detail, so do not feel like you need to memorize these now. However, the following pin diagram can serve as a reference for these connections.</p>
			<p>In <em class="italic">Figure 3.1</em>, the highlighted areas show the connections in use:</p>
			<div>
				<div id="_idContainer038" class="IMG---Figure">
					<img src="Images/B15660_03_01.jpg" alt="" width="863" height="603"/>
				</div>
			</div>
			<p class="figure-caption">Figure 3.1 – Raspberry Pi connections</p>
			<p>First, we will be using the power connector, labeled <strong class="bold">Power In</strong> and located at the bottom left of the diagram. This plugs in via a micro-USB connector similar to that on many phones. We will use this while learning to go headless, and this is one of the options for powering a robot. We can plug USB battery packs into this port if they can provide the correct amount of power. Raspberry Pi recommends 2.5 A power supplies, although anything over 2 A will usually suffice.</p>
			<p>The lower-middle<a id="_idIndexMarker129"/> highlighted port is the camera (<strong class="bold">Camera Serial Interface</strong> (<strong class="bold">CSI</strong>)) port; this is for the <strong class="bold">Pi camera</strong>, which we will attach when preparing to <a id="_idIndexMarker130"/>do visual processing.</p>
			<p>We will be using the Micro SD card slot under the Raspberry Pi to run our code. We will not be using Ethernet or HDMI, as we will be talking to the Raspberry Pi via Wi-Fi. The large connector <a id="_idIndexMarker131"/>across the top of <em class="italic">Figure 3.1</em> is the GPIO port:</p>
			<div>
				<div id="_idContainer039" class="IMG---Figure">
					<img src="Images/B15660_03_02.jpg" alt="" width="1425" height="592"/>
				</div>
			</div>
			<p class="figure-caption">Figure 3.2 – The Raspberry Pi GPIO port (B+, 2, 3, 3B+, Zero, and Zero W)</p>
			<p><em class="italic">Figure 3.2</em> shows a close-up of the GPIO port with the names and uses of some of the pins. This is where we will connect most of our sensors and motors. External devices can be attached to <strong class="bold">SPI</strong>, <strong class="bold">I2C</strong>, <strong class="bold">Serial</strong>, and <strong class="bold">I2S</strong> data buses, or to digital I/O pins.</p>
			<h3 id="_idParaDest-57">Power pins</h3>
			<p>The 5 V and 3.3 V pins<a id="_idIndexMarker132"/> are used for power, along with the pins marked <strong class="bold">GND</strong>. GND is an abbreviation <a id="_idIndexMarker133"/>of <strong class="bold">ground</strong>, which is the equivalent of a minus terminal on a battery or power supply. The 5 V pin can be used to supply the Pi with power from batteries. 5 V and 3.3 V can be used to supply small electronics or sensors.</p>
			<h3 id="_idParaDest-58">Data buses</h3>
			<p>SPI, I2C, and<a id="_idIndexMarker134"/> Serial are used to send control and sensor data<a id="_idIndexMarker135"/> between a controller and smart devices. I2S is used to carry encoded digital audio signals (<strong class="bold">PCM</strong>) to and from the Raspberry Pi. The ports for these data buses can be enabled through configuration, or the pins can be used as general digital pins when the data buses are turned off.</p>
			<p>The pins marked <strong class="bold">SDA</strong> and <strong class="bold">SCL</strong> are an I2C data bus. We use this for sensors and motor control boards. Instructions are sent over this port.</p>
			<p>Pins <strong class="bold">9</strong>, <strong class="bold">10</strong>, and <strong class="bold">11</strong> form the SPI port, which we use to drive RGB LEDs.</p>
			<p>Although there is an audio port on the Raspberry Pi, this is not really suitable for driving a speaker, so we will be using the I2S pins on the GPIO port for this. The I2S pins are <strong class="bold">18</strong>, <strong class="bold">19</strong>, <strong class="bold">20</strong>, and <strong class="bold">21</strong>. As they also have pins for audio input, we use this for voice processing.</p>
			<h3 id="_idParaDest-59">General IO</h3>
			<p>The other <a id="_idIndexMarker136"/>pins <a id="_idIndexMarker137"/>that are numbered, without a specific word or shading type, are general-purpose I/O pins. General I/O pins are used for digital inputs and outputs with servo motors, encoders, and ultrasonic sensors.</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">Why are the numbers mixed up? The numbers used in most Raspberry Pi documentation are BCM numbers, which correspond to pins on the main Broadcom chip. Use <em class="italic">Figure 3.2</em> for reference.</p>
			<h2 id="_idParaDest-60"><a id="_idTextAnchor057"/>Raspberry Pi HATs</h2>
			<p><strong class="bold">Raspberry Pi HATs</strong> (also named<a id="_idIndexMarker138"/> Bonnets) are circuit boards designed to plug into the GPIO header and conveniently connect the Raspberry Pi to devices such as motors or sensors.</p>
			<p>Some boards carry through GPIO pins for further boards/connections to use them, and others will need extender boards to gain access to the pins.</p>
			<p>HATs use GPIO pins for different purposes; for example, audio HATs will use the I2S pins for audio interfacing, but some motor controller HATs use the same pins to control motors instead. Using these HATs together can be problematic, so be aware of this when using multiple HATs or specific buses. We will explore this more in <a href="B15660_06_Final_ASB_ePub.xhtml#_idTextAnchor096"><em class="italic">Chapter 6</em></a>, <em class="italic">Building Robot Basics – Wheels, Power, and Wiring</em>, when we choose a motor controller.</p>
			<h1 id="_idParaDest-61"><a id="_idTextAnchor058"/>What is Raspberry Pi OS?</h1>
			<p>Raspberry Pi OS is<a id="_idIndexMarker139"/> the choice of software we use to drive the Raspberry Pi, an OS that our code will run in. It is the Raspberry Pi Foundation's official OS and comes with software prepared to make working with the Raspberry Pi easier. Raspberry Pi OS can support a full desktop or a minimal command line and network-only system.</p>
			<p>Raspberry Pi OS is <a id="_idIndexMarker140"/>based on the <strong class="bold">Debian</strong> Linux distribution. Debian is a collection of software set up to run together, giving lots of functionality and many possibilities. Linux distributions like this are the basis of many internet servers, mobile phones, and other devices. The OS's software is optimized for the Raspberry Pi hardware, namely the kernel and drivers, which are made specifically for it. It also has some neat ways to configure the specialized features that Raspberry Pi users might need.</p>
			<p>We will use it in a more minimal way than a desktop, forgoing the keyboard, mouse, and monitor support. This <a id="_idIndexMarker141"/>minimal version is known as <strong class="bold">Raspberry Pi OS Lite</strong> because it is a much smaller download when desktop software is not required, and it uses less space on the micro SD card. Not running a window manager frees up memory and uses less of the processing power of the Raspberry Pi, keeping it free for activities such as visual processing. We will extend Raspberry Pi OS Lite with the software and tools we will use to program our robot.</p>
			<p>As you work through the book, you will mostly interact with the robot through code and the command line. Linux and Raspberry Pi OS are written with command-line usage over a network in mind, which is a good fit for the headless nature of programming a robot.</p>
			<p>We use Linux's strong support for the Python programming language and the network tools that Linux provides. Raspberry Pi OS is widely used in the Raspberry Pi community and is among the<a id="_idIndexMarker142"/> easiest to find answers for when help is needed. It is not the only OS for the Pi, but it is the most useful choice for someone starting on the Raspberry Pi.</p>
			<h1 id="_idParaDest-62"><a id="_idTextAnchor059"/>Preparing an SD card with Raspberry Pi OS</h1>
			<p>To use<a id="_idIndexMarker143"/> Raspberry Pi OS on a Raspberry Pi, you need to<a id="_idIndexMarker144"/> put the software onto a micro SD card in a way that means the Raspberry Pi can load it.</p>
			<p>Raspberry Pi has created the Raspberry Pi Imager to put software onto an SD card. Let's download it and get the right image on our card:</p>
			<ol>
				<li value="1">Visit the Raspberry Pi software downloads page at <a href="http://raspberrypi.org/software">raspberrypi.org/software</a>, and select the <strong class="bold">Download for</strong> button for your computer, as shown in the following screenshot: <div id="_idContainer040" class="IMG---Figure"><img src="Images/B15660_03_03.jpg" alt="" width="1042" height="377"/></div><p class="figure-caption">Figure 3.3 – Downloading the Raspberry Pi Imager</p><p><em class="italic">Figure 3.3</em> shows what this will look like; it should highlight the correct download button for your computer.</p></li>
				<li>Install this using the instructions from Raspberry Pi.</li>
				<li>Insert your micro SD card into the correct port on your laptop. You may need an adaptor.</li>
				<li>Launch the <a id="_idIndexMarker145"/>Imager. We'll start here by<a id="_idIndexMarker146"/> choosing the OS. Select the <strong class="bold">CHOOSE OS</strong> button:<div id="_idContainer041" class="IMG---Figure"><img src="Images/B15660_03_04.jpg" alt="" width="951" height="151"/></div><p class="figure-caption">Figure 3.4 – The CHOOSE OS button</p><p><em class="italic">Figure 3.4</em> shows the <strong class="bold">CHOOSE OS</strong> button, found in the lower right of the Imager screen.</p></li>
				<li>When you select this button, it will bring up a list of OSes to flash on the card:<div id="_idContainer042" class="IMG---Figure"><img src="Images/B15660_03_05.jpg" alt="" width="811" height="134"/></div><p class="figure-caption"> Figure 3.5 – The OS list</p><p><em class="italic">Figure 3.5</em> shows the list of OSes offered by the image. Choose <strong class="bold">Raspberry Pi OS (other)</strong>.</p></li>
				<li>Under the other menu, there is a further selection of Raspberry Pi OS flavors:<div id="_idContainer043" class="IMG---Figure"><img src="Images/B15660_03_06.jpg" alt="" width="835" height="195"/></div><p class="figure-caption"> Figure 3.6 – The Raspberry Pi OS selection screen</p><p>Because we are trying to keep things minimal, select <strong class="bold">Raspberry Pi OS Lite (32-bit)</strong> from this menu.</p></li>
				<li>You should now click <strong class="bold">CHOOSE SD CARD</strong>:<div id="_idContainer044" class="IMG---Figure"><img src="Images/B15660_03_07.jpg" alt="" width="944" height="149"/></div><p class="figure-caption"> Figure 3.7 – Choosing an SD card</p></li>
				<li>This will <a id="_idIndexMarker147"/>pop up a list of SD cards, which <a id="_idIndexMarker148"/>should show the card you are using:<div id="_idContainer045" class="IMG---Figure"><img src="Images/B15660_03_08.jpg" alt="" width="779" height="101"/></div><p class="figure-caption">Figure 3.8 – The SD card selection</p><p>Select this to continue.</p></li>
				<li>You are now ready to write this. Click the <strong class="bold">WRITE</strong> button:<div id="_idContainer046" class="IMG---Figure"><img src="Images/B15660_03_09.jpg" alt="" width="891" height="113"/></div><p class="figure-caption">Figure 3.9 – The WRITE button</p></li>
				<li>It will ask you if you are sure here; click <strong class="bold">YES</strong> to continue. It will take some time to download and write the image.</li>
			</ol>
			<p>You can load this onto a Raspberry Pi with a screen and keyboard, but before we can use this Raspberry<a id="_idIndexMarker149"/> Pi for a robot, we'll make changes to<a id="_idIndexMarker150"/> the SD card on your computer in the next chapter.</p>
			<h1 id="_idParaDest-63"><a id="_idTextAnchor060"/>Summary</h1>
			<p>In this chapter, you've seen more of what the Raspberry Pi is, and which connections on the Raspberry Pi we will use.</p>
			<p>We've learned about the Raspberry Pi OS, which is derived from Linux, how to download it, and how to put this software onto a micro SD card for use in the Raspberry Pi.</p>
			<p>In the next chapter, we will make this card headless so that we do not need a screen, keyboard, or mouse to use this Raspberry Pi and contact it from our computer.</p>
			<h1 id="_idParaDest-64"><a id="_idTextAnchor061"/>Assessment</h1>
			<ol>
				<li value="1">I've recommended a Raspberry Pi 3A+. There are likely to be new models of the Raspberry Pi not considered. What would be their trade-offs? Think about cost, size, power consumption, and computing speed.</li>
				<li>Try other Raspberry Pi OS or Raspberry Pi distributions; some will need a keyboard and mouse. Be sure to return to Raspberry Pi OS Lite before carrying on in the book.</li>
				<li>I've mentioned the camera (CSI) connector, power, and GPIO ports. Take a look at the other ports on the Raspberry Pi, and perhaps see what they can be used for.</li>
			</ol>
			<h1 id="_idParaDest-65"><a id="_idTextAnchor062"/>Further reading</h1>
			<p>Refer to the following links:</p>
			<ul>
				<li>The Raspberry Pi Foundation guide to installing Raspberry Pi operating systems: <a href="https://www.raspberrypi.org/documentation/installation/installing-images/README.md">https://www.raspberrypi.org/documentation/installation/installing-images/README.md</a>.</li>
				<li><em class="italic">Raspberry Pi By Example</em>, <em class="italic">Ashwin Pajankar</em> and <em class="italic">Arush Kakkar</em>, <em class="italic">Packt Publishing</em>, which has a section on alternative OSes for a Raspberry Pi, along with many exciting Raspberry Pi projects.</li>
				<li>Raspberry Pi GPIO pinout (<a href="https://pinout.xyz/">https://pinout.xyz/</a>): This describes how different boards are connected to the Raspberry Pi in terms of the pins they actually use. It's useful to know that most boards only use a subset of these pins.</li>
			</ul>
		</div>
	</div></body></html>