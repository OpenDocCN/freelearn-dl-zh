<html><head></head><body>
  <div id="_idContainer265">
   <h1 class="chapter-number" id="_idParaDest-268">
    <a id="_idTextAnchor270">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     14
    </span>
   </h1>
   <h1 id="_idParaDest-269">
    <a id="_idTextAnchor271">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Implementing Interactable Elements with Smart Objects
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     In Unreal Engine,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.4.1">
      Smart Objects
     </span>
    </strong>
    <span class="koboSpan" id="kobo.5.1">
     represent
    </span>
    <a id="_idIndexMarker732">
    </a>
    <span class="koboSpan" id="kobo.6.1">
     an advanced system implemented to help developers create interactive and context-aware elements within a game.
    </span>
    <span class="koboSpan" id="kobo.6.2">
     Smart Objects are designed to enhance gameplay by allowing characters – be they player characters or AI agents – to interact with the environment in a more meaningful way through a reservation system.
    </span>
    <span class="koboSpan" id="kobo.6.3">
     Learning how to use Smart Objects will let you, the developer, create dynamic and interactive environments that enhance gameplay and improve AI behavior for a more immersive
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.7.1">
      player experience.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.8.1">
     In this chapter, you will learn the basics of Smart Objects interactivity.
    </span>
    <span class="koboSpan" id="kobo.8.2">
     We will visit a simple example of how to make AI agents interact with a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.9.1">
      smart object.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.10.1">
     In this chapter, we will be covering the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.11.1">
      following topics:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.12.1">
      Introducing
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.13.1">
       Smart Objects
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.14.1">
      Creating a Smart Object Definition
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.15.1">
       data asset
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.16.1">
      Implementing Smart
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.17.1">
       Object logic
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.18.1">
      Interacting with
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.19.1">
       Smart Objects
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-270">
    <a id="_idTextAnchor272">
    </a>
    <span class="koboSpan" id="kobo.20.1">
     Technical requirements
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.21.1">
     To follow the topics presented in this chapter, you should have completed all the chapters from
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.22.1">
      Part 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.23.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.24.1">
      Working with Decision Making
     </span>
    </em>
    <span class="koboSpan" id="kobo.25.1">
     , and understood their content.
    </span>
    <span class="koboSpan" id="kobo.25.2">
     In particular, we will be using part of the code implemented up until
    </span>
    <a href="B31016_11.xhtml#_idTextAnchor218">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.26.1">
        Chapter 11
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.27.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.28.1">
      Understanding the Environment
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.29.1">
       Query System
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.30.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.31.1">
     Additionally, if you would prefer to begin with code from the companion repository for this book, you can download the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.32.1">
      .zip
     </span>
    </strong>
    <span class="koboSpan" id="kobo.33.1">
     project files provided in the project
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.34.1">
      repository:
     </span>
    </span>
    <a href="https://github.com/PacktPublishing/Artificial-Intelligence-in-Unreal-Engine-5">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.35.1">
       https://github.com/PacktPublishing/Artificial-Intelligence-in-Unreal-Engine-5
      </span>
     </span>
    </a>
   </p>
   <p>
    <span class="koboSpan" id="kobo.36.1">
     To download the files from the end of the last chapter, click the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.37.1">
      Unreal Agility Arena –
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.38.1">
       Chapter 11
      </span>
     </strong>
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.39.1">
      -
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.40.1">
       End
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.41.1">
      link.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-271">
    <a id="_idTextAnchor273">
    </a>
    <span class="koboSpan" id="kobo.42.1">
     Introducing Smart Objects
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.43.1">
     Smart objects are
    </span>
    <a id="_idIndexMarker733">
    </a>
    <span class="koboSpan" id="kobo.44.1">
     elements placed within a level that can be interacted with by both AI agents and players.
    </span>
    <span class="koboSpan" id="kobo.44.2">
     These objects do not contain any execution logic but hold all the necessary information for interactions; additionally, they can be queried at runtime with different methods, such as
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.45.1">
      environment queries.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.46.1">
     Smart objects represent a set of activities within a level that can be accessed through a reservation system; if a smart object slot has been claimed by an AI agent, no other agent will be able to use it until it
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.47.1">
      is released.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-272">
    <a id="_idTextAnchor274">
    </a>
    <span class="koboSpan" id="kobo.48.1">
     Presenting the main elements of the Smart Objects framework
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.49.1">
     Like all Unreal Engine
    </span>
    <a id="_idIndexMarker734">
    </a>
    <span class="koboSpan" id="kobo.50.1">
     plugins, smart objects are organized into a series of elements, each responsible for a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.51.1">
      specific task.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.52.1">
     The
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.53.1">
      SmartObject subsystem
     </span>
    </strong>
    <span class="koboSpan" id="kobo.54.1">
     is responsible
    </span>
    <a id="_idIndexMarker735">
    </a>
    <span class="koboSpan" id="kobo.55.1">
     for monitoring all available smart objects within the level and is automatically instantiated in the world when the Smart Objects plugin is enabled.
    </span>
    <span class="koboSpan" id="kobo.55.2">
     Smart objects are automatically registered with the subsystem for easy access
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.56.1">
      and tracking.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.57.1">
     A
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.58.1">
      Smart Object Definition
     </span>
    </strong>
    <span class="koboSpan" id="kobo.59.1">
     is a data asset
    </span>
    <a id="_idIndexMarker736">
    </a>
    <span class="koboSpan" id="kobo.60.1">
     that holds immutable data shared among multiple runtime instances of smart objects.
    </span>
    <span class="koboSpan" id="kobo.60.2">
     It contains filtering information such as user-required tags, activity tags, object activation tags, and a default set of behavior definitions used to interact with a smart object.
    </span>
    <span class="koboSpan" id="kobo.60.3">
     Additionally, a Smart Object Definition features one or more
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.61.1">
      slots
     </span>
    </strong>
    <span class="koboSpan" id="kobo.62.1">
     that
    </span>
    <a id="_idIndexMarker737">
    </a>
    <span class="koboSpan" id="kobo.63.1">
     can be claimed by players or AI agents to use that specific smart object.
    </span>
    <span class="koboSpan" id="kobo.63.2">
     Each slot can be positioned relative to its parent, allowing you to define different slots in different positions for the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.64.1">
      same actor.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.65.1">
     To designate an actor as a smart object, you will be using
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.66.1">
      SmartObjectComponent
     </span>
    </strong>
    <span class="koboSpan" id="kobo.67.1">
     ; this component will reference a Smart Object
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.68.1">
      Definition asset.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.69.1">
     Smart Object Definitions can include one or
    </span>
    <a id="_idIndexMarker738">
    </a>
    <span class="koboSpan" id="kobo.70.1">
     more
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.71.1">
      activity tags
     </span>
    </strong>
    <span class="koboSpan" id="kobo.72.1">
     that describe the object.
    </span>
    <span class="koboSpan" id="kobo.72.2">
     They may also
    </span>
    <a id="_idIndexMarker739">
    </a>
    <span class="koboSpan" id="kobo.73.1">
     feature a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.74.1">
      tag query
     </span>
    </strong>
    <span class="koboSpan" id="kobo.75.1">
     , which consists of a list of desired tags.
    </span>
    <span class="koboSpan" id="kobo.75.2">
     This tag query serves as an expression to assess whether the user requesting access to the smart object is permitted to interact with it.
    </span>
    <span class="koboSpan" id="kobo.75.3">
     As an example, a Smart Object Definition may require a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.76.1">
      charging plug
     </span>
    </strong>
    <span class="koboSpan" id="kobo.77.1">
     tag that will be usable only by an AI agent that has that
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.78.1">
      exact tag.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.79.1">
     Now that you have a quick introduction to the Smart Objects framework, you’re all set to dive into your project and start creating your very own
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.80.1">
      smart object.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.81.1">
     Starting from the next section, we will be presenting you the basics of using Smart Objects inside Unreal Engine; we won’t cover all aspects of the framework as it can be used in many different ways – standalone, or with behavior trees, state trees, and even with Mass.
    </span>
    <span class="koboSpan" id="kobo.81.2">
     However, by
    </span>
    <a id="_idIndexMarker740">
    </a>
    <span class="koboSpan" id="kobo.82.1">
     the end of the chapter, you should have a clear understanding of what you can achieve
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.83.1">
      with it.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.84.1">
     Time to roll up our sleeves and dive into
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.85.1">
      some code!
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-273">
    <a id="_idTextAnchor275">
    </a>
    <span class="koboSpan" id="kobo.86.1">
     Creating a Smart Object Definition data asset
    </span>
   </h1>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.87.1">
      Dr.
     </span>
     <span class="koboSpan" id="kobo.87.2">
      Markus leaned back in his chair, a satisfied grin spreading across his face as he surveyed the cluttered lab.
     </span>
     <span class="koboSpan" id="kobo.87.3">
      Tools were scattered everywhere, and the faint hum of machinery filled the air.
     </span>
     <span class="koboSpan" id="kobo.87.4">
      Across the room, Professor Viktoria was hunched over one of their AI dummy puppets, her brow furrowed in
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.88.1">
       deep concentration.
      </span>
     </em>
    </span>
   </p>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.89.1">
      As the two of them immersed themselves in their work, the idea of upgrading the puppets took shape.
     </span>
     <span class="koboSpan" id="kobo.89.2">
      The goal was clear: to create puppets capable of not only performing tasks but also fixing themselves when something went awry.
     </span>
     <span class="koboSpan" id="kobo.89.3">
      This innovation promised to
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.90.1">
       be revolutionary.
      </span>
     </em>
    </span>
   </p>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.91.1">
      With renewed focus, Dr.
     </span>
     <span class="koboSpan" id="kobo.91.2">
      Markus’s fingers danced over the keyboard, typing lines of code that would breathe life into their vision.
     </span>
     <span class="koboSpan" id="kobo.91.3">
      Each keystroke brought them closer to a breakthrough, and Professor Viktoria’s eyes sparkled with excitement as they discussed the potential of
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.92.1">
       their project.
      </span>
     </em>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.93.1">
     In this section, and in
    </span>
    <a id="_idIndexMarker741">
    </a>
    <span class="koboSpan" id="kobo.94.1">
     the subsequent ones, you will be creating a gym where AI agents will use a smart object when needed; we will be using the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.95.1">
      BP_GunnerDummyCharacter
     </span>
    </strong>
    <span class="koboSpan" id="kobo.96.1">
     Blueprint we implemented in
    </span>
    <a href="B31016_09.xhtml#_idTextAnchor170">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.97.1">
        Chapter 9
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.98.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.99.1">
      Extending Behavior Trees
     </span>
    </em>
    <span class="koboSpan" id="kobo.100.1">
     , by changing its AI logic.
    </span>
    <span class="koboSpan" id="kobo.100.2">
     The gunner character will walk randomly, shoot around, and, when the gun jams, try to find a workbench in the level to fix
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.101.1">
      the gun.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.102.1">
     To start using the
    </span>
    <a id="_idIndexMarker742">
    </a>
    <span class="koboSpan" id="kobo.103.1">
     Smart Objects framework, the first thing we need to do is enable
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.104.1">
      the plugins.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-274">
    <a id="_idTextAnchor276">
    </a>
    <span class="koboSpan" id="kobo.105.1">
     Enabling the plugins
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.106.1">
     To enable the
    </span>
    <a id="_idIndexMarker743">
    </a>
    <span class="koboSpan" id="kobo.107.1">
     Smart Objects framework, open the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.108.1">
      Plugins
     </span>
    </strong>
    <span class="koboSpan" id="kobo.109.1">
     window, look for
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.110.1">
      SmartObjects
     </span>
    </strong>
    <span class="koboSpan" id="kobo.111.1">
     and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.112.1">
      GameplayBehaviorSmartObjects
     </span>
    </strong>
    <span class="koboSpan" id="kobo.113.1">
     , and enable both.
    </span>
    <span class="koboSpan" id="kobo.113.2">
     You will get a warning as the second plugin is still marked as experimental; go on and restart the Unreal
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.114.1">
      Engine Editor.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.115.1">
     Once the plugins are enabled, you will be ready to create your first
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.116.1">
      smart object.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-275">
    <a id="_idTextAnchor277">
    </a>
    <span class="koboSpan" id="kobo.117.1">
     Creating the workbench definition asset
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.118.1">
     We will now be creating
    </span>
    <a id="_idIndexMarker744">
    </a>
    <span class="koboSpan" id="kobo.119.1">
     the Smart Object Definition that, as previously mentioned, won’t contain any code logic; it will just serve to define the data that will make your soon-to-be-created actor a smart object.
    </span>
    <span class="koboSpan" id="kobo.119.2">
     To do so, open the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.120.1">
      AI
     </span>
    </strong>
    <span class="koboSpan" id="kobo.121.1">
     folder and do the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.122.1">
      following steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.123.1">
      Right-click and select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.124.1">
       Artificial Intelligence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.125.1">
      |
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.126.1">
        SmartObject Definition
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.127.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.128.1">
      Name the newly created asset
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.129.1">
       SOD_Workbench
      </span>
     </strong>
     <span class="koboSpan" id="kobo.130.1">
      and double-click to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.131.1">
       open it.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.132.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.133.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.134.1">
      panel, locate the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.135.1">
       Default Behavior Definitions
      </span>
     </strong>
     <span class="koboSpan" id="kobo.136.1">
      array attribute and click the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.137.1">
       +
      </span>
     </strong>
     <span class="koboSpan" id="kobo.138.1">
      button to add
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.139.1">
       an element.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.140.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.141.1">
       Index[0]
      </span>
     </strong>
     <span class="koboSpan" id="kobo.142.1">
      element to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.143.1">
       Gameplay Behavior Smart Object
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.144.1">
        Behavior Definition
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.145.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer250">
     <span class="koboSpan" id="kobo.146.1">
      <img alt="Figure 14.1 – Smart Object behavior definition" src="image/Figure_14.1_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.147.1">
     Figure 14.1 – Smart Object behavior definition
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.148.1">
     As previously stated, a Smart Object Definition contains filtering data that will be used by the system.
    </span>
    <span class="koboSpan" id="kobo.148.2">
     As we won’t be implementing anything complex, we don’t need a custom definition, and we will just be using the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.149.1">
      base one.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.150.1">
     It’s now time to add
    </span>
    <a id="_idIndexMarker745">
    </a>
    <span class="koboSpan" id="kobo.151.1">
     a slot, so do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.152.1">
      the following:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.153.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.154.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.155.1">
      panel, locate the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.156.1">
       Slots
      </span>
     </strong>
     <span class="koboSpan" id="kobo.157.1">
      section and click the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.158.1">
       +
      </span>
     </strong>
     <span class="koboSpan" id="kobo.159.1">
      button to add a new slot.
     </span>
     <span class="koboSpan" id="kobo.159.2">
      Expand the newly
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.160.1">
       created slot.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.161.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.162.1">
       Name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.163.1">
      property,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.164.1">
       insert
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.165.1">
        WorkingPlace
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.166.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.167.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.168.1">
       Shape
      </span>
     </strong>
     <span class="koboSpan" id="kobo.169.1">
      property
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.170.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.171.1">
        Rectangle
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.172.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.173.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.174.1">
       Size
      </span>
     </strong>
     <span class="koboSpan" id="kobo.175.1">
      property
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.176.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.177.1">
        120.0
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.178.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.179.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.180.1">
       Offset
      </span>
     </strong>
     <span class="koboSpan" id="kobo.181.1">
      property to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.182.1">
       (50.0,
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.183.1">
        0.0, 0.0)
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.184.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer251">
     <span class="koboSpan" id="kobo.185.1">
      <img alt="Figure 14.2 – Slot definition" src="image/Figure_14.2_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.186.1">
     Figure 14.2 – Slot definition
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.187.1">
     This slot will be the location that can be claimed by the AI agent to fix the gun once it jams and should look like the one in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.188.1">
       Figure 14
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.189.1">
       .3
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.190.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer252">
     <span class="koboSpan" id="kobo.191.1">
      <img alt="Figure 14.3 – Slot" src="image/Figure_14.3_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.192.1">
     Figure 14.3 – Slot
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.193.1">
     Keep in mind that you can add as many slots as you deem appropriate.
    </span>
    <span class="koboSpan" id="kobo.193.2">
     For example, a larger workbench may have more working places or even different ones – for instance, one for fixing guns and one for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.194.1">
      recharging batteries.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.195.1">
     In this section, we have created the Smart Object Definition we will be using to create a Smart Object actor.
    </span>
    <span class="koboSpan" id="kobo.195.2">
     As
    </span>
    <a id="_idIndexMarker746">
    </a>
    <span class="koboSpan" id="kobo.196.1">
     you can see, there’s no logic involved here because it’s handled by the Blueprint we’ll be creating in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.197.1">
      next section.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-276">
    <a id="_idTextAnchor278">
    </a>
    <span class="koboSpan" id="kobo.198.1">
     Implementing smart object logic
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.199.1">
     We are now ready to
    </span>
    <a id="_idIndexMarker747">
    </a>
    <span class="koboSpan" id="kobo.200.1">
     create the Blueprint that will contain the Smart Object definition, making it a fully functional Smart Object.
    </span>
    <span class="koboSpan" id="kobo.200.2">
     To do so, follow
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.201.1">
      these steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.202.1">
      Open the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.203.1">
       Blueprints
      </span>
     </strong>
     <span class="koboSpan" id="kobo.204.1">
      folder and create a new Blueprint extending from
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.205.1">
       Actor
      </span>
     </strong>
     <span class="koboSpan" id="kobo.206.1">
      .
     </span>
     <span class="koboSpan" id="kobo.206.2">
      Call it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.207.1">
       BP_Workbench
      </span>
     </strong>
     <span class="koboSpan" id="kobo.208.1">
      .
     </span>
     <span class="koboSpan" id="kobo.208.2">
      Double-click on the newly created asset to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.209.1">
       open it.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.210.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.211.1">
       Components
      </span>
     </strong>
     <span class="koboSpan" id="kobo.212.1">
      panel, add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.213.1">
       StaticMesh
      </span>
     </strong>
     <span class="koboSpan" id="kobo.214.1">
      component and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.215.1">
       select it.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.216.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.217.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.218.1">
      panel, set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.219.1">
       Rotation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.220.1">
      property to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.221.1">
       (0.0, 0.0, -90.0)
      </span>
     </strong>
     <span class="koboSpan" id="kobo.222.1">
      and the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.223.1">
       Static Mesh
      </span>
     </strong>
     <span class="koboSpan" id="kobo.224.1">
      property
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.225.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.226.1">
        Workbench_Decorated_Workbench_Decorated
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.227.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.228.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.229.1">
       Components
      </span>
     </strong>
     <span class="koboSpan" id="kobo.230.1">
      panel, add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.231.1">
       SmartObject
      </span>
     </strong>
     <span class="koboSpan" id="kobo.232.1">
      component and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.233.1">
       select it.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.234.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.235.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.236.1">
      panel, locate the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.237.1">
       Smart Object
      </span>
     </strong>
     <span class="koboSpan" id="kobo.238.1">
      category and set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.239.1">
       Smart Object Definition
      </span>
     </strong>
     <span class="koboSpan" id="kobo.240.1">
      property to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.241.1">
       SOD_Workbench
      </span>
     </strong>
     <span class="koboSpan" id="kobo.242.1">
      .
     </span>
     <span class="koboSpan" id="kobo.242.2">
      The viewport should now look like the one shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.243.1">
        Figure 14
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.244.1">
        .4
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.245.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer253">
     <span class="koboSpan" id="kobo.246.1">
      <img alt="Figure 14.4 – Viewport" src="image/Figure_14.4_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.247.1">
     Figure 14.4 – Viewport
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.248.1">
     Now, open the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.249.1">
      Event Graph
     </span>
    </strong>
    <span class="koboSpan" id="kobo.250.1">
     panel and do the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.251.1">
      following steps:
     </span>
    </span>
   </p>
   <ol>
    <li value="6">
     <span class="koboSpan" id="kobo.252.1">
      Add an
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.253.1">
        OnSmartObjectEvent
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.254.1">
       node.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.255.1">
      Connect the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.256.1">
       Event Data
      </span>
     </strong>
     <span class="koboSpan" id="kobo.257.1">
      pin to a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.258.1">
       Break
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.259.1">
        SmartObjectEventData
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.260.1">
       node.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.261.1">
      Connect the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.262.1">
       Reason
      </span>
     </strong>
     <span class="koboSpan" id="kobo.263.1">
      pin of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.264.1">
       Break SmartObjectEventData
      </span>
     </strong>
     <span class="koboSpan" id="kobo.265.1">
      node to a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.266.1">
       Switch on ESmartObjectChangeReason
      </span>
     </strong>
     <span class="koboSpan" id="kobo.267.1">
      node and click the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.268.1">
       Expand
      </span>
     </strong>
     <span class="koboSpan" id="kobo.269.1">
      button to show all the
     </span>
     <a id="_idIndexMarker748">
     </a>
     <span class="koboSpan" id="kobo.270.1">
      switch cases.
     </span>
     <span class="koboSpan" id="kobo.270.2">
      The graph so far should look like
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.271.1">
        Figure 14
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.272.1">
        .5
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.273.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer254">
     <span class="koboSpan" id="kobo.274.1">
      <img alt="Figure 14.5 – Starting graph" src="image/Figure_14.5_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.275.1">
     Figure 14.5 – Starting graph
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.276.1">
     What we are doing here is quite simple; every time we get an event from the smart object, we check what has caused the event.
    </span>
    <span class="koboSpan" id="kobo.276.2">
     This will serve us to respond to any interaction from the AI agent.
    </span>
    <span class="koboSpan" id="kobo.276.3">
     Let’s continue the code logic by doing the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.277.1">
      following steps.
     </span>
    </span>
   </p>
   <ol>
    <li value="9">
     <span class="koboSpan" id="kobo.278.1">
      Connect the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.279.1">
       Interactor
      </span>
     </strong>
     <span class="koboSpan" id="kobo.280.1">
      pin of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.281.1">
       OnSmartObject Event
      </span>
     </strong>
     <span class="koboSpan" id="kobo.282.1">
      node to a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.283.1">
       Get
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.284.1">
        AIController
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.285.1">
       node.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.286.1">
      Connect
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.287.1">
       Return Value
      </span>
     </strong>
     <span class="koboSpan" id="kobo.288.1">
      of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.289.1">
       Get AIController
      </span>
     </strong>
     <span class="koboSpan" id="kobo.290.1">
      node to a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.291.1">
       Get
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.292.1">
        Blackboard
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.293.1">
       node.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer255">
     <span class="koboSpan" id="kobo.294.1">
      <img alt="Figure 14.6 – Retrieve Blackboard" src="image/Figure_14.6_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.295.1">
     Figure 14.6 – Retrieve Blackboard
    </span>
   </p>
   <ol>
    <li value="11">
     <span class="koboSpan" id="kobo.296.1">
      Connect
     </span>
     <a id="_idIndexMarker749">
     </a>
     <span class="koboSpan" id="kobo.297.1">
      the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.298.1">
       Return Value
      </span>
     </strong>
     <span class="koboSpan" id="kobo.299.1">
      pin of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.300.1">
       Get Blackboard
      </span>
     </strong>
     <span class="koboSpan" id="kobo.301.1">
      node to a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.302.1">
       Set Value as
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.303.1">
        Bool
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.304.1">
       node.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.305.1">
      Connect the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.306.1">
       On Released
      </span>
     </strong>
     <span class="koboSpan" id="kobo.307.1">
      outgoing execution pin of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.308.1">
       Switch on ESmartObjectChangeReason
      </span>
     </strong>
     <span class="koboSpan" id="kobo.309.1">
      node to the incoming execution pin of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.310.1">
       Set Value as
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.311.1">
        Bool
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.312.1">
       node.
      </span>
     </span>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.313.1">
       Click and drag from the
      </span>
      <strong class="bold">
       <span class="koboSpan" id="kobo.314.1">
        Key Name
       </span>
      </strong>
      <span class="koboSpan" id="kobo.315.1">
       pin of the
      </span>
      <strong class="bold">
       <span class="koboSpan" id="kobo.316.1">
        Set Value as Bool
       </span>
      </strong>
      <span class="koboSpan" id="kobo.317.1">
       node.
      </span>
      <span class="koboSpan" id="kobo.317.2">
       Release and, from the pop-up menu, select
      </span>
      <strong class="bold">
       <span class="koboSpan" id="kobo.318.1">
        Promote to variable
       </span>
      </strong>
      <span class="koboSpan" id="kobo.319.1">
       to create a new variable.
      </span>
      <span class="koboSpan" id="kobo.319.2">
       In the
      </span>
      <strong class="bold">
       <span class="koboSpan" id="kobo.320.1">
        Variables
       </span>
      </strong>
      <span class="koboSpan" id="kobo.321.1">
       panel, name the newly created variable
      </span>
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.322.1">
        NeedsReloadKeyName
       </span>
      </strong>
      <span class="koboSpan" id="kobo.323.1">
       , so that the node in the graph will show a
      </span>
      <strong class="bold">
       <span class="koboSpan" id="kobo.324.1">
        Needs Reloading Key Name
       </span>
      </strong>
      <span class="koboSpan" id="kobo.325.1">
       label.
      </span>
      <span class="koboSpan" id="kobo.325.2">
       This part of the graph is shown in
      </span>
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.326.1">
         Figure 14
        </span>
       </em>
      </span>
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.327.1">
         .7
        </span>
       </em>
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.328.1">
        :
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer256">
     <span class="koboSpan" id="kobo.329.1">
      <img alt="Figure 14.7 – Set Blackboard key" src="image/Figure_14.7_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.330.1">
     Figure 14.7 – Set Blackboard key
    </span>
   </p>
   <ol>
    <li value="13">
     <span class="koboSpan" id="kobo.331.1">
      Compile the Blueprint and set the variable
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.332.1">
       Default Value
      </span>
     </strong>
     <span class="koboSpan" id="kobo.333.1">
      property
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.334.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.335.1">
        WeaponJammed
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.336.1">
       .
      </span>
     </span>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.337.1">
       In this last part of the graph, we set a Blackboard key value of the AI agent that is interacting with the smart object.
      </span>
      <span class="koboSpan" id="kobo.337.2">
       We are doing this at the
      </span>
      <strong class="bold">
       <span class="koboSpan" id="kobo.338.1">
        On Released
       </span>
      </strong>
      <span class="koboSpan" id="kobo.339.1">
       event, that is, when the smart object has been claimed, interacted with, and then released to be claimable again.
      </span>
      <span class="koboSpan" id="kobo.339.2">
       This means we will fix the jammed gun once the AI agent has finished interacting with the
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.340.1">
        smart object.
       </span>
      </span>
     </p>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.341.1">
     The Blackboard, and
    </span>
    <a id="_idIndexMarker750">
    </a>
    <span class="koboSpan" id="kobo.342.1">
     consequently, the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.343.1">
      WeaponJammed
     </span>
    </strong>
    <span class="koboSpan" id="kobo.344.1">
     key, haven’t been implemented yet.
    </span>
    <span class="koboSpan" id="kobo.344.2">
     In the next section, we will be working on the Blackboard itself and its related behavior tree in order to implement the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.345.1">
      AI agent.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-277">
    <a id="_idTextAnchor279">
    </a>
    <span class="koboSpan" id="kobo.346.1">
     Interacting with smart objects
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.347.1">
     In this section, we will
    </span>
    <a id="_idIndexMarker751">
    </a>
    <span class="koboSpan" id="kobo.348.1">
     finalize the smart object system by creating an AI agent that will make good use of the previously created workbench Blueprint.
    </span>
    <span class="koboSpan" id="kobo.348.2">
     As stated before, the AI agent will move around and shoot at random; from time to time, the gun will jam, and so the gunner will need to get to the workbench to fix it.
    </span>
    <span class="koboSpan" id="kobo.348.3">
     The AI behavior will be handled by a behavior tree, and it will be quite straightforward, but it will help us understand how to interact with
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.349.1">
      smart objects.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.350.1">
     Let’s start by creating a helpful task we will be using in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.351.1">
      behavior tree.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-278">
    <a id="_idTextAnchor280">
    </a>
    <span class="koboSpan" id="kobo.352.1">
     Creating the toss coin task
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.353.1">
     We are now going to
    </span>
    <a id="_idIndexMarker752">
    </a>
    <span class="koboSpan" id="kobo.354.1">
     create a task that will simulate the gun
    </span>
    <a id="_idIndexMarker753">
    </a>
    <span class="koboSpan" id="kobo.355.1">
     jamming.
    </span>
    <span class="koboSpan" id="kobo.355.2">
     This task will be some sort of weighted coin toss and will return a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.356.1">
      bool
     </span>
    </strong>
    <span class="koboSpan" id="kobo.357.1">
     value – that is, a head or tails result.
    </span>
    <span class="koboSpan" id="kobo.357.2">
     The weight of the toss will help us in defining how much the gun is prone to jamming.
    </span>
    <span class="koboSpan" id="kobo.357.3">
     You should already be familiar with behavior tree tasks but, for a quick refresher, you can check
    </span>
    <a href="B31016_08.xhtml#_idTextAnchor148">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.358.1">
        Chapter 8
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.359.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.360.1">
      Setting Up a
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.361.1">
       Behavior Tree
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.362.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.363.1">
     To implement this task, start by creating a new C++ class extending
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.364.1">
      BTTaskNode
     </span>
    </strong>
    <span class="koboSpan" id="kobo.365.1">
     and call it
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.366.1">
      BTTask_TossCoin
     </span>
    </strong>
    <span class="koboSpan" id="kobo.367.1">
     .
    </span>
    <span class="koboSpan" id="kobo.367.2">
     Then, open the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.368.1">
      BTTask_TossCoin.h
     </span>
    </strong>
    <span class="koboSpan" id="kobo.369.1">
     file and add the following block
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.370.1">
      of code:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.371.1">
public:
    UBTTask_TossCoin();
    UPROPERTY(EditAnywhere, Category="Blackboard")
    FBlackboardKeySelector BlackboardKey;
   UPROPERTY(EditAnywhere, Category="Task")
    float TrueProbability = 0.5f;
    virtual EBTNodeResult::Type ExecuteTask(UBehaviorTreeComponent&amp; OwnerComp,
      uint8* NodeMemory) override;</span></pre>
   <p>
    <span class="koboSpan" id="kobo.372.1">
     The only thing worth mentioning here is the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.373.1">
      TrueProbability
     </span>
    </strong>
    <span class="koboSpan" id="kobo.374.1">
     property, which will let us weight the result – in our case, the probability of jamming the gun.
    </span>
    <span class="koboSpan" id="kobo.374.2">
     Now, open the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.375.1">
      BTTask_TossCoin.cpp
     </span>
    </strong>
    <span class="koboSpan" id="kobo.376.1">
     file and add the following declaration at the top
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.377.1">
      of it:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.378.1">
#include "BehaviorTree/BlackboardComponent.h"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.379.1">
     The constructor is
    </span>
    <a id="_idIndexMarker754">
    </a>
    <span class="koboSpan" id="kobo.380.1">
     going to be really simple as it will just give a
    </span>
    <a id="_idIndexMarker755">
    </a>
    <span class="koboSpan" id="kobo.381.1">
     meaningful name to the node.
    </span>
    <span class="koboSpan" id="kobo.381.2">
     Add the following code to your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.382.1">
      class implementation:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.383.1">
UBTTask_TossCoin::UBTTask_TossCoin()
{
    NodeName = "Toss Coin";
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.384.1">
     All the code logic is going to be placed inside the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.385.1">
      ExecuteTask()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.386.1">
     function.
    </span>
    <span class="koboSpan" id="kobo.386.2">
     Let’s add this block
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.387.1">
      of code:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.388.1">
EBTNodeResult::Type UBTTask_TossCoin::ExecuteTask(UBehaviorTreeComponent&amp; OwnerComp, uint8* NodeMemory)
{
    const auto BlackboardComp = OwnerComp.GetBlackboardComponent();
    if (BlackboardComp == nullptr)
      { return EBTNodeResult::Failed; }
    const auto RandomNumber = FMath::RandRange(0.0f, 1.0f);
    BlackboardComp-&gt;
      SetValueAsBool(BlackboardKey.SelectedKeyName,
        RandomNumber &lt; TrueProbability);
    return EBTNodeResult::Succeeded;
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.389.1">
     As you can see, once we have retrieved the Blackboard component, we randomize a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.390.1">
      bool
     </span>
    </strong>
    <span class="koboSpan" id="kobo.391.1">
     result and set a key value inside the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.392.1">
      Blackboard itself.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.393.1">
     With this class
    </span>
    <a id="_idIndexMarker756">
    </a>
    <span class="koboSpan" id="kobo.394.1">
     complete, we can now focus on a couple of environment
    </span>
    <a id="_idIndexMarker757">
    </a>
    <span class="koboSpan" id="kobo.395.1">
     queries that we will need inside the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.396.1">
      behavior tree.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-279">
    <a id="_idTextAnchor281">
    </a>
    <span class="koboSpan" id="kobo.397.1">
     Creating environment queries
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.398.1">
     To implement the
    </span>
    <a id="_idIndexMarker758">
    </a>
    <span class="koboSpan" id="kobo.399.1">
     gunner behavior tree, we will need a couple of environment queries: one for generating a random location for the gunner to reach and one for finding the workbench smart object.
    </span>
    <span class="koboSpan" id="kobo.399.2">
     Let’s start with the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.400.1">
      first one.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.401.1">
     Creating the FindShootLocation environment query
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.402.1">
     This query will be in
    </span>
    <a id="_idIndexMarker759">
    </a>
    <span class="koboSpan" id="kobo.403.1">
     charge of generating a set of random locations on
    </span>
    <a id="_idIndexMarker760">
    </a>
    <span class="koboSpan" id="kobo.404.1">
     the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.405.1">
      Nav Mesh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.406.1">
     level; basically, we will create a grid of points and later select one of these points as a shooting spot.
    </span>
    <span class="koboSpan" id="kobo.406.2">
     To do so, open the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.407.1">
      AI
     </span>
    </strong>
    <span class="koboSpan" id="kobo.408.1">
     folder and create an environment query by going to
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.409.1">
      Artificial Intelligence
     </span>
    </strong>
    <span class="koboSpan" id="kobo.410.1">
     |
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.411.1">
      Environment Query
     </span>
    </strong>
    <span class="koboSpan" id="kobo.412.1">
     .
    </span>
    <span class="koboSpan" id="kobo.412.2">
     Name it
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.413.1">
      EQS_FindShootLocation
     </span>
    </strong>
    <span class="koboSpan" id="kobo.414.1">
     .
    </span>
    <span class="koboSpan" id="kobo.414.2">
     Open it and do the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.415.1">
      following steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.416.1">
      Inside the graph, connect the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.417.1">
       ROOT
      </span>
     </strong>
     <span class="koboSpan" id="kobo.418.1">
      node to a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.419.1">
       Points:
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.420.1">
        Grid
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.421.1">
       node.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.422.1">
      Select the newly created node and set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.423.1">
       GridHalfSize
      </span>
     </strong>
     <span class="koboSpan" id="kobo.424.1">
      property
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.425.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.426.1">
        2500.0
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.427.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.428.1">
      Double-check that the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.429.1">
       Projection Data
      </span>
     </strong>
     <span class="koboSpan" id="kobo.430.1">
      |
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.431.1">
       Trace Node
      </span>
     </strong>
     <span class="koboSpan" id="kobo.432.1">
      is set
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.433.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.434.1">
        Navigation
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.435.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer257">
     <span class="koboSpan" id="kobo.436.1">
      <img alt="Figure 14.8 – FindShootLocation query" src="image/Figure_14.8_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.437.1">
     Figure 14.8 – FindShootLocation query
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.438.1">
     As you can see, we are
    </span>
    <a id="_idIndexMarker761">
    </a>
    <span class="koboSpan" id="kobo.439.1">
     using the nav mesh to look for a
    </span>
    <a id="_idIndexMarker762">
    </a>
    <span class="koboSpan" id="kobo.440.1">
     location; this will ensure that our agent will be capable of reaching the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.441.1">
      selected point.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.442.1">
     Creating the FindWorkbenchLocation environment query
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.443.1">
     This second
    </span>
    <a id="_idIndexMarker763">
    </a>
    <span class="koboSpan" id="kobo.444.1">
     query will be a search for smart objects inside a predefined area.
    </span>
    <span class="koboSpan" id="kobo.444.2">
     Let’s start by creating an environment query (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.445.1">
      Artificial Intelligence
     </span>
    </strong>
    <span class="koboSpan" id="kobo.446.1">
     |
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.447.1">
      Environment Query
     </span>
    </strong>
    <span class="koboSpan" id="kobo.448.1">
     ) and naming it
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.449.1">
      EQS_FindWorkbench
     </span>
    </strong>
    <span class="koboSpan" id="kobo.450.1">
     .
    </span>
    <span class="koboSpan" id="kobo.450.2">
     Open it and do the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.451.1">
      following steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.452.1">
      Inside the graph, connect the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.453.1">
       ROOT
      </span>
     </strong>
     <span class="koboSpan" id="kobo.454.1">
      node to a
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.455.1">
        SmartObjects
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.456.1">
       node.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.457.1">
      Add an item in the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.458.1">
       Behavior Definition Classes
      </span>
     </strong>
     <span class="koboSpan" id="kobo.459.1">
      array property by clicking the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.460.1">
       +
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.461.1">
       button.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.462.1">
      Set the item at
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.463.1">
       Index[0]
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.464.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.465.1">
        GameplayBehaviorSmartObjectBehaviorDefinition
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.466.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.467.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.468.1">
       Query Box Extent
      </span>
     </strong>
     <span class="koboSpan" id="kobo.469.1">
      to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.470.1">
       (5000.0,
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.471.1">
        5000.0, 500.0)
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.472.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer258">
     <span class="koboSpan" id="kobo.473.1">
      <img alt="Figure 14.9 – FindWorkbench query" src="image/Figure_14.9_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.474.1">
     Figure 14.9 – FindWorkbench query
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.475.1">
     This query will look for any smart object with a behavior definition set to
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.476.1">
      GameplayBehaviorSmartObjectBehaviorDefinition
     </span>
    </strong>
    <span class="koboSpan" id="kobo.477.1">
     ; this is the default definition, and it is the one we used inside the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.478.1">
      SOD_Workbench
     </span>
    </strong>
    <span class="koboSpan" id="kobo.479.1">
     asset.
    </span>
    <span class="koboSpan" id="kobo.479.2">
     It should be noted that, for the sake of simplicity, we kept things at a very basic level here.
    </span>
    <span class="koboSpan" id="kobo.479.3">
     I highly encourage you to try implementing a filtering system by using tag filters or by extending your own behavior definition for the workbench or any other smart object you will be adding to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.480.1">
      the level.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.481.1">
     With environment
    </span>
    <a id="_idIndexMarker764">
    </a>
    <span class="koboSpan" id="kobo.482.1">
     queries finished, we can start
    </span>
    <a id="_idIndexMarker765">
    </a>
    <span class="koboSpan" id="kobo.483.1">
     implementing the behavior trees, starting from
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.484.1">
      the Blackboard.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-280">
    <a id="_idTextAnchor282">
    </a>
    <span class="koboSpan" id="kobo.485.1">
     Creating the Blackboard
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.486.1">
     The Blackboard
    </span>
    <a id="_idIndexMarker766">
    </a>
    <span class="koboSpan" id="kobo.487.1">
     for our
    </span>
    <a id="_idIndexMarker767">
    </a>
    <span class="koboSpan" id="kobo.488.1">
     AI agent will need to store two locations: one for the shooting target and another for the workbench.
    </span>
    <span class="koboSpan" id="kobo.488.2">
     Additionally, there should be a flag to indicate whether the gun is jammed.
    </span>
    <span class="koboSpan" id="kobo.488.3">
     Let’s begin by creating a Blackboard and naming it
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.489.1">
      BB_Tinkerer
     </span>
    </strong>
    <span class="koboSpan" id="kobo.490.1">
     to clearly reflect the capabilities of our AI agent.
    </span>
    <span class="koboSpan" id="kobo.490.2">
     Then, add the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.491.1">
      following keys:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.492.1">
      A
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.493.1">
       Vector
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.494.1">
       named
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.495.1">
        WorkbenchLocation
       </span>
      </strong>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.496.1">
      A
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.497.1">
       Vector
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.498.1">
       named
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.499.1">
        ShootLocation
       </span>
      </strong>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.500.1">
      A
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.501.1">
       Bool
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.502.1">
       named
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.503.1">
        WeaponJammed
       </span>
      </strong>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.504.1">
     With the
    </span>
    <a id="_idIndexMarker768">
    </a>
    <span class="koboSpan" id="kobo.505.1">
     Blackboard
    </span>
    <a id="_idIndexMarker769">
    </a>
    <span class="koboSpan" id="kobo.506.1">
     finalized, we are ready to create the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.507.1">
      behavior tree.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-281">
    <a id="_idTextAnchor283">
    </a>
    <span class="koboSpan" id="kobo.508.1">
     Creating the behavior tree
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.509.1">
     The behavior
    </span>
    <a id="_idIndexMarker770">
    </a>
    <span class="koboSpan" id="kobo.510.1">
     tree is
    </span>
    <a id="_idIndexMarker771">
    </a>
    <span class="koboSpan" id="kobo.511.1">
     going to have two main subbranches that will handle the case when the gun is jammed and when it is not.
    </span>
    <span class="koboSpan" id="kobo.511.2">
     Let’s start by creating a new behavior tree and calling it
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.512.1">
      BT_Tinkerer
     </span>
    </strong>
    <span class="koboSpan" id="kobo.513.1">
     .
    </span>
    <span class="koboSpan" id="kobo.513.2">
     Open it and set the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.514.1">
      Blackboard Asset
     </span>
    </strong>
    <span class="koboSpan" id="kobo.515.1">
     property to
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.516.1">
      BB_Tinkerer
     </span>
    </strong>
    <span class="koboSpan" id="kobo.517.1">
     .
    </span>
    <span class="koboSpan" id="kobo.517.2">
     Then, do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.518.1">
      the following:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.519.1">
      Connect the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.520.1">
       ROOT
      </span>
     </strong>
     <span class="koboSpan" id="kobo.521.1">
      node to a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.522.1">
       Selector
      </span>
     </strong>
     <span class="koboSpan" id="kobo.523.1">
      node; call it
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.524.1">
        Root Selector
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.525.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.526.1">
      Add two
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.527.1">
       Sequence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.528.1">
      nodes to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.529.1">
       Root Selector
      </span>
     </strong>
     <span class="koboSpan" id="kobo.530.1">
      node.
     </span>
     <span class="koboSpan" id="kobo.530.2">
      Call the left one
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.531.1">
       Shoot Sequence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.532.1">
      and the right one
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.533.1">
        Fix Sequence
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.534.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.535.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.536.1">
       Blackboard Decorator
      </span>
     </strong>
     <span class="koboSpan" id="kobo.537.1">
      to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.538.1">
       Shoot Sequence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.539.1">
      node and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.540.1">
       select it.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.541.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.542.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.543.1">
      panel, do
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.544.1">
       the following:
      </span>
     </span>
     <ul>
      <li>
       <span class="koboSpan" id="kobo.545.1">
        Set the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.546.1">
         Notify Observer
        </span>
       </strong>
       <span class="koboSpan" id="kobo.547.1">
        property to
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.548.1">
         On
        </span>
       </strong>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.549.1">
          Value Change
         </span>
        </strong>
       </span>
      </li>
      <li>
       <span class="koboSpan" id="kobo.550.1">
        Set the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.551.1">
         Key Query
        </span>
       </strong>
       <span class="koboSpan" id="kobo.552.1">
        property to
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.553.1">
         Is
        </span>
       </strong>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.554.1">
          Not Set
         </span>
        </strong>
       </span>
      </li>
      <li>
       <span class="koboSpan" id="kobo.555.1">
        Set the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.556.1">
         Blackboard Key
        </span>
       </strong>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.557.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.558.1">
          WeaponJammed
         </span>
        </strong>
       </span>
      </li>
     </ul>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.559.1">
       The graph so far should look like the one shown in
      </span>
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.560.1">
         Figure 14
        </span>
       </em>
      </span>
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.561.1">
         .10
        </span>
       </em>
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.562.1">
        :
       </span>
      </span>
     </p>
    </li>
   </ol>
   <p class="IMG---Figure">
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer259">
     <span class="koboSpan" id="kobo.563.1">
      <img alt="Figure 14.10 – Sequences" src="image/Figure_14.10_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.564.1">
     Figure 14.10 – Sequences
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.565.1">
     Let’s now focus on the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.566.1">
      Shoot Sequence
     </span>
    </strong>
    <span class="koboSpan" id="kobo.567.1">
     section of the graph.
    </span>
    <span class="koboSpan" id="kobo.567.2">
     Start by doing the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.568.1">
      following steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.569.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.570.1">
       Move To
      </span>
     </strong>
     <span class="koboSpan" id="kobo.571.1">
      task, name it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.572.1">
       Move to Shoot Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.573.1">
      , and set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.574.1">
       Blackboard Key
      </span>
     </strong>
     <span class="koboSpan" id="kobo.575.1">
      property
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.576.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.577.1">
        ShootLocation
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.578.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.579.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.580.1">
       PlayMontage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.581.1">
      task to the right of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.582.1">
       Move to Shoot Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.583.1">
      task, name it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.584.1">
       Play Shoot Montage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.585.1">
      , and set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.586.1">
       Anim Montage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.587.1">
      property
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.588.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.589.1">
        AM_1H_Shoot
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.590.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.591.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.592.1">
       Wait
      </span>
     </strong>
     <span class="koboSpan" id="kobo.593.1">
      task to the right of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.594.1">
       Play Shoot Montage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.595.1">
      task.
     </span>
     <span class="koboSpan" id="kobo.595.2">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.596.1">
       Wait Time
      </span>
     </strong>
     <span class="koboSpan" id="kobo.597.1">
      property to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.598.1">
       3.0
      </span>
     </strong>
     <span class="koboSpan" id="kobo.599.1">
      and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.600.1">
       Random Deviation
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.601.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.602.1">
        0.5
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.603.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.604.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.605.1">
       TossCoin
      </span>
     </strong>
     <span class="koboSpan" id="kobo.606.1">
      task to the right of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.607.1">
       Wait
      </span>
     </strong>
     <span class="koboSpan" id="kobo.608.1">
      task, name it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.609.1">
       Randomize Jam
      </span>
     </strong>
     <span class="koboSpan" id="kobo.610.1">
      , set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.611.1">
       Blackboard Key
      </span>
     </strong>
     <span class="koboSpan" id="kobo.612.1">
      property to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.613.1">
       WeaponJammed
      </span>
     </strong>
     <span class="koboSpan" id="kobo.614.1">
      , and set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.615.1">
       True Probability
      </span>
     </strong>
     <span class="koboSpan" id="kobo.616.1">
      property
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.617.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.618.1">
        0.35
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.619.1">
       .
      </span>
     </span>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.620.1">
       The
      </span>
      <strong class="bold">
       <span class="koboSpan" id="kobo.621.1">
        Shoot Sequence
       </span>
      </strong>
      <span class="koboSpan" id="kobo.622.1">
       section
      </span>
      <a id="_idIndexMarker772">
      </a>
      <span class="koboSpan" id="kobo.623.1">
       of the graph should look
      </span>
      <a id="_idIndexMarker773">
      </a>
      <span class="koboSpan" id="kobo.624.1">
       like the one depicted in
      </span>
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.625.1">
         Figure 14
        </span>
       </em>
      </span>
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.626.1">
         .11
        </span>
       </em>
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.627.1">
        :
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer260">
     <span class="koboSpan" id="kobo.628.1">
      <img alt="Figure 14.11 – Shoot Sequence" src="image/Figure_14.11_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.629.1">
     Figure 14.11 – Shoot Sequence
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.630.1">
     This portion of the graph will move the AI agent to a selected location, start the shooting sequence, wait a short time, and check whether the gun is jammed.
    </span>
    <span class="koboSpan" id="kobo.630.2">
     However, we need to add a service to make it fully functional.
    </span>
    <span class="koboSpan" id="kobo.630.3">
     Let’s start by selecting
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.631.1">
      Move to Shoot Location
     </span>
    </strong>
    <span class="koboSpan" id="kobo.632.1">
     and adding a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.633.1">
      Run EQSQuery
     </span>
    </strong>
    <span class="koboSpan" id="kobo.634.1">
     node.
    </span>
    <span class="koboSpan" id="kobo.634.2">
     Select the query service and, in the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.635.1">
      Details
     </span>
    </strong>
    <span class="koboSpan" id="kobo.636.1">
     panel, do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.637.1">
      the following:
     </span>
    </span>
   </p>
   <ol>
    <li value="5">
     <span class="koboSpan" id="kobo.638.1">
      Name it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.639.1">
       Find
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.640.1">
        Shoot Location
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.641.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.642.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.643.1">
       Query Template
      </span>
     </strong>
     <span class="koboSpan" id="kobo.644.1">
      property
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.645.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.646.1">
        EQS_FindShootLocation
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.647.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.648.1">
      Set
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.649.1">
       Run Mode
      </span>
     </strong>
     <span class="koboSpan" id="kobo.650.1">
      to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.651.1">
       Single Random Item from
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.652.1">
        Best 25%
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.653.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.654.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.655.1">
       Blackboard Key
      </span>
     </strong>
     <span class="koboSpan" id="kobo.656.1">
      property to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.657.1">
       ShootLocation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.658.1">
      .
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.659.1">
        Figure 14
       </span>
      </em>
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.660.1">
       .12
      </span>
     </em>
     <span class="koboSpan" id="kobo.661.1">
      shows the finalized
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.662.1">
       Shoot Sequence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.663.1">
      section of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.664.1">
       the graph:
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer261">
     <span class="koboSpan" id="kobo.665.1">
      <img alt="Figure 14.12 – Finalized ShootSequence" src="image/Figure_14.12_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.666.1">
     Figure 14.12 – Finalized ShootSequence
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.667.1">
     This service will execute the environment query that will select one random item from the generated locations, assigning it to the
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.668.1">
       ShootLocation
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.669.1">
      property.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.670.1">
     With this portion of the
    </span>
    <a id="_idIndexMarker774">
    </a>
    <span class="koboSpan" id="kobo.671.1">
     behavior tree complete, we can focus
    </span>
    <a id="_idIndexMarker775">
    </a>
    <span class="koboSpan" id="kobo.672.1">
     on the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.673.1">
      Fix Sequence
     </span>
    </strong>
    <span class="koboSpan" id="kobo.674.1">
     section of the graph.
    </span>
    <span class="koboSpan" id="kobo.674.2">
     Follow
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.675.1">
      these steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.676.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.677.1">
       Move To
      </span>
     </strong>
     <span class="koboSpan" id="kobo.678.1">
      task, name it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.679.1">
       Move to Workbench Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.680.1">
      , and set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.681.1">
       Blackboard Key
      </span>
     </strong>
     <span class="koboSpan" id="kobo.682.1">
      property
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.683.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.684.1">
        WorkbenchLocation
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.685.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.686.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.687.1">
       PlayMontage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.688.1">
      task to the right of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.689.1">
       Move to Workbench Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.690.1">
      task, name it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.691.1">
       Play Reload Montage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.692.1">
      , and set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.693.1">
       Anim Montage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.694.1">
      property
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.695.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.696.1">
        AM_1H_Reload
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.697.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.698.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.699.1">
       Wait
      </span>
     </strong>
     <span class="koboSpan" id="kobo.700.1">
      task to the right of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.701.1">
       Play Shoot Montage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.702.1">
      task.
     </span>
     <span class="koboSpan" id="kobo.702.2">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.703.1">
       Wait Time
      </span>
     </strong>
     <span class="koboSpan" id="kobo.704.1">
      property to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.705.1">
       3.0
      </span>
     </strong>
     <span class="koboSpan" id="kobo.706.1">
      and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.707.1">
       Random Deviation
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.708.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.709.1">
        0.5
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.710.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.711.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.712.1">
       FindAndUseGameplayBehaviorSmartObject
      </span>
     </strong>
     <span class="koboSpan" id="kobo.713.1">
      task to the right of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.714.1">
       Wait
      </span>
     </strong>
     <span class="koboSpan" id="kobo.715.1">
      task, name it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.716.1">
       Use Workbench
      </span>
     </strong>
     <span class="koboSpan" id="kobo.717.1">
      , set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.718.1">
       Query Template
      </span>
     </strong>
     <span class="koboSpan" id="kobo.719.1">
      property to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.720.1">
       EQS_FindWorkbench
      </span>
     </strong>
     <span class="koboSpan" id="kobo.721.1">
      , and set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.722.1">
       RunMode
      </span>
     </strong>
     <span class="koboSpan" id="kobo.723.1">
      property to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.724.1">
       Single Best Item
      </span>
     </strong>
     <span class="koboSpan" id="kobo.725.1">
      .
     </span>
     <span class="koboSpan" id="kobo.725.2">
      The
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.726.1">
       Fix Sequence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.727.1">
      should look like the one depicted in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.728.1">
        Figure 14
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.729.1">
        .13
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.730.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer262">
     <span class="koboSpan" id="kobo.731.1">
      <img alt="Figure 14.13 – Fix Sequence" src="image/Figure_14.13_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.732.1">
     Figure 14.13 – Fix Sequence
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.733.1">
     You are already familiar with most of the graph, but the last task needs some explanation as it is the most important one.
    </span>
    <span class="koboSpan" id="kobo.733.2">
     It will find a suitable smart object, claim it, and use it.
    </span>
    <span class="koboSpan" id="kobo.733.3">
     Then it will release the resource.
    </span>
    <span class="koboSpan" id="kobo.733.4">
     Although you don’t have full control of each of the phases of the smart object as they are executed one after the other, it is quite handy when implementing simple behaviors such as the one
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.734.1">
      we created.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.735.1">
     The last thing we need to add is a service that will find the workbench in the level.
    </span>
    <span class="koboSpan" id="kobo.735.2">
     To implement this, select the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.736.1">
      Move to Workbench Location
     </span>
    </strong>
    <span class="koboSpan" id="kobo.737.1">
     task and add a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.738.1">
      Run EQSQuery
     </span>
    </strong>
    <span class="koboSpan" id="kobo.739.1">
     node.
    </span>
    <span class="koboSpan" id="kobo.739.2">
     Select
    </span>
    <a id="_idIndexMarker776">
    </a>
    <span class="koboSpan" id="kobo.740.1">
     the query service and, in the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.741.1">
      Details
     </span>
    </strong>
    <span class="koboSpan" id="kobo.742.1">
     panel, do
    </span>
    <a id="_idIndexMarker777">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.743.1">
      the following:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.744.1">
      Name it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.745.1">
       Find
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.746.1">
        Workbench Location
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.747.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.748.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.749.1">
       Query Template
      </span>
     </strong>
     <span class="koboSpan" id="kobo.750.1">
      property
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.751.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.752.1">
        EQS_FindWorkbench
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.753.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.754.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.755.1">
       Run Mode
      </span>
     </strong>
     <span class="koboSpan" id="kobo.756.1">
      attribute to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.757.1">
       Single
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.758.1">
        Best Item
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.759.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.760.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.761.1">
       Blackboard Key
      </span>
     </strong>
     <span class="koboSpan" id="kobo.762.1">
      property to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.763.1">
       WorkbenchLocation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.764.1">
      .
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.765.1">
        Figure 14
       </span>
      </em>
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.766.1">
       .14
      </span>
     </em>
     <span class="koboSpan" id="kobo.767.1">
      shows the finalized
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.768.1">
       FixSequence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.769.1">
      section of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.770.1">
       the graph:
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer263">
     <span class="koboSpan" id="kobo.771.1">
      <img alt="Figure 14.14 – Finalized FixSequence" src="image/Figure_14.14_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.772.1">
     Figure 14.14 – Finalized FixSequence
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.773.1">
     The behavior tree is
    </span>
    <a id="_idIndexMarker778">
    </a>
    <span class="koboSpan" id="kobo.774.1">
     now complete; we just need to integrate it into
    </span>
    <a id="_idIndexMarker779">
    </a>
    <span class="koboSpan" id="kobo.775.1">
     an AI agent and observe
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.776.1">
      its behavior.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-282">
    <a id="_idTextAnchor284">
    </a>
    <span class="koboSpan" id="kobo.777.1">
     Creating the character Blueprints
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.778.1">
     To finalize our AI
    </span>
    <a id="_idIndexMarker780">
    </a>
    <span class="koboSpan" id="kobo.779.1">
     agent, we need to create the AI controller
    </span>
    <a id="_idIndexMarker781">
    </a>
    <span class="koboSpan" id="kobo.780.1">
     and the character Blueprints.
    </span>
    <span class="koboSpan" id="kobo.780.2">
     Luckily, we have already implemented the necessary classes, and we just need to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.781.1">
      extend them.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.782.1">
     Let’s start with the AI controller by doing the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.783.1">
      following steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.784.1">
      In the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.785.1">
       Blueprints
      </span>
     </strong>
     <span class="koboSpan" id="kobo.786.1">
      folder, create a new Blueprint class extending
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.787.1">
       from
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.788.1">
        BaseDummyAIController
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.789.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.790.1">
      Name it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.791.1">
       AITikererDummyController
      </span>
     </strong>
     <span class="koboSpan" id="kobo.792.1">
      and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.793.1">
       open it.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.794.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.795.1">
       Behavior Tree
      </span>
     </strong>
     <span class="koboSpan" id="kobo.796.1">
      property
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.797.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.798.1">
        BT_Tinkerer
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.799.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.800.1">
     It’s now time to create the character, so do the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.801.1">
      following steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.802.1">
      In the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.803.1">
       Blueprints
      </span>
     </strong>
     <span class="koboSpan" id="kobo.804.1">
      folder, right-click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.805.1">
       BP_GunnerDummyCharacter
      </span>
     </strong>
     <span class="koboSpan" id="kobo.806.1">
      and select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.807.1">
       Create Child
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.808.1">
        Blueprint Class
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.809.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.810.1">
      Name the newly created asset
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.811.1">
       BP_TinkererDummyCharacter
      </span>
     </strong>
     <span class="koboSpan" id="kobo.812.1">
      and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.813.1">
       open it.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.814.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.815.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.816.1">
      panel, set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.817.1">
       AI Controller Class
      </span>
     </strong>
     <span class="koboSpan" id="kobo.818.1">
      property
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.819.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.820.1">
        AITinkererDummyController
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.821.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.822.1">
     We are now ready to test things out in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.823.1">
      a gym.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-283">
    <a id="_idTextAnchor285">
    </a>
    <span class="koboSpan" id="kobo.824.1">
     Testing smart objects in a gym
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.825.1">
     By now, you
    </span>
    <a id="_idIndexMarker782">
    </a>
    <span class="koboSpan" id="kobo.826.1">
     should be familiar with the process of creating and testing a
    </span>
    <a id="_idIndexMarker783">
    </a>
    <span class="koboSpan" id="kobo.827.1">
     gym, so just create a new level of your choice with a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.828.1">
      NavMeshBoundsVolume
     </span>
    </strong>
    <span class="koboSpan" id="kobo.829.1">
     actor in order to make your AI agent move through the pathfinding system.
    </span>
    <span class="koboSpan" id="kobo.829.2">
     Then, add a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.830.1">
      BP_Tinkerer
     </span>
    </strong>
    <span class="koboSpan" id="kobo.831.1">
     instance and a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.832.1">
      BP_Workbench
     </span>
    </strong>
    <span class="koboSpan" id="kobo.833.1">
     instance to the level and start
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.834.1">
      the simulation.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.835.1">
     You should observe the AI agent moving around and shooting.
    </span>
    <span class="koboSpan" id="kobo.835.2">
     Occasionally, the weapon will jam, prompting the agent to search for a workbench to repair it before returning to its
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.836.1">
      shooting activities.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer264">
     <span class="koboSpan" id="kobo.837.1">
      <img alt="Figure 14.15 – Finalized fix sequence" src="image/Figure_14.15_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.838.1">
     Figure 14.15 – Finalized fix sequence
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.839.1">
     In this section, we created an introductory yet fully functional gym that effectively uses smart objects.
    </span>
    <span class="koboSpan" id="kobo.839.2">
     I highly encourage you to experiment with things a bit by adjusting the jam probability or adding
    </span>
    <a id="_idIndexMarker784">
    </a>
    <span class="koboSpan" id="kobo.840.1">
     more
    </span>
    <a id="_idIndexMarker785">
    </a>
    <span class="koboSpan" id="kobo.841.1">
     workbenches and gunners to observe how these changes affect the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.842.1">
      overall behavior.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-284">
    <a id="_idTextAnchor286">
    </a>
    <span class="koboSpan" id="kobo.843.1">
     Summary
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.844.1">
     In this final chapter, we learned about Smart Objects, an advanced framework created to assist developers in building interactive and context-aware elements in a game.
    </span>
    <span class="koboSpan" id="kobo.844.2">
     Smart Objects aim to enrich gameplay by enabling player characters and AI agents to engage with the environment more meaningfully through a reservation system, as we learned in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.845.1">
      this chapter.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.846.1">
     As a developer, you will benefit from using Smart Objects by creating more immersive and interactive gameplay experiences, as environment objects will enable complex behaviors and context-sensitive interactions within the game world.
    </span>
    <span class="koboSpan" id="kobo.846.2">
     By leveraging this technology, your games will become increasingly captivating and engaging for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.847.1">
      your players.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-285">
    <a id="_idTextAnchor287">
    </a>
    <span class="koboSpan" id="kobo.848.1">
     Epilogue
    </span>
   </h1>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.849.1">
      In their secret laboratory, Dr.
     </span>
     <span class="koboSpan" id="kobo.849.2">
      Markus and Professor Viktoria watched as their AI dummy puppets prepared for an epic battle, armed with colorful
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.850.1">
       Nerf guns.
      </span>
     </em>
    </span>
   </p>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.851.1">
      Markus laughed as a bold puppet dashed from behind a lab table, launching foam darts.
     </span>
     <span class="koboSpan" id="kobo.851.2">
      “We’ve created the world’s first AI Nerf combat league!”
     </span>
     <span class="koboSpan" id="kobo.851.3">
      He
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.852.1">
       proudly exclaimed.
      </span>
     </em>
    </span>
   </p>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.853.1">
      Viktoria grinned, delighted by their creations’ enthusiasm.
     </span>
     <span class="koboSpan" id="kobo.853.2">
      “Who knew they’d embrace battle
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.854.1">
       so eagerly?”
      </span>
     </em>
    </span>
   </p>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.855.1">
      With the glow of monitors casting light across the lab, Markus suggested, “What’s next?
     </span>
     <span class="koboSpan" id="kobo.855.2">
      A
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.856.1">
       championship tournament?”
      </span>
     </em>
    </span>
   </p>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.857.1">
      “Absolutely!”
     </span>
     <span class="koboSpan" id="kobo.857.2">
      Viktoria replied, her
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.858.1">
       excitement infectious.
      </span>
     </em>
    </span>
   </p>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.859.1">
      In that hidden haven of innovation, they realized they had built something extraordinary – a whimsical world of creativity and friendly competition, bursting with
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.860.1">
       endless possibilities.
      </span>
     </em>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.861.1">
     So, this is the end of this book; I hope you enjoyed it as much as I enjoyed
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.862.1">
      writing it!
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.863.1">
     This is just the start of your exciting journey into the amazing world of artificial intelligence development in Unreal Engine!
    </span>
    <span class="koboSpan" id="kobo.863.2">
     You might be asking yourself, “
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.864.1">
      What’s next?
     </span>
    </em>
    <span class="koboSpan" id="kobo.865.1">
     ”.
    </span>
    <span class="koboSpan" id="kobo.865.2">
     I totally understand that it can feel a bit overwhelming with all the plugins, frameworks, and technologies I presented.
    </span>
    <span class="koboSpan" id="kobo.865.3">
     To help you out, I’ve put together a fun new task for you!
    </span>
    <span class="koboSpan" id="kobo.865.4">
     In the project template, you will find a level called
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.866.1">
      CaptureTheFlag
     </span>
    </strong>
    <span class="koboSpan" id="kobo.867.1">
     .
    </span>
    <span class="koboSpan" id="kobo.867.2">
     Feel free to dive in and create your very own
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.868.1">
      Capture the Flag
     </span>
    </em>
    <span class="koboSpan" id="kobo.869.1">
     game featuring the dummy puppets as main characters.
    </span>
    <span class="koboSpan" id="kobo.869.2">
     Try to combine everything you’ve learned so far to develop your own
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.870.1">
      AI agents.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.871.1">
     Dive into this with all the enthusiasm you can muster and don’t be afraid to experiment and play around.
    </span>
    <span class="koboSpan" id="kobo.871.2">
     Remember, the best experiences often come from letting loose and having a great time, so go ahead and make it
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.872.1">
      your own.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.873.1">
     Have
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.874.1">
      a blast!
     </span>
    </span>
   </p>
  </div>
 

  <div id="_idContainer267">
   <h1 id="_idParaDest-286">
    <a id="_idTextAnchor288">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     Appendix – Understanding C++ in Unreal Engine
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.2.1">
     This appendix has been written to provide you with additional insights, resources, and practical information to enhance your understanding of C++ programming within the Unreal Engine framework.
    </span>
    <span class="koboSpan" id="kobo.2.2">
     This will help you as a refresher or as a reference throughout the book, just in case you need some help when following the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.3.1">
      presented code.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.4.1">
     This appendix serves as a valuable reference that complements the main content of the book, providing you with the tools and information needed to successfully navigate the exciting world of C++ in Unreal Engine.
    </span>
    <span class="koboSpan" id="kobo.4.2">
     Whether you’re a mid-experienced developer looking to refine your skills or a proficient C++ programmer with little Unreal Engine experience, I hope this appendix will enrich your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.5.1">
      learning experience!
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.6.1">
     We will be covering the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.7.1">
      following topics:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.8.1">
      Introducing
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.9.1">
       basic concepts
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.10.1">
      Explaining
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.11.1">
       advanced features
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.12.1">
      Exploring
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.13.1">
       core mechanics
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-287">
    <a id="_idTextAnchor289">
    </a>
    <span class="koboSpan" id="kobo.14.1">
     Technical requirements
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.15.1">
     To follow the topics presented in this chapter, you should have some good knowledge about programming, particularly some basic understanding of the C++ language.
    </span>
    <span class="koboSpan" id="kobo.15.2">
     Additionally, you will need a good understanding of the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.16.1">
      Unreal Engine.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.17.1">
     Note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.18.1">
     This chapter will provide a gentle introduction to the main topics related to using C++ in Unreal Engine.
    </span>
    <span class="koboSpan" id="kobo.18.2">
     For a more comprehensive exploration of programming in C++ with Unreal Engine, I recommend checking out Zhenyu George Li’s book titled
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.19.1">
      Unreal Engine 5 Game Development with C++ Scripting
     </span>
    </em>
    <span class="koboSpan" id="kobo.20.1">
     , published
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.21.1">
      by Packt.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-288">
    <a id="_idTextAnchor290">
    </a>
    <span class="koboSpan" id="kobo.22.1">
     Introducing basic concepts
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.23.1">
     If you share my passion for game development and programming, you’ll probably agree that writing C++ code in Unreal Engine is both enjoyable and surprisingly accessible.
    </span>
    <span class="koboSpan" id="kobo.23.2">
     Epic Games has done an excellent job of incorporating features that simplify C++ usage for nearly
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.24.1">
      every programmer.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.25.1">
     While it is indeed possible to write standard C++ code in Unreal Engine, leveraging the engine’s most widely used features – such as the built-in garbage collector and reflection system – will help you achieve better performance in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.26.1">
      your games.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.27.1">
     In this section, I’ll be covering the basic principles behind Unreal Engine
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.28.1">
      C++ features.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-289">
    <a id="_idTextAnchor291">
    </a>
    <span class="koboSpan" id="kobo.29.1">
     Understanding C++ classes
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.30.1">
     Unsurprisingly enough, an Unreal Engine
    </span>
    <a id="_idIndexMarker786">
    </a>
    <span class="koboSpan" id="kobo.31.1">
     C++ class is essentially a standard C++ class!
    </span>
    <span class="koboSpan" id="kobo.31.2">
     If you already have a solid understanding of object-oriented programming in C++, you’ll find the environment quite familiar.
    </span>
    <span class="koboSpan" id="kobo.31.3">
     The process of creating a new C++ class starts by determining the type of object you want to represent, such as an actor or a
    </span>
    <a id="_idIndexMarker787">
    </a>
    <span class="koboSpan" id="kobo.32.1">
     component.
    </span>
    <span class="koboSpan" id="kobo.32.2">
     After defining the type, you declare variables and methods in the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.33.1">
      header file
     </span>
    </strong>
    <span class="koboSpan" id="kobo.34.1">
     (which uses the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.35.1">
      .h
     </span>
    </strong>
    <span class="koboSpan" id="kobo.36.1">
     extension) and implement the logic in
    </span>
    <a id="_idIndexMarker788">
    </a>
    <span class="koboSpan" id="kobo.37.1">
     the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.38.1">
      source file
     </span>
    </strong>
    <span class="koboSpan" id="kobo.39.1">
     (which uses the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.40.1">
      .
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.41.1">
       cpp
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.42.1">
      extension).
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.43.1">
     The source file works just like any regular C++ file, but the header file allows you to specify additional information for variables and functions that will be accessible to Blueprints inheriting from your class.
    </span>
    <span class="koboSpan" id="kobo.43.2">
     This also simplifies runtime memory management, as I will
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.44.1">
      explain later.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.45.1">
     Let’s start by presenting the base types used by the Unreal
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.46.1">
      Engine framework.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.47.1">
     The base types
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.48.1">
     In UE, there are three
    </span>
    <a id="_idIndexMarker789">
    </a>
    <span class="koboSpan" id="kobo.49.1">
     primary class types that you’ll be deriving from
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.50.1">
      during development:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.51.1">
       UObject
      </span>
     </strong>
     <span class="koboSpan" id="kobo.52.1">
      : This is the base class of Unreal Engine, providing core features such as networking support and reflection of properties
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.53.1">
       and methods
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.54.1">
       AActor
      </span>
     </strong>
     <span class="koboSpan" id="kobo.55.1">
      : This is a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.56.1">
       UObject
      </span>
     </strong>
     <span class="koboSpan" id="kobo.57.1">
      type that can be added to a game level, either through the Editor or
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.58.1">
       at runtime
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.59.1">
       UActorComponent
      </span>
     </strong>
     <span class="koboSpan" id="kobo.60.1">
      : This is the fundamental class for defining components that can be attached to
     </span>
     <a id="_idIndexMarker790">
     </a>
     <span class="koboSpan" id="kobo.61.1">
      an actor, or another component belonging to the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.62.1">
       same actor
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.63.1">
     Additionally, UE provides the
    </span>
    <a id="_idIndexMarker791">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.64.1">
      following entities:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.65.1">
       UStruct
      </span>
     </strong>
     <span class="koboSpan" id="kobo.66.1">
      : This is used to create simple
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.67.1">
       data structures
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.68.1">
       UEnum
      </span>
     </strong>
     <span class="koboSpan" id="kobo.69.1">
      : This is used to represent enumerations
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.70.1">
       of elements
      </span>
     </span>
    </li>
   </ul>
   <h3>
    <span class="koboSpan" id="kobo.71.1">
     Unreal Engine prefixes
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.72.1">
     Unreal Engine class names begin with
    </span>
    <a id="_idIndexMarker792">
    </a>
    <span class="koboSpan" id="kobo.73.1">
     specific letters; these prefixes are used to indicate the class type.
    </span>
    <span class="koboSpan" id="kobo.73.2">
     The main prefixes used are
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.74.1">
      as follows:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.75.1">
       U
      </span>
     </strong>
     <span class="koboSpan" id="kobo.76.1">
      : This is used for generic objects that derive from
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.77.1">
       UObject
      </span>
     </strong>
     <span class="koboSpan" id="kobo.78.1">
      , such as components.
     </span>
     <span class="koboSpan" id="kobo.78.2">
      A good example is the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.79.1">
        UStaticMeshComponent
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.80.1">
       class.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.81.1">
       A
      </span>
     </strong>
     <span class="koboSpan" id="kobo.82.1">
      : This is used for objects that derive from an actor – that is, the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.83.1">
       AActor
      </span>
     </strong>
     <span class="koboSpan" id="kobo.84.1">
      class – and that can be added to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.85.1">
       a level.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.86.1">
       F
      </span>
     </strong>
     <span class="koboSpan" id="kobo.87.1">
      : This is used for generic classes and structures, such as the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.88.1">
        FColor
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.89.1">
       structure.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.90.1">
       T
      </span>
     </strong>
     <span class="koboSpan" id="kobo.91.1">
      : This is used for templates, such as
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.92.1">
       TArray
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.93.1">
       or
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.94.1">
        TMap
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.95.1">
       .
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.96.1">
       I
      </span>
     </strong>
     <span class="koboSpan" id="kobo.97.1">
      : This is used for interfaces, such
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.98.1">
       as
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.99.1">
        IGameplayTaskOwnerInterface
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.100.1">
       .
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.101.1">
       E
      </span>
     </strong>
     <span class="koboSpan" id="kobo.102.1">
      : This is used for enums, such
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.103.1">
       as
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.104.1">
        EActorBeginPlayState
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.105.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.106.1">
     Note that these prefixes are mandatory; if you attempt to name a class that derives from
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.107.1">
      AActor
     </span>
    </strong>
    <span class="koboSpan" id="kobo.108.1">
     without the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.109.1">
      A
     </span>
    </strong>
    <span class="koboSpan" id="kobo.110.1">
     prefix, you will encounter an error at compile time.
    </span>
    <span class="koboSpan" id="kobo.110.2">
     This rule applies exclusively to C++ classes; Blueprints can be named without these prefixes.
    </span>
    <span class="koboSpan" id="kobo.110.3">
     Unreal Engine will hide the C++ prefix once you are in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.111.1">
      the Editor.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-290">
    <a id="_idTextAnchor292">
    </a>
    <span class="koboSpan" id="kobo.112.1">
     Properties
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.113.1">
     As you may already know, in programming
    </span>
    <a id="_idIndexMarker793">
    </a>
    <span class="koboSpan" id="kobo.114.1">
     languages, a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.115.1">
      property
     </span>
    </strong>
    <span class="koboSpan" id="kobo.116.1">
     refers to a variable that is declared within a class.
    </span>
    <span class="koboSpan" id="kobo.116.2">
     Adding properties to a C++ class requires some extra attention – specifically, we need to consider whether the code we write should be visible or hidden from the Blueprints that will inherit from
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.117.1">
      our class.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.118.1">
     Declaring a property
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.119.1">
     A property is
    </span>
    <a id="_idIndexMarker794">
    </a>
    <span class="koboSpan" id="kobo.120.1">
     declared using the standard C++ syntax for variable declaration, preceded by the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.121.1">
      UPROPERTY()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.122.1">
     macro, which specifies various attributes – such as visibility in Blueprints – and any relevant metadata.
    </span>
    <span class="koboSpan" id="kobo.122.2">
     As an example, consider the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.123.1">
      following code:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.124.1">
UPROPERTY(VisibleAnywhere, Category="Damage")
float Damage;</span></pre>
   <p>
    <span class="koboSpan" id="kobo.125.1">
     In the preceding example, setting the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.126.1">
      Damage
     </span>
    </strong>
    <span class="koboSpan" id="kobo.127.1">
     variable as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.128.1">
      VisibleAnywhere
     </span>
    </strong>
    <span class="koboSpan" id="kobo.129.1">
     will make the property visible to a Blueprint, but not modifiable.
    </span>
    <span class="koboSpan" id="kobo.129.2">
     Additionally, it will be logically grouped under the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.130.1">
      Damage
     </span>
    </strong>
    <span class="koboSpan" id="kobo.131.1">
     category in the
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.132.1">
       Details
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.133.1">
      panel.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.134.1">
     Property specifiers
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.135.1">
     As you have already noticed, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.136.1">
      UPROPERTY()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.137.1">
     can include a list of parameters, called
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.138.1">
      property specifiers
     </span>
    </strong>
    <span class="koboSpan" id="kobo.139.1">
     , that will
    </span>
    <a id="_idIndexMarker795">
    </a>
    <span class="koboSpan" id="kobo.140.1">
     add additional functionality to a property.
    </span>
    <span class="koboSpan" id="kobo.140.2">
     Some of them are
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.141.1">
      listed here:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.142.1">
       VisibleAnywhere
      </span>
     </strong>
     <span class="koboSpan" id="kobo.143.1">
      : The property is displayed but cannot be modified in the
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.144.1">
        Details
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.145.1">
       panel
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.146.1">
       EditAnywhere
      </span>
     </strong>
     <span class="koboSpan" id="kobo.147.1">
      : The property can be modified in the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.148.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.149.1">
      panel for both Blueprints and instances placed in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.150.1">
       the level
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.151.1">
       EditDefaultsOnly
      </span>
     </strong>
     <span class="koboSpan" id="kobo.152.1">
      : The property can be modified in the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.153.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.154.1">
      panel of the Blueprint but not in instances placed in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.155.1">
       the level
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.156.1">
       EditInstanceOnly
      </span>
     </strong>
     <span class="koboSpan" id="kobo.157.1">
      : The property can be modified in the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.158.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.159.1">
      panel of instances placed in the level but not in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.160.1">
       the Blueprint
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.161.1">
       BlueprintReadOnly
      </span>
     </strong>
     <span class="koboSpan" id="kobo.162.1">
      : The property can be read within the Blueprint but cannot
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.163.1">
       be assigned
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.164.1">
       BlueprintReadWrite
      </span>
     </strong>
     <span class="koboSpan" id="kobo.165.1">
      : The property can be both read and assigned within
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.166.1">
       the Blueprint
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-291">
    <a id="_idTextAnchor293">
    </a>
    <span class="koboSpan" id="kobo.167.1">
     Functions
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.168.1">
     Functions
    </span>
    <a id="_idIndexMarker796">
    </a>
    <span class="koboSpan" id="kobo.169.1">
     work just like regular C++ functions.
    </span>
    <span class="koboSpan" id="kobo.169.2">
     Additionally, just like properties, you can decorate them with a macro – in this case,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.170.1">
      UFUNCTION()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.171.1">
     – that can contain proper specifiers.
    </span>
    <span class="koboSpan" id="kobo.171.2">
     As an example, consider the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.172.1">
      following code:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.173.1">
UFUNCTION(BlueprintCallable)
void Heal(float Amount);</span></pre>
   <p>
    <span class="koboSpan" id="kobo.174.1">
     In this case, the function can be called from a child Blueprint, as it has been decorated with the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.175.1">
       BlueprintCallable
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.176.1">
      specifier.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.177.1">
     For a full list of
    </span>
    <a id="_idIndexMarker797">
    </a>
    <span class="koboSpan" id="kobo.178.1">
     property and function specifiers, visit the official
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.179.1">
      documentation:
     </span>
    </span>
    <a href="https://dev.epicgames.com/documentation/en-us/unreal-engine/metadata-specifiers-in-unreal-engine">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.180.1">
       https://dev.epicgames.com/documentation/en-us/unreal-engine/metadata-specifiers-in-unreal-engine
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.181.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-292">
    <a id="_idTextAnchor294">
    </a>
    <span class="koboSpan" id="kobo.182.1">
     The C++ Header Preview
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.183.1">
     Unreal Engine comes packed with an
    </span>
    <a id="_idIndexMarker798">
    </a>
    <span class="koboSpan" id="kobo.184.1">
     incredible inspection tool called the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.185.1">
      C++ Header Preview
     </span>
    </strong>
    <span class="koboSpan" id="kobo.186.1">
     , which enables you to examine your Blueprint classes as if they were written in C++.
    </span>
    <span class="koboSpan" id="kobo.186.2">
     To activate this tool, simply navigate to the main menu and select
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.187.1">
      Tools
     </span>
    </strong>
    <span class="koboSpan" id="kobo.188.1">
     |
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.189.1">
      C++ Header Preview
     </span>
    </strong>
    <span class="koboSpan" id="kobo.190.1">
     , and then choose your desired class.
    </span>
    <span class="koboSpan" id="kobo.190.2">
     For example,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.191.1">
      Figure A.1
     </span>
    </em>
    <span class="koboSpan" id="kobo.192.1">
     displays the header file of
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.193.1">
      BP_Scrambler
     </span>
    </strong>
    <span class="koboSpan" id="kobo.194.1">
     from this
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.195.1">
      book project:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer266">
     <span class="koboSpan" id="kobo.196.1">
      <img alt="img" role="presentation" src="image/Figure_A.1_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Figure">
    <span class="koboSpan" id="kobo.197.1">
     Figure A.1 – The C++ Header Preview tool
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.198.1">
     This is an amazing tool if already have some Blueprint knowledge and want to be gently introduced to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.199.1">
      C++ programming.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.200.1">
     In this section, I have introduced you to some of the most basic features of C++ in Unreal Engine; in the next section, I will introduce some more advanced features that you may already be familiar with in C++ but that are handled somewhat differently in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.201.1">
      Unreal Engine.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-293">
    <a id="_idTextAnchor295">
    </a>
    <span class="koboSpan" id="kobo.202.1">
     Explaining advanced features
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.203.1">
     In this section, we are going to explore how Unreal Engine copes with some of the common features of C++, such as casting
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.204.1">
      and delegates.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-294">
    <a id="_idTextAnchor296">
    </a>
    <span class="koboSpan" id="kobo.205.1">
     Casting
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.206.1">
     In C++ – and other programming
    </span>
    <a id="_idIndexMarker799">
    </a>
    <span class="koboSpan" id="kobo.207.1">
     languages,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.208.1">
      casting
     </span>
    </strong>
    <span class="koboSpan" id="kobo.209.1">
     is the process of converting a variable from one data type to another.
    </span>
    <span class="koboSpan" id="kobo.209.2">
     It allows you to treat an object as a different type, which can be useful in various situations, such as when working with inheritance or interfacing with APIs.
    </span>
    <span class="koboSpan" id="kobo.209.3">
     To cast in Unreal Engine, you use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.210.1">
      Cast&lt;T&gt;()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.211.1">
     method.
    </span>
    <span class="koboSpan" id="kobo.211.2">
     As an example, take a look at the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.212.1">
      following code:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.213.1">
APlayerCharacter* PlayerCharacter =
    Cast&lt;APlayerCharacter&gt;(Actor);</span></pre>
   <p>
    <span class="koboSpan" id="kobo.214.1">
     As you can see, we are trying to cast an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.215.1">
      Actor
     </span>
    </strong>
    <span class="koboSpan" id="kobo.216.1">
     pointer to an
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.217.1">
       APlayerCharacter
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.218.1">
      type.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.219.1">
     In Unreal Engine, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.220.1">
      Cast&lt;T&gt;()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.221.1">
     function is a safe way to cast pointers to a specific class type, as your code will return
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.222.1">
      nullptr
     </span>
    </strong>
    <span class="koboSpan" id="kobo.223.1">
     instead of crashing when the cast
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.224.1">
      itself fails.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.225.1">
     Casting in Unreal Engine should be approached with caution for several reasons.
    </span>
    <span class="koboSpan" id="kobo.225.2">
     First, it can introduce performance overhead; this can slow down your game if used frequently.
    </span>
    <span class="koboSpan" id="kobo.225.3">
     Additionally, excessive casting can complicate code readability and understanding.
    </span>
    <span class="koboSpan" id="kobo.225.4">
     It may obscure the relationships between classes, making it harder for developers to grasp the structure of the code base.
    </span>
    <span class="koboSpan" id="kobo.225.5">
     One effective way to reduce class dependencies is by
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.226.1">
      using interfaces.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-295">
    <a id="_idTextAnchor297">
    </a>
    <span class="koboSpan" id="kobo.227.1">
     Interfaces
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.228.1">
     In many programming languages,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.229.1">
      interfaces
     </span>
    </strong>
    <span class="koboSpan" id="kobo.230.1">
     provide
    </span>
    <a id="_idIndexMarker800">
    </a>
    <span class="koboSpan" id="kobo.231.1">
     a way to define functions for multiple classes without requiring any specific implementation.
    </span>
    <span class="koboSpan" id="kobo.231.2">
     For example, your player character might activate different items in different ways.
    </span>
    <span class="koboSpan" id="kobo.231.3">
     By defining an interface that declares an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.232.1">
      Activate()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.233.1">
     method, each item implementing the interface will define its own
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.234.1">
      personal logic.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.235.1">
     Note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.236.1">
     In Unreal Engine, interfaces differ from traditional programming interfaces, as you are not required to provide an implementation for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.237.1">
      declared functions.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.238.1">
     In Unreal Engine, interfaces will need the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.239.1">
      UINTERFACE()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.240.1">
     macro declaration and two class declarations (in the same file), with two different prefixes.
    </span>
    <span class="koboSpan" id="kobo.240.2">
     As an example, an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.241.1">
      Activatable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.242.1">
     interface, with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.243.1">
      Activate()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.244.1">
     function, will be written more or less like the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.245.1">
      following code:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.246.1">
UINTERFACE(MinimalAPI)
class UActivatable : public UInterface
{
    GENERATED_BODY()
};
class IActivatable
{
    GENERATED_BODY()
    void Activate();
public:
    UFUNCTION(BlueprintCallable, BlueprintNativeEvent)
    void Activate();
};</span></pre>
   <p>
    <span class="koboSpan" id="kobo.247.1">
     In this example, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.248.1">
      UActivatable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.249.1">
     class declaration is a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.250.1">
      UObject
     </span>
    </strong>
    <span class="koboSpan" id="kobo.251.1">
     class that contains all the reflection information related to the interface.
    </span>
    <span class="koboSpan" id="kobo.251.2">
     Being a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.252.1">
      UObject
     </span>
    </strong>
    <span class="koboSpan" id="kobo.253.1">
     class, it possesses all the features you would normally expect, such as having a name, the ability to be serialized, and
    </span>
    <a id="_idIndexMarker801">
    </a>
    <span class="koboSpan" id="kobo.254.1">
     support
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.255.1">
      for reflection.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.256.1">
     Conversely, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.257.1">
      IActivatable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.258.1">
     class declaration is the actual native class used by the compiler to inject virtual functions into
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.259.1">
      your class.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-296">
    <a id="_idTextAnchor298">
    </a>
    <span class="koboSpan" id="kobo.260.1">
     Delegates
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.261.1">
     In C++, a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.262.1">
      delegate
     </span>
    </strong>
    <span class="koboSpan" id="kobo.263.1">
     is a type
    </span>
    <a id="_idIndexMarker802">
    </a>
    <span class="koboSpan" id="kobo.264.1">
     that lets you reference a function, enabling you to call that function indirectly.
    </span>
    <span class="koboSpan" id="kobo.264.2">
     Delegates are often used for event handling and callback mechanisms, allowing different parts of a program to communicate in a decoupled way.
    </span>
    <span class="koboSpan" id="kobo.264.3">
     In Unreal Engine, delegates are specifically designed for use with the engine’s event system.
    </span>
    <span class="koboSpan" id="kobo.264.4">
     They allow you to bind functions to events so that when the event occurs, the bound functions are
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.265.1">
      called automatically.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.266.1">
     In Unreal Engine, there are several types
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.267.1">
      of delegates:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.268.1">
       Single-cast
      </span>
     </strong>
     <span class="koboSpan" id="kobo.269.1">
      : These
     </span>
     <a id="_idIndexMarker803">
     </a>
     <span class="koboSpan" id="kobo.270.1">
      delegates only allow one function to be bound to the
     </span>
     <a id="_idIndexMarker804">
     </a>
     <span class="koboSpan" id="kobo.271.1">
      delegate at a time.
     </span>
     <span class="koboSpan" id="kobo.271.2">
      They are ideal for scenarios where you want to ensure that only one event handler responds to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.272.1">
       an event.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.273.1">
       Multicast
      </span>
     </strong>
     <span class="koboSpan" id="kobo.274.1">
      : These
     </span>
     <a id="_idIndexMarker805">
     </a>
     <span class="koboSpan" id="kobo.275.1">
      delegates can have multiple functions bound to
     </span>
     <a id="_idIndexMarker806">
     </a>
     <span class="koboSpan" id="kobo.276.1">
      them, allowing multiple event handlers to respond to the same event.
     </span>
     <span class="koboSpan" id="kobo.276.2">
      They are suitable for scenarios where several components or classes need to listen to the same event and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.277.1">
       respond accordingly.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.278.1">
       Dynamic
      </span>
     </strong>
     <span class="koboSpan" id="kobo.279.1">
      : These
     </span>
     <a id="_idIndexMarker807">
     </a>
     <span class="koboSpan" id="kobo.280.1">
      delegates are a type of delegate that can be
     </span>
     <a id="_idIndexMarker808">
     </a>
     <span class="koboSpan" id="kobo.281.1">
      serialized and are compatible with Unreal Engine’s reflection system.
     </span>
     <span class="koboSpan" id="kobo.281.2">
      They allow you to bind and unbind functions at runtime and can be easily exposed to Blueprints, making them
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.282.1">
       very versatile.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.283.1">
       Dynamic multicast
      </span>
     </strong>
     <span class="koboSpan" id="kobo.284.1">
      : These
     </span>
     <a id="_idIndexMarker809">
     </a>
     <span class="koboSpan" id="kobo.285.1">
      delegates combine both dynamic and
     </span>
     <a id="_idIndexMarker810">
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.286.1">
       multicast delegates.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.287.1">
     If you work in a hybrid Blueprint/C++ project, chances are that you’ll be mostly working with dynamic multicast delegates; this will let you expose delegates to Blueprints and bind multiple functions to them.
    </span>
    <span class="koboSpan" id="kobo.287.2">
     Just keep in mind that, although highly flexible and powerful, using them might impact performance due to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.288.1">
      runtime binding.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.289.1">
     Declaring a delegate
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.290.1">
     Whenever you declare a
    </span>
    <a id="_idIndexMarker811">
    </a>
    <span class="koboSpan" id="kobo.291.1">
     delegate, you will use a macro starting with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.292.1">
      DECLARE_
     </span>
    </strong>
    <span class="koboSpan" id="kobo.293.1">
     prefix.
    </span>
    <span class="koboSpan" id="kobo.293.2">
     For example, to declare a dynamic multicast delegate with a single parameter, you will use the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.294.1">
      following syntax:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.295.1">
DECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam(OnDamageTakenSignature, float, Amount);</span></pre>
   <p>
    <span class="koboSpan" id="kobo.296.1">
     As you can see, the delegate declaration defines the delegate name, the parameter type, and the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.297.1">
      parameter name.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.298.1">
     Note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.299.1">
     For a full
    </span>
    <a id="_idIndexMarker812">
    </a>
    <span class="koboSpan" id="kobo.300.1">
     list of the available delegate declarations, check out the official
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.301.1">
      documentation:
     </span>
    </span>
    <a href="https://dev.epicgames.com/documentation/en-us/unreal-engine/delegates-and-lamba-functions-in-unreal-engine">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.302.1">
       https://dev.epicgames.com/documentation/en-us/unreal-engine/delegates-and-lamba-functions-in-unreal-engine
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.303.1">
      .
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.304.1">
     Creating a variable of a delegate type
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.305.1">
     To
    </span>
    <a id="_idIndexMarker813">
    </a>
    <span class="koboSpan" id="kobo.306.1">
     create a variable
    </span>
    <a id="_idIndexMarker814">
    </a>
    <span class="koboSpan" id="kobo.307.1">
     out of a delegate type, you will use the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.308.1">
      following syntax:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.309.1">
UPROPERTY(BlueprintAssignable)
OnDamageTakenSignature OnDamageTaken;</span></pre>
   <p>
    <span class="koboSpan" id="kobo.310.1">
     Note the use of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.311.1">
      BlueprintAssignable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.312.1">
     specifier that will make this property accessible
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.313.1">
      to Blueprints.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.314.1">
     Subscribing to a delegate
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.315.1">
     Subscribing to a
    </span>
    <a id="_idIndexMarker815">
    </a>
    <span class="koboSpan" id="kobo.316.1">
     delegate varies, depending on whether it is multicast or not, as well as whether it is dynamic or non-dynamic.
    </span>
    <span class="koboSpan" id="kobo.316.2">
     In our example, the delegate is dynamic and multicast, so we will use the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.317.1">
      following syntax:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.318.1">
OnDamageTaken.AddDynamic(this, &amp;ClassName::HandleDamage);</span></pre>
   <p>
    <span class="koboSpan" id="kobo.319.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.320.1">
      HandleDamage()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.321.1">
     function will be similar to the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.322.1">
      following code:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.323.1">
void HandleDamage(float Amount)
{ /** Function implementation **/ }</span></pre>
   <h3>
    <span class="koboSpan" id="kobo.324.1">
     Calling a delegate
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.325.1">
     Calling a
    </span>
    <a id="_idIndexMarker816">
    </a>
    <span class="koboSpan" id="kobo.326.1">
     delegate is quite straightforward, as you will use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.327.1">
      Broadcast()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.328.1">
     function for multicast delegates and the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.329.1">
      Execute()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.330.1">
     function otherwise.
    </span>
    <span class="koboSpan" id="kobo.330.2">
     Calling a delegate from our example will look like the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.331.1">
      following code:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.332.1">
OnDamageTaken.Broadcast(30.f);</span></pre>
   <p>
    <span class="koboSpan" id="kobo.333.1">
     Here,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.334.1">
      30.f
     </span>
    </strong>
    <span class="koboSpan" id="kobo.335.1">
     is the damage taken by the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.336.1">
      listening object.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.337.1">
     In this section, I have presented some of the key features that distinguish Unreal Engine C++ from standard C++ programming.
    </span>
    <span class="koboSpan" id="kobo.337.2">
     In the next section, we are going to delve deep into some of the most important inner features of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.338.1">
      Unreal Engine.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-297">
    <a id="_idTextAnchor299">
    </a>
    <span class="koboSpan" id="kobo.339.1">
     Exploring core mechanics
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.340.1">
     In this section, we will delve into more sophisticated features, such as memory management and reflection, and explain how Unreal Engine copes
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.341.1">
      with them.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-298">
    <a id="_idTextAnchor300">
    </a>
    <span class="koboSpan" id="kobo.342.1">
     Garbage collection
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.343.1">
     As you may already know,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.344.1">
      garbage collection
     </span>
    </strong>
    <span class="koboSpan" id="kobo.345.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.346.1">
      GC
     </span>
    </strong>
    <span class="koboSpan" id="kobo.347.1">
     ) is a
    </span>
    <a id="_idIndexMarker817">
    </a>
    <span class="koboSpan" id="kobo.348.1">
     way to automatically manage memory.
    </span>
    <span class="koboSpan" id="kobo.348.2">
     In a GC-managed system, once an object is no longer used, it will be automatically removed from memory to free space.
    </span>
    <span class="koboSpan" id="kobo.348.3">
     This allows you to create a new object and use it, and when you’re finished using it, you will simply be good to go.
    </span>
    <span class="koboSpan" id="kobo.348.4">
     This system is managed by
    </span>
    <a id="_idIndexMarker818">
    </a>
    <span class="koboSpan" id="kobo.349.1">
     the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.350.1">
      garbage collector
     </span>
    </strong>
    <span class="koboSpan" id="kobo.351.1">
     , which constantly monitors which objects are still in use.
    </span>
    <span class="koboSpan" id="kobo.351.2">
     When an object is no longer needed, the garbage collector automatically frees up the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.352.1">
      associated memory.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.353.1">
     While
    </span>
    <a id="_idIndexMarker819">
    </a>
    <span class="koboSpan" id="kobo.354.1">
     GC is used by many modern programming languages – such as C# and Python – lower-level languages such as C and C++ do not include a garbage collector by default.
    </span>
    <span class="koboSpan" id="kobo.354.2">
     As a result, programmers must manually track memory usage and free it when it’s no longer needed.
    </span>
    <span class="koboSpan" id="kobo.354.3">
     This process can be error-prone and more challenging for developers to manage.
    </span>
    <span class="koboSpan" id="kobo.354.4">
     To address this issue, Unreal Engine has implemented its own
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.355.1">
      GC system.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.356.1">
     How is GC used by Unreal Engine?
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.357.1">
     When an object derived from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.358.1">
      UObject
     </span>
    </strong>
    <span class="koboSpan" id="kobo.359.1">
     class is instantiated, it will be registered with Unreal Engine’s GC system.
    </span>
    <span class="koboSpan" id="kobo.359.2">
     This system automatically runs at predefined time intervals – about 30 to 60 seconds – to identify and remove any objects that are no longer
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.360.1">
      in use.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.361.1">
     The GC system keeps a set of root objects that are defined to remain alive indefinitely.
    </span>
    <span class="koboSpan" id="kobo.361.2">
     Additionally, it uses reflection – something that C++ lacks but that Unreal Engine has natively – to examine the properties of an object.
    </span>
    <span class="koboSpan" id="kobo.361.3">
     This allows the GC system to follow references to other objects and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.362.1">
      their properties.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.363.1">
     If an object is
    </span>
    <a id="_idIndexMarker820">
    </a>
    <span class="koboSpan" id="kobo.364.1">
     discovered while traversing other objects, and one of those objects is part of the root set, then the object is deemed reachable and remains alive.
    </span>
    <span class="koboSpan" id="kobo.364.2">
     Once all objects are examined, and if there is no way to reach an object in the root set via references, that object is considered unreachable and marked to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.365.1">
      be garbage-collected.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.366.1">
     When an object is garbage-collected, the memory it occupies is freed and returned to the system; any pointers that referenced this object will be set
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.367.1">
      to
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.368.1">
       null
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.369.1">
      .
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.370.1">
     Note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.371.1">
     It should be noted that manual memory management – the one you should be used to if you come from a pure C++ background – is still an option in Unreal Engine, but it cannot be used on any
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.372.1">
      UObject
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.373.1">
      derived classes.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.374.1">
     Using GC in Unreal Engine
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.375.1">
     If you have a pointer
    </span>
    <a id="_idIndexMarker821">
    </a>
    <span class="koboSpan" id="kobo.376.1">
     within a function, you don’t need to be concerned about the GC, as pointers inside functions behave like standard C/C++ pointers and do not require
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.377.1">
      any modifications.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.378.1">
     Conversely, if you want to have a pointer to an object that you need to persist across frames, you will need to add some small additional code; the pointer needs to be stored as a member variable in your class, and you must add the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.379.1">
      UPROPERTY()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.380.1">
     macro before it.
    </span>
    <span class="koboSpan" id="kobo.380.2">
     That’s all you need to do to have the reference that follows be considered by the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.381.1">
      GC system.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.382.1">
     Note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.383.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.384.1">
      UPROPERTY()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.385.1">
     macro can only be used inside classes that derive from
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.386.1">
      UObject
     </span>
    </strong>
    <span class="koboSpan" id="kobo.387.1">
     ; otherwise, you will have to handle
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.388.1">
      memory manually.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-299">
    <a id="_idTextAnchor301">
    </a>
    <span class="koboSpan" id="kobo.389.1">
     The reflection system
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.390.1">
     The term
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.391.1">
      reflection
     </span>
    </strong>
    <span class="koboSpan" id="kobo.392.1">
     refers
    </span>
    <a id="_idIndexMarker822">
    </a>
    <span class="koboSpan" id="kobo.393.1">
     to the ability of a program to inspect its own structure at runtime; this feature is extremely valuable and one of the core technologies used by Unreal Engine, supporting various systems such as the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.394.1">
      Detail
     </span>
    </strong>
    <span class="koboSpan" id="kobo.395.1">
     panel in the Editor, serialization, GC, and communication between Blueprint
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.396.1">
      and C++.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.397.1">
     Since there is no native support for reflection in C++, Epic Games has created its own system to gather, examine, and modify data related to C++ classes, structs, and more within
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.398.1">
      the engine.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.399.1">
     Note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.400.1">
     The reflection system also empowers all the Editor’s panels, making Unreal Engine’s UI
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.401.1">
      highly customizable.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.402.1">
     In order to let the system use reflection, you will need to annotate any type or property that you want to expose to the system.
    </span>
    <span class="koboSpan" id="kobo.402.2">
     This annotation will use macros such as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.403.1">
      UCLASS()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.404.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.405.1">
      UFUNCTION()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.406.1">
     , or
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.407.1">
      UPROPERTY()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.408.1">
     .
    </span>
    <span class="koboSpan" id="kobo.408.2">
     Finally, to enable these annotations, you will need to add the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.409.1">
      #include "AClassName.generated.h"
     </span>
    </strong>
    <span class="koboSpan" id="kobo.410.1">
     declaration.
    </span>
    <span class="koboSpan" id="kobo.410.2">
     This declaration is automatically generated when you create a class from the Unreal Engine Editor, so you won’t need to worry
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.411.1">
      about it.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.412.1">
     As an example, consider
    </span>
    <a id="_idIndexMarker823">
    </a>
    <span class="koboSpan" id="kobo.413.1">
     the following block of code from the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.414.1">
      BaseSecurityCam.h
     </span>
    </strong>
    <span class="koboSpan" id="kobo.415.1">
     file you created in this
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.416.1">
      book project:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.417.1">
#pragma once
#include "CoreMinimal.h"
#include "GameFramework/Actor.h"
#include "BaseSecurityCam.generated.h"
class UAIPerceptionComponent;
UCLASS(Blueprintable)
class UNREALAGILITYARENA_API ABaseSecurityCam :
    public APawn
{
    GENERATED_BODY()
    UPROPERTY(VisibleAnywhere,
              BlueprintReadOnly,
              Category="Security Cam",
              meta=(AllowPrivateAccess="true"))
    UStaticMeshComponent* SupportMeshComponent;
    UPROPERTY(VisibleAnywhere,
              BlueprintReadOnly,
              Category="Security Cam",
              meta=(AllowPrivateAccess="true"))
    UStaticMeshComponent* CamMeshComponent;
public:
    ABaseSecurityCam();
};</span></pre>
   <p>
    <span class="koboSpan" id="kobo.418.1">
     You will have noticed the presence of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.419.1">
      #include "BaseSecurityCam.generated.h"
     </span>
    </strong>
    <span class="koboSpan" id="kobo.420.1">
     declaration and the use of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.421.1">
      UPROPERTY()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.422.1">
     macro for the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.423.1">
      components’ declarations.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.424.1">
     The following list outlines the fundamental markup elements available within the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.425.1">
      reflection system:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.426.1">
       UCLASS()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.427.1">
      : Generates reflection data for a class that derives
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.428.1">
       from
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.429.1">
        UObject
       </span>
      </strong>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.430.1">
       USTRUCT()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.431.1">
      : Generates reflection data for
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.432.1">
       a struct
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.433.1">
       GENERATED_BODY()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.434.1">
      : Will be replaced with all the necessary boilerplate code for the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.435.1">
       class type
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.436.1">
       UPROPERTY()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.437.1">
      : Informs the engine that the associated member variable will have additional features, such as
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.438.1">
       Blueprint accessibility
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.439.1">
       UFUNCTION()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.440.1">
      : Allows, among other things, us to call the decorated function from an extending
     </span>
     <a id="_idIndexMarker824">
     </a>
     <span class="koboSpan" id="kobo.441.1">
      Blueprint class or override the function from the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.442.1">
       Blueprint itself
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.443.1">
     The reflection system is also used by the garbage collector, so you won’t need to worry about memory management, as explained in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.444.1">
      GC subsection.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-300">
    <a id="_idTextAnchor302">
    </a>
    <span class="koboSpan" id="kobo.445.1">
     Summary
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.446.1">
     In this appendix, I provided an overview of how C++ is used within Unreal Engine, highlighting its unique features and functionalities.
    </span>
    <span class="koboSpan" id="kobo.446.2">
     We explored the integration of C++ with the engine’s architecture, some of the differences between Unreal Engine C++ and standard C++, and the benefits of using C++ inside the engine itself.
    </span>
    <span class="koboSpan" id="kobo.446.3">
     We also discussed key concepts such as delegates and memory management, emphasizing their most important peculiarities and features.
    </span>
    <span class="koboSpan" id="kobo.446.4">
     Additionally, we introduced the C++ Header Preview tool; such an instrument is a must-have if you don’t have much experience with C++ for Unreal Engine and you want to make the transition
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.447.1">
      from Blueprints.
     </span>
    </span>
   </p>
  </div>
 </body></html>