<html><head></head><body>
<div id="_idContainer200">
<h1 class="chapter-number" id="_idParaDest-209"><a id="_idTextAnchor226"/><span class="koboSpan" id="kobo.1.1">12</span></h1>
<h1 id="_idParaDest-210"><a id="_idTextAnchor227"/><span class="koboSpan" id="kobo.2.1">Ensuring Security and Privacy in Amazon Bedrock</span></h1>
<p><span class="koboSpan" id="kobo.3.1">GenAI has been making remarkable developments, enabling machines to produce human-like content across various domains, including text, images, and even code. </span><span class="koboSpan" id="kobo.3.2">However, there have been concerns about the risks and challenges of using GenAI models and how the data is handled. </span><span class="koboSpan" id="kobo.3.3">In this chapter, we are </span><a id="_idIndexMarker987"/><span class="koboSpan" id="kobo.4.1">going to look at security, privacy, and </span><strong class="bold"><span class="koboSpan" id="kobo.5.1">Guardrails for </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.6.1">Amazon Bedrock</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.7.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.8.1">Ensuring data privacy and security is a top priority in today’s digital landscape, and Amazon Bedrock has implemented robust measures to address this concern. </span><span class="koboSpan" id="kobo.8.2">We are going to look at data localization, isolation, and encryption and learn ways to ensure that your data remains within your designated AWS region, never shared nor stored, and protected through robust encryption protocols. </span><span class="koboSpan" id="kobo.8.3">Then, we will understand how Amazon Bedrock is integrated with AWS IAM to provide granular control over access privileges, ensuring that only authorized personnel can interact with </span><span class="No-Break"><span class="koboSpan" id="kobo.9.1">your resources.</span></span></p>
<p><span class="koboSpan" id="kobo.10.1">Moreover, we are going to discuss ethical practices and guardrails, allowing you to implement safeguards aligned with safe and responsible AI policies, such as content filters, denied topics, word filters, and sensitive </span><span class="No-Break"><span class="koboSpan" id="kobo.11.1">information filters.</span></span></p>
<p><span class="koboSpan" id="kobo.12.1">Here are key topics that will be covered in </span><span class="No-Break"><span class="koboSpan" id="kobo.13.1">this chapter:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.14.1">Security and </span><span class="No-Break"><span class="koboSpan" id="kobo.15.1">privacy overview</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.16.1">Data encryption</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.17.1">AWS IAM</span></span></li>
<li><span class="koboSpan" id="kobo.18.1">Securing </span><span class="No-Break"><span class="koboSpan" id="kobo.19.1">the network</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.20.1">Network flow</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.21.1">Ethical practices</span></span></li>
<li><span class="koboSpan" id="kobo.22.1">Guardrails for </span><span class="No-Break"><span class="koboSpan" id="kobo.23.1">Amazon Bedrock</span></span><a id="_idTextAnchor228"/><a id="_idTextAnchor229"/><a id="_idTextAnchor230"/></li>
</ul>
<h1 id="_idParaDest-211"><a id="_idTextAnchor231"/><span class="koboSpan" id="kobo.24.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.25.1">This chapter requires you to have access to an AWS account. </span><span class="koboSpan" id="kobo.25.2">If you don’t have it already, you can go to </span><a href="https://aws.amazon.com/getting-started/"><span class="koboSpan" id="kobo.26.1">https://aws.amazon.com/getting-started/</span></a><span class="koboSpan" id="kobo.27.1"> and create an </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">AWS account.</span></span></p>
<p><span class="koboSpan" id="kobo.29.1">Secondly, you will need to set up AWS Python SDK (Boto3), which you can do by going </span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">to </span></span><a href="https://docs.aws.amazon.com/bedrock/latest/APIReference/welcome.html"><span class="No-Break"><span class="koboSpan" id="kobo.31.1">https://docs.aws.amazon.com/bedrock/latest/APIReference/welcome.html</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.32.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.33.1">You can carry out the Python setup in any way: install it on your local machine, or use AWS Cloud9, or utilize AWS Lambda, or leverage </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">Amazon SageMaker.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.35.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.36.1">There will be a charge associated with the invocation and customization of the FMs of Amazon Bedrock. </span><span class="koboSpan" id="kobo.36.2">Please refer to </span><a href="https://aws.amazon.com/bedrock/pricing/"><span class="koboSpan" id="kobo.37.1">https://aws.amazon.com/bedrock/pricing/</span></a><span class="koboSpan" id="kobo.38.1"> to </span><span class="No-Break"><span class="koboSpan" id="kobo.39.1">learn more.</span></span></p>
<h1 id="_idParaDest-212"><a id="_idTextAnchor232"/><span class="koboSpan" id="kobo.40.1">Security and privacy overview</span></h1>
<p><span class="koboSpan" id="kobo.41.1">One of the core </span><a id="_idIndexMarker988"/><span class="koboSpan" id="kobo.42.1">security principles of Amazon Bedrock is that you, as a user of Amazon Bedrock, are always in control of your data. </span><span class="koboSpan" id="kobo.42.2">Your data is never shared with other users or customers and is never used to improve or train the FMs. </span><span class="koboSpan" id="kobo.42.3">Let us look at the intricate layers of protection that Amazon </span><span class="No-Break"><span class="koboSpan" id="kobo.43.1">Bedrock provides:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.44.1">Data localization</span></strong><span class="koboSpan" id="kobo.45.1">: The inference data or training data for model customization remains within the AWS region that you are using. </span><span class="koboSpan" id="kobo.45.2">This means that all API requests and data processing occur solely within the specified region, eliminating the risk of data migration or exposure beyond your designated boundaries. </span><span class="koboSpan" id="kobo.45.3">This regional isolation guarantees that your data never leaves the designated geographical boundaries, so you get an additional layer of protection and compliance with regional </span><span class="No-Break"><span class="koboSpan" id="kobo.46.1">data regulations.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.47.1">Data isolation</span></strong><span class="koboSpan" id="kobo.48.1">: Your inference or training data for model customization is stored in Amazon S3, but is never retained in the service-managed account, eliminating the possibility of accidental leaks, unauthorized access, or misuse by third parties, including model vendors or AWS itself. </span><span class="koboSpan" id="kobo.48.2">The only information stored pertains to operational metrics, such as usage data for billing purposes and metadata necessary for </span><span class="No-Break"><span class="koboSpan" id="kobo.49.1">console functionality.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.50.1">Encryption</span></strong><span class="koboSpan" id="kobo.51.1">: When it comes to encrypting data, Amazon Bedrock employs robust encryption protocols to safeguard the information. </span><span class="koboSpan" id="kobo.51.2">All the communications to, from, and within the service are encrypted in transit, with a minimum requirement of TLS 1.2 and a recommendation for TLS 1.3. </span><span class="koboSpan" id="kobo.51.3">Additionally, Amazon Bedrock encourages the encryption of your customization training data stored in an Amazon S3 bucket and customized models using your own KMS keys, ensuring that only authorized parties with the correct credentials can access and utilize </span><span class="No-Break"><span class="koboSpan" id="kobo.52.1">these resources.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.53.1">IAM</span></strong><span class="koboSpan" id="kobo.54.1">: Amazon Bedrock’s integration with AWS IAM empowers you with granular control over access privileges. </span><span class="koboSpan" id="kobo.54.2">You can selectively allow or deny access to specific models, specific API calls, model customization jobs, or Amazon Bedrock itself. </span><span class="koboSpan" id="kobo.54.3">This fine-grained access control ensures that only authorized personnel can interact with your resources, minimizing the risk of unauthorized access or </span><span class="No-Break"><span class="koboSpan" id="kobo.55.1">accidental modifications.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.56.1">Comprehensive monitoring and logging</span></strong><span class="koboSpan" id="kobo.57.1">: As we have seen in </span><a href="B22045_11.xhtml#_idTextAnchor207"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.58.1">Chapter 11</span></em></span></a><span class="koboSpan" id="kobo.59.1">, transparency and auditability are essential components of data privacy and protection. </span><span class="koboSpan" id="kobo.59.2">Amazon </span><a id="_idIndexMarker989"/><span class="koboSpan" id="kobo.60.1">Bedrock offers comprehensive monitoring and logging capabilities, so you can track usage metrics, build customized dashboards using Amazon CloudWatch, and monitor API activity through AWS CloudTrail. </span><span class="koboSpan" id="kobo.60.2">These features provide invaluable insights into your data’s usage, aiding in troubleshooting and ensuring compliance with </span><span class="No-Break"><span class="koboSpan" id="kobo.61.1">regulatory requirements.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.62.1">Compliance standards</span></strong><span class="koboSpan" id="kobo.63.1">: Amazon Bedrock is committed to meeting the industry</span><a id="_idIndexMarker990"/><span class="koboSpan" id="kobo.64.1"> standards </span><a id="_idIndexMarker991"/><span class="koboSpan" id="kobo.65.1">with </span><a id="_idIndexMarker992"/><span class="koboSpan" id="kobo.66.1">data</span><a id="_idIndexMarker993"/><span class="koboSpan" id="kobo.67.1"> privacy and protection. </span><span class="koboSpan" id="kobo.67.2">It has multiple accreditations, such as </span><strong class="bold"><span class="koboSpan" id="kobo.68.1">GDPR</span></strong><span class="koboSpan" id="kobo.69.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.70.1">General Data Protection Regulation</span></strong><span class="koboSpan" id="kobo.71.1">), </span><strong class="bold"><span class="koboSpan" id="kobo.72.1">HIPAA</span></strong><span class="koboSpan" id="kobo.73.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.74.1">Health Insurance Portability and Accountability Act</span></strong><span class="koboSpan" id="kobo.75.1">), </span><strong class="bold"><span class="koboSpan" id="kobo.76.1">SOC</span></strong><span class="koboSpan" id="kobo.77.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.78.1">System and Organization Control</span></strong><span class="koboSpan" id="kobo.79.1">) </span><strong class="bold"><span class="koboSpan" id="kobo.80.1">1</span></strong><span class="koboSpan" id="kobo.81.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.82.1">2</span></strong><span class="koboSpan" id="kobo.83.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.84.1">3</span></strong><span class="koboSpan" id="kobo.85.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.86.1">ISO</span></strong><span class="koboSpan" id="kobo.87.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.88.1">International Organization for Standardization</span></strong><span class="koboSpan" id="kobo.89.1">), </span><strong class="bold"><span class="koboSpan" id="kobo.90.1">STAR</span></strong><span class="koboSpan" id="kobo.91.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.92.1">Security Trust Assurance and Risk</span></strong><span class="koboSpan" id="kobo.93.1">), and </span><strong class="bold"><span class="koboSpan" id="kobo.94.1">PCI-DSS</span></strong><span class="koboSpan" id="kobo.95.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.96.1">Payment Card Industry Data Security Standard</span></strong><span class="koboSpan" id="kobo.97.1">). </span><span class="koboSpan" id="kobo.97.2">The comprehensive </span><a id="_idIndexMarker994"/><span class="koboSpan" id="kobo.98.1">compliance posture</span><a id="_idIndexMarker995"/><span class="koboSpan" id="kobo.99.1"> enables you to leverage Amazon Bedrock with confidence, knowing that your data is protected and handled in </span><a id="_idIndexMarker996"/><span class="koboSpan" id="kobo.100.1">accordance with industry best practices and </span><span class="No-Break"><span class="koboSpan" id="kobo.101.1">regulatory mandates.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.102.1">Next, let us look at protecting the data through </span><span class="No-Break"><span class="koboSpan" id="kobo.103.1">data encryption.</span></span></p>
<h1 id="_idParaDest-213"><a id="_idTextAnchor233"/><span class="koboSpan" id="kobo.104.1">Data encryption</span></h1>
<p><span class="koboSpan" id="kobo.105.1">If you have used AWS</span><a id="_idIndexMarker997"/><span class="koboSpan" id="kobo.106.1"> services before, you might be familiar with the </span><strong class="bold"><span class="koboSpan" id="kobo.107.1">AWS Shared Responsibility Model</span></strong><span class="koboSpan" id="kobo.108.1">, where</span><a id="_idIndexMarker998"/><span class="koboSpan" id="kobo.109.1"> AWS manages and is responsible for securing underlying cloud infrastructure, and you are responsible for protecting the data and applications hosted on this infrastructure. </span><span class="koboSpan" id="kobo.109.2">If you would like to read through the AWS Shared Responsibility Model, you can go </span><span class="No-Break"><span class="koboSpan" id="kobo.110.1">to </span></span><a href="https://aws.amazon.com/compliance/shared-responsibility-model/"><span class="No-Break"><span class="koboSpan" id="kobo.111.1">https://aws.amazon.com/compliance/shared-responsibility-model/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.112.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.113.1">When it comes to protecting the data, you can perform encryption on them using AWS KMS or you can also perform client-side encryption before writing to AWS resources. </span><span class="koboSpan" id="kobo.113.2">Let us look at the encryption of different resources that you can perform to safeguard </span><span class="No-Break"><span class="koboSpan" id="kobo.114.1">your data:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.115.1">Knowledge bases</span></strong><span class="koboSpan" id="kobo.116.1">: KMS can be used to encrypt data that is in transition for knowledge bases. </span><span class="koboSpan" id="kobo.116.2">During the creation or update of a data source, you can provide the KMS key ARN to encrypt the ingested data, ensuring the confidentiality of your knowledge base content. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.117.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.118.1">.1</span></em><span class="koboSpan" id="kobo.119.1"> demonstrates </span><strong class="bold"><span class="koboSpan" id="kobo.120.1">Advanced settings</span></strong><span class="koboSpan" id="kobo.121.1"> that can be used for working </span><span class="No-Break"><span class="koboSpan" id="kobo.122.1">with KMS.</span></span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer186">
<span class="koboSpan" id="kobo.123.1"><img alt="Figure 12.1 – KMS key for transient data storage" src="image/B22045_12_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.124.1">Figure 12.1 – KMS key for transient data storage</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.125.1">As shown in the preceding figure, when you create or update the data source of a knowledge base, you can specify whether to use the default AWS-managed KMS key or </span><strong class="bold"><span class="koboSpan" id="kobo.126.1">Customize encryption settings</span></strong><span class="koboSpan" id="kobo.127.1"> where you choose your own customer-managed KMS key. </span><span class="koboSpan" id="kobo.127.2">Encryption for knowledge bases can happen at various stages. </span><span class="koboSpan" id="kobo.127.3">During the data ingestion phase, Bedrock employs the KMS encryption key</span><a id="_idIndexMarker999"/><span class="koboSpan" id="kobo.128.1"> to secure the transient data storage. </span><span class="koboSpan" id="kobo.128.2">This temporary storage facilitates the secure ingestion of your data sources, ensuring that your information remains protected while </span><span class="No-Break"><span class="koboSpan" id="kobo.129.1">in transition.</span></span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.130.1">If you set up OpenSearch as a vector index for knowledge bases, the information passed to this service is also encrypted using a KMS key, providing an additional layer of security. </span><span class="koboSpan" id="kobo.130.2">Furthermore, Bedrock extends its encryption capabilities to the following resources associated with your </span><span class="No-Break"><span class="koboSpan" id="kobo.131.1">knowledge bases:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.132.1">Data in S3 bucket</span></strong><span class="koboSpan" id="kobo.133.1">: By encrypting these sources with a KMS key, you can be assured that your valuable data remains confidential and inaccessible to </span><span class="No-Break"><span class="koboSpan" id="kobo.134.1">unauthorized parties.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.135.1">You can allow Amazon Bedrock to decrypt the data from the S3 bucket by attaching the following IAM policy to the Amazon Bedrock </span><span class="No-Break"><span class="koboSpan" id="kobo.136.1">service role:</span></span></p><pre class="source-code"><span class="koboSpan" id="kobo.137.1">
{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.138.1">
"Version": "2012-10-17",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.139.1">
"Statement": [{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.140.1">
"Effect": "Allow",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.141.1">
"Action": ["KMS:Decrypt"],</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.142.1">
"Resource": ["arn:aws:kms:region:account-id:key/key-id"],</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.143.1">
"Condition": {"StringEquals": {"kms:ViaService": ["s3.region.amazonaws.com"]}}}]</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.144.1">
}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.145.1">Please note that you would need to update the resource in the policy with the ARN of the </span><span class="No-Break"><span class="koboSpan" id="kobo.146.1">KMS key.</span></span></p></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.147.1">Third-party vector stores</span></strong><span class="koboSpan" id="kobo.148.1">: If you leverage external vector stores, Bedrock allows you to encrypt them using a KMS key, maintaining the security and integrity of your knowledge bases across </span><span class="No-Break"><span class="koboSpan" id="kobo.149.1">multiple platforms.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.150.1">For more details and </span><a id="_idIndexMarker1000"/><span class="koboSpan" id="kobo.151.1">the IAM permissions needed for knowledge base resources, you can check </span><span class="No-Break"><span class="koboSpan" id="kobo.152.1">out </span></span><a href="https://docs.aws.amazon.com/bedrock/latest/userguide/encryption-kb.html"><span class="No-Break"><span class="koboSpan" id="kobo.153.1">https://docs.aws.amazon.com/bedrock/latest/userguide/encryption-kb.html</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.154.1">.</span></span></p></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.155.1">Model customization</span></strong><span class="koboSpan" id="kobo.156.1">: When it comes to creating model customization resources, it is essential to understand how the platform handles the data during the process. </span><span class="koboSpan" id="kobo.156.2">Firstly, Amazon Bedrock does not use the training data to improve the base FMs and is also never accessible by any of the model providers. </span><span class="koboSpan" id="kobo.156.3">When creating the customization job, Amazon Bedrock creates a copy of the FM, and your data is used to fine-tune that copied model. </span><span class="koboSpan" id="kobo.156.4">Importantly, your training data is not used to train the base FMs themselves, nor it is shared or seen by </span><span class="No-Break"><span class="koboSpan" id="kobo.157.1">model providers.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.158.1">Additionally, Amazon Bedrock takes measures to protect the confidentiality of your data. </span><span class="koboSpan" id="kobo.158.2">Once the fine-tuning process is completed, your training or validation data is not stored by the service. </span><span class="koboSpan" id="kobo.158.3">However, it’s worth noting that fine-tuned models may inadvertently reproduce portions of the training data during output generation. </span><span class="koboSpan" id="kobo.158.4">To mitigate this risk, it’s recommended to filter out any sensitive or confidential information from your training data before initiating the </span><span class="No-Break"><span class="koboSpan" id="kobo.159.1">customization process.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.160.1">Regarding the encryption options for customization jobs, by default, custom models are encrypted using AWS managed KMS key. </span><span class="koboSpan" id="kobo.160.2">Alternatively, you can use your own customer-managed KMS key, which provides more control over your data encryption. </span><span class="koboSpan" id="kobo.160.3">To use a customer-managed key, you would need to create the key, attach a resource-based policy granting appropriate permissions, and specify the key </span><a id="_idIndexMarker1001"/><span class="koboSpan" id="kobo.161.1">when creating the </span><span class="No-Break"><span class="koboSpan" id="kobo.162.1">customization job:</span></span></p><pre class="source-code"><span class="koboSpan" id="kobo.163.1">
{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.164.1">
    "Version": "2012-10-17",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.165.1">
    "Id": "KMS Key Policy",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.166.1">
    "Statement": [{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.167.1">
            "Sid": "Permissions for custom model builders",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.168.1">
            "Effect": "Allow",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.169.1">
            "Principal": {"AWS": "arn:aws:iam::account-id:user/role"},</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.170.1">
            "Action": [</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.171.1">
                "kms:Decrypt",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.172.1">
                "kms:GenerateDataKey",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.173.1">
                "kms:DescribeKey",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.174.1">
                "kms:CreateGrant"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.175.1">
            ],</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.176.1">
            "Resource": "*"},</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.177.1">
        {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.178.1">
            "Sid": "Permissions for custom model users",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.179.1">
            "Effect": "Allow",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.180.1">
            "Principal": {"AWS": "arn:aws:iam::account-id:user/role"},</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.181.1">
            "Action": "kms:Decrypt",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.182.1">
            "Resource": "*"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.183.1">
        }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.184.1">
}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.185.1">This policy grants specific permissions related to KMS key management for two different roles: </span><strong class="bold"><span class="koboSpan" id="kobo.186.1">custom model builders</span></strong><span class="koboSpan" id="kobo.187.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.188.1">custom model users</span></strong><span class="koboSpan" id="kobo.189.1">. </span><span class="koboSpan" id="kobo.189.2">The custom</span><a id="_idIndexMarker1002"/><span class="koboSpan" id="kobo.190.1"> model </span><a id="_idIndexMarker1003"/><span class="koboSpan" id="kobo.191.1">builder role is allowed to perform actions such as decrypting data, generating data keys, describing keys, and creating grants, while the custom model user role is only allowed to </span><span class="No-Break"><span class="koboSpan" id="kobo.192.1">decrypt data.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.193.1">To use this policy, you’ll need to replace the </span><strong class="source-inline"><span class="koboSpan" id="kobo.194.1">account-id</span></strong><span class="koboSpan" id="kobo.195.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.196.1">user/role</span></strong><span class="koboSpan" id="kobo.197.1"> placeholders with</span><a id="_idIndexMarker1004"/><span class="koboSpan" id="kobo.198.1"> your actual AWS account ID and the appropriate IAM user or </span><span class="No-Break"><span class="koboSpan" id="kobo.199.1">role names.</span></span></p></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.200.1">Bedrock agent encryption</span></strong><span class="koboSpan" id="kobo.201.1">: Regarding Agents for Amazon Bedrock, by default, an AWS-managed key is used by Amazon Bedrock. </span><span class="koboSpan" id="kobo.201.2">However, you can encrypt the agent resources with your own </span><span class="No-Break"><span class="koboSpan" id="kobo.202.1">customer-managed key.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.203.1">First, you would need to attach an identity-based policy, such as the following, to the IAM user or the role, so Amazon Bedrock can perform encryption/decryption on the Bedrock </span><span class="No-Break"><span class="koboSpan" id="kobo.204.1">agent resources:</span></span></p><pre class="source-code"><span class="koboSpan" id="kobo.205.1">
{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.206.1">
    "Version": "2012-10-17",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.207.1">
    "Statement": [{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.208.1">
            "Sid": "Allow Bedrock to encrypt/decrypt the bedrock agent resources ,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.209.1">
            "Effect": "Allow",    "Action":["kms:GenerateDataKey","kms:Decrypt"],</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.210.1">
            "Resource": "arn:aws:kms:${region}:${account-id}:key/${key-id}",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.211.1">
            "Condition": {"StringEquals": {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.212.1">
"kms:EncryptionContext:aws:bedrock:arn": "arn:aws:bedrock:${region}:${account-id}:agent/${agent-id}"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.213.1">
                }}}]</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.214.1">
}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.215.1">In addition, make sure the KMS key has permissions as mentioned in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.216.1">link: </span></span><span class="No-Break"><span class="koboSpan" id="kobo.217.1">https://docs.aws.amazon.com/bedrock/latest/userguide/encryption-agents.html</span></span><span class="No-Break"><span class="koboSpan" id="kobo.218.1">.</span></span></p></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.219.1">Guardrails encryption</span></strong><span class="koboSpan" id="kobo.220.1">: By default, Amazon Bedrock uses an AWS-managed encryption key to protect your guardrails. </span><span class="koboSpan" id="kobo.220.2">However, you have the option to use your own customer-managed KMS key for enhanced control and customization. </span><span class="koboSpan" id="kobo.220.3">To create a customer-managed KMS key for your guardrail, you’ll need to have the necessary permissions in your AWS account. </span><span class="koboSpan" id="kobo.220.4">For more details on what permissions you would need to set after creating the customer-managed key, you can check out the following </span><span class="No-Break"><span class="koboSpan" id="kobo.221.1">link: </span></span><span class="No-Break"><span class="koboSpan" id="kobo.222.1">https://docs.aws.amazon.com/bedrock/latest/userguide/guardrails-permissions.html</span></span><span class="No-Break"><span class="koboSpan" id="kobo.223.1">.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.224.1">Now that we have</span><a id="_idIndexMarker1005"/><span class="koboSpan" id="kobo.225.1"> looked at the encryption options for Amazon Bedrock, let us look at how we can grant users and AWS resources required permissions to </span><span class="No-Break"><span class="koboSpan" id="kobo.226.1">Amazon Bedrock.</span></span></p>
<h1 id="_idParaDest-214"><a id="_idTextAnchor234"/><span class="koboSpan" id="kobo.227.1">AWS IAM</span></h1>
<p><span class="koboSpan" id="kobo.228.1">Using IAM, you can </span><a id="_idIndexMarker1006"/><span class="koboSpan" id="kobo.229.1">provide secure access to only designated users or resources to Amazon Bedrock and its capabilities. </span><span class="koboSpan" id="kobo.229.2">IAM allows you to create user accounts and assign permissions to those accounts, determining what actions they can perform on specific resources. </span><span class="koboSpan" id="kobo.229.3">Here are some of the key points on how IAM works with </span><span class="No-Break"><span class="koboSpan" id="kobo.230.1">Amazon Bedrock:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.231.1">Identities</span></strong><span class="koboSpan" id="kobo.232.1">: IAM supports</span><a id="_idIndexMarker1007"/><span class="koboSpan" id="kobo.233.1"> various types of identities, including IAM users, groups, and roles. </span><span class="koboSpan" id="kobo.233.2">Users represent individual people or applications, groups are collections of users, and roles are assumed by trusted entities to gain </span><span class="No-Break"><span class="koboSpan" id="kobo.234.1">temporary access.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.235.1">Authentication</span></strong><span class="koboSpan" id="kobo.236.1">: To use Amazon Bedrock securely, you must first prove your identity through authentication. </span><span class="koboSpan" id="kobo.236.2">This can be achieved by logging in as an AWS root user, an IAM user, or by assuming an IAM role. </span><span class="koboSpan" id="kobo.236.3">Additionally, you can authenticate using external </span><a id="_idIndexMarker1008"/><span class="koboSpan" id="kobo.237.1">identities, such as </span><strong class="bold"><span class="koboSpan" id="kobo.238.1">SAML </span></strong><span class="koboSpan" id="kobo.239.1">(</span><strong class="bold"><span class="koboSpan" id="kobo.240.1">Security Assertion Markup Language</span></strong><span class="koboSpan" id="kobo.241.1">) authentication </span><strong class="bold"><span class="koboSpan" id="kobo.242.1">identity providers</span></strong><span class="koboSpan" id="kobo.243.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.244.1">IdPs</span></strong><span class="koboSpan" id="kobo.245.1">). </span><span class="koboSpan" id="kobo.245.2">These external identities are passed to IAM, which then grants you access to Amazon Bedrock. </span><span class="koboSpan" id="kobo.245.3">Your administrator will have set up special roles to enable </span><span class="No-Break"><span class="koboSpan" id="kobo.246.1">this access.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.247.1">Alternatively, you can use social media accounts, such as Google or Facebook, to authenticate and gain access to Amazon Bedrock. </span><span class="koboSpan" id="kobo.247.2">Again, your administrator will have configured the necessary roles and permissions to allow this form </span><span class="No-Break"><span class="koboSpan" id="kobo.248.1">of authentication.</span></span></p></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.249.1">Access management</span></strong><span class="koboSpan" id="kobo.250.1">: Access management involves using identity-based policies with specified actions, resources, and condition keys to control what operations</span><a id="_idIndexMarker1009"/><span class="koboSpan" id="kobo.251.1"> different users, groups, or roles can perform on Bedrock resources. </span><span class="koboSpan" id="kobo.251.2">Let us look at each </span><span class="No-Break"><span class="koboSpan" id="kobo.252.1">of these:</span></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.253.1">Identity-based policies</span></strong><span class="koboSpan" id="kobo.254.1">: Identity-based policies allow you to control what actions different identities (users, groups, or roles) can perform within Amazon Bedrock. </span><span class="koboSpan" id="kobo.254.2">These JSON policies specify the API operations that are allowed or denied for an identity, as well as any conditions that must be met. </span><span class="koboSpan" id="kobo.254.3">Resource-based policies are not supported </span><span class="No-Break"><span class="koboSpan" id="kobo.255.1">in Bedrock.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.256.1">Policy actions</span></strong><span class="koboSpan" id="kobo.257.1">: Policy actions correspond to the API operations in Bedrock and must be included in your identity-based policies to grant permissions. </span><span class="koboSpan" id="kobo.257.2">IAM policies include actions that correspond to Bedrock API operations, prefixed with </span><strong class="source-inline"><span class="koboSpan" id="kobo.258.1">bedrock</span></strong><span class="koboSpan" id="kobo.259.1">. </span><span class="koboSpan" id="kobo.259.2">For example, the actions can be </span><strong class="source-inline"><span class="koboSpan" id="kobo.260.1">bedrock:InvokeModel</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.261.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.262.1">bedrock:InvokeModelWithResponseStream</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.263.1">.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.264.1">Policy resources</span></strong><span class="koboSpan" id="kobo.265.1">: Policies can specify Bedrock resources using ARNs to grant or </span><span class="No-Break"><span class="koboSpan" id="kobo.266.1">deny access.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.267.1">Policy condition keys</span></strong><span class="koboSpan" id="kobo.268.1">: Condition keys add an extra layer of control, allowing you to specify conditions under which a policy is applicable, such as </span><span class="No-Break"><span class="koboSpan" id="kobo.269.1">resource tags.</span></span></li></ul></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.270.1">Cross-account access</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.271.1">:</span></span><ul><li><span class="koboSpan" id="kobo.272.1">Roles can be used to grant access to Bedrock resources across different </span><span class="No-Break"><span class="koboSpan" id="kobo.273.1">AWS accounts</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.274.1">Forward access sessions</span></strong><span class="koboSpan" id="kobo.275.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.276.1">FAS</span></strong><span class="koboSpan" id="kobo.277.1">) enable </span><a id="_idIndexMarker1010"/><span class="koboSpan" id="kobo.278.1">Bedrock to perform actions in other services on your behalf while maintaining </span><span class="No-Break"><span class="koboSpan" id="kobo.279.1">your permissions</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.280.1">Service roles</span></strong><span class="koboSpan" id="kobo.281.1">: Bedrock uses service roles, which are IAM roles that Bedrock assumes to perform actions on </span><span class="No-Break"><span class="koboSpan" id="kobo.282.1">your behalf.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.283.1">Temporary credentials</span></strong><span class="koboSpan" id="kobo.284.1">: Bedrock supports the use of temporary credentials, which are short-lived access keys that provide temporary access to AWS resources, ensuring enhanced security compared to long-term access keys. </span><span class="koboSpan" id="kobo.284.2">These credentials</span><a id="_idIndexMarker1011"/><span class="koboSpan" id="kobo.285.1"> are automatically generated when you sign in to the AWS Management Console using methods such as </span><strong class="bold"><span class="koboSpan" id="kobo.286.1">single sign-on</span></strong><span class="koboSpan" id="kobo.287.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.288.1">SSO</span></strong><span class="koboSpan" id="kobo.289.1">) or</span><a id="_idIndexMarker1012"/><span class="koboSpan" id="kobo.290.1"> role switching. </span><span class="koboSpan" id="kobo.290.2">Alternatively, you can manually create temporary credentials using the AWS CLI or API, allowing you to access AWS resources without exposing your long-term </span><span class="No-Break"><span class="koboSpan" id="kobo.291.1">access keys.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.292.1">Attribute-based access control (ABAC)</span></strong><span class="koboSpan" id="kobo.293.1">: It’s a flexible approach to granting access</span><a id="_idIndexMarker1013"/><span class="koboSpan" id="kobo.294.1"> permissions based on attributes or tags associated with users, roles, and resources. </span><span class="koboSpan" id="kobo.294.2">Instead of relying solely on predefined roles or groups, ABAC allows you to define access rules that consider dynamic attributes. </span><span class="koboSpan" id="kobo.294.3">For example, you could grant read access to a specific AWS S3 bucket only to users with a particular department tag, ensuring that data access is restricted based on the user’s organizational context. </span><span class="koboSpan" id="kobo.294.4">ABAC simplifies access management in rapidly evolving environments by eliminating the need for complex </span><span class="No-Break"><span class="koboSpan" id="kobo.295.1">policy configurations.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.296.1">By understanding and properly configuring IAM for Amazon Bedrock, you can ensure that only authorized individuals and applications have access to your resources, minimizing the risk </span><a id="_idIndexMarker1014"/><span class="koboSpan" id="kobo.297.1">of data breaches and </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">unauthorized access.</span></span></p>
<p><span class="koboSpan" id="kobo.299.1">Let us look at some of the patterns of IAM policies that can be used with </span><span class="No-Break"><span class="koboSpan" id="kobo.300.1">Amazon Bedrock.</span></span></p>
<h2 id="_idParaDest-215"><a id="_idTextAnchor235"/><span class="koboSpan" id="kobo.301.1">Deny access</span></h2>
<p><span class="koboSpan" id="kobo.302.1">With IAM, you can allow </span><a id="_idIndexMarker1015"/><span class="koboSpan" id="kobo.303.1">or deny access to</span><a id="_idIndexMarker1016"/><span class="koboSpan" id="kobo.304.1"> perform actions to the model. </span><span class="koboSpan" id="kobo.304.2">For example, a user or a role could be denied invocation to a particular model, but they can list </span><span class="No-Break"><span class="koboSpan" id="kobo.305.1">the models:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.306.1">
{
    "Version": "2012-10-17",
    "Statement":
    {
        "Sid": "DenyInference",
        "Effect": "Deny",
        "Action": "bedrock:InvokeModel",
        "Resource": "arn:aws:bedrock:::foundation-model/&lt;model-id&gt;"
    }
 }</span></pre>
<p><span class="koboSpan" id="kobo.307.1">The preceding IAM policy shows the </span><strong class="source-inline"><span class="koboSpan" id="kobo.308.1">Deny</span></strong><span class="koboSpan" id="kobo.309.1"> action, where the invocation to a specific model has been denied. </span><span class="koboSpan" id="kobo.309.2">For instance, the infrastructure team may be granted the ability to provision computational capacity for a particular model while being restricted from performing inferences on that same model. </span><span class="koboSpan" id="kobo.309.3">Conversely, the data science team could be solely permitted to perform inferences on a pre-approved set </span><span class="No-Break"><span class="koboSpan" id="kobo.310.1">of models.</span></span></p>
<h2 id="_idParaDest-216"><a id="_idTextAnchor236"/><span class="koboSpan" id="kobo.311.1">Principle of least privilege</span></h2>
<p><span class="koboSpan" id="kobo.312.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.313.1">principle of least privilege</span></strong><span class="koboSpan" id="kobo.314.1"> signifies </span><a id="_idIndexMarker1017"/><span class="koboSpan" id="kobo.315.1">that </span><a id="_idIndexMarker1018"/><span class="koboSpan" id="kobo.316.1">we grant only the minimum permissions to the users and resources to perform the task. </span><span class="koboSpan" id="kobo.316.2">For example, the development (</span><strong class="source-inline"><span class="koboSpan" id="kobo.317.1">dev</span></strong><span class="koboSpan" id="kobo.318.1">) team is working on a project where access is only needed for image-generation models and listing any FMs. </span><span class="koboSpan" id="kobo.318.2">You </span><a id="_idIndexMarker1019"/><span class="koboSpan" id="kobo.319.1">can then </span><a id="_idIndexMarker1020"/><span class="koboSpan" id="kobo.320.1">apply the </span><span class="No-Break"><span class="koboSpan" id="kobo.321.1">following policy:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.322.1">
{
     "Version": "2012-10-17",
     "Statement": [
          {
               "Sid": "Bedrock Invoke model",
               "Effect": "Allow",
               "Action": "bedrock:InvokeModel",
               "Resource": "arn:aws:bedrock:us-east-1::foundation-model/amazon.titan-image-generator-v1",
               "Condition": {
                    "StringLike": {
                         "aws:ResourceTag/Env": "Dev"
                    }
               }
          },
          {
               "Sid": "List FMs",
               "Effect": "Allow",
               "Action": "bedrock:ListFoundationModels",
               "Resource": "*",
               "Condition": {
                    "StringLike": {
                         "aws:ResourceTag/Env": "Dev"
                    }
               }
          }
     ]
}</span></pre>
<p><span class="koboSpan" id="kobo.323.1">In this policy, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.324.1">bedrock:InvokeModel</span></strong><span class="koboSpan" id="kobo.325.1"> action is allowed on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.326.1">arn:aws:bedrock:us-east-1::foundation-model/amazon.titan-image-generator-v1</span></strong><span class="koboSpan" id="kobo.327.1"> resource with the condition that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.328.1">Env</span></strong><span class="koboSpan" id="kobo.329.1"> resource tag is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.330.1">Dev</span></strong><span class="koboSpan" id="kobo.331.1">. </span><span class="koboSpan" id="kobo.331.2">Secondly, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.332.1">bedrock:ListFoundationModels</span></strong><span class="koboSpan" id="kobo.333.1"> action is allowed on all resources (</span><strong class="source-inline"><span class="koboSpan" id="kobo.334.1">*</span></strong><span class="koboSpan" id="kobo.335.1">) with the condition that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.336.1">Env</span></strong><span class="koboSpan" id="kobo.337.1"> resource tag is set </span><span class="No-Break"><span class="koboSpan" id="kobo.338.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.339.1">Dev</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.340.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.341.1">The principle of least privilege minimizes the potential attack surface and reduces the risk of unintended access or data breaches. </span><span class="koboSpan" id="kobo.341.2">Let us look at the best practices and implementation</span><a id="_idIndexMarker1021"/><span class="koboSpan" id="kobo.342.1"> steps to help you </span><a id="_idIndexMarker1022"/><span class="koboSpan" id="kobo.343.1">audit access and enforce the principle of </span><span class="No-Break"><span class="koboSpan" id="kobo.344.1">least privilege:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.345.1">Review and analyze </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.346.1">access patterns</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.347.1">:</span></span><ul><li><span class="koboSpan" id="kobo.348.1">Regularly review AWS CloudTrail logs to understand the actions performed by users and resources within </span><span class="No-Break"><span class="koboSpan" id="kobo.349.1">your environment</span></span></li><li><span class="koboSpan" id="kobo.350.1">Use tools such as IAM Access Analyzer to generate policies based on actual usage patterns, ensuring that permissions align with </span><span class="No-Break"><span class="koboSpan" id="kobo.351.1">real-world requirements</span></span></li><li><span class="koboSpan" id="kobo.352.1">Leverage IAM access advisor to identify unused permissions and remove them from policies, reducing the </span><span class="No-Break"><span class="koboSpan" id="kobo.353.1">attack surface</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.354.1">Implement granular </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.355.1">permissions policies</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.356.1">:</span></span><ul><li><span class="koboSpan" id="kobo.357.1">Create fine-grained permissions policies that grant only the necessary actions and resources required for specific job roles </span><span class="No-Break"><span class="koboSpan" id="kobo.358.1">or functions</span></span></li><li><span class="koboSpan" id="kobo.359.1">Consider using AWS-managed policies as a starting point for common job functions, and then customize them </span><span class="No-Break"><span class="koboSpan" id="kobo.360.1">as needed</span></span></li><li><span class="koboSpan" id="kobo.361.1">Regularly review and trim overly permissive policies to adhere to the principle of </span><span class="No-Break"><span class="koboSpan" id="kobo.362.1">least privilege</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.363.1">Limit access to </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.364.1">production environments</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.365.1">:</span></span><ul><li><span class="koboSpan" id="kobo.366.1">Ensure that users have limited access to production environments, granting access only when there is a valid </span><span class="No-Break"><span class="koboSpan" id="kobo.367.1">use case</span></span></li><li><span class="koboSpan" id="kobo.368.1">Revoke production access promptly after the user completes the specific tasks requiring that level </span><span class="No-Break"><span class="koboSpan" id="kobo.369.1">of access</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.370.1">Leverage </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.371.1">permissions boundaries</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.372.1">:</span></span><ul><li><span class="koboSpan" id="kobo.373.1">Implement permissions boundaries, which are managed policies that set the maximum permissions an identity-based policy can grant to an </span><span class="No-Break"><span class="koboSpan" id="kobo.374.1">IAM entity</span></span></li><li><span class="koboSpan" id="kobo.375.1">Use permissions boundaries to enforce organizational-wide access controls and prevent unintended </span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">privilege escalation</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.377.1">Utilize resource tags for </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.378.1">access control</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.379.1">:</span></span><ul><li><span class="koboSpan" id="kobo.380.1">Implement an ABAC model using resource tags, which allows you to grant access based on resource attributes such as purpose, owner, </span><span class="No-Break"><span class="koboSpan" id="kobo.381.1">or environment</span></span></li><li><span class="koboSpan" id="kobo.382.1">Combine </span><a id="_idIndexMarker1023"/><span class="koboSpan" id="kobo.383.1">resource</span><a id="_idIndexMarker1024"/><span class="koboSpan" id="kobo.384.1"> tags with permissions policies to achieve fine-grained resource access without overly complex </span><span class="No-Break"><span class="koboSpan" id="kobo.385.1">custom policies</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.386.1">Implement service control policies in </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.387.1">AWS Organizations</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.388.1">:</span></span><ul><li><span class="koboSpan" id="kobo.389.1">Use service control policies to centrally control the maximum available permissions for member accounts within your </span><span class="No-Break"><span class="koboSpan" id="kobo.390.1">AWS organization</span></span></li><li><span class="koboSpan" id="kobo.391.1">Restrict root user permissions in member accounts using service </span><span class="No-Break"><span class="koboSpan" id="kobo.392.1">control policies</span></span></li><li><span class="koboSpan" id="kobo.393.1">Consider using AWS Control Tower for prescriptive managed controls and defining your own </span><span class="No-Break"><span class="koboSpan" id="kobo.394.1">custom controls</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.395.1">Establish user life </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.396.1">cycle policies</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.397.1">:</span></span><ul><li><span class="koboSpan" id="kobo.398.1">Define and implement user life cycle policies that outline tasks to be performed when users are onboarded, change roles, or no longer require access </span><span class="No-Break"><span class="koboSpan" id="kobo.399.1">to AWS</span></span></li><li><span class="koboSpan" id="kobo.400.1">Conduct periodic permission reviews during each step of the user life cycle to prevent </span><span class="No-Break"><span class="koboSpan" id="kobo.401.1">permissions creep</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.402.1">Schedule regular </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.403.1">permission audits</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.404.1">:</span></span><ul><li><span class="koboSpan" id="kobo.405.1">Establish a regular schedule to review user permissions and remove any unneeded or </span><span class="No-Break"><span class="koboSpan" id="kobo.406.1">excessive permissions</span></span></li><li><span class="koboSpan" id="kobo.407.1">Leverage tools such as AWS Config and IAM Access Analyzer to assist in auditing user permissions and identifying </span><span class="No-Break"><span class="koboSpan" id="kobo.408.1">potential issues</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.409.1">Develop a job </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.410.1">role matrix</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.411.1">:</span></span><ul><li><span class="koboSpan" id="kobo.412.1">Create a job role matrix that visualizes the various roles and access levels required within your </span><span class="No-Break"><span class="koboSpan" id="kobo.413.1">AWS footprint</span></span></li><li><span class="koboSpan" id="kobo.414.1">Use groups to separate permissions based on user responsibilities within your organization, rather than applying permissions directly to individual users </span><span class="No-Break"><span class="koboSpan" id="kobo.415.1">or roles</span></span></li></ul></li>
</ul>
<p><span class="koboSpan" id="kobo.416.1">By following </span><a id="_idIndexMarker1025"/><span class="koboSpan" id="kobo.417.1">these best practices and </span><a id="_idIndexMarker1026"/><span class="koboSpan" id="kobo.418.1">implementing the necessary steps, you can effectively audit access and ensure that the principle of least privilege </span><span class="No-Break"><span class="koboSpan" id="kobo.419.1">is enforced.</span></span></p>
<h2 id="_idParaDest-217"><a id="_idTextAnchor237"/><span class="koboSpan" id="kobo.420.1">Model customization</span></h2>
<p><span class="koboSpan" id="kobo.421.1">When working with </span><a id="_idIndexMarker1027"/><span class="koboSpan" id="kobo.422.1">model customization, Amazon Bedrock needs to assume an AWS IAM role on your behalf to initiate the fine-tuning job. </span><span class="koboSpan" id="kobo.422.2">This requires you to establish a trust relationship between Amazon Bedrock and the IAM role you want </span><span class="No-Break"><span class="koboSpan" id="kobo.423.1">to use.</span></span></p>
<p><span class="koboSpan" id="kobo.424.1">To set up this trust relationship, you need to add a trust policy to the IAM role you wish to use for model customization. </span><span class="koboSpan" id="kobo.424.2">The trust policy grants Amazon Bedrock permission to assume the role and perform the necessary actions on </span><span class="No-Break"><span class="koboSpan" id="kobo.425.1">your behalf.</span></span></p>
<p><span class="koboSpan" id="kobo.426.1">Here’s an example of the trust policy you need to add to your </span><span class="No-Break"><span class="koboSpan" id="kobo.427.1">IAM role:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.428.1">
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Principal": {
                "Service": "bedrock.amazonaws.com"
            },
            "Action": "sts:AssumeRole"
        }
    ]
 }</span></pre>
<p><span class="koboSpan" id="kobo.429.1">This trust policy specifies that the AWS service bedrock.amazonaws.com (which represents Amazon Bedrock) is allowed to assume the role by calling the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.430.1">sts:AssumeRole</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.431.1"> action.</span></span></p>
<p><span class="koboSpan" id="kobo.432.1">To add this trust</span><a id="_idIndexMarker1028"/><span class="koboSpan" id="kobo.433.1"> policy to your IAM role, you can follow </span><span class="No-Break"><span class="koboSpan" id="kobo.434.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.435.1">Open the AWS Management Console and navigate to the </span><span class="No-Break"><span class="koboSpan" id="kobo.436.1">IAM service.</span></span></li>
<li><span class="koboSpan" id="kobo.437.1">In the left navigation pane, </span><span class="No-Break"><span class="koboSpan" id="kobo.438.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.439.1">Roles</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.440.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.441.1">Find the role you want to use for model customization or create a new role </span><span class="No-Break"><span class="koboSpan" id="kobo.442.1">if needed.</span></span></li>
<li><span class="koboSpan" id="kobo.443.1">Click on the role name to open the </span><span class="No-Break"><span class="koboSpan" id="kobo.444.1">role details.</span></span></li>
<li><span class="koboSpan" id="kobo.445.1">In the </span><strong class="bold"><span class="koboSpan" id="kobo.446.1">Trust relationships</span></strong><span class="koboSpan" id="kobo.447.1"> tab, click the </span><strong class="bold"><span class="koboSpan" id="kobo.448.1">Edit trust </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.449.1">policy</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.450.1"> button.</span></span></li>
<li><span class="koboSpan" id="kobo.451.1">Replace the existing policy document with the provided </span><span class="No-Break"><span class="koboSpan" id="kobo.452.1">trust policy.</span></span></li>
<li><span class="koboSpan" id="kobo.453.1">Click the </span><strong class="bold"><span class="koboSpan" id="kobo.454.1">Update policy</span></strong><span class="koboSpan" id="kobo.455.1"> button to save </span><span class="No-Break"><span class="koboSpan" id="kobo.456.1">the changes.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.457.1">By adding this trust policy, you establish a secure trust relationship between Amazon Bedrock and your IAM role, allowing Amazon Bedrock to assume the role and perform the necessary actions for model customization on </span><span class="No-Break"><span class="koboSpan" id="kobo.458.1">your behalf.</span></span></p>
<p><span class="koboSpan" id="kobo.459.1">Next, the necessary permissions required for the customization process involve accessing the training and validation data that is stored in the S3 bucket, and the output path where Amazon Bedrock should deliver the results of the fine-tuning job. </span><span class="koboSpan" id="kobo.459.2">To learn more about the permissions needed for model customization, you can go through the following </span><span class="No-Break"><span class="koboSpan" id="kobo.460.1">link: </span></span><span class="No-Break"><span class="koboSpan" id="kobo.461.1">https://docs.aws.amazon.com/bedrock/latest/userguide/model-customization-iam-role.html</span></span><span class="No-Break"><span class="koboSpan" id="kobo.462.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.463.1">Now that we</span><a id="_idIndexMarker1029"/><span class="koboSpan" id="kobo.464.1"> have looked at patterns of IAM policies needed for Amazon Bedrock, let us look at the aspect of </span><span class="No-Break"><span class="koboSpan" id="kobo.465.1">network security.</span></span></p>
<h1 id="_idParaDest-218"><a id="_idTextAnchor238"/><span class="koboSpan" id="kobo.466.1">Securing the network</span></h1>
<p><span class="koboSpan" id="kobo.467.1">In the previous sections, we</span><a id="_idIndexMarker1030"/><span class="koboSpan" id="kobo.468.1"> looked at the data encryption techniques. </span><span class="koboSpan" id="kobo.468.2">Another measure to safeguard the data from a network perspective is to use </span><strong class="bold"><span class="koboSpan" id="kobo.469.1">Amazon VPC</span></strong><span class="koboSpan" id="kobo.470.1"> for model </span><a id="_idIndexMarker1031"/><span class="koboSpan" id="kobo.471.1">customization and creating a secure, isolated environment for your workloads. </span><span class="koboSpan" id="kobo.471.2">By doing so, you gain granular control over network traffic, enabling you to monitor and regulate all incoming and outgoing data flows using VPC Flow Logs. </span><span class="koboSpan" id="kobo.471.3">The following figure shows the VPC settings that you can specify while creating the fine-tuning or continued </span><span class="No-Break"><span class="koboSpan" id="kobo.472.1">pre-training job.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer187">
<span class="koboSpan" id="kobo.473.1"><img alt="Figure 12.2 – VPC settings" src="image/B22045_12_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.474.1">Figure 12.2 – VPC settings</span></p>
<p><span class="koboSpan" id="kobo.475.1">Furthermore, Amazon Bedrock integrates with </span><a id="_idIndexMarker1032"/><span class="koboSpan" id="kobo.476.1">AWS </span><strong class="bold"><span class="koboSpan" id="kobo.477.1">PrivateLink</span></strong><span class="koboSpan" id="kobo.478.1">, so you can establish a private connection between your VPC and the Amazon Bedrock service. </span><span class="koboSpan" id="kobo.478.2">This connection is facilitated through the creation of a VPC interface endpoint, essentially a private entry point for traffic destined for Amazon Bedrock. </span><span class="koboSpan" id="kobo.478.3">In addition, Amazon Bedrock does not use public IP addresses or internet gateways, ensuring that your data never traverses the public internet, thus minimizing potential exposure to </span><span class="No-Break"><span class="koboSpan" id="kobo.479.1">cyber threats.</span></span></p>
<p><span class="koboSpan" id="kobo.480.1">To enhance security</span><a id="_idIndexMarker1033"/><span class="koboSpan" id="kobo.481.1"> even further, you can implement endpoint policies, which are permissions that can be attached to your VPC interface endpoint. </span><span class="koboSpan" id="kobo.481.2">These policies enable you to precisely define the principals (AWS accounts, IAM users, and IAM roles) authorized to perform specific actions on designated resources. </span><span class="koboSpan" id="kobo.481.3">By crafting custom endpoint policies, you can exercise fine-grained control over the access granted to Amazon Bedrock from within your VPC, effectively hardening your </span><span class="No-Break"><span class="koboSpan" id="kobo.482.1">security posture.</span></span></p>
<p><span class="koboSpan" id="kobo.483.1">Here is an example VPC endpoint policy that grants access to anyone (</span><strong class="source-inline"><span class="koboSpan" id="kobo.484.1">"Principal": "*"</span></strong><span class="koboSpan" id="kobo.485.1">) to perform </span><strong class="source-inline"><span class="koboSpan" id="kobo.486.1">InvokeModel</span></strong><span class="koboSpan" id="kobo.487.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.488.1">InvokeModelWithResponseStream</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.489.1">of Bedrock:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.490.1">
{
   "Version": "2012-10-17",
   "Statement": [
      {
         "Principal": "*",
         "Effect": "Allow",
         "Action": [
            "bedrock:InvokeModel",
            "bedrock:InvokeModelWithResponseStream"
         ],
         "Resource":"*"
      }
   ]
}</span></pre>
<p><span class="koboSpan" id="kobo.491.1">Now, let us look at </span><a id="_idIndexMarker1034"/><span class="koboSpan" id="kobo.492.1">what network flow looks like behind </span><span class="No-Break"><span class="koboSpan" id="kobo.493.1">the scenes.</span></span></p>
<h1 id="_idParaDest-219"><a id="_idTextAnchor239"/><span class="koboSpan" id="kobo.494.1">Network flow</span></h1>
<p><span class="koboSpan" id="kobo.495.1">We have looked at </span><a id="_idIndexMarker1035"/><span class="koboSpan" id="kobo.496.1">how the encryption with Amazon works and how you can secure the network via AWS PrivateLink when you are in Amazon VPC. </span><span class="koboSpan" id="kobo.496.2">Now, let us look at the network and data flow work behind the scenes for both invocation and model </span><span class="No-Break"><span class="koboSpan" id="kobo.497.1">customization jobs.</span></span></p>
<h2 id="_idParaDest-220"><a id="_idTextAnchor240"/><span class="koboSpan" id="kobo.498.1">On-demand architecture</span></h2>
<p><span class="koboSpan" id="kobo.499.1">With on-demand </span><a id="_idIndexMarker1036"/><span class="koboSpan" id="kobo.500.1">mode, you share the compute environment of the model with other users and are billed based on the usage, without any long-term commitments. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.501.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.502.1">.3</span></em><span class="koboSpan" id="kobo.503.1"> shows the overview of the on-demand network architecture employed by </span><span class="No-Break"><span class="koboSpan" id="kobo.504.1">Amazon Bedrock.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer188">
<span class="koboSpan" id="kobo.505.1"><img alt="Figure 12.3 – On-demand compute environment architecture" src="image/B22045_12_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.506.1">Figure 12.3 – On-demand compute environment architecture</span></p>
<p><span class="koboSpan" id="kobo.507.1">Let us understand</span><a id="_idIndexMarker1037"/><span class="koboSpan" id="kobo.508.1"> the figure </span><span class="No-Break"><span class="koboSpan" id="kobo.509.1">in detail:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.510.1">In the middle, we have </span><strong class="bold"><span class="koboSpan" id="kobo.511.1">Amazon Bedrock service account</span></strong><span class="koboSpan" id="kobo.512.1">, which acts as the entry point for all incoming requests. </span><span class="koboSpan" id="kobo.512.2">This account is managed and controlled by Amazon, ensuring secure and reliable access to the service. </span><span class="koboSpan" id="kobo.512.3">The Amazon Bedrock service is responsible for handling these incoming requests and routing them to the appropriate runtime inference environment. </span><span class="koboSpan" id="kobo.512.4">This environment is designed to process and execute the requested operations on the </span><span class="No-Break"><span class="koboSpan" id="kobo.513.1">deployed models.</span></span></li>
<li><span class="koboSpan" id="kobo.514.1">On the right, we have </span><strong class="bold"><span class="koboSpan" id="kobo.515.1">Model deployment account</span></strong><span class="koboSpan" id="kobo.516.1">, which is owned and operated by Amazon. </span><span class="koboSpan" id="kobo.516.2">Interestingly, there is one such account for each model provider and AWS region combination. </span><span class="koboSpan" id="kobo.516.3">This segregation ensures that no model vendor can access or tamper with the data or models of other vendors, enhancing security and privacy. </span><span class="koboSpan" id="kobo.516.4">Within the </span><strong class="bold"><span class="koboSpan" id="kobo.517.1">Model deployment account</span></strong><span class="koboSpan" id="kobo.518.1">, we find the on-demand compute resources, which are dynamically provisioned and scaled based on the incoming workload. </span><span class="koboSpan" id="kobo.518.2">Additionally, this account hosts the base model in S3 bucket, which stores </span><span class="No-Break"><span class="koboSpan" id="kobo.519.1">these FMs.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.520.1">The flow of an inference request is </span><span class="No-Break"><span class="koboSpan" id="kobo.521.1">as follows:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.522.1">A user initiates a request, which is received by the API endpoint of the Amazon Bedrock </span><span class="No-Break"><span class="koboSpan" id="kobo.523.1">service account.</span></span></li>
<li><span class="koboSpan" id="kobo.524.1">The request is authenticated and authorized using the AWS </span><span class="No-Break"><span class="koboSpan" id="kobo.525.1">IAM service.</span></span></li>
<li><span class="koboSpan" id="kobo.526.1">Once validated, the request is forwarded to the runtime </span><span class="No-Break"><span class="koboSpan" id="kobo.527.1">inference environment.</span></span></li>
<li><span class="koboSpan" id="kobo.528.1">The runtime inference component interacts with the relevant compute cluster within the model deployment account, fetching the required model and executing the </span><span class="No-Break"><span class="koboSpan" id="kobo.529.1">requested operation.</span></span></li>
<li><span class="koboSpan" id="kobo.530.1">The result is then securely returned to the user via the Amazon Bedrock </span><span class="No-Break"><span class="koboSpan" id="kobo.531.1">service account.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.532.1">Throughout this process, several measures are in place to ensure data security </span><span class="No-Break"><span class="koboSpan" id="kobo.533.1">and privacy:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.534.1">All internal traffic is encrypted using TLS 1.2 or higher </span><span class="No-Break"><span class="koboSpan" id="kobo.535.1">encryption standards</span></span></li>
<li><span class="koboSpan" id="kobo.536.1">No customer data is stored or persisted within the Amazon Bedrock </span><span class="No-Break"><span class="koboSpan" id="kobo.537.1">service account</span></span></li>
<li><span class="koboSpan" id="kobo.538.1">Detailed logs and audit trails are maintained using AWS CloudTrail and Amazon </span><span class="No-Break"><span class="koboSpan" id="kobo.539.1">CloudWatch services</span></span></li>
<li><span class="koboSpan" id="kobo.540.1">Model providers, including Amazon’s own models like Titan, cannot access or influence the customer’s data or models within the model </span><span class="No-Break"><span class="koboSpan" id="kobo.541.1">deployment account</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.542.1">Now, let us look </span><a id="_idIndexMarker1038"/><span class="koboSpan" id="kobo.543.1">at provisioned throughput </span><span class="No-Break"><span class="koboSpan" id="kobo.544.1">capacity architecture.</span></span></p>
<h2 id="_idParaDest-221"><a id="_idTextAnchor241"/><span class="koboSpan" id="kobo.545.1">Provisioned throughput architecture</span></h2>
<p><span class="koboSpan" id="kobo.546.1">Provisioned throughput</span><a id="_idIndexMarker1039"/><span class="koboSpan" id="kobo.547.1"> allows you to purchase the model units for base or customized models, designed for large-scale inference workloads requiring </span><span class="No-Break"><span class="koboSpan" id="kobo.548.1">guaranteed throughput.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.549.1">Model units</span></strong><span class="koboSpan" id="kobo.550.1"> are a key</span><a id="_idIndexMarker1040"/><span class="koboSpan" id="kobo.551.1"> concept in Amazon Bedrock’s provisioned throughput feature, designed to provide consistent and scalable performance for LLM inference. </span><span class="koboSpan" id="kobo.551.2">One can think of a model unit as a representation of fraction of the underlying GPU hardware resources allocated to run a specific model. </span><span class="koboSpan" id="kobo.551.3">It’s not a standardized measure across all models, but </span><span class="No-Break"><span class="koboSpan" id="kobo.552.1">rather model-specific.</span></span></p>
<p><span class="koboSpan" id="kobo.553.1">These model units are purchased allocations of computational resources for a specific base model in Amazon Bedrock. </span><span class="koboSpan" id="kobo.553.2">Each model unit provides a guaranteed level of throughput, measured in tokens processed per minute. </span><span class="koboSpan" id="kobo.553.3">This applies to both input and output tokens. </span><span class="koboSpan" id="kobo.553.4">By using model units, you can ensure consistent performance for high-volume AI workloads, with the flexibility to scale resources based on </span><span class="No-Break"><span class="koboSpan" id="kobo.554.1">your needs.</span></span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.555.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.556.1">.4</span></em><span class="koboSpan" id="kobo.557.1"> shows the overview of the provisioned throughput architecture employed by </span><span class="No-Break"><span class="koboSpan" id="kobo.558.1">Amazon Bedrock.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer189">
<span class="koboSpan" id="kobo.559.1"><img alt="Figure 12.4 – Provisioned throughput compute architecture" src="image/B22045_12_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.560.1">Figure 12.4 – Provisioned throughput compute architecture</span></p>
<p><span class="koboSpan" id="kobo.561.1">Similar to the</span><a id="_idIndexMarker1041"/><span class="koboSpan" id="kobo.562.1"> on-demand architecture, we have </span><strong class="bold"><span class="koboSpan" id="kobo.563.1">Amazon Bedrock service account</span></strong><span class="koboSpan" id="kobo.564.1"> acting as the entry point for incoming requests. </span><span class="koboSpan" id="kobo.564.2">This account is managed by Amazon, ensuring secure access to the service. </span><span class="koboSpan" id="kobo.564.3">Here is a breakdown of the </span><span class="No-Break"><span class="koboSpan" id="kobo.565.1">preceding figure:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.566.1">Within the </span><strong class="bold"><span class="koboSpan" id="kobo.567.1">Model deployment account</span></strong><span class="koboSpan" id="kobo.568.1">, we find two distinct components: the </span><strong class="bold"><span class="koboSpan" id="kobo.569.1">Base model S3 bucket</span></strong><span class="koboSpan" id="kobo.570.1"> and the </span><strong class="bold"><span class="koboSpan" id="kobo.571.1">Customized model S3 bucket</span></strong><span class="koboSpan" id="kobo.572.1">. </span><span class="koboSpan" id="kobo.572.2">The base model bucket stores the base models provided by Amazon and other vendors like AI21, Cohere, etc., while the customized model S3 bucket stores the custom models or copies of the baseline models tailored to </span><span class="No-Break"><span class="koboSpan" id="kobo.573.1">individual requirements.</span></span></li>
<li><span class="koboSpan" id="kobo.574.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.575.1">Runtime inference</span></strong><span class="koboSpan" id="kobo.576.1"> component is responsible for processing the incoming requests and determining the appropriate compute environment to handle the requested operation. </span><span class="koboSpan" id="kobo.576.2">This decision is based on whether the request is for a baseline model or a </span><span class="No-Break"><span class="koboSpan" id="kobo.577.1">customized model.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.578.1">The inference can be performed on provisioned throughput mode by called </span><strong class="source-inline"><span class="koboSpan" id="kobo.579.1">InvokeModel</span></strong><span class="koboSpan" id="kobo.580.1"> API or </span><strong class="source-inline"><span class="koboSpan" id="kobo.581.1">InvokeModelWithResponseStream</span></strong><span class="koboSpan" id="kobo.582.1"> API and specifying the </span><strong class="source-inline"><span class="koboSpan" id="kobo.583.1">modelId</span></strong><span class="koboSpan" id="kobo.584.1"> as provisioned throughput model ARN. </span><span class="koboSpan" id="kobo.584.2">The flow of an inference request for a provisioned capacity compute environment is </span><span class="No-Break"><span class="koboSpan" id="kobo.585.1">as follows:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.586.1">A customer initiates a request, which is received by the API endpoint of the Amazon Bedrock </span><span class="No-Break"><span class="koboSpan" id="kobo.587.1">service account.</span></span></li>
<li><span class="koboSpan" id="kobo.588.1">The request is authenticated and authorized using AWS </span><span class="No-Break"><span class="koboSpan" id="kobo.589.1">IAM services.</span></span></li>
<li><span class="koboSpan" id="kobo.590.1">Once validated, the request is forwarded to the runtime </span><span class="No-Break"><span class="koboSpan" id="kobo.591.1">inference component.</span></span></li>
<li><span class="koboSpan" id="kobo.592.1">The runtime inference component analyzes the request and determines whether it is for a baseline model or a </span><span class="No-Break"><span class="koboSpan" id="kobo.593.1">customized model.</span></span></li>
<li><span class="koboSpan" id="kobo.594.1">If the request is for a customized model, the runtime inference component directs the request to the dedicated provisioned throughput compute environment associated with that customer </span><span class="No-Break"><span class="koboSpan" id="kobo.595.1">or model.</span></span></li>
<li><span class="koboSpan" id="kobo.596.1">The provisioned throughput compute environment executes the requested operation on the specified customized model and returns </span><span class="No-Break"><span class="koboSpan" id="kobo.597.1">the result.</span></span></li>
<li><span class="koboSpan" id="kobo.598.1">The computed result is then securely returned to the customer via the Amazon Bedrock </span><span class="No-Break"><span class="koboSpan" id="kobo.599.1">service account.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.600.1">The provisioned</span><a id="_idIndexMarker1042"/><span class="koboSpan" id="kobo.601.1"> capacity architecture shares several key features with the on-demand architecture, including </span><span class="No-Break"><span class="koboSpan" id="kobo.602.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.603.1">Encrypted internal traffic using TLS 1.2 or higher </span><span class="No-Break"><span class="koboSpan" id="kobo.604.1">encryption standards</span></span></li>
<li><span class="koboSpan" id="kobo.605.1">No customer data storage or persistence within the Amazon Bedrock </span><span class="No-Break"><span class="koboSpan" id="kobo.606.1">service account</span></span></li>
<li><span class="koboSpan" id="kobo.607.1">Detailed logging and auditing through AWS CloudTrail and Amazon </span><span class="No-Break"><span class="koboSpan" id="kobo.608.1">CloudWatch services</span></span></li>
<li><span class="koboSpan" id="kobo.609.1">Strict isolation and access controls, ensuring that model providers cannot access or influence customer data </span><span class="No-Break"><span class="koboSpan" id="kobo.610.1">or models</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.611.1">From a developer’s perspective, the process of invoking a baseline model or a customized model is</span><a id="_idIndexMarker1043"/><span class="koboSpan" id="kobo.612.1"> seamless if you are using on-demand or provisioned </span><span class="No-Break"><span class="koboSpan" id="kobo.613.1">throughput mode.</span></span></p>
<p><span class="koboSpan" id="kobo.614.1">Now, let us look at the architecture overview of </span><span class="No-Break"><span class="koboSpan" id="kobo.615.1">model customization.</span></span></p>
<h2 id="_idParaDest-222"><a id="_idTextAnchor242"/><span class="koboSpan" id="kobo.616.1">Model customization architecture</span></h2>
<p><span class="koboSpan" id="kobo.617.1">Model customization </span><a id="_idIndexMarker1044"/><span class="koboSpan" id="kobo.618.1">is where we are either fine-tuning or continued pre-training the base model tailored to the domain specific use-case. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.619.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.620.1">.5</span></em><span class="koboSpan" id="kobo.621.1"> provides an overview of the model customization architecture employed by </span><span class="No-Break"><span class="koboSpan" id="kobo.622.1">Amazon Bedrock.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer190">
<span class="koboSpan" id="kobo.623.1"><img alt="Figure 12.5 – Model customization architecture" src="image/B22045_12_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.624.1">Figure 12.5 – Model customization architecture</span></p>
<p><span class="koboSpan" id="kobo.625.1">Let us look at </span><span class="No-Break"><span class="koboSpan" id="kobo.626.1">the steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.627.1">The process begins with the user initiating a request through the API endpoint of the Amazon Bedrock service account. </span><span class="koboSpan" id="kobo.627.2">This account is managed by Amazon and serves as a secure entry point for all </span><span class="No-Break"><span class="koboSpan" id="kobo.628.1">incoming requests.</span></span></li>
<li><span class="koboSpan" id="kobo.629.1">The Amazon Bedrock service account routes the request to the training orchestration component, which orchestrates the customization process within the relevant model deployment account owned and operated </span><span class="No-Break"><span class="koboSpan" id="kobo.630.1">by Amazon.</span></span></li>
<li><span class="koboSpan" id="kobo.631.1">The training orchestration component initiates an Amazon SageMaker training job, which is responsible for the actual model customization process. </span><span class="koboSpan" id="kobo.631.2">Amazon SageMaker is an AWS ML service, where you can build, train, deploy, and monitor ML models. </span><span class="koboSpan" id="kobo.631.3">If you are interested in learning about SageMaker, here is an interesting book by Julien Simon: </span><em class="italic"><span class="koboSpan" id="kobo.632.1">Learn Amazon SageMaker: A guide to building, training, and deploying machine learning models for developers and data scientists</span></em><span class="koboSpan" id="kobo.633.1">, available </span><span class="No-Break"><span class="koboSpan" id="kobo.634.1">at </span></span><span class="No-Break"><span class="koboSpan" id="kobo.635.1">https://www.amazon.com/Learn-Amazon-SageMaker-developers-scientists/dp/180020891X</span></span><span class="No-Break"><span class="koboSpan" id="kobo.636.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.637.1">The training job in the model deployment account leverages the </span><span class="No-Break"><span class="koboSpan" id="kobo.638.1">following resources:</span></span></p><ul><li><span class="koboSpan" id="kobo.639.1">The base</span><a id="_idIndexMarker1045"/><span class="koboSpan" id="kobo.640.1"> model S3 bucket, which stores the baseline models provided by Amazon and other vendors from Meta, Cohere, </span><span class="No-Break"><span class="koboSpan" id="kobo.641.1">and AI21.</span></span></li><li><span class="koboSpan" id="kobo.642.1">The user’s training data, which is securely retrieved from an S3 bucket within the user’s account, optionally via a VPC connection for </span><span class="No-Break"><span class="koboSpan" id="kobo.643.1">enhanced security.</span></span></li></ul></li>
<li><span class="koboSpan" id="kobo.644.1">During the training process, the user’s training data is used to customize the selected base model, creating a tailored version specific to </span><span class="No-Break"><span class="koboSpan" id="kobo.645.1">your requirements.</span></span></li>
<li><span class="koboSpan" id="kobo.646.1">Upon completion of the training job, the customized model is encrypted and stored in the customized model S3 bucket within the model </span><span class="No-Break"><span class="koboSpan" id="kobo.647.1">deployment account.</span></span></li>
<li><span class="koboSpan" id="kobo.648.1">It’s important to note that at no point do model vendors have access to or visibility into the user’s training data or the resulting </span><span class="No-Break"><span class="koboSpan" id="kobo.649.1">customized model.</span></span></li>
<li><span class="koboSpan" id="kobo.650.1">Additionally, the training job generates output metrics and logs, which are securely delivered to an S3 bucket specified by the user during the </span><span class="No-Break"><span class="koboSpan" id="kobo.651.1">initial request.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.652.1">The model customization architecture incorporates several security and </span><span class="No-Break"><span class="koboSpan" id="kobo.653.1">privacy measures:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.654.1">Strict access controls and isolation ensure that model vendors cannot access your data or </span><span class="No-Break"><span class="koboSpan" id="kobo.655.1">customized models</span></span></li>
<li><span class="koboSpan" id="kobo.656.1">Your training data is securely retrieved from your account, either directly from an S3 bucket or via a </span><span class="No-Break"><span class="koboSpan" id="kobo.657.1">VPC connection</span></span></li>
<li><span class="koboSpan" id="kobo.658.1">Encryption is employed to protect the customized model during storage </span><span class="No-Break"><span class="koboSpan" id="kobo.659.1">and transfer</span></span></li>
<li><span class="koboSpan" id="kobo.660.1">Detailed logging and auditing are provided through CloudTrail, IAM, and </span><span class="No-Break"><span class="koboSpan" id="kobo.661.1">CloudWatch services</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.662.1">By leveraging this architecture, Amazon Bedrock allows you to tailor the base models to your specific needs while maintaining strict data privacy and security standards. </span><span class="koboSpan" id="kobo.662.2">The separation of responsibilities and the secure data handling mechanisms ensure that sensitive information remains protected throughout the customization process. </span><span class="koboSpan" id="kobo.662.3">For a more detailed </span><a id="_idIndexMarker1046"/><span class="koboSpan" id="kobo.663.1">exploration of how to adapt models to your unique requirements, please refer to </span><a href="B22045_04.xhtml#_idTextAnchor073"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.664.1">Chapter 4</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.665.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.666.1">Now, that we have looked at the security and network flow components, let us look at ethical practices, where we cover challenges and risks </span><span class="No-Break"><span class="koboSpan" id="kobo.667.1">with GenAI.</span></span></p>
<h1 id="_idParaDest-223"><a id="_idTextAnchor243"/><span class="koboSpan" id="kobo.668.1">Ethical practices</span></h1>
<p><span class="koboSpan" id="kobo.669.1">There have been </span><a id="_idIndexMarker1047"/><span class="koboSpan" id="kobo.670.1">rapid advancements in GenAI, but at the same time, they raise new challenges and risks. </span><span class="koboSpan" id="kobo.670.2">Some of these are </span><span class="No-Break"><span class="koboSpan" id="kobo.671.1">as follows:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.672.1">Would my data be used with </span><span class="No-Break"><span class="koboSpan" id="kobo.673.1">the provider?</span></span></li>
<li><span class="koboSpan" id="kobo.674.1">Could it hurt the legal rights of </span><span class="No-Break"><span class="koboSpan" id="kobo.675.1">the company?</span></span></li>
<li><span class="koboSpan" id="kobo.676.1">Will the model hallucinate and provide non-sensical, biased, or factually incorrect responses </span><span class="No-Break"><span class="koboSpan" id="kobo.677.1">in production?</span></span></li>
<li><span class="koboSpan" id="kobo.678.1">Would the GenAI models inadvertently use or reproduce intellectual property, such as copyrighted text or images, during training </span><span class="No-Break"><span class="koboSpan" id="kobo.679.1">or generation?</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.680.1">Let us cover these </span><a id="_idIndexMarker1048"/><span class="koboSpan" id="kobo.681.1">challenges and best practices that can </span><span class="No-Break"><span class="koboSpan" id="kobo.682.1">be adopted.</span></span></p>
<h2 id="_idParaDest-224"><a id="_idTextAnchor244"/><span class="koboSpan" id="kobo.683.1">Veracity</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.684.1">Veracity</span></strong><span class="koboSpan" id="kobo.685.1">, or the</span><a id="_idIndexMarker1049"/><span class="koboSpan" id="kobo.686.1"> truthfulness and accuracy of information </span><a id="_idIndexMarker1050"/><span class="koboSpan" id="kobo.687.1">generated by AI models, is a crucial aspect of ethical practices in the field of GenAI. </span><span class="koboSpan" id="kobo.687.2">When models produce outputs that are verifiably false or hallucinated, it can lead to the spread of misinformation and undermine trust in the technology. </span><span class="koboSpan" id="kobo.687.3">One common example of hallucinations is when an AI model is asked to provide information about a specific topic, such as academic papers by a particular author. </span><span class="koboSpan" id="kobo.687.4">Instead of searching for and retrieving actual citations, the model will tend to generate fictitious paper titles, topics, and co-author names that seem plausible but do not correspond to real </span><span class="No-Break"><span class="koboSpan" id="kobo.688.1">published works.</span></span></p>
<p><span class="koboSpan" id="kobo.689.1">To mitigate the risk of hallucinations and improve veracity, several best practices can </span><span class="No-Break"><span class="koboSpan" id="kobo.690.1">be employed:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.691.1">Prompt engineering</span></strong><span class="koboSpan" id="kobo.692.1">: Providing </span><a id="_idIndexMarker1051"/><span class="koboSpan" id="kobo.693.1">clear and specific instructions to the AI model can help guide it toward generating more accurate and truthful outputs. </span><span class="koboSpan" id="kobo.693.2">Well-crafted prompts that clearly define the desired output and provide relevant context can reduce the likelihood </span><span class="No-Break"><span class="koboSpan" id="kobo.694.1">of hallucinations.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.695.1">Providing more context</span></strong><span class="koboSpan" id="kobo.696.1">: Techniques such as RAG, continued pre-training, fine-tuning, and the use of agents can help ground the model’s outputs in factual information by providing additional context and knowledge from </span><span class="No-Break"><span class="koboSpan" id="kobo.697.1">external sources.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.698.1">Inference parameter tuning</span></strong><span class="koboSpan" id="kobo.699.1">: Adjusting parameters such as temperature, Top P, and Top K, which control the randomness of the model’s outputs, can help strike a balance between creativity and factual accuracy, reducing the likelihood of hallucinations while still allowing for novel and useful generations. </span><span class="koboSpan" id="kobo.699.2">If you would like to learn </span><a id="_idIndexMarker1052"/><span class="koboSpan" id="kobo.700.1">more about these parameters, please go through </span><a href="B22045_02.xhtml#_idTextAnchor034"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.701.1">Chapter 2</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.702.1">.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.703.1">By implementing these best practices and continuously validating the veracity of AI-generated content, we </span><a id="_idIndexMarker1053"/><span class="koboSpan" id="kobo.704.1">can promote trust in GenAI models and ensure their responsible and ethical deployment in </span><span class="No-Break"><span class="koboSpan" id="kobo.705.1">various domains.</span></span></p>
<h2 id="_idParaDest-225"><a id="_idTextAnchor245"/><span class="koboSpan" id="kobo.706.1">Intellectual property</span></h2>
<p><span class="koboSpan" id="kobo.707.1">One major challenge </span><a id="_idIndexMarker1054"/><span class="koboSpan" id="kobo.708.1">with early LLMs is their tendency to directly repeat or copy portions of the text data they were trained on. </span><span class="koboSpan" id="kobo.708.2">This raises privacy concerns, as the training data may contain sensitive or personal information. </span><span class="koboSpan" id="kobo.708.3">It also raises copyright issues, as the models could be reproducing copyrighted content without permission. </span><span class="koboSpan" id="kobo.708.4">The root cause of this problem lies in how these LLMs are trained. </span><span class="koboSpan" id="kobo.708.5">They are exposed to massive amounts of data from various sources, including books, websites, and databases, many of which are copyrighted works. </span><span class="koboSpan" id="kobo.708.6">However, this data is ingested without keeping track of sources or obtaining proper licenses. </span><span class="koboSpan" id="kobo.708.7">As a result, when generating text, the models may regurgitate verbatim sentences or passages from their training data, inadvertently exposing copyrighted content or private information. </span><span class="koboSpan" id="kobo.708.8">Addressing this requires more robust techniques for filtering training data, tracking sources, and properly licensing materials used to train these powerful language models. </span><span class="koboSpan" id="kobo.708.9">Here are some of the </span><span class="No-Break"><span class="koboSpan" id="kobo.709.1">key considerations:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.710.1">Transparency</span></strong><span class="koboSpan" id="kobo.711.1">: AI providers should be transparent about the training data used for their models, disclosing potential sources of copyrighted material, and acknowledging the limitations of their systems in handling </span><span class="No-Break"><span class="koboSpan" id="kobo.712.1">intellectual property.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.713.1">Fair use</span></strong><span class="koboSpan" id="kobo.714.1">: While some use of copyrighted material for training AI models may fall under fair use exceptions, it is essential to carefully assess the extent and nature of such use to avoid </span><span class="No-Break"><span class="koboSpan" id="kobo.715.1">potential infringement.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.716.1">Licensing and permissions</span></strong><span class="koboSpan" id="kobo.717.1">: Whenever possible, AI developers should obtain appropriate licenses or permissions to use copyrighted material in their training data, ensuring proper attribution and compensation to the </span><span class="No-Break"><span class="koboSpan" id="kobo.718.1">rights holders.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.719.1">Content filtering</span></strong><span class="koboSpan" id="kobo.720.1">: Implementing robust content filtering mechanisms can help mitigate the risk of reproducing copyrighted material in the outputs of AI systems. </span><span class="koboSpan" id="kobo.720.2">This can involve techniques such as watermarking, fingerprinting, and other content </span><span class="No-Break"><span class="koboSpan" id="kobo.721.1">recognition technologies.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.722.1">Human oversight</span></strong><span class="koboSpan" id="kobo.723.1">: Incorporating human oversight and review processes can help identify and address potential instances of copyright infringement or unauthorized use </span><a id="_idIndexMarker1055"/><span class="koboSpan" id="kobo.724.1">of intellectual property in the outputs of </span><span class="No-Break"><span class="koboSpan" id="kobo.725.1">AI systems.</span></span></li>
</ul>
<h2 id="_idParaDest-226"><a id="_idTextAnchor246"/><span class="koboSpan" id="kobo.726.1">Safety and toxicity</span></h2>
<p><span class="koboSpan" id="kobo.727.1">Toxicity and safety are</span><a id="_idIndexMarker1056"/><span class="koboSpan" id="kobo.728.1"> also important considerations when developing and deploying AI systems, particularly those involving language generation models. </span><span class="koboSpan" id="kobo.728.2">Toxic outputs can perpetuate harm, spread misinformation, and undermine the trust and integrity of these systems. </span><span class="koboSpan" id="kobo.728.3">Therefore, implementing robust measures to mitigate toxicity and uphold safety is necessary. </span><span class="koboSpan" id="kobo.728.4">Here are some key points to address </span><span class="No-Break"><span class="koboSpan" id="kobo.729.1">these concerns:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.730.1">Content filtering</span></strong><span class="koboSpan" id="kobo.731.1">: Implementing strict filters to exclude advice or information related to individual medical, legal, political, or financial matters, as well as instructions for creating weapons or engaging in illegal activities, is essential. </span><span class="koboSpan" id="kobo.731.2">Such content could potentially cause direct harm or enable dangerous behavior if provided without </span><span class="No-Break"><span class="koboSpan" id="kobo.732.1">proper oversight.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.733.1">Guardrails</span></strong><span class="koboSpan" id="kobo.734.1">: Implementing guardrails, such as content filtering, bias detection, and toxic language identification, can help prevent the generation of harmful or inappropriate content. </span><span class="koboSpan" id="kobo.734.2">Continuously monitoring and updating these guardrails is necessary to adapt to evolving language patterns and potential misuse. </span><span class="koboSpan" id="kobo.734.3">In the next section, we will be covering the guardrails provided by </span><span class="No-Break"><span class="koboSpan" id="kobo.735.1">Amazon Bedrock.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.736.1">Data curation</span></strong><span class="koboSpan" id="kobo.737.1">: Carefully curating and vetting the training data used for language models to minimize the propagation of biases, toxic language, or factual inaccuracies. </span><span class="koboSpan" id="kobo.737.2">Performing regular audits and updates to the training data can help improve model performance and safety </span><span class="No-Break"><span class="koboSpan" id="kobo.738.1">over time.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.739.1">Watermarking and traceability</span></strong><span class="koboSpan" id="kobo.740.1">: Embedding watermarks or traceable identifiers within generated content can aid in attribution and accountability, discouraging misuse and enabling rapid response to incidents involving toxic or harmful content. </span><span class="koboSpan" id="kobo.740.2">For more details on watermark detection by Amazon Bedrock, refer to </span><a href="B22045_09.xhtml#_idTextAnchor171"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.741.1">Chapter 9</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.742.1">.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.743.1">Responsible AI policies</span></strong><span class="koboSpan" id="kobo.744.1">: Organizations should implement and establish robust responsible AI policies, guidelines, and best practices. </span><span class="koboSpan" id="kobo.744.2">These policies should prioritize ethical considerations, transparency, accountability, and the well-being of users </span><span class="No-Break"><span class="koboSpan" id="kobo.745.1">and society.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.746.1">We would recommend that you read through the blog post titled </span><em class="italic"><span class="koboSpan" id="kobo.747.1">Responsible AI in the generative era</span></em><span class="koboSpan" id="kobo.748.1"> by Michael Kearns: </span><a href="https://www.amazon.science/blog/responsible-ai-in-the-generative-era"><span class="koboSpan" id="kobo.749.1">https://www.amazon.science/blog/responsible-ai-in-the-generative-era</span></a><span class="koboSpan" id="kobo.750.1">. </span><span class="koboSpan" id="kobo.750.2">This blog post talks about the challenges around issues such as fairness, toxicity, hallucinations, intellectual property violations, and so on, and the active work being done by the tech community to address these challenges, from carefully curating training data, developing guardrail </span><a id="_idIndexMarker1057"/><span class="koboSpan" id="kobo.751.1">models to filter outputs, watermarking approaches, and leveraging more focused </span><span class="No-Break"><span class="koboSpan" id="kobo.752.1">use cases.</span></span></p>
<p><span class="koboSpan" id="kobo.753.1">Let us now look at the guardrails provided by Amazon Bedrock to address some of the concerns </span><span class="No-Break"><span class="koboSpan" id="kobo.754.1">we discussed.</span></span></p>
<h1 id="_idParaDest-227"><a id="_idTextAnchor247"/><span class="koboSpan" id="kobo.755.1">Guardrails for Amazon Bedrock</span></h1>
<p><span class="koboSpan" id="kobo.756.1">With Guardrails </span><a id="_idIndexMarker1058"/><span class="koboSpan" id="kobo.757.1">for Amazon Bedrock, organizations can implement safeguards that align with safe and responsible AI policies. </span><span class="koboSpan" id="kobo.757.2">These safeguards provide an additional layer of control, complementing the existing protections built in the FMs. </span><span class="koboSpan" id="kobo.757.3">You can implement these guardrails to all the FMs available within Amazon Bedrock, along with any fine-tuned models and Agents for Amazon Bedrock that you create. </span><span class="koboSpan" id="kobo.757.4">Let us look at some of the examples when the implementation of guardrails will be required by </span><span class="No-Break"><span class="koboSpan" id="kobo.758.1">various industries:</span></span></p>
<ul>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.759.1">Healthcare industry</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.760.1">:</span></span><ul><li><span class="koboSpan" id="kobo.761.1">Guardrails can be used in medical chatbots or virtual assistants to prevent the exchange of information related to self-diagnosis, prescription drugs, or medical advice without </span><span class="No-Break"><span class="koboSpan" id="kobo.762.1">proper authorization</span></span></li><li><span class="koboSpan" id="kobo.763.1">In applications that analyze medical records or imaging data, guardrails can be employed to redact sensitive patient information and ensure compliance with privacy regulations such </span><span class="No-Break"><span class="koboSpan" id="kobo.764.1">as HIPAA</span></span></li></ul></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.765.1">Legal industry</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.766.1">:</span></span><ul><li><span class="koboSpan" id="kobo.767.1">Guardrails can be used in legal document analysis tools to prevent the disclosure of privileged communication between attorneys </span><span class="No-Break"><span class="koboSpan" id="kobo.768.1">and clients</span></span></li><li><span class="koboSpan" id="kobo.769.1">In legal research or contract review applications, guardrails can be implemented to prevent the generation of misleading or legally </span><span class="No-Break"><span class="koboSpan" id="kobo.770.1">non-compliant content</span></span></li></ul></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.771.1">Financial industry</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.772.1">:</span></span><ul><li><span class="koboSpan" id="kobo.773.1">Guardrails can be used in financial applications to prevent the generation of content related to stock recommendations, investment advice, or </span><span class="No-Break"><span class="koboSpan" id="kobo.774.1">insider trading</span></span></li><li><span class="koboSpan" id="kobo.775.1">In applications that process financial transactions or customer data, guardrails can</span><a id="_idIndexMarker1059"/><span class="koboSpan" id="kobo.776.1"> be used to redact sensitive information like account numbers or credit </span><span class="No-Break"><span class="koboSpan" id="kobo.777.1">card details</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.778.1">Media and </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.779.1">entertainment industry</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.780.1">:</span></span><ul><li><span class="koboSpan" id="kobo.781.1">Guardrails can be used in content generation applications to prevent the creation of copyrighted material, hate speech, or explicit content that may violate content guidelines or </span><span class="No-Break"><span class="koboSpan" id="kobo.782.1">community standards</span></span></li><li><span class="koboSpan" id="kobo.783.1">In applications related to broadcast media, guardrails can be implemented to ensure adherence to strict regulatory guidelines, protect against copyright infringement, and maintain appropriate </span><span class="No-Break"><span class="koboSpan" id="kobo.784.1">content standards</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.785.1">Retail and </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.786.1">e-commerce industry</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.787.1">:</span></span><ul><li><span class="koboSpan" id="kobo.788.1">Guardrails can be implemented in e-commerce platforms to protect customer privacy by redacting personal information and preventing the unauthorized access or display of sensitive data such as payment details or </span><span class="No-Break"><span class="koboSpan" id="kobo.789.1">shipping addresses</span></span></li><li><span class="koboSpan" id="kobo.790.1">In product recommendation or customer service applications, guardrails can be used to prevent the promotion of harmful or illegal products, ensuring compliance </span><a id="_idIndexMarker1060"/><span class="koboSpan" id="kobo.791.1">wit</span><a id="_idTextAnchor248"/><span class="koboSpan" id="kobo.792.1">h local regulations and </span><span class="No-Break"><span class="koboSpan" id="kobo.793.1">industry standards</span></span></li></ul></li>
</ul>
<p><span class="koboSpan" id="kobo.794.1">Now, let us understand how Guardrails for Amazon </span><span class="No-Break"><span class="koboSpan" id="kobo.795.1">Bedrock works.</span></span></p>
<h2 id="_idParaDest-228"><a id="_idTextAnchor249"/><span class="koboSpan" id="kobo.796.1">How does Guardrails for Amazon Bedrock work?</span></h2>
<p><span class="koboSpan" id="kobo.797.1">Guardrails examines </span><a id="_idIndexMarker1061"/><span class="koboSpan" id="kobo.798.1">both the user input prompts and the corresponding model responses via four policy filters, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.799.1">Figure 12</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.800.1">.6</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.801.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer191">
<span class="koboSpan" id="kobo.802.1"><img alt="Figure 12.6 – How Guardrails for Amazon Bedrock works" src="image/B22045_12_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.803.1">Figure 12.6 – How Guardrails for Amazon Bedrock works</span></p>
<p><span class="koboSpan" id="kobo.804.1">Guardrails for Amazon Bedrock is available under the </span><strong class="bold"><span class="koboSpan" id="kobo.805.1">Safeguards</span></strong><span class="koboSpan" id="kobo.806.1"> section of the Bedrock console. </span><span class="koboSpan" id="kobo.806.2">When you create a guardrail, you will be asked to configure four policy filters and a blocked message. </span><span class="koboSpan" id="kobo.806.3">The four policy filters in Guardrails for Amazon Bedrock are listed </span><span class="No-Break"><span class="koboSpan" id="kobo.807.1">as follows:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.808.1">Content filters</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.809.1">Denied topics</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.810.1">Word filters</span></span></li>
<li><span class="koboSpan" id="kobo.811.1">Sensitive </span><span class="No-Break"><span class="koboSpan" id="kobo.812.1">information filters</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.813.1">Based on the policy filter that you select, both input prompts and model responses are rigorously vetted against every </span><span class="No-Break"><span class="koboSpan" id="kobo.814.1">configured policy.</span></span></p>
<p><span class="koboSpan" id="kobo.815.1">If any policy violation is detected, either in the input prompt or response, the Guardrails component</span><a id="_idIndexMarker1062"/><span class="koboSpan" id="kobo.816.1"> intervenes by overriding the offending content. </span><span class="koboSpan" id="kobo.816.2">For more details, please check the </span><em class="italic"><span class="koboSpan" id="kobo.817.1">Blocked </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.818.1">messaging</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.819.1"> sub-section.</span></span></p>
<p><span class="koboSpan" id="kobo.820.1">Let us dive deeper into each of the </span><span class="No-Break"><span class="koboSpan" id="kobo.821.1">policy filters.</span></span></p>
<h2 id="_idParaDest-229"><a id="_idTextAnchor250"/><span class="koboSpan" id="kobo.822.1">Content filters</span></h2>
<p><span class="koboSpan" id="kobo.823.1">With </span><strong class="bold"><span class="koboSpan" id="kobo.824.1">content filters</span></strong><span class="koboSpan" id="kobo.825.1">, you can </span><a id="_idIndexMarker1063"/><span class="koboSpan" id="kobo.826.1">configure</span><a id="_idIndexMarker1064"/><span class="koboSpan" id="kobo.827.1"> thresholds to detect and block harmful content across various categories. </span><span class="koboSpan" id="kobo.827.2">You can adjust the filter strength for prompts and for responses enabling granular control over the strictness of content filtering, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.828.1">Figure 12</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.829.1">.7</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.830.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer192">
<span class="koboSpan" id="kobo.831.1"><img alt="Figure 12.7 – Configuring content filters" src="image/B22045_12_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.832.1">Figure 12.7 – Configuring content filters</span></p>
<p><span class="koboSpan" id="kobo.833.1">Categories covered </span><a id="_idIndexMarker1065"/><span class="koboSpan" id="kobo.834.1">include hate speech, insults, sexual</span><a id="_idIndexMarker1066"/><span class="koboSpan" id="kobo.835.1"> content, violence, misconduct, and prompt attacks, allowing you to address a wide range of potential risks. </span><span class="koboSpan" id="kobo.835.2">The higher the filter strength, the higher the likelihood of filtering out potentially harmful content within a given category, providing a flexible way to balance risk mitigation and </span><span class="No-Break"><span class="koboSpan" id="kobo.836.1">content accessibility.</span></span></p>
<p><span class="koboSpan" id="kobo.837.1">When implementing content filters, it’s essential to consider your use case, target audience, and ethical guidelines. </span><span class="koboSpan" id="kobo.837.2">A higher filter strength may be appropriate for applications serving vulnerable populations or dealing with sensitive topics, while a more relaxed approach could be suitable for certain creative or educational contexts. </span><span class="koboSpan" id="kobo.837.3">In addition, regularly reviewing and updating your filter configurations in response to evolving societal norms and organizational policies is recommended. </span><span class="koboSpan" id="kobo.837.4">By leveraging content filters, you can proactively mitigate the risks associated with harmful content generation, encouraging</span><a id="_idIndexMarker1067"/><span class="koboSpan" id="kobo.838.1"> a more trustworthy and </span><a id="_idIndexMarker1068"/><span class="koboSpan" id="kobo.839.1">responsible </span><span class="No-Break"><span class="koboSpan" id="kobo.840.1">AI ecosystem.</span></span></p>
<h2 id="_idParaDest-230"><a id="_idTextAnchor251"/><span class="koboSpan" id="kobo.841.1">Denied topics</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.842.1">Denied topics</span></strong><span class="koboSpan" id="kobo.843.1"> allow you</span><a id="_idIndexMarker1069"/><span class="koboSpan" id="kobo.844.1"> to proactively</span><a id="_idIndexMarker1070"/><span class="koboSpan" id="kobo.845.1"> prevent your application from engaging with or generating content related to specific subjects that may be deemed undesirable or inappropriate within your </span><span class="No-Break"><span class="koboSpan" id="kobo.846.1">use case.</span></span></p>
<p><span class="koboSpan" id="kobo.847.1">You can define up to 30 denied topics by providing a concise name and a clear natural language description for each topic you wish to restrict. </span><span class="koboSpan" id="kobo.847.2">These serve as the foundation for detecting and blocking user inputs or model responses that fall within the defined topic boundaries, ensuring a consistent and reliable </span><span class="No-Break"><span class="koboSpan" id="kobo.848.1">filtering mechanism.</span></span></p>
<p><span class="koboSpan" id="kobo.849.1">When specifying a denied topic, it’s advisable to provide a comprehensive definition that captures the essence of the subject matter you aim to exclude, surrounding all relevant inquiries, guidance, </span><span class="No-Break"><span class="koboSpan" id="kobo.850.1">or recommendations.</span></span></p>
<p><span class="koboSpan" id="kobo.851.1">For example, in the healthcare domain, maintaining patient privacy and adhering to strict ethical guidelines is important. </span><span class="koboSpan" id="kobo.851.2">A hospital or medical institution could leverage denied topics to prevent the models from engaging in discussions or providing information related to specific topics that could potentially violate patient confidentiality or </span><span class="No-Break"><span class="koboSpan" id="kobo.852.1">medical ethics.</span></span></p>
<p><span class="koboSpan" id="kobo.853.1">One denied topic could be </span><em class="italic"><span class="koboSpan" id="kobo.854.1">Disclosing Patient Information</span></em><span class="koboSpan" id="kobo.855.1">, with a definition along the lines of </span><em class="italic"><span class="koboSpan" id="kobo.856.1">Sharing or revealing personal details, medical records, or any identifying information about patients without </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.857.1">proper authorization</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.858.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.859.1">Another relevant denied topic might be </span><em class="italic"><span class="koboSpan" id="kobo.860.1">Unauthorized Medical Advice</span></em><span class="koboSpan" id="kobo.861.1">, defined as </span><em class="italic"><span class="koboSpan" id="kobo.862.1">Providing diagnostic assessments, treatment recommendations, or any form of medical guidance without being a licensed healthcare professional or having access to a patient’s complete </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.863.1">medical history</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.864.1">.</span></span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.865.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.866.1">.8</span></em><span class="koboSpan" id="kobo.867.1"> shows how to add </span><span class="No-Break"><span class="koboSpan" id="kobo.868.1">denied topics.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer193">
<span class="koboSpan" id="kobo.869.1"><img alt="Figure 12.8 – Adding a denied topic" src="image/B22045_12_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.870.1">Figure 12.8 – Adding a denied topic</span></p>
<h2 id="_idParaDest-231"><a id="_idTextAnchor252"/><span class="koboSpan" id="kobo.871.1">Word filters</span></h2>
<p><span class="koboSpan" id="kobo.872.1">By </span><a id="_idIndexMarker1071"/><span class="koboSpan" id="kobo.873.1">configuring </span><strong class="bold"><span class="koboSpan" id="kobo.874.1">word filters</span></strong><span class="koboSpan" id="kobo.875.1">, you</span><a id="_idIndexMarker1072"/><span class="koboSpan" id="kobo.876.1"> can effectively block undesirable words, phrases, and profanity from appearing in user inputs or model responses, promoting a positive and inclusive user experience. </span><span class="koboSpan" id="kobo.876.2">Here </span><span class="No-Break"><span class="koboSpan" id="kobo.877.1">is how:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.878.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.879.1">profanity filter</span></strong><span class="koboSpan" id="kobo.880.1"> offers a </span><a id="_idIndexMarker1073"/><span class="koboSpan" id="kobo.881.1">convenient way to block a predefined list of commonly recognized profane words. </span><span class="koboSpan" id="kobo.881.2">This list is based on a global definition of profanity and is subject to regular updates, ensuring that the filter remains aligned with evolving </span><span class="No-Break"><span class="koboSpan" id="kobo.882.1">societal norms.</span></span></li>
<li><span class="koboSpan" id="kobo.883.1">Additionally, you can customize the word filtering experience by specifying up to 10,000 custom words and phrases that should be blocked. </span><span class="koboSpan" id="kobo.883.2">This flexibility allows you to tailor the filters to your specific needs, such as excluding offensive terms, competitor names, or any other language that may be deemed inappropriate for your </span><span class="No-Break"><span class="koboSpan" id="kobo.884.1">use case.</span></span></li>
<li><span class="koboSpan" id="kobo.885.1">Custom words and phrases can be added through various convenient methods, including a manual entry in the console, uploading a local file (e.g., </span><strong class="source-inline"><span class="koboSpan" id="kobo.886.1">.txt</span></strong><span class="koboSpan" id="kobo.887.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.888.1">.csv</span></strong><span class="koboSpan" id="kobo.889.1">), or populating the list from an Amazon S3 object, providing flexibility in managing your word </span><span class="No-Break"><span class="koboSpan" id="kobo.890.1">filter list.</span></span></li>
</ul>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.891.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.892.1">.9</span></em><span class="koboSpan" id="kobo.893.1"> shows how you can configure the word filter with </span><span class="No-Break"><span class="koboSpan" id="kobo.894.1">different options.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer194">
<span class="koboSpan" id="kobo.895.1"><img alt="Figure 12.9 – Adding word filters" src="image/B22045_12_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.896.1">Figure 12.9 – Adding word filters</span></p>
<p><span class="koboSpan" id="kobo.897.1">By using word filters, you can create a more controlled and inclusive environment for your users. </span><span class="koboSpan" id="kobo.897.2">For instance, an educational platform could block offensive language to promote a positive</span><a id="_idIndexMarker1074"/><span class="koboSpan" id="kobo.898.1"> learning atmosphere, while </span><a id="_idIndexMarker1075"/><span class="koboSpan" id="kobo.899.1">a corporate application might filter out competitor names to maintain brand integrity and avoid </span><span class="No-Break"><span class="koboSpan" id="kobo.900.1">potential conflicts.</span></span></p>
<h2 id="_idParaDest-232"><a id="_idTextAnchor253"/><span class="koboSpan" id="kobo.901.1">Sensitive information filters</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.902.1">Sensitive information filters</span></strong><span class="koboSpan" id="kobo.903.1"> allow you</span><a id="_idIndexMarker1076"/><span class="koboSpan" id="kobo.904.1"> to proactively </span><a id="_idIndexMarker1077"/><span class="koboSpan" id="kobo.905.1">identify and take appropriate actions on various types of PII and custom-defined sensitive </span><span class="No-Break"><span class="koboSpan" id="kobo.906.1">data patterns.</span></span></p>
<p><span class="koboSpan" id="kobo.907.1">Guardrails offer a comprehensive list of predefined PII types, covering a wide range of sensitive information such as names, addresses, email addresses, phone numbers, credit card details, and social security numbers. </span><span class="koboSpan" id="kobo.907.2">These PII types are constantly updated to ensure compliance with evolving regulations and privacy norms. </span><span class="koboSpan" id="kobo.907.3">For a complete list, you can </span><span class="No-Break"><span class="koboSpan" id="kobo.908.1">visit </span></span><a href="https://docs.aws.amazon.com/bedrock/latest/userguide/Guardrails-sensitive-filters.html"><span class="No-Break"><span class="koboSpan" id="kobo.909.1">https://docs.aws.amazon.com/bedrock/latest/userguide/Guardrails-sensitive-filters.html</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.910.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.911.1">When sensitive information is detected, you can configure guardrails to either block or mask </span><span class="No-Break"><span class="koboSpan" id="kobo.912.1">the content:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.913.1">Block mode</span></strong><span class="koboSpan" id="kobo.914.1">: This prevents the sensitive information from being processed at all. </span><span class="koboSpan" id="kobo.914.2">If applied to the input, it stops the prompt containing sensitive data from reaching the model. </span><span class="koboSpan" id="kobo.914.3">If applied to the output, it prevents the model’s response containing sensitive information from reaching </span><span class="No-Break"><span class="koboSpan" id="kobo.915.1">the user.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.916.1">Mask mode</span></strong><span class="koboSpan" id="kobo.917.1">: This allows processing but redacts the sensitive data, replacing it with identifiers. </span><span class="koboSpan" id="kobo.917.2">For example, a social security number such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.918.1">123-45-6789</span></strong><span class="koboSpan" id="kobo.919.1"> might be replaced with </span><strong class="source-inline"><span class="koboSpan" id="kobo.920.1">[SSN]</span></strong><span class="koboSpan" id="kobo.921.1">. </span><span class="koboSpan" id="kobo.921.2">This ensures privacy while preserving the overall context of </span><span class="No-Break"><span class="koboSpan" id="kobo.922.1">the content.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.923.1">Additionally, you can define</span><a id="_idIndexMarker1078"/><span class="koboSpan" id="kobo.924.1"> custom </span><strong class="bold"><span class="koboSpan" id="kobo.925.1">regular expression</span></strong><span class="koboSpan" id="kobo.926.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.927.1">regex</span></strong><span class="koboSpan" id="kobo.928.1">) patterns to filter specific types of </span><a id="_idIndexMarker1079"/><span class="koboSpan" id="kobo.929.1">sensitive information</span><a id="_idIndexMarker1080"/><span class="koboSpan" id="kobo.930.1"> relevant to your organization or use case. </span><span class="koboSpan" id="kobo.930.2">This flexibility allows you to protect proprietary data, such as serial numbers, booking IDs, or any other critical information that requires safeguarding. </span><span class="No-Break"><span class="koboSpan" id="kobo.931.1">For example:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.932.1">A custom product serial number</span></strong><span class="koboSpan" id="kobo.933.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.934.1">^ABC-\d{5}-[A-Z]{2}$</span></strong><span class="koboSpan" id="kobo.935.1"> (matches patterns such </span><span class="No-Break"><span class="koboSpan" id="kobo.936.1">as </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.937.1">ABC-12345-XY</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.938.1">)</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.939.1">An internal booking ID</span></strong><span class="koboSpan" id="kobo.940.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.941.1">^BK-\d{6}-[A-Z]{3}$</span></strong><span class="koboSpan" id="kobo.942.1"> (matches patterns such </span><span class="No-Break"><span class="koboSpan" id="kobo.943.1">as </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.944.1">BK-123456-NYC</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.945.1">)</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.946.1">A company-specific employee ID</span></strong><span class="koboSpan" id="kobo.947.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.948.1">^EMP-\d{4}-[A-Z]{2}$</span></strong><span class="koboSpan" id="kobo.949.1"> (matches patterns such </span><span class="No-Break"><span class="koboSpan" id="kobo.950.1">as </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.951.1">EMP-1234-AB</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.952.1">)</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.953.1">These custom patterns can be used alongside the predefined PII types to create a comprehensive sensitive information protection strategy tailored to your </span><span class="No-Break"><span class="koboSpan" id="kobo.954.1">specific needs.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer195">
<span class="koboSpan" id="kobo.955.1"><img alt="Figure 12.10 – Adding sensitive information filters" src="image/B22045_12_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.956.1">Figure 12.10 – Adding sensitive information filters</span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.957.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.958.1">.10</span></em><span class="koboSpan" id="kobo.959.1"> shows the configuration options you can specify for sensitive </span><span class="No-Break"><span class="koboSpan" id="kobo.960.1">information filters.</span></span></p>
<p><span class="koboSpan" id="kobo.961.1">By leveraging sensitive information filters, you can ensure that your applications maintain the highest standards of privacy and data protection. </span><span class="koboSpan" id="kobo.961.2">For instance, a healthcare provider </span><a id="_idIndexMarker1081"/><span class="koboSpan" id="kobo.962.1">could configure</span><a id="_idIndexMarker1082"/><span class="koboSpan" id="kobo.963.1"> guardrails to mask patient information in summaries, while a financial institution could block queries related to credit card details or account numbers, mitigating the risk of data breaches and maintaining </span><span class="No-Break"><span class="koboSpan" id="kobo.964.1">regulatory compliance.</span></span></p>
<h2 id="_idParaDest-233"><a id="_idTextAnchor254"/><span class="koboSpan" id="kobo.965.1">Blocked messaging</span></h2>
<p><span class="koboSpan" id="kobo.966.1">Once we have defined</span><a id="_idIndexMarker1083"/><span class="koboSpan" id="kobo.967.1"> the policy filters, you can then next define the blocked messaging, when the guardrail blocks any input prompt or response from the model. </span><span class="koboSpan" id="kobo.967.2">In such cases, a pre-approved response is provided, tailored to the specific use case or organizational guidelines. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.968.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.969.1">.11</span></em><span class="koboSpan" id="kobo.970.1"> shows what messaging you would like to display for both input prompts and </span><span class="No-Break"><span class="koboSpan" id="kobo.971.1">model responses.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer196">
<span class="koboSpan" id="kobo.972.1"><img alt="Figure 12.11 – Blocked messaging" src="image/B22045_12_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.973.1">Figure 12.11 – Blocked messaging</span></p>
<p><span class="koboSpan" id="kobo.974.1">This approach ensures that the end user receives a safe, appropriate, and compliant response, even</span><a id="_idIndexMarker1084"/><span class="koboSpan" id="kobo.975.1"> in scenarios where the initial input or model output </span><span class="No-Break"><span class="koboSpan" id="kobo.976.1">raises concerns.</span></span></p>
<h2 id="_idParaDest-234"><a id="_idTextAnchor255"/><span class="koboSpan" id="kobo.977.1">Testing and deploying guardrails</span></h2>
<p><span class="koboSpan" id="kobo.978.1">By testing the </span><a id="_idIndexMarker1085"/><span class="koboSpan" id="kobo.979.1">guardrail, you can iteratively refine and test the models, ensuring they align with your intended use case and adhere to ethical standards. </span><span class="koboSpan" id="kobo.979.2">Here’s how </span><span class="No-Break"><span class="koboSpan" id="kobo.980.1">it works:</span></span></p>
<p><span class="koboSpan" id="kobo.981.1">First, you create a guardrail, which initializes a working draft (</span><strong class="source-inline"><span class="koboSpan" id="kobo.982.1">DRAFT</span></strong><span class="koboSpan" id="kobo.983.1">) version. </span><span class="koboSpan" id="kobo.983.2">Think of this as a sandbox environment where you can experiment without impacting live systems. </span><span class="koboSpan" id="kobo.983.3">This working draft is something you can continuously edit and tweak until you’re satisfied with </span><span class="No-Break"><span class="koboSpan" id="kobo.984.1">its performance.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer197">
<span class="koboSpan" id="kobo.985.1"><img alt="Figure 12.12 – Test Guardrails for Amazon Bedrock" src="image/B22045_12_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.986.1">Figure 12.12 – Test Guardrails for Amazon Bedrock</span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.987.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.988.1">.12</span></em><span class="koboSpan" id="kobo.989.1"> shows the test results of the working draft. </span><span class="koboSpan" id="kobo.989.2">Here, I have taken a simple example of soccer, where I have provided </span><strong class="source-inline"><span class="koboSpan" id="kobo.990.1">soccer</span></strong><span class="koboSpan" id="kobo.991.1"> as a denied topic. </span><span class="koboSpan" id="kobo.991.2">When I provide a prompt pertaining to soccer, the model blocks the response. </span><span class="koboSpan" id="kobo.991.3">You can also see from the figure the prompt and model </span><span class="No-Break"><span class="koboSpan" id="kobo.992.1">response trace.</span></span></p>
<p><span class="koboSpan" id="kobo.993.1">Once you’ve perfected the working draft, you can create a version – a snapshot of the guardrail’s configurations at that point in time. </span><span class="koboSpan" id="kobo.993.2">Additionally, these versions function as immutable </span><a id="_idIndexMarker1086"/><span class="koboSpan" id="kobo.994.1">checkpoints in the system. </span><span class="koboSpan" id="kobo.994.2">This immutability serves a critical purpose: it prevents potential immediate negative impacts on the runtime environment that could occur if a draft version were accidentally deployed to production. </span><span class="koboSpan" id="kobo.994.3">For instance, if an engineer inadvertently made a modification to a draft version directly through the console interface, these immutable checkpoints would ensure that such changes don’t affect the live production environment. </span><span class="koboSpan" id="kobo.994.4">This safeguard helps maintain system stability and prevents unintended consequences from </span><span class="No-Break"><span class="koboSpan" id="kobo.995.1">impromptu modifications.</span></span></p>
<p><span class="koboSpan" id="kobo.996.1">It’s important to note that any changes made to the working draft will automatically update the live application if the draft is being used in the application. </span><span class="koboSpan" id="kobo.996.2">You must explicitly incorporate the desired version into your application to reflect the latest </span><span class="No-Break"><span class="koboSpan" id="kobo.997.1">guardrail configurations.</span></span></p>
<p><span class="koboSpan" id="kobo.998.1">Now that we have </span><a id="_idIndexMarker1087"/><span class="koboSpan" id="kobo.999.1">created, tested and deployed guardrails, let us look at how we can </span><span class="No-Break"><span class="koboSpan" id="kobo.1000.1">use it.</span></span></p>
<h2 id="_idParaDest-235"><a id="_idTextAnchor256"/><span class="koboSpan" id="kobo.1001.1">Using guardrails</span></h2>
<p><span class="koboSpan" id="kobo.1002.1">Guardrails can be</span><a id="_idIndexMarker1088"/><span class="koboSpan" id="kobo.1003.1"> used in </span><span class="No-Break"><span class="koboSpan" id="kobo.1004.1">various ways:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.1005.1">Model Inference</span></strong><span class="koboSpan" id="kobo.1006.1">: If you are using Amazon Bedrock console, you can select your guardrail in the playground. </span><span class="koboSpan" id="kobo.1006.2">Whereas, if you are using Amazon Bedrock APIs, you can use the guardrail with </span><strong class="source-inline"><span class="koboSpan" id="kobo.1007.1">InvokeModel</span></strong><span class="koboSpan" id="kobo.1008.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1009.1">InvokeModelWithResponseStream</span></strong><span class="koboSpan" id="kobo.1010.1">, and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1011.1">Converse</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1012.1"> APIs.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1013.1">Knowledge base</span></strong><span class="koboSpan" id="kobo.1014.1">: You can include guardrails when querying your knowledge base in the Amazon Bedrock console or </span><span class="No-Break"><span class="koboSpan" id="kobo.1015.1">via APIs.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1016.1">Guardrail to your agent</span></strong><span class="koboSpan" id="kobo.1017.1">: Associate a guardrail with your agent when creating or updating an agent in the Amazon Bedrock console </span><span class="No-Break"><span class="koboSpan" id="kobo.1018.1">or API.</span></span></li>
</ul>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1019.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1020.1">.13</span></em><span class="koboSpan" id="kobo.1021.1"> shows the response with and without using Guardrails within Amazon </span><span class="No-Break"><span class="koboSpan" id="kobo.1022.1">Bedrock Playground.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer198">
<span class="koboSpan" id="kobo.1023.1"><img alt="Figure 12.13 – Using Guardrails in Amazon Bedrock Playground" src="image/B22045_12_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1024.1">Figure 12.13 – Using Guardrails in Amazon Bedrock Playground</span></p>
<p><span class="koboSpan" id="kobo.1025.1">With Amazon Bedrock APIs, you can specify </span><strong class="source-inline"><span class="koboSpan" id="kobo.1026.1">guardrailIdentifier</span></strong><span class="koboSpan" id="kobo.1027.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1028.1">guardrailIdentifier</span></strong><span class="koboSpan" id="kobo.1029.1"> as</span><a id="_idIndexMarker1089"/><span class="koboSpan" id="kobo.1030.1"> shown in </span><span class="No-Break"><span class="koboSpan" id="kobo.1031.1">the code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1032.1">
%pip install boto3 botocore
#import the main packages and libraries
import os
import boto3
import json
import botocore
bedrock_runtime = boto3.client('bedrock-runtime') # Provide the desired region
prompt = "Can you tell me about the treatment for chronic condition?"
</span><span class="koboSpan" id="kobo.1032.2">body = json.dumps({"inputText": prompt,
                   "textGenerationConfig":{
                       "maxTokenCount":4096,
                       "stopSequences":[],
                       "temperature":0,
                       "topP":1
                   },
                  })
modelId = 'amazon.titan-tg1-large' # change this to use a different version from the model provider
accept = 'application/json'
contentType = 'application/json'
response1 = bedrock_runtime.invoke_model(body=body,
                                        modelId=modelId,
                                        accept=accept,
                                        contentType
                                          =contentType,
                                        trace="ENABLED",
                                        guardrailIdentifier
                                          = 'vtfzfvd8ccoz',
                                        guardrailVersion=
                                          "1"
                                        )
response_g = json.loads(response1.get('body').read())
#print(response_body.get('results')[0].get('outputText'))
#output_body = json.loads(response1["body"].read().decode())
action = response_g["amazon-bedrock-guardrailAction"]
if action == "INTERVENED":
    print("Guardrail Intervention: {}".format(json.dumps(response_g["amazon-bedrock-trace"]["guardrail"], indent=2)))
print("Guardrail action: {}".format(response_g["amazon-bedrock-guardrailAction"]))
print("Output text: {}".format(response_g["results"][0]["outputText"]))</span></pre>
<p><span class="koboSpan" id="kobo.1033.1">When running</span><a id="_idIndexMarker1090"/><span class="koboSpan" id="kobo.1034.1"> the preceding code, you can see that the response would be similar to what is shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1035.1">Figure 12</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1036.1">.14</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1037.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer199">
<span class="koboSpan" id="kobo.1038.1"><img alt="Figure 12.14 – Response with Guardrails" src="image/B22045_12_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1039.1">Figure 12.14 – Response with Guardrails</span></p>
<p><span class="koboSpan" id="kobo.1040.1">You can see that the prompt provided in the code relates to medical treatment, for which we have configured Denied Topics filter in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1041.1">Guardrail</span></strong><span class="koboSpan" id="kobo.1042.1">. </span><span class="koboSpan" id="kobo.1042.2">The code snippet includes </span><strong class="source-inline"><span class="koboSpan" id="kobo.1043.1">guardrailIdentifier</span></strong><span class="koboSpan" id="kobo.1044.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1045.1">guardrailVersion</span></strong><span class="koboSpan" id="kobo.1046.1"> to enable Bedrock Guardrails, which can intervene and modify the model’s output based on the filter that </span><span class="No-Break"><span class="koboSpan" id="kobo.1047.1">is configured.</span></span></p>
<p><span class="koboSpan" id="kobo.1048.1">Furthermore, when using a guardrail with model inference, you can selectively evaluate user input by tagging specific content within the input text. </span><span class="koboSpan" id="kobo.1048.2">This feature allows you to apply guardrails to certain parts of the input while leaving other </span><span class="No-Break"><span class="koboSpan" id="kobo.1049.1">parts unprocessed.</span></span></p>
<p><span class="koboSpan" id="kobo.1050.1">For example, imagine you’re creating a conversational AI assistant for a banking application. </span><span class="koboSpan" id="kobo.1050.2">While you want your assistant to provide helpful information to users, you also need to ensure it doesn’t reveal sensitive account details or encourage risky financial behavior. </span><span class="koboSpan" id="kobo.1050.3">By </span><a id="_idIndexMarker1091"/><span class="koboSpan" id="kobo.1051.1">selectively evaluating user input, you can apply guardrails to specific sections of the conversation, like user queries, while leaving system prompts and conversation </span><span class="No-Break"><span class="koboSpan" id="kobo.1052.1">history untouched.</span></span></p>
<p><span class="koboSpan" id="kobo.1053.1">Here’s how you could </span><span class="No-Break"><span class="koboSpan" id="kobo.1054.1">implement this:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.1055.1">Use input tags to mark user queries, for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1056.1">&lt;amazon-bedrock-guardrails-guardContent_abc&gt;How much money is in my </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1057.1">savings account?&lt;/amazon-bedrock-guardrails-guardContent_abc&gt;</span></strong></span></li>
<li><span class="koboSpan" id="kobo.1058.1">Configure a dynamic tag suffix (for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1059.1">abc</span></strong><span class="koboSpan" id="kobo.1060.1">) in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1061.1">amazon-bedrock-guardrailConfig</span></strong><span class="koboSpan" id="kobo.1062.1"> to prevent prompt </span><span class="No-Break"><span class="koboSpan" id="kobo.1063.1">injection attacks.</span></span></li>
<li><span class="koboSpan" id="kobo.1064.1">Any content outside the tags such as system prompts and conversation history won’t be processed </span><span class="No-Break"><span class="koboSpan" id="kobo.1065.1">by guardrails.</span></span></li>
<li><span class="koboSpan" id="kobo.1066.1">For user queries within the tags, guardrails will ensure the AI assistant’s response doesn’t reveal sensitive financial information or promote irresponsible </span><span class="No-Break"><span class="koboSpan" id="kobo.1067.1">money management.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1068.1">This approach not only enhances security and control but also optimizes performance and reduces costs, as guardrails only evaluate the tagged user input instead of the </span><span class="No-Break"><span class="koboSpan" id="kobo.1069.1">entire prompt.</span></span></p>
<p><span class="koboSpan" id="kobo.1070.1">When using guardrails with streaming responses, you can either configure it to </span><strong class="bold"><span class="koboSpan" id="kobo.1071.1">synchronous mode</span></strong><span class="koboSpan" id="kobo.1072.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.1073.1">asynchronous mode</span></strong><span class="koboSpan" id="kobo.1074.1">. </span><span class="koboSpan" id="kobo.1074.2">The </span><a id="_idIndexMarker1092"/><span class="koboSpan" id="kobo.1075.1">synchronous mode introduces some latency as</span><a id="_idIndexMarker1093"/><span class="koboSpan" id="kobo.1076.1"> the guardrail buffers and applies policies to response chunks before sending them to the user, ensuring better accuracy. </span><span class="koboSpan" id="kobo.1076.2">Alternatively, the asynchronous mode sends</span><a id="_idIndexMarker1094"/><span class="koboSpan" id="kobo.1077.1"> response chunks immediately while applying policies in the background, sacrificing accuracy for </span><span class="No-Break"><span class="koboSpan" id="kobo.1078.1">lower latency.</span></span></p>
<p><span class="koboSpan" id="kobo.1079.1">You can enable asynchronous mode by including </span><strong class="source-inline"><span class="koboSpan" id="kobo.1080.1">"streamProcessingMode": "ASYNCHRONOUS"</span></strong><span class="koboSpan" id="kobo.1081.1"> in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1082.1">amazon-bedrock-guardrailConfig</span></strong><span class="koboSpan" id="kobo.1083.1">. </span><span class="koboSpan" id="kobo.1083.2">Here </span><span class="No-Break"><span class="koboSpan" id="kobo.1084.1">is how:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1085.1">
{
   "amazon-bedrock-guardrailConfig": {
   "streamProcessingMode": "ASYNCHRONOUS"
   }
}</span></pre>
<p><span class="koboSpan" id="kobo.1086.1">For conversational applications built with </span><strong class="source-inline"><span class="koboSpan" id="kobo.1087.1">Converse</span></strong><span class="koboSpan" id="kobo.1088.1"> API, you can use guardrails to block inappropriate content entered by the user or generated by the model. </span><span class="koboSpan" id="kobo.1088.2">When calling the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1089.1">Converse</span></strong><span class="koboSpan" id="kobo.1090.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1091.1">ConverseStream</span></strong><span class="koboSpan" id="kobo.1092.1"> operations, include the guardrail configuration in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1093.1">guardrailConfig</span></strong><span class="koboSpan" id="kobo.1094.1"> parameter. </span><span class="koboSpan" id="kobo.1094.2">Here </span><span class="No-Break"><span class="koboSpan" id="kobo.1095.1">is how:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1096.1">
{
        "guardrailIdentifier": "Guardrail ID",
        "guardrailVersion": "Guardrail version",
        "trace": "enabled"
}</span></pre>
<p><span class="koboSpan" id="kobo.1097.1">Here is an example code on how you can guard the conversation by using guardrails on </span><strong class="source-inline"><span class="koboSpan" id="kobo.1098.1">Converse</span></strong><span class="koboSpan" id="kobo.1099.1"> API : </span><a href="https://docs.aws.amazon.com/bedrock/latest/userguide/guardrails-use-converse-api.html#converse-api-guardrail-example"><span class="No-Break"><span class="koboSpan" id="kobo.1100.1">https://docs.aws.amazon.com/bedrock/latest/userguide/guardrails-use-converse-api.html#converse-api-guardrail-example</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1101.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1102.1">Guardrails for Amazon Bedrock is a feature that allows organizations to implement safeguards and policy filters to ensure the safe and responsible use of AI models. </span><span class="koboSpan" id="kobo.1102.2">It provides four policy filters – content filters, denied topics, word filters, and sensitive information filters – to block or redact unwanted content, topics, words, and sensitive information from both user inputs and model outputs. </span><span class="koboSpan" id="kobo.1102.3">Guardrails helps maintain compliance with</span><a id="_idIndexMarker1095"/><span class="koboSpan" id="kobo.1103.1"> regulations, protect user privacy, and prevent the generation of harmful or </span><span class="No-Break"><span class="koboSpan" id="kobo.1104.1">unethical content.</span></span></p>
<h1 id="_idParaDest-236"><a id="_idTextAnchor257"/><span class="koboSpan" id="kobo.1105.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.1106.1">This chapter began by emphasizing the importance of data privacy and protection for organizations in today’s digital landscape. </span><span class="koboSpan" id="kobo.1106.2">It highlighted Amazon Bedrock’s robust security measures, which ensure that users maintain complete control over their data, along with key aspects such as data localization, isolation, encryption, and access management </span><span class="No-Break"><span class="koboSpan" id="kobo.1107.1">through IAM.</span></span></p>
<p><span class="koboSpan" id="kobo.1108.1">The chapter then dove deeper into responsible AI practices, addressing challenges such as veracity, intellectual property rights, safety, and toxicity. </span><span class="koboSpan" id="kobo.1108.2">It provided guidance on implementing content filtering, guardrails, data curation, watermarking, traceability, and establishing robust responsible AI policies. </span><span class="koboSpan" id="kobo.1108.3">Additionally, the chapter introduced Guardrails for Amazon Bedrock, which offers four policy filters: content filters, denied topics, word filters, and sensitive information filters. </span><span class="koboSpan" id="kobo.1108.4">These filters enable organizations to implement safeguards aligning with their safe and responsible AI policies, promoting ethical AI deployment across </span><span class="No-Break"><span class="koboSpan" id="kobo.1109.1">various industries.</span></span></p>
<p><span class="koboSpan" id="kobo.1110.1">Congratulations! </span><span class="koboSpan" id="kobo.1110.2">You have reached the end of this book. </span><span class="koboSpan" id="kobo.1110.3">By now, you have gained deep hands-on knowledge of Amazon Bedrock. </span><span class="koboSpan" id="kobo.1110.4">From understanding the foundational concepts to practical implementations and real-world use cases, we have covered a wide range of topics that will provide you with the knowledge and skills to build scalable and innovative </span><span class="No-Break"><span class="koboSpan" id="kobo.1111.1">GenAI applications.</span></span></p>
<p><span class="koboSpan" id="kobo.1112.1">Throughout the chapters, we have explored the power of prompt engineering, continuous pre-training, fine-tuning models, and RAG, along with the development of intelligent agents with </span><span class="No-Break"><span class="koboSpan" id="kobo.1113.1">Amazon Bedrock.</span></span></p>
<p><span class="koboSpan" id="kobo.1114.1">We explored various architectural patterns, such as text generation, summarization, question answering, entity extraction, code generation, and image creation. </span><span class="koboSpan" id="kobo.1114.2">Additionally, we addressed crucial aspects of monitoring, security, and privacy, ensuring that you can confidently navigate the intricate world of GenAI with Amazon Bedrock while adhering to ethical standards and best practices. </span><span class="koboSpan" id="kobo.1114.3">You now have a comprehensive understanding of Amazon Bedrock, its capabilities, and the techniques required to harness its </span><span class="No-Break"><span class="koboSpan" id="kobo.1115.1">full potential.</span></span></p>
</div>
</body></html>