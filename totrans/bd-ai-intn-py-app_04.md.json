["```py\n%pip3 install --upgrade --quiet pymongo pythondns langchain langchain-community langchain-mongodb langchain-openai \n```", "```py\n{\n  \"fields\": [\n    {\n      \"numDimensions\": 1024,\n      \"path\": \"embedding\",\n      \"similarity\": \"cosine\",\n      \"type\": \"vector\"\n    }\n  ]\n}\n```", "```py\nimport os, pprint, time\nfrom langchain_mongodb import MongoDBAtlasVectorSearch\nfrom langchain_openai import OpenAIEmbeddings\nfrom pymongo import MongoClient\n\nos.environ[\"OPENAI_API_KEY\"] = \"YOUR-OPENAI-API-KEY\"\nMONGODB_ATLAS_CONNECTION_STRING = \"YOUR-MONGODB_ATLAS-CONNSTRING\"\nclient = MongoClient(MONGODB_ATLAS_CONNECTION_STRING, tls=True, tlsAllowInvalidCertificates=True)\n\ndb_name = \"embeddings\"\ncollection_name = \"text\"\ncoll = client[db_name][collection_name]\nvector_search_index = \"text_vector_index\"\n\ncoll.delete_many({})\n\ntexts = []\ntexts.append(\"A martial artist agrees to spy on a reclusive crime lord using his invitation to a tournament there as cover.\")\ntexts.append(\"A group of intergalactic criminals are forced to work together to stop a fanatical warrior from taking control of the universe.\")\ntexts.append(\"When a boy wishes to be big at a magic wish machine, he wakes up the next morning and finds himself in an adult body.\")\nembedding_model = OpenAIEmbeddings(\n    model=\"text-embedding-3-large\", \n    dimensions=1024,\n    disallowed_special=()\n)\n\nembeddings = embedding_model.embed_documents(texts)\n\ndocs = []\nfor i in range(len(texts)):\n    docs.append(\n        {\n            \"text\": texts[i], \n            \"embedding\": embeddings[i]\n        }\n    )\n\ncoll.insert_many(docs)\nprint(\"Documents embedded and inserted successfully.\")\n\ntime.sleep(3) # allow vector store (Atlas) to undergo indexing\n\nsemantic_queries = []\nsemantic_queries.append(\"Secret agent captures underworld boss.\")\nsemantic_queries.append(\"Awkward team of space defenders.\")\nsemantic_queries.append(\"A magical tale of growing up.\")\n\nvector_search = MongoDBAtlasVectorSearch(\n    collection= coll,\n    embedding= OpenAIEmbeddings(\n      model=\"text-embedding-3-large\", \n      dimensions=1024,\n      disallowed_special=()),\n    index_name= vector_search_index\n)\n\nfor q in semantic_queries:\n    results = vector_search.similarity_search_with_score(\n        query = q, \n        k = 3\n    )\n    print(\"SEMANTIC QUERY: \" + q)\n    print(\"RANKED RESULTS: \")\n    pprint.pprint(results)\n    print(\"\")\n```", "```py\n(myenv) % python3 semantic_search.py\n0\n1\n2\nDocuments embedded and inserted successfully.\nSEMANTIC QUERY: Secret agent captures underworld boss.\nRANKED RESULTS:\n[(Document(metadata={'_id': '66aada5537ef2109b3058ccb'}, page_content='A martial artist agrees to spy on a reclusive crime lord using his invitation to a tournament there as cover.'),\n  0.770392894744873),\n(Document(metadata={'_id': '66aada5537ef2109b3058ccc'}, page_content='A group of intergalactic criminals are forced to work together to stop a fanatical warrior from taking control of the universe.'),\n  0.6555435657501221),\n(Document(metadata={'_id': '66aada5537ef2109b3058ccd'}, page_content='When a boy wishes to be big at a magic wish machine, he wakes up the next morning and finds himself in an adult body.'),\n  0.5847723484039307)]\n\nSEMANTIC QUERY: Awkward team of space defenders.\nRANKED RESULTS:\n[(Document(metadata={'_id': '66aada5537ef2109b3058ccc'}, page_content='A group of intergalactic criminals are forced to work together to stop a fanatical warrior from taking control of the universe.'),\n  0.7871642112731934),\n(Document(metadata={'_id': '66aada5537ef2109b3058ccb'}, page_content='A martial artist agrees to spy on a reclusive crime lord using his invitation to a tournament there as cover.'),\n  0.6236412525177002),\n(Document(metadata={'_id': '66aada5537ef2109b3058ccd'}, page_content='When a boy wishes to be big at a magic wish machine, he wakes up the next morning and finds himself in an adult body.'),\n  0.5492569208145142)]\n\nSEMANTIC QUERY: A magical tale of growing up.\nRANKED RESULTS:\n[(Document(metadata={'_id': '66aada5537ef2109b3058ccd'}, page_content='When a boy wishes to be big at a magic wish machine, he wakes up the next morning and finds himself in an adult body.'),\n  0.7488957047462463),\n(Document(metadata={'_id': '66aada5537ef2109b3058ccb'}, page_content='A martial artist agrees to spy on a reclusive crime lord using his invitation to a tournament there as cover.'),\n  0.5904781222343445),\n(Document(metadata={'_id': '66aada5537ef2109b3058ccc'}, page_content='A group of intergalactic criminals are forced to work together to stop a fanatical warrior from taking control of the universe.'),\n  0.5809941291809082)]\n```"]