<html><head></head><body>
<div id="_idContainer160">
<h1 class="chapter-number" id="_idParaDest-179"><a id="_idTextAnchor192"/><span class="koboSpan" id="kobo.1.1">10</span></h1>
<h1 id="_idParaDest-180"><a id="_idTextAnchor193"/><span class="koboSpan" id="kobo.2.1">Developing Intelligent Agents with Amazon Bedrock</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In this chapter, readers will explore the concept of agents in </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">generative artificial intelligence</span></strong><span class="koboSpan" id="kobo.5.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.6.1">GenAI</span></strong><span class="koboSpan" id="kobo.7.1">), diving</span><a id="_idIndexMarker822"/><span class="koboSpan" id="kobo.8.1"> into their importance, benefits, and the various tools and </span><span class="No-Break"><span class="koboSpan" id="kobo.9.1">types available.</span></span></p>
<p><span class="koboSpan" id="kobo.10.1">Readers will learn to build knowledge bases and develop agents specifically designed for Amazon Bedrock, gaining insights into configurations, testing, and deployment strategies. </span><span class="koboSpan" id="kobo.10.2">Additionally, the chapter will showcase real-world industrial use cases, highlighting the practical applications of Agents in conjunction with </span><span class="No-Break"><span class="koboSpan" id="kobo.11.1">Amazon Bedrock.</span></span></p>
<p><span class="koboSpan" id="kobo.12.1">Through hands-on examples, readers will acquire the skills to describe the role of agents, integrate LangChain Agents with Amazon Bedrock, understand Agents’ configurations for Amazon Bedrock, and build, test, and deploy agents tailored to this service. </span><span class="koboSpan" id="kobo.12.2">Furthermore, they will explore diverse industrial use cases, demonstrating the versatility and potential of Agents in enhancing the capabilities of </span><span class="No-Break"><span class="koboSpan" id="kobo.13.1">Amazon Bedrock.</span></span></p>
<p><span class="koboSpan" id="kobo.14.1">Specifically, readers will gain a clear understanding of </span><span class="No-Break"><span class="koboSpan" id="kobo.15.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.16.1">What </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">are Agents?</span></span></li>
<li><span class="koboSpan" id="kobo.18.1">GenAI agent personas, roles, and </span><span class="No-Break"><span class="koboSpan" id="kobo.19.1">use-case scenarios</span></span></li>
<li><span class="koboSpan" id="kobo.20.1">Amazon Bedrock integration with </span><span class="No-Break"><span class="koboSpan" id="kobo.21.1">LangChain Agents</span></span></li>
<li><span class="koboSpan" id="kobo.22.1">Agents for </span><span class="No-Break"><span class="koboSpan" id="kobo.23.1">Amazon Bedrock</span></span></li>
<li><span class="koboSpan" id="kobo.24.1">Deploying an Agent for </span><span class="No-Break"><span class="koboSpan" id="kobo.25.1">Amazon Bedrock</span></span></li>
</ul>
<h1 id="_idParaDest-181"><a id="_idTextAnchor194"/><span class="koboSpan" id="kobo.26.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.27.1">This chapter requires you to have access to an AWS account. </span><span class="koboSpan" id="kobo.27.2">If you don’t have one already, you can go to </span><a href="https://aws.amazon.com/getting-started/"><span class="koboSpan" id="kobo.28.1">https://aws.amazon.com/getting-started/</span></a><span class="koboSpan" id="kobo.29.1"> and create an </span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">AWS account.</span></span></p>
<p><span class="koboSpan" id="kobo.31.1">Secondly, you will need to install and configure AWS CLI (</span><a href="https://aws.amazon.com/cli/"><span class="koboSpan" id="kobo.32.1">https://aws.amazon.com/cli/</span></a><span class="koboSpan" id="kobo.33.1">) after you create an account, which will be needed to access Amazon Bedrock FMs from your local machine. </span><span class="koboSpan" id="kobo.33.2">Since the majority chunk of code cells we will be executing is based in Python, setting up an AWS Python SDK (Boto3) (</span><a href="https://docs.aws.amazon.com/bedrock/latest/APIReference/welcome.html"><span class="koboSpan" id="kobo.34.1">https://docs.aws.amazon.com/bedrock/latest/APIReference/welcome.html</span></a><span class="koboSpan" id="kobo.35.1">) would be beneficial at this point. </span><span class="koboSpan" id="kobo.35.2">You can carry out the Python setup in the following manner: install it on your local machine, or use AWS Cloud9, or utilize AWS Lambda, or leverage </span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">Amazon SageMaker.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.37.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.38.1">There will be a charge associated with the invocation and customization of Amazon Bedrock FMs. </span><span class="koboSpan" id="kobo.38.2">Please refer to </span><a href="https://aws.amazon.com/bedrock/pricing/"><span class="koboSpan" id="kobo.39.1">https://aws.amazon.com/bedrock/pricing/</span></a><span class="koboSpan" id="kobo.40.1"> to </span><span class="No-Break"><span class="koboSpan" id="kobo.41.1">learn more.</span></span></p>
<h1 id="_idParaDest-182"><a id="_idTextAnchor195"/><span class="koboSpan" id="kobo.42.1">What are Agents?</span></h1>
<p><span class="koboSpan" id="kobo.43.1">In the dynamic landscape </span><a id="_idIndexMarker823"/><span class="koboSpan" id="kobo.44.1">of AI, a new category of sophisticated systems has emerged, poised to significantly impact our relationship with technology. </span><span class="koboSpan" id="kobo.44.2">These entities, known as </span><strong class="bold"><span class="koboSpan" id="kobo.45.1">GenAI agents</span></strong><span class="koboSpan" id="kobo.46.1">, represent a formidable advancement characterized by their autonomy, adaptability, and </span><span class="No-Break"><span class="koboSpan" id="kobo.47.1">cognitive abilities.</span></span></p>
<p><span class="koboSpan" id="kobo.48.1">GenAI agents are software constructs engineered to comprehend and execute complex tasks with minimal human oversight. </span><span class="koboSpan" id="kobo.48.2">They demonstrate a remarkable capacity to assess objectives, devise strategic plans, and execute actions to achieve goals, all while continuously learning and refining their approaches based </span><span class="No-Break"><span class="koboSpan" id="kobo.49.1">on feedback.</span></span></p>
<p><span class="koboSpan" id="kobo.50.1">What distinguishes GenAI agents from previous iterations is their multifaceted nature, combining reactivity, proactivity, learning capabilities, and social adeptness. </span><span class="koboSpan" id="kobo.50.2">This unique amalgamation enables them to promptly respond to changing environments, anticipate future needs, evolve through ongoing learning processes, and seamlessly collaborate with humans and </span><span class="No-Break"><span class="koboSpan" id="kobo.51.1">fellow agents.</span></span></p>
<h2 id="_idParaDest-183"><a id="_idTextAnchor196"/><span class="koboSpan" id="kobo.52.1">Features of agents</span></h2>
<p><span class="koboSpan" id="kobo.53.1">Here are some of the </span><a id="_idIndexMarker824"/><span class="koboSpan" id="kobo.54.1">key features </span><span class="No-Break"><span class="koboSpan" id="kobo.55.1">of Agents:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.56.1">Prompt response agility</span></strong><span class="koboSpan" id="kobo.57.1">: GenAI Agents excel in swift response to prompts, ensuring agility in adapting to dynamic circumstances. </span><span class="koboSpan" id="kobo.57.2">For instance, in manufacturing settings, these agents can efficiently recalibrate processes and reallocate resources to maintain operational efficiency amid fluctuating demand or </span><span class="No-Break"><span class="koboSpan" id="kobo.58.1">unexpected disruptions.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.59.1">Chain-of-thought (CoT)/Reasoning and Acting (ReAct)-style action</span></strong><span class="koboSpan" id="kobo.60.1">: GenAI Agents take action based on CoT/ReAct-style prompts, ensuring prompt and effective responses to stimuli. </span><span class="koboSpan" id="kobo.60.2">If you recall, ReAct prompting is a method designed to prompt LLMs, aiming to enhance the accuracy of their responses compared to other methods such as CoT. </span><span class="koboSpan" id="kobo.60.3">For instance, in customer service, these agents can generate responses to inquiries based on predefined </span><span class="No-Break"><span class="koboSpan" id="kobo.61.1">conversational cues.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.62.1">Prediction utility</span></strong><span class="koboSpan" id="kobo.63.1">: Though GenAI Agents do not autonomously anticipate or predict future</span><a id="_idIndexMarker825"/><span class="koboSpan" id="kobo.64.1"> events, they act based on predefined parameters and inputs. </span><span class="koboSpan" id="kobo.64.2">In financial forecasting, these agents utilize historical data and predefined algorithms to generate predictions rather than autonomously forecasting </span><span class="No-Break"><span class="koboSpan" id="kobo.65.1">future trends.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.66.1">Continuous learning</span></strong><span class="koboSpan" id="kobo.67.1">: GenAI Agents possess the capability for continuous learning and self-improvement. </span><span class="koboSpan" id="kobo.67.2">Similar to human counterparts, these agents refine their strategies and decision-making processes based on outcomes, continuously evolving and optimizing performance. </span><span class="koboSpan" id="kobo.67.3">For instance, in online recommendation systems, these agents continuously learn from user interactions to improve </span><span class="No-Break"><span class="koboSpan" id="kobo.68.1">personalized recommendations.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.69.1">Collaboration</span></strong><span class="koboSpan" id="kobo.70.1">: GenAI Agents demonstrate adeptness in seamless collaboration with humans and other agents. </span><span class="koboSpan" id="kobo.70.2">Through effective communication and coordination, they enhance productivity and efficiency in interconnected environments. </span><span class="koboSpan" id="kobo.70.3">In autonomous vehicle systems, these agents collaborate with other vehicles and infrastructure to ensure safe and efficient navigation </span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">on roads.</span></span></li>
</ul>
<h2 id="_idParaDest-184"><a id="_idTextAnchor197"/><span class="koboSpan" id="kobo.72.1">Practical applications of Agents – unleashing the potential</span></h2>
<p><span class="koboSpan" id="kobo.73.1">GenAI Agents offer a wide</span><a id="_idIndexMarker826"/><span class="koboSpan" id="kobo.74.1"> array of applications across various industries, showcasing their versatility and potential impact. </span><span class="koboSpan" id="kobo.74.2">In finance, these agents are being experimented with to explore the potential to analyze market trends, detect investment opportunities, and execute trades, enhancing decision-making processes and optimizing investment strategies. </span><span class="koboSpan" id="kobo.74.3">For instance, they can utilize historical data and predictive algorithms to identify patterns and forecast market movements, aiding financial professionals in making informed </span><span class="No-Break"><span class="koboSpan" id="kobo.75.1">investment decisions.</span></span></p>
<p><span class="koboSpan" id="kobo.76.1">In logistics and </span><strong class="bold"><span class="koboSpan" id="kobo.77.1">supply chain management</span></strong><span class="koboSpan" id="kobo.78.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.79.1">SCM</span></strong><span class="koboSpan" id="kobo.80.1">), GenAI Agents can play a crucial role in optimizing resource allocation, streamlining distribution networks, and minimizing operational costs. </span><span class="koboSpan" id="kobo.80.2">By leveraging real-time data and predictive analytics, these agents can optimize inventory management, route planning, and warehouse operations, improving efficiency and reducing lead times. </span><span class="koboSpan" id="kobo.80.3">For example, they can dynamically adjust shipping routes based on traffic conditions and demand fluctuations to ensure timely delivery </span><span class="No-Break"><span class="koboSpan" id="kobo.81.1">of goods.</span></span></p>
<p><span class="koboSpan" id="kobo.82.1">Furthermore, GenAI Agents have the potential to transform education by personalizing learning experiences for students. </span><span class="koboSpan" id="kobo.82.2">They can adapt curricula and teaching methods to individual student needs and learning styles, facilitating personalized learning pathways and improving student outcomes. </span><span class="koboSpan" id="kobo.82.3">For instance, these agents can analyze student performance data, identify areas for improvement, and recommend tailored learning resources and activities to address specific </span><span class="No-Break"><span class="koboSpan" id="kobo.83.1">learning needs.</span></span></p>
<p><span class="koboSpan" id="kobo.84.1">While GenAI Agents hold significant promise and potential across various industries, it’s essential to acknowledge that the widespread adoption and scaling of these technologies may still be in its early stages. </span><span class="koboSpan" id="kobo.84.2">While there are certainly organizations and research initiatives actively exploring and implementing GenAI solutions, achieving widespread adoption and scalability often requires overcoming various technical, regulatory, and </span><span class="No-Break"><span class="koboSpan" id="kobo.85.1">ethical challenges.</span></span></p>
<p><span class="koboSpan" id="kobo.86.1">In many cases, the practical implementation of GenAI Agents may involve pilot projects, </span><strong class="bold"><span class="koboSpan" id="kobo.87.1">proofs of concept</span></strong><span class="koboSpan" id="kobo.88.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.89.1">POCs</span></strong><span class="koboSpan" id="kobo.90.1">), or targeted deployments rather than large-scale implementations across entire industries. </span><span class="koboSpan" id="kobo.90.2">Additionally, the effectiveness and impact of these technologies may vary depending on factors such as data quality, model performance, and the specific use case </span><span class="No-Break"><span class="koboSpan" id="kobo.91.1">in question.</span></span></p>
<p><span class="koboSpan" id="kobo.92.1">Therefore, it’s crucial to approach discussions about the applications of GenAI Agents with a critical lens, considering the current state of technology, existing limitations, and potential challenges</span><a id="_idIndexMarker827"/><span class="koboSpan" id="kobo.93.1"> associated with </span><span class="No-Break"><span class="koboSpan" id="kobo.94.1">widespread adoption.</span></span></p>
<p><span class="koboSpan" id="kobo.95.1">Now, let us take a step further into exploring diverse use case scenarios relevant to </span><span class="No-Break"><span class="koboSpan" id="kobo.96.1">GenAI agents.</span></span></p>
<h1 id="_idParaDest-185"><a id="_idTextAnchor198"/><span class="koboSpan" id="kobo.97.1">GenAI agent personas, roles, and use-case scenarios</span></h1>
<p><span class="koboSpan" id="kobo.98.1">GenAI agents are heavily </span><a id="_idIndexMarker828"/><span class="koboSpan" id="kobo.99.1">leveraged </span><a id="_idIndexMarker829"/><span class="koboSpan" id="kobo.100.1">in enterprises</span><a id="_idIndexMarker830"/><span class="koboSpan" id="kobo.101.1"> as orchestrators. </span><span class="koboSpan" id="kobo.101.2">In the</span><a id="_idIndexMarker831"/><span class="koboSpan" id="kobo.102.1"> context of </span><a id="_idIndexMarker832"/><span class="koboSpan" id="kobo.103.1">GenAI, </span><strong class="bold"><span class="koboSpan" id="kobo.104.1">orchestration</span></strong><span class="koboSpan" id="kobo.105.1"> refers to the coordinated management and deployment of these agents in various roles and </span><span class="No-Break"><span class="koboSpan" id="kobo.106.1">use cases.</span></span></p>
<p><span class="koboSpan" id="kobo.107.1">There are a variety of roles that GenAI agents can play as part of this orchestration. </span><span class="koboSpan" id="kobo.107.2">Some potential use cases of GenAI agents and the roles they could play include </span><span class="No-Break"><span class="koboSpan" id="kobo.108.1">the following:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.109.1">Virtual </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.110.1">assistant roles</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.111.1">:</span></span><ul><li><em class="italic"><span class="koboSpan" id="kobo.112.1">Personal assistant</span></em><span class="koboSpan" id="kobo.113.1">: Agents can act as personal assistants, helping individuals manage their schedules, set reminders, and handle tasks such as booking appointments, making reservations, or </span><span class="No-Break"><span class="koboSpan" id="kobo.114.1">tracking deliveries.</span></span></li><li><em class="italic"><span class="koboSpan" id="kobo.115.1">Information lookup</span></em><span class="koboSpan" id="kobo.116.1">: They can also serve as information lookup tools, providing quick access to knowledge across various domains, such as current events, sports, entertainment, or general </span><span class="No-Break"><span class="koboSpan" id="kobo.117.1">reference queries.</span></span></li><li><em class="italic"><span class="koboSpan" id="kobo.118.1">Personalized recommenders</span></em><span class="koboSpan" id="kobo.119.1">: By learning individual preferences and patterns, these agents can offer personalized recommendations and suggestions tailored to each user’s needs </span><span class="No-Break"><span class="koboSpan" id="kobo.120.1">and interests.</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.121.1">Customer service </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.122.1">chatbot roles</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.123.1">:</span></span><ul><li><em class="italic"><span class="koboSpan" id="kobo.124.1">Customer support agent</span></em><span class="koboSpan" id="kobo.125.1">: Agents can handle customer inquiries and support requests 24/7, providing instant assistance and reducing wait times for </span><span class="No-Break"><span class="koboSpan" id="kobo.126.1">human agents.</span></span></li><li><em class="italic"><span class="koboSpan" id="kobo.127.1">Product advisor</span></em><span class="koboSpan" id="kobo.128.1">: They can guide customers through troubleshooting processes, provide product information, and offer personalized recommendations based on customer preferences and </span><span class="No-Break"><span class="koboSpan" id="kobo.129.1">purchase history.</span></span></li><li><span class="koboSpan" id="kobo.130.1">Chatbots can also handle routine tasks such as order tracking, refund requests, and account management, freeing up human agents for more complex issues, such as troubleshooting technical issues, providing personalized recommendations, resolving disputes, and offering </span><span class="No-Break"><span class="koboSpan" id="kobo.131.1">specialized expertise.</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.132.1">Tutoring and </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.133.1">education roles</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.134.1">:</span></span><ul><li><em class="italic"><span class="koboSpan" id="kobo.135.1">Tutors</span></em><span class="koboSpan" id="kobo.136.1">: GenAI agents can serve as virtual tutors, providing personalized learning experiences adapted to each student’s pace, level, and learning style. </span><span class="koboSpan" id="kobo.136.2">They can explain complex concepts in engaging ways, provide practice exercises, and offer feedback and guidance to </span><span class="No-Break"><span class="koboSpan" id="kobo.137.1">reinforce learning.</span></span></li><li><em class="italic"><span class="koboSpan" id="kobo.138.1">Domain experts</span></em><span class="koboSpan" id="kobo.139.1">: Agents can also act as domain experts, offering in-depth knowledge and insights across various academic subjects or </span><span class="No-Break"><span class="koboSpan" id="kobo.140.1">professional fields.</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.141.1">Content </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.142.1">creation roles</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.143.1">:</span></span><ul><li><em class="italic"><span class="koboSpan" id="kobo.144.1">Writer</span></em><span class="koboSpan" id="kobo.145.1">: Agents </span><a id="_idIndexMarker833"/><span class="koboSpan" id="kobo.146.1">can </span><a id="_idIndexMarker834"/><span class="koboSpan" id="kobo.147.1">assist</span><a id="_idIndexMarker835"/><span class="koboSpan" id="kobo.148.1"> writers, journalists, and content creators by generating initial drafts, outlines, or summaries based on provided prompts </span><span class="No-Break"><span class="koboSpan" id="kobo.149.1">or ideas.</span></span></li><li><em class="italic"><span class="koboSpan" id="kobo.150.1">Storyteller</span></em><span class="koboSpan" id="kobo.151.1">: They can help with ideation, story development, and creative writing tasks, offering suggestions and expanding </span><span class="No-Break"><span class="koboSpan" id="kobo.152.1">on concepts.</span></span></li><li><em class="italic"><span class="koboSpan" id="kobo.153.1">Content generator</span></em><span class="koboSpan" id="kobo.154.1">: Agents can also generate marketing copy, product descriptions, or social media content, helping businesses and creators save time </span><span class="No-Break"><span class="koboSpan" id="kobo.155.1">and effort.</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.156.1">Creative </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.157.1">design roles</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.158.1">:</span></span><ul><li><em class="italic"><span class="koboSpan" id="kobo.159.1">Designer</span></em><span class="koboSpan" id="kobo.160.1">: Agents can serve as creative collaborators, generating design ideas, artwork, logos, and visual concepts based on provided prompts </span><span class="No-Break"><span class="koboSpan" id="kobo.161.1">or specifications.</span></span></li><li><em class="italic"><span class="koboSpan" id="kobo.162.1">Artist</span></em><span class="koboSpan" id="kobo.163.1">: They can offer inspiration and fresh perspectives, helping designers explore new directions and overcome </span><span class="No-Break"><span class="koboSpan" id="kobo.164.1">creative blocks.</span></span></li><li><em class="italic"><span class="koboSpan" id="kobo.165.1">Creative collaborator</span></em><span class="koboSpan" id="kobo.166.1">: Agents can also assist in the iterative design process, generating variations and refinements based on feedback and direction from </span><span class="No-Break"><span class="koboSpan" id="kobo.167.1">human designers.</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.168.1">Gaming and </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.169.1">entertainment roles</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.170.1">:</span></span><ul><li><em class="italic"><span class="koboSpan" id="kobo.171.1">Game character</span></em><span class="koboSpan" id="kobo.172.1">: In gaming, agents can play the role of </span><strong class="bold"><span class="koboSpan" id="kobo.173.1">non-player characters</span></strong><span class="koboSpan" id="kobo.174.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.175.1">NPCs</span></strong><span class="koboSpan" id="kobo.176.1">), providing</span><a id="_idIndexMarker836"/><span class="koboSpan" id="kobo.177.1"> engaging interactions, dialogue, and storylines that adapt to player actions </span><span class="No-Break"><span class="koboSpan" id="kobo.178.1">and choices.</span></span></li><li><em class="italic"><span class="koboSpan" id="kobo.179.1">Interactive companion</span></em><span class="koboSpan" id="kobo.180.1">: As interactive companions, agents can engage in conversations, tell stories, provide entertainment, and even offer emotional support or</span><a id="_idIndexMarker837"/><span class="koboSpan" id="kobo.181.1"> companionship</span><a id="_idIndexMarker838"/><span class="koboSpan" id="kobo.182.1"> in </span><span class="No-Break"><span class="koboSpan" id="kobo.183.1">virtual </span></span><span class="No-Break"><a id="_idIndexMarker839"/></span><span class="No-Break"><span class="koboSpan" id="kobo.184.1">environments.</span></span></li></ul></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.185.1">Healthcare roles</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.186.1">:</span></span><ul><li><em class="italic"><span class="koboSpan" id="kobo.187.1">Medical assistant</span></em><span class="koboSpan" id="kobo.188.1">: Agents can act as medical assistants, providing patients with information about conditions, treatments, and healthy </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">lifestyle recommendations.</span></span></li><li><em class="italic"><span class="koboSpan" id="kobo.190.1">Patient educator</span></em><span class="koboSpan" id="kobo.191.1">: They can assist in patient education, explaining complex medical concepts in easy-to-understand language and addressing common concerns </span><span class="No-Break"><span class="koboSpan" id="kobo.192.1">or questions.</span></span></li><li><span class="koboSpan" id="kobo.193.1">Agents can also support healthcare professionals by summarizing patient records, generating medical reports, or assisting in research and data </span><span class="No-Break"><span class="koboSpan" id="kobo.194.1">analysis tasks.</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.195.1">Software </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.196.1">development roles</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.197.1">:</span></span><ul><li><em class="italic"><span class="koboSpan" id="kobo.198.1">Code assistant</span></em><span class="koboSpan" id="kobo.199.1">: GenAI agents can serve as code assistants, helping developers write and optimize code by generating code snippets, suggesting improvements, or explaining </span><span class="No-Break"><span class="koboSpan" id="kobo.200.1">programming concepts.</span></span></li><li><em class="italic"><span class="koboSpan" id="kobo.201.1">Documentation generator</span></em><span class="koboSpan" id="kobo.202.1">: They can assist in generating documentation, automatically creating descriptions and explanations for code segments, making it easier to maintain and collaborate </span><span class="No-Break"><span class="koboSpan" id="kobo.203.1">on projects.</span></span></li><li><span class="koboSpan" id="kobo.204.1">Agents can also help with code refactoring, identifying areas for optimization, and suggesting more efficient or secure </span><span class="No-Break"><span class="koboSpan" id="kobo.205.1">coding practices.</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.206.1">Research and </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.207.1">analysis roles</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.208.1">:</span></span><ul><li><em class="italic"><span class="koboSpan" id="kobo.209.1">Research assistant</span></em><span class="koboSpan" id="kobo.210.1">: Agents can act as research assistants, gathering and synthesizing information from various sources, generating summaries, and identifying key insights </span><span class="No-Break"><span class="koboSpan" id="kobo.211.1">or trends.</span></span></li><li><em class="italic"><span class="koboSpan" id="kobo.212.1">Data analyst/data engineer</span></em><span class="koboSpan" id="kobo.213.1">: They can assist in data analysis tasks, such as exploring</span><a id="_idIndexMarker840"/><span class="koboSpan" id="kobo.214.1"> datasets, identifying</span><a id="_idIndexMarker841"/><span class="koboSpan" id="kobo.215.1"> patterns, and </span><a id="_idIndexMarker842"/><span class="koboSpan" id="kobo.216.1">generating visualizations </span><span class="No-Break"><span class="koboSpan" id="kobo.217.1">or reports.</span></span></li><li><em class="italic"><span class="koboSpan" id="kobo.218.1">ML engineer/data scientist</span></em><span class="koboSpan" id="kobo.219.1">: Agents can also support researchers by generating hypotheses, suggesting experimental designs, or offering ideas for further exploration based on existing knowledge </span><span class="No-Break"><span class="koboSpan" id="kobo.220.1">and data.</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.221.1">Language </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.222.1">learning roles</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.223.1">:</span></span><ul><li><em class="italic"><span class="koboSpan" id="kobo.224.1">Conversational partner</span></em><span class="koboSpan" id="kobo.225.1">: GenAI agents can serve as conversational partners, allowing language learners to practice speaking and comprehension in a safe and </span><span class="No-Break"><span class="koboSpan" id="kobo.226.1">encouraging environment.</span></span></li><li><em class="italic"><span class="koboSpan" id="kobo.227.1">Language tutors</span></em><span class="koboSpan" id="kobo.228.1">: As language tutors, agents can provide feedback on pronunciation, grammar, and vocabulary, tailoring lessons and exercises to individual learners’ needs </span><span class="No-Break"><span class="koboSpan" id="kobo.229.1">and progress.</span></span></li><li><span class="koboSpan" id="kobo.230.1">They can also generate engaging language learning materials, such as dialogues, stories, or exercises, adapting the content and difficulty level based on the </span><span class="No-Break"><span class="koboSpan" id="kobo.231.1">learner’s proficiency.</span></span></li></ul></li>
</ul>
<p><span class="koboSpan" id="kobo.232.1">In all these cases, the agent’s role is to augment human capabilities, provide personalized </span><a id="_idIndexMarker843"/><span class="koboSpan" id="kobo.233.1">assistance, and</span><a id="_idIndexMarker844"/><span class="koboSpan" id="kobo.234.1"> enhance</span><a id="_idIndexMarker845"/><span class="koboSpan" id="kobo.235.1"> efficiency and productivity in </span><span class="No-Break"><span class="koboSpan" id="kobo.236.1">various domains.</span></span></p>
<p><span class="koboSpan" id="kobo.237.1">Now, let us take a step further to explore Agents and their utility functionality in the context of </span><span class="No-Break"><span class="koboSpan" id="kobo.238.1">Amazon Bedrock.</span></span></p>
<h1 id="_idParaDest-186"><a id="_idTextAnchor199"/><span class="koboSpan" id="kobo.239.1">Amazon Bedrock integration with LangChain Agents</span></h1>
<p><span class="koboSpan" id="kobo.240.1">LangChain, a</span><a id="_idIndexMarker846"/><span class="koboSpan" id="kobo.241.1"> powerful framework for </span><a id="_idIndexMarker847"/><span class="koboSpan" id="kobo.242.1">developing applications with LLMs, provides a robust and flexible agent system that enables developers to build sophisticated agents capable of tackling a wide range </span><span class="No-Break"><span class="koboSpan" id="kobo.243.1">of challenges.</span></span></p>
<p><span class="koboSpan" id="kobo.244.1">An agent in LangChain is a high-level abstraction that combines an LLM, a set of tools, and other components in order to coordinate the execution of actions. </span><span class="koboSpan" id="kobo.244.2">The agent leverages the </span><a id="_idIndexMarker848"/><span class="koboSpan" id="kobo.245.1">LLM’s </span><strong class="bold"><span class="koboSpan" id="kobo.246.1">natural language understanding</span></strong><span class="koboSpan" id="kobo.247.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.248.1">NLU</span></strong><span class="koboSpan" id="kobo.249.1">) capabilities to interpret user inputs, determine the appropriate actions to take, and orchestrate the utilization of available tools to accomplish the </span><span class="No-Break"><span class="koboSpan" id="kobo.250.1">desired task.</span></span></p>
<p><span class="koboSpan" id="kobo.251.1">The core components of a LangChain agent include </span><span class="No-Break"><span class="koboSpan" id="kobo.252.1">the following:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.253.1">Tools</span></strong><span class="koboSpan" id="kobo.254.1">: Tools are individual components that perform specific tasks, such as retrieving information from external sources or processing data. </span><span class="koboSpan" id="kobo.254.2">Agents use tools to interact with third-party applications and accomplish tasks. </span><span class="koboSpan" id="kobo.254.3">The following are examples of </span><span class="No-Break"><span class="koboSpan" id="kobo.255.1">tools used:</span></span><ul><li><strong class="source-inline"><span class="koboSpan" id="kobo.256.1">WebSearchTool</span></strong><span class="koboSpan" id="kobo.257.1">: Performs web searches using a search engine such </span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">as Google.</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.259.1">WikipediaSearchTool</span></strong><span class="koboSpan" id="kobo.260.1">: Searches and retrieves information </span><span class="No-Break"><span class="koboSpan" id="kobo.261.1">from </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.262.1">Wikipedia</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.263.1">.</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.264.1">PythonCallbackTool</span></strong><span class="koboSpan" id="kobo.265.1">: Executes Python functions </span><span class="No-Break"><span class="koboSpan" id="kobo.266.1">as tools.</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.267.1">CSVTool</span></strong><span class="koboSpan" id="kobo.268.1">: Interacts with CSV files, allowing operations such as reading, writing, and </span><span class="No-Break"><span class="koboSpan" id="kobo.269.1">querying data.</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.270.1">LLM</span></strong><span class="koboSpan" id="kobo.271.1">: The LLM serves as the reasoning engine behind the agent. </span><span class="koboSpan" id="kobo.271.2">It is responsible for understanding the user’s intent, determining the appropriate actions to take, and interpreting the results of </span><span class="No-Break"><span class="koboSpan" id="kobo.272.1">tool executions.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.273.1">Toolkits</span></strong><span class="koboSpan" id="kobo.274.1">: Toolkits </span><a id="_idIndexMarker849"/><span class="koboSpan" id="kobo.275.1">are collections </span><a id="_idIndexMarker850"/><span class="koboSpan" id="kobo.276.1">of related tools designed to work together and provide a comprehensive set of functionalities for specific objectives, such as interacting with GitHub repositories or querying tabular data. </span><span class="koboSpan" id="kobo.276.2">For example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.277.1">SQLDatabaseToolkit</span></strong><span class="koboSpan" id="kobo.278.1"> contains tools for interacting with SQL databases, including querying, creating tables, and </span><span class="No-Break"><span class="koboSpan" id="kobo.279.1">inserting data.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.280.1">Memory</span></strong><span class="koboSpan" id="kobo.281.1">: Memory allows agents to persist state and context between calls, enabling them to maintain a conversation history and provide more relevant and accurate responses over time. </span><span class="koboSpan" id="kobo.281.2">For example,  </span><strong class="source-inline"><span class="koboSpan" id="kobo.282.1">ConversationBufferMemory</span></strong><span class="koboSpan" id="kobo.283.1"> stores the conversation history, allowing the agent to refer to previous inputs and outputs during </span><span class="No-Break"><span class="koboSpan" id="kobo.284.1">the conversation.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.285.1">LangChain provides a diverse set of built-in tools and agent classes to cater to various use cases. </span><span class="koboSpan" id="kobo.285.2">Some of the available tools include </span><span class="No-Break"><span class="koboSpan" id="kobo.286.1">the following:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.287.1">serpapi</span></strong><span class="koboSpan" id="kobo.288.1">: A search engine tool for querying web </span><span class="No-Break"><span class="koboSpan" id="kobo.289.1">search results</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.290.1">google-search</span></strong><span class="koboSpan" id="kobo.291.1">: A wrapper around Google Search for conducting </span><span class="No-Break"><span class="koboSpan" id="kobo.292.1">web searches</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.293.1">llm-math</span></strong><span class="koboSpan" id="kobo.294.1">: A tool for answering math-related questions using </span><span class="No-Break"><span class="koboSpan" id="kobo.295.1">an LLM</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.296.1">open-meteo-api</span></strong><span class="koboSpan" id="kobo.297.1">: A tool for retrieving weather information from the </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">Open-Meteo API</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.299.1">news-api</span></strong><span class="koboSpan" id="kobo.300.1">: A tool for fetching information about current </span><span class="No-Break"><span class="koboSpan" id="kobo.301.1">news headlines</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.302.1">tmdb-api</span></strong><span class="koboSpan" id="kobo.303.1">: A tool for querying information</span><a id="_idIndexMarker851"/><span class="koboSpan" id="kobo.304.1"> from </span><strong class="bold"><span class="koboSpan" id="kobo.305.1">The Movie </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.306.1">Database</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.307.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.308.1">TMDB</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.309.1">)</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.310.1">wolfram-alpha</span></strong><span class="koboSpan" id="kobo.311.1">: A tool for querying the Wolfram|Alpha computational </span><span class="No-Break"><span class="koboSpan" id="kobo.312.1">knowledge engine</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.313.1">requests</span></strong><span class="koboSpan" id="kobo.314.1">: A tool for fetching content from </span><span class="No-Break"><span class="koboSpan" id="kobo.315.1">specific URLs</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.316.1">terminal</span></strong><span class="koboSpan" id="kobo.317.1">: A tool for executing </span><span class="No-Break"><span class="koboSpan" id="kobo.318.1">terminal commands</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.319.1">pal-math</span></strong><span class="koboSpan" id="kobo.320.1">: A language model specialized in solving complex word </span><span class="No-Break"><span class="koboSpan" id="kobo.321.1">math problems</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.322.1">pal-colored-objects</span></strong><span class="koboSpan" id="kobo.323.1">: A language model for reasoning about positions and color attributes </span><span class="No-Break"><span class="koboSpan" id="kobo.324.1">of objects</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.325.1">As for agent </span><a id="_idIndexMarker852"/><span class="koboSpan" id="kobo.326.1">classes, LangChain</span><a id="_idIndexMarker853"/><span class="koboSpan" id="kobo.327.1"> provides several options, each with its own strategy for action selection and problem-solving. </span><span class="koboSpan" id="kobo.327.2">Some examples include </span><span class="No-Break"><span class="koboSpan" id="kobo.328.1">the following:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.329.1">zero-shot-react-description</span></strong><span class="koboSpan" id="kobo.330.1">: An agent that relies on the LLM’s zero-shot capabilities to select actions based on the </span><span class="No-Break"><span class="koboSpan" id="kobo.331.1">tool descriptions</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.332.1">conversational-react-description</span></strong><span class="koboSpan" id="kobo.333.1">: An agent that engages in a conversational approach, asking for clarification when needed, and selecting actions based on the </span><span class="No-Break"><span class="koboSpan" id="kobo.334.1">tool descriptions</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.335.1">react-docstore</span></strong><span class="koboSpan" id="kobo.336.1">: An agent that leverages a document store to retrieve relevant information and select actions based on the </span><span class="No-Break"><span class="koboSpan" id="kobo.337.1">tool descriptions</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.338.1">Details on each of the aforementioned tools and agent classes are highlighted </span><span class="No-Break"><span class="koboSpan" id="kobo.339.1">here: </span></span><a href="https://api.python.langchain.com/en/latest/_modules/langchain/agents/agent_types.html"><span class="No-Break"><span class="koboSpan" id="kobo.340.1">https://api.python.langchain.com/en/latest/_modules/langchain/agents/agent_types.html</span></span></a></p>
<p><span class="koboSpan" id="kobo.341.1">Now that we have an understanding of LangChain Agents, let us dive into the integration of LangChain Agents with Amazon Bedrock, exemplified through a practical use case. </span><span class="koboSpan" id="kobo.341.2">We will import Bedrock via the LangChain package and leverage two LangChain tools, namely </span><strong class="source-inline"><span class="koboSpan" id="kobo.342.1">YoutubeSearchTool</span></strong><span class="koboSpan" id="kobo.343.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.344.1">WikipediaTool</span></strong><span class="koboSpan" id="kobo.345.1">, enabling the LangChain Agent to leverage their capabilities. </span><span class="koboSpan" id="kobo.345.2">Additionally, we will be utilizing the Anthropic </span><a id="_idIndexMarker854"/><span class="koboSpan" id="kobo.346.1">Claude </span><a id="_idIndexMarker855"/><span class="koboSpan" id="kobo.347.1">model through Bedrock in this </span><span class="No-Break"><span class="koboSpan" id="kobo.348.1">straightforward application.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.349.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.350.1">Ensure you have the correct permissions to invoke Amazon Bedrock, as explained in the earlier chapters. </span><span class="koboSpan" id="kobo.350.2">Further, please ensure that the latest version of LangChain packages and libraries are installed as per the code. </span><span class="koboSpan" id="kobo.350.3">In case the packages are not installed, run the following command in your Jupyter notebook (note that </span><strong class="source-inline"><span class="koboSpan" id="kobo.351.1">! </span><span class="koboSpan" id="kobo.351.2">Or %</span></strong><span class="koboSpan" id="kobo.352.1"> will not be needed if you’re running Python code from a </span><span class="No-Break"><span class="koboSpan" id="kobo.353.1">Python terminal):</span></span></p>
<p class="callout"><strong class="source-inline"><span class="koboSpan" id="kobo.354.1">%pip </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.355.1">install &lt;library_name&gt;</span></strong></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.356.1">
# Install the respective packages for YoutubeSearchTool and Wikipedia Tool in your Jupyter Notebook
%pip install --upgrade --quiet wikipedia youtube_search langchain
#Install LangChain modules
%pip install -U langchain-community
%pip install -U langchain-aws langchainhub
# Import langchain libaries for Tools, Agents and Amazon Bedrock
from langchain.agents import AgentType
from langchain.agents import initialize_agent, Tool
from langchain_aws import BedrockLLM
from langchain.chains.conversation.memory import ConversationBufferWindowMemory
from langchain.agents import AgentExecutor, create_react_agent
from langchain import hub
# Import respective packages for Wikipedia and Youtube tools
from langchain_community.tools import YouTubeSearchTool
from langchain_community.utilities import WikipediaAPIWrapper
# Using anthropic model with langchain
llm = BedrockLLM(model_id="anthropic.claude-v2")
# Define Tools below
wikipedia_wrapper = WikipediaAPIWrapper()
# Wikipedia Tool
wikipedia_tool = Tool(
        name="Wikipedia",
        func=wikipedia_wrapper.run,
        description="Useful tool for finding information on the Internet related to world events, issues, etc. </span><span class="koboSpan" id="kobo.356.2">Worth using for general topics. </span><span class="koboSpan" id="kobo.356.3">Use precise questions.",)
youtube_wrapper = YouTubeSearchTool()
#Youtube Tool
youtube_tool = Tool(name= "Youtube", func = youtube_wrapper.run, description = "Useful tool for searching youtube videos on and sharing the youtube links to the user. </span><span class="koboSpan" id="kobo.356.4">Use precise questions.")
#Create a memory instance
conversational_memory = ConversationBufferMemory()
prompt = hub.pull("hwchase17/react")
memory = conversational_memory
model = llm
tools = [wikipedia_tool,youtube_tool]
# Create an agent
agent = create_react_agent(model, tools, prompt = prompt)
# Create an agent executor
agent_executor = AgentExecutor(agent=agent, tools=tools, verbose=True)
#Run the agent executor
response = agent_executor.invoke({"input": "Memristor?"})
print(response)</span></pre>
<p><span class="koboSpan" id="kobo.357.1">The generated output looks </span><span class="No-Break"><span class="koboSpan" id="kobo.358.1">like this:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.359.1">
{'input': 'Memristor?', 'output': 'A memristor is a non-linear two-terminal electrical component that relates electric charge and magnetic flux linkage. </span><span class="koboSpan" id="kobo.359.2">It was first theorized by Leon Chua in 1971 as the fourth fundamental circuit element alongside the resistor, capacitor and inductor. </span><span class="koboSpan" id="kobo.359.3">Unlike those components, memristors exhibit memory - their resistance depends on the history of current that has previously flowed through them. </span><span class="koboSpan" id="kobo.359.4">Memristors have applications in memory, computing, and neuromorphic/brain-inspired computing due to their ability to store and process information. </span><span class="koboSpan" id="kobo.359.5">They are an active area of research in nanoelectronics.'}</span></pre>
<p><span class="koboSpan" id="kobo.360.1">The output may look like what’s shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.361.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.362.1">.1</span></em><span class="koboSpan" id="kobo.363.1"> and </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.364.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.365.1">.2</span></em><span class="koboSpan" id="kobo.366.1">. </span><span class="koboSpan" id="kobo.366.2">You will notice the </span><a id="_idIndexMarker856"/><span class="koboSpan" id="kobo.367.1">agent </span><a id="_idIndexMarker857"/><span class="koboSpan" id="kobo.368.1">performing reasoning using question, thought, action, and chaining:  </span></p>
<div>
<div class="IMG---Figure" id="_idContainer148">
<span class="koboSpan" id="kobo.369.1"><img alt="Figure 10.1 – ﻿AgentExecutor chain output" src="image/B22045_10_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.370.1">Figure 10.1 – AgentExecutor chain output</span></p>
<div>
<div class="IMG---Figure" id="_idContainer149">
<span class="koboSpan" id="kobo.371.1"><img alt="Figure 10.2 – Generated chain using LangChain agents with Bedrock" src="image/B22045_10_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.372.1">Figure 10.2 – Generated chain using LangChain agents with Bedrock</span></p>
<p><span class="koboSpan" id="kobo.373.1">As shown in this section, when we are exploring technical topics such as memristors without any other context, the </span><em class="italic"><span class="koboSpan" id="kobo.374.1">Wikipedia</span></em><span class="koboSpan" id="kobo.375.1"> tool agent is invoked, providing comprehensive and detailed information, followed by the YouTube tool to provide additional information on the subject matter. </span><span class="koboSpan" id="kobo.375.2">In case the user writes </span><strong class="source-inline"><span class="koboSpan" id="kobo.376.1">Elon Musk video on Neuralink</span></strong><span class="koboSpan" id="kobo.377.1"> in the preceding conversation with the agent, the YouTube tool gets invoked and links are showcased to said user. </span><span class="koboSpan" id="kobo.377.2">Users are encouraged to try out different</span><a id="_idIndexMarker858"/><span class="koboSpan" id="kobo.378.1"> questions</span><a id="_idIndexMarker859"/><span class="koboSpan" id="kobo.379.1"> and test </span><span class="No-Break"><span class="koboSpan" id="kobo.380.1">the agent.</span></span></p>
<p><span class="koboSpan" id="kobo.381.1">Here is a sample output response for </span><strong class="source-inline"><span class="koboSpan" id="kobo.382.1">response = agent_executor.invoke({"input": "Elon Musk video </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.383.1">on Neuralink"})</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.384.1">:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.385.1">
&gt; Entering new AgentExecutor chain...
 </span><span class="koboSpan" id="kobo.385.2">Here is my process for answering your question about finding a video of Elon Musk discussing Neuralink:
Question: Elon Musk video on Neuralink
Thought: Elon Musk has given talks and interviews about Neuralink. </span><span class="koboSpan" id="kobo.385.3">YouTube would be a good place to search for videos of him discussing it.
</span><span class="koboSpan" id="kobo.385.4">Action: Youtube
Action Input: "elon musk neuralink"
['https://www.youtube.com/watch?v=tN1lVwTHCMw&amp;pp=ygUVZWxvbiBtdXNrIG5ldXJhbGluayIK', 'https://www.youtube.com/watch?v=k0I9Z-ARbjo&amp;pp=ygUVZWxvbiBtdXNrIG5ldXJhbGluayIK'] Here is my thought process for answering your question:
Question: Elon Musk video on Neuralink
Thought: Elon Musk has discussed Neuralink, his brain-machine interface company, in various interviews and presentations. </span><span class="koboSpan" id="kobo.385.5">YouTube would be a good place to search for videos of him talking about Neuralink.
</span><span class="koboSpan" id="kobo.385.6">Action: Youtube
Action Input: "elon musk neuralink"
['https://www.youtube.com/watch?v=tN1lVwTHCMw&amp;pp=ygUVZWxvbiBtdXNrIG5ldXJhbGluayIK', 'https://www.youtube.com/watch?v=k0I9Z-ARbjo&amp;pp=ygUVZWxvbiBtdXNrIG5ldXJhbGluayIK'] Here is my thought process and answer:
Question: Elon Musk video on Neuralink
Thought: Elon Musk has given presentations and interviews about Neuralink, the brain-computer interface company he founded. </span><span class="koboSpan" id="kobo.385.7">YouTube would be a good place to search for videos of him discussing Neuralink and its technology.
</span><span class="koboSpan" id="kobo.385.8">...
</span><span class="koboSpan" id="kobo.385.9">https://www.youtube.com/watch?v=tN1lVwTHCMw
https://www.youtube.com/watch?v=k0I9Z-ARbjo
&gt; Finished chain.</span></pre>
<p><span class="koboSpan" id="kobo.386.1">As demonstrated, utilizing these tools enables us to access in-depth knowledge on the subject matter. </span><span class="koboSpan" id="kobo.386.2">It’s worth noting that LangChain offers the capability to create custom tools as well, further expanding the capabilities of agents. </span><span class="koboSpan" id="kobo.386.3">This flexibility is highlighted in the documentation at </span><a href="https://python.langchain.com/docs/modules/agents/tools/custom_tools"><span class="koboSpan" id="kobo.387.1">https://python.langchain.com/docs/modules/agents/tools/custom_tools</span></a><span class="koboSpan" id="kobo.388.1">, where you can find guidance on crafting tailored tools to suit your </span><span class="No-Break"><span class="koboSpan" id="kobo.389.1">specific needs.</span></span></p>
<p><span class="koboSpan" id="kobo.390.1">As shown earlier, since we are searching for a technical topic for memristors, we get detailed information using the </span><em class="italic"><span class="koboSpan" id="kobo.391.1">Wikipedia</span></em><span class="koboSpan" id="kobo.392.1"> tool agent. </span><span class="koboSpan" id="kobo.392.2">You can create custom tools as well with agents, as shown </span><span class="No-Break"><span class="koboSpan" id="kobo.393.1">here: </span></span><a href="https://python.langchain.com/docs/modules/agents/tools/custom_tools"><span class="No-Break"><span class="koboSpan" id="kobo.394.1">https://python.langchain.com/docs/modules/agents/tools/custom_tools</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.395.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.396.1">You can check out how to build GenAI agents with Amazon Bedrock and LangChain, coupled with Amazon Kendra, Amazon DynamoDB, and Amazon Lex, on the following </span><span class="No-Break"><span class="koboSpan" id="kobo.397.1">blog: </span></span><a href="https://aws.amazon.com/blogs/machine-learning/build-generative-ai-agents-with-amazon-bedrock-amazon-dynamodb-amazon-kendra-amazon-lex-and-langchain/"><span class="No-Break"><span class="koboSpan" id="kobo.398.1">https://aws.amazon.com/blogs/machine-learning/build-generative-ai-agents-with-amazon-bedrock-amazon-dynamodb-amazon-kendra-amazon-lex-and-langchain/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.399.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.400.1">By effectively integrating Amazon Bedrock with LangChain Agents, organizations can unlock the full potential of LLMs, enabling the development of intelligent and context-aware applications that drive innovation, automate complex workflows, and deliver exceptional </span><a id="_idIndexMarker860"/><span class="No-Break"><span class="koboSpan" id="kobo.401.1">user </span></span><span class="No-Break"><a id="_idIndexMarker861"/></span><span class="No-Break"><span class="koboSpan" id="kobo.402.1">experiences.</span></span></p>
<p><span class="koboSpan" id="kobo.403.1">Now, let’s jump into building Amazon Bedrock Agents for leveraging an end-to-end </span><span class="No-Break"><span class="koboSpan" id="kobo.404.1">GenAI application.</span></span></p>
<h1 id="_idParaDest-187"><a id="_idTextAnchor200"/><span class="koboSpan" id="kobo.405.1">Agents for Amazon Bedrock</span></h1>
<p><span class="koboSpan" id="kobo.406.1">One of the </span><a id="_idIndexMarker862"/><span class="koboSpan" id="kobo.407.1">powerful capabilities offered by Amazon Bedrock is</span><a id="_idIndexMarker863"/><span class="koboSpan" id="kobo.408.1"> the ability to build and configure autonomous agents within your applications. </span><span class="koboSpan" id="kobo.408.2">These agents act as intelligent assistants, helping end users complete tasks based on organizational data and user input. </span><span class="koboSpan" id="kobo.408.3">Agents orchestrate interactions between FMs (LLMs), data sources, software applications, and user conversations. </span><span class="koboSpan" id="kobo.408.4">They can automatically call APIs to take actions and invoke knowledge bases to supplement information for these actions. </span><span class="koboSpan" id="kobo.408.5">By integrating agents, developers can save weeks of development effort and accelerate the delivery of </span><span class="No-Break"><span class="koboSpan" id="kobo.409.1">GenAI applications.</span></span></p>
<p><span class="koboSpan" id="kobo.410.1">Agents on Amazon Bedrock are designed to automate tasks for customers and provide intelligent responses to their questions. </span><span class="koboSpan" id="kobo.410.2">For example, you could create an agent that assists customers in processing insurance claims or making travel reservations. </span><span class="koboSpan" id="kobo.410.3">The beauty of agents is that you don’t have to worry about provisioning capacity, managing infrastructure, or writing custom code from scratch. </span><span class="koboSpan" id="kobo.410.4">Amazon Bedrock handles the complexities of prompt engineering, memory management, monitoring, encryption, user permissions, and </span><span class="No-Break"><span class="koboSpan" id="kobo.411.1">API invocation.</span></span></p>
<p><span class="koboSpan" id="kobo.412.1">Agents on Amazon Bedrock perform the following </span><span class="No-Break"><span class="koboSpan" id="kobo.413.1">key tasks:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.414.1">Extend FMs</span></strong><span class="koboSpan" id="kobo.415.1">: Agents leverage LLMs to understand user requests and break down complex tasks into smaller, </span><span class="No-Break"><span class="koboSpan" id="kobo.416.1">manageable steps.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.417.1">Collect additional information</span></strong><span class="koboSpan" id="kobo.418.1">: Through natural conversation, agents can gather additional information from users to fulfill their </span><span class="No-Break"><span class="koboSpan" id="kobo.419.1">requests effectively.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.420.1">Take actions</span></strong><span class="koboSpan" id="kobo.421.1">: Agents can make API calls to your company’s systems to perform actions and fulfill </span><span class="No-Break"><span class="koboSpan" id="kobo.422.1">customer requests.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.423.1">Augment performance and accuracy</span></strong><span class="koboSpan" id="kobo.424.1">: By querying data sources and knowledge bases, agents can enhance their performance and provide more </span><span class="No-Break"><span class="koboSpan" id="kobo.425.1">accurate responses.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.426.1">In order to harness</span><a id="_idIndexMarker864"/><span class="koboSpan" id="kobo.427.1"> the</span><a id="_idIndexMarker865"/><span class="koboSpan" id="kobo.428.1"> power of Agents for Amazon Bedrock, developers follow a </span><span class="No-Break"><span class="koboSpan" id="kobo.429.1">straightforward process:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.430.1">Create a knowledge base to store your organization’s private data, which can be used to enhance the agent’s performance and accuracy. </span><span class="koboSpan" id="kobo.430.2">This step is </span><em class="italic"><span class="koboSpan" id="kobo.431.1">optional </span></em><span class="koboSpan" id="kobo.432.1">because not all agents require access to private organizational data to carry out their assigned objectives. </span><span class="koboSpan" id="kobo.432.2">If the agent’s tasks and objectives do not depend on or benefit significantly from access to such data, creating a knowledge base may not be necessary. </span><span class="koboSpan" id="kobo.432.3">It depends on the specific use case and requirements of the agent </span><span class="No-Break"><span class="koboSpan" id="kobo.433.1">being developed.</span></span></li>
<li><span class="koboSpan" id="kobo.434.1">Configure an agent for your specific use case, defining the actions it can perform. </span><span class="koboSpan" id="kobo.434.2">Lambda functions, written in your preferred programming language, dictate how the agent handles these actions. </span><span class="koboSpan" id="kobo.434.3">This is an optional step as an agent doesn’t necessarily require an action group to </span><span class="No-Break"><span class="koboSpan" id="kobo.435.1">be created.</span></span></li>
<li><span class="koboSpan" id="kobo.436.1">Associate the agent with a knowledge base to augment its </span><span class="No-Break"><span class="koboSpan" id="kobo.437.1">capabilities further.</span></span></li>
<li><span class="koboSpan" id="kobo.438.1">Customize the agent’s behavior by modifying prompt templates for preprocessing, orchestration, knowledge-base response generation, and postprocessing steps. </span><span class="koboSpan" id="kobo.438.2">Note that </span><em class="italic"><span class="koboSpan" id="kobo.439.1">not</span></em><span class="koboSpan" id="kobo.440.1"> all agents require extensive modification of prompt templates for their goal. </span><span class="koboSpan" id="kobo.440.2">The need for customization depends on the complexity of the tasks the agent is expected to perform and the level of control and fine-tuning desired by developers. </span><span class="koboSpan" id="kobo.440.3">For simpler tasks or generic use cases, the default prompt templates may suffice, making extensive </span><span class="No-Break"><span class="koboSpan" id="kobo.441.1">customization unnecessary.</span></span></li>
<li><span class="koboSpan" id="kobo.442.1">Test the agent using the Amazon Bedrock console or API calls, modifying configurations as necessary. </span><span class="koboSpan" id="kobo.442.2">Utilize traces to gain insights into the agent’s reasoning process at each step of </span><span class="No-Break"><span class="koboSpan" id="kobo.443.1">its orchestration.</span></span></li>
<li><span class="koboSpan" id="kobo.444.1">When the agent is ready for deployment, create an alias that points to a specific version of </span><span class="No-Break"><span class="koboSpan" id="kobo.445.1">the agent.</span></span></li>
<li><span class="koboSpan" id="kobo.446.1">Integrate your application with the agent alias, enabling seamless API calls </span><span class="No-Break"><span class="koboSpan" id="kobo.447.1">and interactions.</span></span></li>
<li><span class="koboSpan" id="kobo.448.1">Iterate on the agent as needed, creating new versions and aliases to adapt to </span><span class="No-Break"><span class="koboSpan" id="kobo.449.1">changing requirements.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.450.1">Throughout the development process, Amazon Bedrock handles the complexities of prompt </span><a id="_idIndexMarker866"/><span class="koboSpan" id="kobo.451.1">engineering, memory </span><a id="_idIndexMarker867"/><span class="koboSpan" id="kobo.452.1">management, monitoring, encryption, user permissions, and API invocation, allowing you to focus on building intelligent agents tailored to your specific </span><span class="No-Break"><span class="koboSpan" id="kobo.453.1">use cases.</span></span></p>
<h2 id="_idParaDest-188"><a id="_idTextAnchor201"/><span class="koboSpan" id="kobo.454.1">Unveiling the inner workings of GenAI agents with Amazon Bedrock</span></h2>
<p><span class="koboSpan" id="kobo.455.1">When delving into</span><a id="_idIndexMarker868"/><span class="koboSpan" id="kobo.456.1"> the realm of Amazon Bedrock, one encounters a powerful toolset designed to facilitate the creation and management of intelligent agents. </span><span class="koboSpan" id="kobo.456.2">This toolset is composed of two distinct categories of API operations, each serving a specific purpose in the agent’s </span><span class="No-Break"><span class="koboSpan" id="kobo.457.1">life cycle:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.458.1">The first category, aptly termed </span><em class="italic"><span class="koboSpan" id="kobo.459.1">build-time API operations</span></em><span class="koboSpan" id="kobo.460.1">, enables developers to construct, configure, and oversee their agents and their associated resources. </span><span class="koboSpan" id="kobo.460.2">These operations act as the foundational building blocks, enabling the creation of agents tailored to specific requirements and objectives. </span><span class="koboSpan" id="kobo.460.3">Through these APIs, developers can fine-tune various aspects of their agents, ensuring they are equipped with the necessary capabilities to tackle the tasks at hand. </span><span class="koboSpan" id="kobo.460.4">More details on build-time API operations are listed </span><span class="No-Break"><span class="koboSpan" id="kobo.461.1">here: </span></span><a href="https://docs.aws.amazon.com/bedrock/latest/APIReference/API_Operations_Agents_for_Amazon_Bedrock.html"><span class="No-Break"><span class="koboSpan" id="kobo.462.1">https://docs.aws.amazon.com/bedrock/latest/APIReference/API_Operations_Agents_for_Amazon_Bedrock.html</span></span></a></li>
<li><span class="koboSpan" id="kobo.463.1">The second category, </span><em class="italic"><span class="koboSpan" id="kobo.464.1">runtime API operations</span></em><span class="koboSpan" id="kobo.465.1">, breathes life into agents, allowing them to interact with user input and initiate an intricate orchestration process to accomplish their designated tasks. </span><span class="koboSpan" id="kobo.465.2">When a user provides input, these APIs enable the agent to process and interpret the information, triggering a sequence of actions that ultimately lead to the </span><span class="No-Break"><span class="koboSpan" id="kobo.466.1">desired outcome.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.467.1">Now, let us dive into build-time and </span><span class="No-Break"><span class="koboSpan" id="kobo.468.1">runtime configurations.</span></span></p>
<h3><span class="koboSpan" id="kobo.469.1">Build-time configuration</span></h3>
<p><span class="koboSpan" id="kobo.470.1">During the build phase, an </span><a id="_idIndexMarker869"/><span class="koboSpan" id="kobo.471.1">agent is assembled from the following </span><span class="No-Break"><span class="koboSpan" id="kobo.472.1">key components:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.473.1">FM</span></strong><span class="koboSpan" id="kobo.474.1">: You select a pre-trained language model that the agent employs to interpret user input, generate responses, and guide its </span><span class="No-Break"><span class="koboSpan" id="kobo.475.1">decision-making process.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.476.1">Instructional prompts</span></strong><span class="koboSpan" id="kobo.477.1">: You craft instructions that delineate the agent’s purpose and desired behavior. </span><span class="koboSpan" id="kobo.477.2">With advanced prompting techniques, you can dynamically tailor these instructions at each stage of the agent’s workflow and incorporate custom logic through </span><span class="No-Break"><span class="koboSpan" id="kobo.478.1">serverless functions.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.479.1">Action groups</span></strong><span class="koboSpan" id="kobo.480.1">: You define actions the agent can perform by providing </span><span class="No-Break"><span class="koboSpan" id="kobo.481.1">the following:</span></span><ul><li><span class="koboSpan" id="kobo.482.1">An OpenAPI schema specification that outlines the operations the agent </span><span class="No-Break"><span class="koboSpan" id="kobo.483.1">can invoke.</span></span></li><li><span class="koboSpan" id="kobo.484.1">A serverless function that executes the specified API operation based on the agent’s input and returns </span><span class="No-Break"><span class="koboSpan" id="kobo.485.1">the result.</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.486.1">Knowledge bases</span></strong><span class="koboSpan" id="kobo.487.1">: You can associate knowledge bases with the agent, allowing it to retrieve relevant context to enhance its response generation and </span><span class="No-Break"><span class="koboSpan" id="kobo.488.1">decision-making capabilities.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.489.1">Prompt templates</span></strong><span class="koboSpan" id="kobo.490.1">: The orchestrator exposes default prompt templates used during various stages of the agent’s life cycle, such as preprocessing input, orchestrating actions, querying knowledge bases, and postprocessing outputs. </span><span class="koboSpan" id="kobo.490.2">You can customize these templates to modify the agent’s behavior or disable specific stages </span><span class="No-Break"><span class="koboSpan" id="kobo.491.1">as needed.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.492.1">During the build </span><a id="_idIndexMarker870"/><span class="koboSpan" id="kobo.493.1">process, these components are combined to create base prompts that guide the agent’s orchestration flow until the user’s request is fulfilled. </span><span class="koboSpan" id="kobo.493.2">With advanced prompting techniques, you can augment these base prompts with additional logic, examples, and metadata to improve the agent’s accuracy and performance at each stage of its invocation. </span><span class="koboSpan" id="kobo.493.3">After configuring the agent’s components and security settings, you can prepare the agent for deployment and testing in a runtime environment, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.494.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.495.1">.3</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.496.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer150">
<span class="koboSpan" id="kobo.497.1"><img alt="Figure 10.3 – Build-time API operations for Agent creation" src="image/B22045_10_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.498.1">Figure 10.3 – Build-time API operations for Agent creation</span></p>
<h3><span class="koboSpan" id="kobo.499.1">Runtime process</span></h3>
<p><span class="koboSpan" id="kobo.500.1">At the hear</span><a id="_idIndexMarker871"/><span class="koboSpan" id="kobo.501.1">t of this runtime process lies the </span><strong class="source-inline"><span class="koboSpan" id="kobo.502.1">InvokeAgent</span></strong><span class="koboSpan" id="kobo.503.1"> API operation, a powerful conductor that sets the agent sequence in motion. </span><span class="koboSpan" id="kobo.503.2">The agent’s performance unfolds in three harmonious acts: preprocessing, orchestration, </span><span class="No-Break"><span class="koboSpan" id="kobo.504.1">and postprocessing.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.505.1">Act I – </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.506.1">Preprocessing</span></strong></span></p>
<p><span class="koboSpan" id="kobo.507.1">Before the curtains rise, the preprocessing phase meticulously manages how the agent contextualizes and categorizes user input. </span><span class="koboSpan" id="kobo.507.2">This crucial step can also validate the input, ensuring a seamless transition to the </span><span class="No-Break"><span class="koboSpan" id="kobo.508.1">subsequent stages.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.509.1">Act II – Orchestration – the </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.510.1">grand performance</span></strong></span></p>
<p><span class="koboSpan" id="kobo.511.1">The orchestration phase is where the true magic unfolds, a symphonic interplay of interpretation, invocation, and knowledge synthesis. </span><span class="koboSpan" id="kobo.511.2">This act consists of the </span><span class="No-Break"><span class="koboSpan" id="kobo.512.1">following movements:</span></span></p>
<ol>
<li><strong class="bold"><span class="koboSpan" id="kobo.513.1">Interpretation</span></strong><span class="koboSpan" id="kobo.514.1">: The agent deftly interprets the user input with an FM, generating a rationale that lays out the logical path for the </span><span class="No-Break"><span class="koboSpan" id="kobo.515.1">next steps.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.516.1">Invocation and synthesis</span></strong><span class="koboSpan" id="kobo.517.1">: Like a skilled conductor, the agent invokes action groups and queries knowledge bases, retrieving additional context and summarizing the data to augment its </span><span class="No-Break"><span class="koboSpan" id="kobo.518.1">generation capabilities.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.519.1">Observation and augmentation</span></strong><span class="koboSpan" id="kobo.520.1">: From the invoked action groups and summarized knowledge-base results, the agent generates an output, known as an </span><strong class="bold"><span class="koboSpan" id="kobo.521.1">observation</span></strong><span class="koboSpan" id="kobo.522.1">. </span><span class="koboSpan" id="kobo.522.2">This observation is then used to enrich the base prompt, which is subsequently interpreted by the FM. </span><span class="koboSpan" id="kobo.522.3">The agent then determines if further orchestration iterations </span><span class="No-Break"><span class="koboSpan" id="kobo.523.1">are necessary.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.524.1">This iterative loop continues until the agent delivers its final response to the user or requires additional information from </span><span class="No-Break"><span class="koboSpan" id="kobo.525.1">the user.</span></span></p>
<p><span class="koboSpan" id="kobo.526.1">Throughout the orchestration phase, the base prompt template is augmented with agent instructions, action groups, and knowledge bases, creating a rich tapestry of information. </span><span class="koboSpan" id="kobo.526.2">This enhanced base prompt is then fed into the FM, which predicts the optimal trajectory to fulfill the user’s request. </span><span class="koboSpan" id="kobo.526.3">At each iteration, the FM selects the appropriate API </span><a id="_idIndexMarker872"/><span class="koboSpan" id="kobo.527.1">operation or knowledge-base query, resulting in a responsive and contextually </span><span class="No-Break"><span class="koboSpan" id="kobo.528.1">accurate output.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.529.1">Act III – Postprocessing – </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.530.1">the finale</span></strong></span></p>
<p><span class="koboSpan" id="kobo.531.1">In the final act, the postprocessing phase, the agent formats the culmination of its efforts – the final response to be returned to the user. </span><span class="koboSpan" id="kobo.531.2">However, this step can be gracefully bypassed, leaving the performance open </span><span class="No-Break"><span class="koboSpan" id="kobo.532.1">to interpretation.</span></span></p>
<p><span class="koboSpan" id="kobo.533.1">During the agent’s performance, users have the option to invoke a trace at runtime, unlocking a window into the agent’s thought process. </span><span class="koboSpan" id="kobo.533.2">This trace meticulously tracks the agent’s rationale, actions, queries, and observations at each step of the sequence. </span><span class="koboSpan" id="kobo.533.3">It includes the full prompts sent to the FM, as well as outputs from the model, API responses, and knowledge-base queries. </span><span class="koboSpan" id="kobo.533.4">By examining this trace, users can gain invaluable insights into the agent’s reasoning, paving the way for continuous improvement </span><span class="No-Break"><span class="koboSpan" id="kobo.534.1">and refinement.</span></span></p>
<p><span class="koboSpan" id="kobo.535.1">As the user’s session with the agent continues through successive </span><strong class="source-inline"><span class="koboSpan" id="kobo.536.1">InvokeAgent</span></strong><span class="koboSpan" id="kobo.537.1"> requests, the conversation history is diligently preserved, continually augmenting the orchestration base prompt template with context. </span><span class="koboSpan" id="kobo.537.2">This enrichment process aids in enhancing the agent’s accuracy and performance, forging a symbiotic relationship between the user and </span><span class="No-Break"><span class="koboSpan" id="kobo.538.1">the AI.</span></span></p>
<p><span class="koboSpan" id="kobo.539.1">The agent’s process during runtime is a captivating interplay of interpretation, synthesis, and adaptation, as </span><a id="_idIndexMarker873"/><span class="koboSpan" id="kobo.540.1">showcased in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.541.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.542.1">.4</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.543.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer151">
<span class="koboSpan" id="kobo.544.1"><img alt="Figure 10.4 – Runtime process flow for Agent workflow" src="image/B22045_10_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.545.1">Figure 10.4 – Runtime process flow for Agent workflow</span></p>
<h2 id="_idParaDest-189"><a id="_idTextAnchor202"/><span class="koboSpan" id="kobo.546.1">Advancing reasoning capabilities with GenAI – a primer on ReAct</span></h2>
<p><span class="koboSpan" id="kobo.547.1">GenAI models have</span><a id="_idIndexMarker874"/><span class="koboSpan" id="kobo.548.1"> demonstrated splendid capabilities in processing and generating human-like text, but their ability to reason through complex tasks and provide step-by-step solutions remains a challenge. </span><span class="koboSpan" id="kobo.548.2">Yao et. </span><span class="koboSpan" id="kobo.548.3">al have developed a technique called ReAct, as articulated in the paper </span><em class="italic"><span class="koboSpan" id="kobo.549.1">ReAct: Synergizing Reasoning and Acting in Language Models</span></em><span class="koboSpan" id="kobo.550.1"> (</span><a href="https://arxiv.org/abs/2210.03629"><span class="koboSpan" id="kobo.551.1">https://arxiv.org/abs/2210.03629</span></a><span class="koboSpan" id="kobo.552.1">), to enhance the reasoning abilities of these models, enabling them to systematically approach and solve </span><span class="No-Break"><span class="koboSpan" id="kobo.553.1">user-requested tasks.</span></span></p>
<p><span class="koboSpan" id="kobo.554.1">The ReAct technique involves structuring prompts that guide the model through a sequence of reasoning steps and corresponding actions. </span><span class="koboSpan" id="kobo.554.2">These prompts consist of a series of </span><em class="italic"><span class="koboSpan" id="kobo.555.1">question-thought-action-observation</span></em><span class="koboSpan" id="kobo.556.1"> examples, where the </span><span class="No-Break"><span class="koboSpan" id="kobo.557.1">following applies:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.558.1">The </span><em class="italic"><span class="koboSpan" id="kobo.559.1">question</span></em><span class="koboSpan" id="kobo.560.1"> represents the user-requested task or problem to </span><span class="No-Break"><span class="koboSpan" id="kobo.561.1">be solved</span></span></li>
<li><span class="koboSpan" id="kobo.562.1">The </span><em class="italic"><span class="koboSpan" id="kobo.563.1">thought</span></em><span class="koboSpan" id="kobo.564.1"> is a reasoning step that demonstrates how to approach the problem and identify a </span><span class="No-Break"><span class="koboSpan" id="kobo.565.1">potential action</span></span></li>
<li><span class="koboSpan" id="kobo.566.1">The </span><em class="italic"><span class="koboSpan" id="kobo.567.1">action</span></em><span class="koboSpan" id="kobo.568.1"> is an API call or function that the model can invoke from a predefined set of </span><span class="No-Break"><span class="koboSpan" id="kobo.569.1">allowed operations</span></span></li>
<li><span class="koboSpan" id="kobo.570.1">The </span><em class="italic"><span class="koboSpan" id="kobo.571.1">observation</span></em><span class="koboSpan" id="kobo.572.1"> is the result or output obtained from executing the </span><span class="No-Break"><span class="koboSpan" id="kobo.573.1">chosen action</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.574.1">The set of allowed actions is defined by instructions prepended to the example prompt text. </span><span class="koboSpan" id="kobo.574.2">This structured approach encourages the model to engage in a step-by-step reasoning process, breaking down complex tasks into smaller, </span><span class="No-Break"><span class="koboSpan" id="kobo.575.1">actionable steps.</span></span></p>
<p><span class="koboSpan" id="kobo.576.1">To illustrate the </span><a id="_idIndexMarker875"/><span class="koboSpan" id="kobo.577.1">construction of a ReAct prompt, consider the following example prompt structure with </span><span class="No-Break"><span class="koboSpan" id="kobo.578.1">question-thought-action-observation sequences:</span></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.579.1">Example 1:</span></strong></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.580.1">Question</span></strong><span class="koboSpan" id="kobo.581.1">: What is the optimal inventory level to </span><span class="No-Break"><span class="koboSpan" id="kobo.582.1">minimize stockouts?</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.583.1">Thought</span></strong><span class="koboSpan" id="kobo.584.1">: To avoid stockouts, we must balance inventory levels based on demand forecasts and </span><span class="No-Break"><span class="koboSpan" id="kobo.585.1">reorder points.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.586.1">Action</span></strong><span class="koboSpan" id="kobo.587.1">: Invoke the </span><strong class="source-inline"><span class="koboSpan" id="kobo.588.1">optimizeInventoryLevels</span></strong><span class="koboSpan" id="kobo.589.1"> function using historical sales data and </span><span class="No-Break"><span class="koboSpan" id="kobo.590.1">demand projections.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.591.1">Observation</span></strong><span class="koboSpan" id="kobo.592.1">: Maintaining inventory at 80% of forecasted demand reduced stockouts by 30% while optimizing </span><span class="No-Break"><span class="koboSpan" id="kobo.593.1">carrying costs.</span></span></li>
</ul>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.594.1">Example 2</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.595.1">:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.596.1">Question</span></strong><span class="koboSpan" id="kobo.597.1">: How can we improve customer </span><span class="No-Break"><span class="koboSpan" id="kobo.598.1">satisfaction ratings?</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.599.1">Thought</span></strong><span class="koboSpan" id="kobo.600.1">: To enhance satisfaction, we should analyze feedback data and implement </span><span class="No-Break"><span class="koboSpan" id="kobo.601.1">targeted improvements.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.602.1">Action</span></strong><span class="koboSpan" id="kobo.603.1">: Execute the </span><strong class="source-inline"><span class="koboSpan" id="kobo.604.1">analyzeCustomerFeedback</span></strong><span class="koboSpan" id="kobo.605.1"> API to identify trends </span><span class="No-Break"><span class="koboSpan" id="kobo.606.1">and insights.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.607.1">Observation</span></strong><span class="koboSpan" id="kobo.608.1">: Based on the analysis, implementing personalized customer support led to a 20% increase in </span><span class="No-Break"><span class="koboSpan" id="kobo.609.1">satisfaction scores.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.610.1">These examples demonstrate how the ReAct technique guides the model through reasoning steps, leading to </span><span class="No-Break"><span class="koboSpan" id="kobo.611.1">actionable outcomes.</span></span></p>
<p><span class="koboSpan" id="kobo.612.1">While the process of manually crafting these prompts can be time-consuming and intricate, the Amazon Bedrock Agent streamlines this process by automatically generating the prompts based on the provided information and available actions. </span><span class="koboSpan" id="kobo.612.2">Bedrock agents handle the complexities of prompt engineering, allowing researchers and developers to focus on defining the task requirements and </span><span class="No-Break"><span class="koboSpan" id="kobo.613.1">available actions.</span></span></p>
<p><span class="koboSpan" id="kobo.614.1">Readers are encouraged to check out </span><a href="https://github.com/aws-samples/agentsforbedrock-retailagent"><span class="koboSpan" id="kobo.615.1">https://github.com/aws-samples/agentsforbedrock-retailagent</span></a><span class="koboSpan" id="kobo.616.1">, which uncovers the creation of an FM-powered customer service bot by leveraging Agents for </span><span class="No-Break"><span class="koboSpan" id="kobo.617.1">Amazon Bedrock.</span></span></p>
<p><span class="koboSpan" id="kobo.618.1">The ReAct technique and Bedrock Agents represent a significant advancement in the field of GenAI, enabling models to demonstrate improved reasoning abilities and tackle complex tasks more effectively. </span><span class="koboSpan" id="kobo.618.2">By providing a structured approach to problem-solving and leveraging the power of prompts, this technique has the potential to unlock new possibilities and </span><a id="_idIndexMarker876"/><span class="koboSpan" id="kobo.619.1">applications for GenAI in various domains. </span><span class="koboSpan" id="kobo.619.2">Let us explore the functioning of Amazon Bedrock Agents with some practical </span><span class="No-Break"><span class="koboSpan" id="kobo.620.1">use cases.</span></span></p>
<h2 id="_idParaDest-190"><a id="_idTextAnchor203"/><span class="koboSpan" id="kobo.621.1">Practical use case and functioning with Amazon Bedrock Agents</span></h2>
<p><span class="koboSpan" id="kobo.622.1">In this section, we </span><a id="_idIndexMarker877"/><span class="koboSpan" id="kobo.623.1">will dive into real-world applications and operational insights of leveraging Amazon Bedrock Agents in GenAI. </span><span class="koboSpan" id="kobo.623.2">Let us consider an example scenario of a multilingual summarizer bot, wherein a GenAI agent can be employed to streamline operations and automate how to translate the content in a summarized fashion in the language of the user’s choice. </span><span class="koboSpan" id="kobo.623.3">In order to begin, the developer must access the Bedrock console and initiate the agent creation workflow, as highlighted in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.624.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.625.1">.5</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.626.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer152">
<span class="koboSpan" id="kobo.627.1"><img alt="Figure 10.5 – Agent creation within the Bedrock console" src="image/B22045_10_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.628.1">Figure 10.5 – Agent creation within the Bedrock console</span></p>
<p><span class="koboSpan" id="kobo.629.1">This process involves </span><a id="_idIndexMarker878"/><span class="koboSpan" id="kobo.630.1">providing essential details, such as the agent’s name, description, and the necessary permissions through an</span><a id="_idIndexMarker879"/><span class="koboSpan" id="kobo.631.1"> AWS </span><strong class="bold"><span class="koboSpan" id="kobo.632.1">Identity and Access Management</span></strong><span class="koboSpan" id="kobo.633.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.634.1">IAM</span></strong><span class="koboSpan" id="kobo.635.1">) service role. </span><span class="koboSpan" id="kobo.635.2">This role grants the agent access to required services</span><a id="_idIndexMarker880"/><span class="koboSpan" id="kobo.636.1"> such as </span><strong class="bold"><span class="koboSpan" id="kobo.637.1">Amazon Simple Storage Service</span></strong><span class="koboSpan" id="kobo.638.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.639.1">Amazon S3</span></strong><span class="koboSpan" id="kobo.640.1">) and AWS Lambda, as illustrated in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.641.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.642.1">.6</span></em><span class="koboSpan" id="kobo.643.1">. </span><span class="koboSpan" id="kobo.643.2">As an example, the figure demonstrates the creation of a multilingual document summarizer and translator agent for extracting relevant information from the documents and relaying the information to the user in the </span><span class="No-Break"><span class="koboSpan" id="kobo.644.1">translated language:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer153">
<span class="koboSpan" id="kobo.645.1"><img alt="Figure 10.6 – Bedrock Agent creation process with IAM permissions" src="image/B22045_10_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.646.1">Figure 10.6 – Bedrock Agent creation process with IAM permissions</span></p>
<p><span class="koboSpan" id="kobo.647.1">By default, Amazon Bedrock employs encryption for agent sessions with users, utilizing a key that AWS owns and manages on your behalf. </span><span class="koboSpan" id="kobo.647.2">However, if you prefer to use a customer-managed key</span><a id="_idIndexMarker881"/><span class="koboSpan" id="kobo.648.1"> from AWS </span><strong class="bold"><span class="koboSpan" id="kobo.649.1">Key Management Service</span></strong><span class="koboSpan" id="kobo.650.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.651.1">KMS</span></strong><span class="koboSpan" id="kobo.652.1">) that you have set up, you have</span><a id="_idIndexMarker882"/><span class="koboSpan" id="kobo.653.1"> the option to customize your encryption settings accordingly. </span><span class="koboSpan" id="kobo.653.2">This allows you to take control of the encryption key used for securing agent-user interactions, aligning with your organization’s security and </span><span class="No-Break"><span class="koboSpan" id="kobo.654.1">compliance requirements.</span></span></p>
<p><span class="koboSpan" id="kobo.655.1">Next, the developer selects an FM from Bedrock that aligns with the desired use case. </span><span class="koboSpan" id="kobo.655.2">This step involves providing natural language instructions that define the agent’s task and the persona it should assume. </span><span class="koboSpan" id="kobo.655.3">For instance, in the example demonstrated in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.656.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.657.1">.7</span></em><span class="koboSpan" id="kobo.658.1">, the instruction could be </span><strong class="source-inline"><span class="koboSpan" id="kobo.659.1">You are a multi-lingual agent designed to help with extracting inquired information from relevant documents and providing the response in </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.660.1">translated language</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.661.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer154">
<span class="koboSpan" id="kobo.662.1"><img alt="Figure 10.7 – Amazon Bedrock Agent configuration for model selection and Agent persona" src="image/B22045_10_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.663.1">Figure 10.7 – Amazon Bedrock Agent configuration for model selection and Agent persona</span></p>
<p><span class="koboSpan" id="kobo.664.1">The console also provides the option for the user to select guardrails to implement application-specific</span><a id="_idIndexMarker883"/><span class="koboSpan" id="kobo.665.1"> safeguards abiding by responsible AI policies. </span><span class="koboSpan" id="kobo.665.2">For simplicity, we can leave this blank and move to the next section. </span><span class="koboSpan" id="kobo.665.3">We will be covering guardrails in detail in </span><a href="B22045_12.xhtml#_idTextAnchor226"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.666.1">Chapter 12</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.667.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.668.1">Subsequently, the developer adds action groups, which are sets of tasks the agent can perform automatically by making API calls to the company’s systems. </span><span class="koboSpan" id="kobo.668.2">This step involves defining an API schema that outlines the APIs for all actions within a group and providing a Lambda function that encapsulates the business logic for each API. </span><span class="koboSpan" id="kobo.668.3">For example, an action group named </span><strong class="source-inline"><span class="koboSpan" id="kobo.669.1">Summarizer_Translator_ActionGroup</span></strong><span class="koboSpan" id="kobo.670.1"> could handle documents stored either in a database or within a particular location, identifying the information requested by the user and sending a summarized response to the user in the translated language inquired by the user. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.671.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.672.1">.8</span></em><span class="koboSpan" id="kobo.673.1"> showcases the creation of an action group to handle tasks for agents to </span><span class="No-Break"><span class="koboSpan" id="kobo.674.1">execute autonomously:</span></span></p>
<p class="IMG---Figure"> </p>
<div>
<div class="IMG---Figure" id="_idContainer155">
<span class="koboSpan" id="kobo.675.1"><img alt="Figure 10.8 – Creating Bedrock Agent’s action group" src="image/B22045_10_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.676.1">Figure 10.8 – Creating Bedrock Agent’s action group</span></p>
<p><span class="koboSpan" id="kobo.677.1">As shown previously, you will have to create a Lambda function to handle incoming requests from the agents and select an API schema. </span><span class="koboSpan" id="kobo.677.2">Please ensure you have provided the right permissions to your AWS Lambda function to invoke </span><span class="No-Break"><span class="koboSpan" id="kobo.678.1">Bedrock agents.</span></span></p>
<p><span class="koboSpan" id="kobo.679.1">For the case of </span><a id="_idIndexMarker884"/><span class="koboSpan" id="kobo.680.1">document identification, summarization, and translation, we have provided the following Lambda function that users can leverage for executing </span><span class="No-Break"><span class="koboSpan" id="kobo.681.1">the workflow:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.682.1">
import json
import time
import boto3
# Define a mock dictionary with document IDs and content
Document_id  = {
    "doc_1": {
        "title": "The Importance of Mindfulness",
        "author": "Jane Smith",
        "content": "Mindfulness is the practice of being fully present and engaged in the current moment, without judgment or distraction. </span><span class="koboSpan" id="kobo.682.2">It involves paying attention to your thoughts, feelings, and bodily sensations with a curious and non-judgmental attitude. </span><span class="koboSpan" id="kobo.682.3">By cultivating mindfulness, you can reduce stress, improve emotional regulation, and enhance overall well-being. </span><span class="koboSpan" id="kobo.682.4">In this document, we will explore the benefits of mindfulness and provide practical techniques for incorporating it into your daily life."
</span><span class="koboSpan" id="kobo.682.5">      },
    "doc_2": {
        "title": "Sustainable Living: A Guide to Eco-Friendly Practices",
        "author": "Michael Johnson",
        "content": "In today's world, it's essential to adopt sustainable living practices to protect our planet's resources and ensure a better future for generations to come. </span><span class="koboSpan" id="kobo.682.6">This document will provide you with practical tips and strategies for reducing your environmental impact in various aspects of your life, such as energy consumption, waste management, transportation, and food choices. </span><span class="koboSpan" id="kobo.682.7">Together, we can make a significant difference by embracing eco-friendly habits and promoting a more sustainable lifestyle."
</span><span class="koboSpan" id="kobo.682.8">      },
    "doc_3": {
        "title": "The Art of Effective Communication",
        "author": "Emily Davis",
        "content": "Effective communication is a crucial skill in both personal and professional settings. </span><span class="koboSpan" id="kobo.682.9">It involves the ability to convey your thoughts, ideas, and emotions clearly and respectfully, while also actively listening and understanding the perspectives of others. </span><span class="koboSpan" id="kobo.682.10">In this document, we will explore the key elements of effective communication, such as active listening, nonverbal cues, and empathy. </span><span class="koboSpan" id="kobo.682.11">By mastering these techniques, you can improve your relationships, resolve conflicts more effectively, and achieve greater success in your personal and professional endeavors."
</span><span class="koboSpan" id="kobo.682.12">      }
    }
def getDocID(event):
        docID = event['parameters'][0]['value']
        print("NAME PRINTED: ", docID)
        if(docID== "doc_1" or "doc1"):
            return Document_id["doc_1"]["content"]
        elif docID == "doc_2" or "doc2":
            return Document_id["doc_2"]["content"]
        elif docID == "doc_3" or "doc3":
            return Document_id["doc_3"]["content"]
        else:
            return "No document found by that ID"
def lambda_handler(event, context):
    response_code = 200
    """Main lambda handler directing requests based on the API path, preserving the specified response structure."""
</span><span class="koboSpan" id="kobo.682.13">    print("event OUTPUT : ")
    print(event)
    action_group = event.get("actionGroup")
    print("action group :" + str(action_group))
    api_path = event.get("apiPath")
    print ("api_path : " + str(api_path))
    result = ''
    response_code = 200
    if api_path == '/getDoc':
        result = getDocID(event)
        print(result)
    else:
        response_code = 404
        result = f"Unrecognized api path: {action_group}::{api_path}"
    response_body = {
        'application/json': {
            'body': result
        }
    }
    action_response = {
        'actionGroup': event['actionGroup'],
        'apiPath': event['apiPath'],
        'httpMethod': event['httpMethod'],
        'httpStatusCode': response_code,
        'responseBody': response_body
    }
    api_response = {'messageVersion': '1.0', 'response': action_response}
    return api_response</span></pre>
<p><span class="koboSpan" id="kobo.683.1">Users running the </span><a id="_idIndexMarker885"/><span class="koboSpan" id="kobo.684.1">preceding workflow can also use the following OpenAPI schema and store it in S3, as part of </span><span class="No-Break"><span class="koboSpan" id="kobo.685.1">this example:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.686.1">
{
    "openapi": "3.0.1",
    "info": {
        "title": "DocSummarizerTranslator API",
        "version": "1.0.0",
        "description": "APIs for fetching, translating and summarizing docs by fetching the document ID and identifying the language to translate the document"
    },
    "paths": {
        "/getDoc": {
            "get": {
                "description": "Get the document content for a document by document ID.",
                "operationId": "getDoc",
                "parameters": [
                    {
                        "name": "DocID",
                        "in": "query",
                        "description": "ID of the document to retrieve",
                        "required": true,
                        "schema": {
                            "type": "string"}}],
                "responses": {
                    "200": {
                        "description": "Successful response with document content data",
                        "content": {
                            "text/plain": {
                                "schema": {
                                    "type": "string"
                                }}}}}}},
        "/getDoc/summarize": {
            "get": {
                "description": "Summarize the content of the document for given document ID",
                "operationId": "summarizeDoc",
                "parameters": [
                    {
                        "name": "DocID",
                        "in": "query",
                        "description": "ID of the document to summarize",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response with the summary of the document content for given document ID",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "properties": {
                                        "summary": {
                                            "type": "string",
                                            "description": "Summary of the document"}}}}}}}}}}}</span></pre>
<p><span class="koboSpan" id="kobo.687.1">In the next step, users</span><a id="_idIndexMarker886"/><span class="koboSpan" id="kobo.688.1"> have the option to select a knowledge base, as depicted in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.689.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.690.1">.9</span></em><span class="koboSpan" id="kobo.691.1">. </span><span class="koboSpan" id="kobo.691.2">This showcases the power of Bedrock Agents to easily create a RAG-based solution for extracting information from relevant sources stored in the knowledge base, by performing similarity searches and providing desired responses back to the user. </span><span class="koboSpan" id="kobo.691.3">For simplicity, we will ignore that and move to the final </span><span class="No-Break"><span class="koboSpan" id="kobo.692.1">creation step:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer156">
<span class="koboSpan" id="kobo.693.1"><img alt="Figure 10.9 – Knowledge-base creation with Bedrock Agents integration" src="image/B22045_10_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.694.1">Figure 10.9 – Knowledge-base creation with Bedrock Agents integration</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.695.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.696.1">If you would like to dive deep into use cases involving knowledge-base integration with your agents, you can execute the following code </span><span class="No-Break"><span class="koboSpan" id="kobo.697.1">samples: </span></span><a href="https://github.com/aws-samples/amazon-bedrock-workshop/tree/main/05_Agents/insurance_claims_agent/with_kb"><span class="No-Break"><span class="koboSpan" id="kobo.698.1">https://github.com/aws-samples/amazon-bedrock-workshop/tree/main/05_Agents/insurance_claims_agent/with_kb</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.699.1">.</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.700.1">Additional code within the GitHub repository further illustrates how to create and invoke Bedrock Agents with the Python SDK, as evidenced in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.701.1">notebook: </span></span><a href="https://github.com/aws-samples/amazon-bedrock-workshop/blob/main/05_Agents/insurance_claims_agent/with_kb/create_and_invoke_agent_with_kb.ipynb"><span class="No-Break"><span class="koboSpan" id="kobo.702.1">https://github.com/aws-samples/amazon-bedrock-workshop/blob/main/05_Agents/insurance_claims_agent/with_kb/create_and_invoke_agent_with_kb.ipynb</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.703.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.704.1">Once the</span><a id="_idIndexMarker887"/><span class="koboSpan" id="kobo.705.1"> preceding steps are done, you can verify the agent configuration and select </span><strong class="bold"><span class="koboSpan" id="kobo.706.1">Create Agent</span></strong><span class="koboSpan" id="kobo.707.1">. </span><span class="koboSpan" id="kobo.707.2">Congratulations on creating your Amazon Bedrock Agent (</span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.708.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.709.1">.10</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.710.1">)!</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer157">
<span class="koboSpan" id="kobo.711.1"><img alt="Figure 10.10 – Amazon Bedrock Agent version" src="image/B22045_10_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.712.1">Figure 10.10 – Amazon Bedrock Agent version</span></p>
<p><span class="koboSpan" id="kobo.713.1">On the right</span><a id="_idIndexMarker888"/><span class="koboSpan" id="kobo.714.1"> side of the screen, you can easily test your agent by asking it questions about the document and requesting it to summarize and translate the document into your desired language, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.715.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.716.1">.11</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.717.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer158">
<span class="koboSpan" id="kobo.718.1"><img alt="Figure 10.11 – Testing Bedrock Agent within AWS console" src="image/B22045_10_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.719.1">Figure 10.11 – Testing Bedrock Agent within AWS console</span></p>
<p><span class="koboSpan" id="kobo.720.1">In this section, we acquired a practical comprehension of developing and evaluating Amazon Bedrock Agents tailored for a text summarization use case. </span><span class="koboSpan" id="kobo.720.2">Upon ensuring the agent’s </span><a id="_idIndexMarker889"/><span class="koboSpan" id="kobo.721.1">configuration and functionality align with the designated tasks, it’s time to transition into the </span><span class="No-Break"><span class="koboSpan" id="kobo.722.1">deployment phase.</span></span></p>
<h1 id="_idParaDest-191"><a id="_idTextAnchor204"/><span class="koboSpan" id="kobo.723.1">Deploying an Agent for Amazon Bedrock</span></h1>
<p><span class="koboSpan" id="kobo.724.1">Integrating an Amazon</span><a id="_idIndexMarker890"/><span class="koboSpan" id="kobo.725.1"> Bedrock agent into your </span><a id="_idIndexMarker891"/><span class="koboSpan" id="kobo.726.1">application requires creating an alias, which serves as a reference to a specific version of the agent’s code and configuration. </span><span class="koboSpan" id="kobo.726.2">Follow these steps to create </span><span class="No-Break"><span class="koboSpan" id="kobo.727.1">an alias:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.728.1">Access the Amazon Bedrock console and navigate to the agent you wish to deploy. </span><span class="koboSpan" id="kobo.728.2">From the agent’s overview page, navigate to the </span><strong class="bold"><span class="koboSpan" id="kobo.729.1">Aliases</span></strong><span class="koboSpan" id="kobo.730.1"> section and then click </span><strong class="bold"><span class="koboSpan" id="kobo.731.1">Create</span></strong><span class="koboSpan" id="kobo.732.1"> to initiate the alias </span><span class="No-Break"><span class="koboSpan" id="kobo.733.1">creation process.</span></span></li>
<li><span class="koboSpan" id="kobo.734.1">Provide a name and description (optional) for the alias. </span><span class="koboSpan" id="kobo.734.2">You’ll also need to decide whether you want to associate this alias with a new version of the agent or an existing version that you’ve </span><span class="No-Break"><span class="koboSpan" id="kobo.735.1">previously created.</span></span></li>
<li><span class="koboSpan" id="kobo.736.1">Users also have the option to opt for provisioned throughput for the alias by selecting the </span><strong class="bold"><span class="koboSpan" id="kobo.737.1">Provisioned Throughput (PT)</span></strong><span class="koboSpan" id="kobo.738.1"> button. </span><span class="koboSpan" id="kobo.738.2">Once selected, a drop-down menu will list models created with Provisioned Throughput. </span><span class="koboSpan" id="kobo.738.3">No option being displayed will indicate that no PT model exists within the Amazon Bedrock environment. </span><span class="koboSpan" id="kobo.738.4">For further information, users can </span><span class="No-Break"><span class="koboSpan" id="kobo.739.1">leverage </span></span><a href="https://docs.aws.amazon.com/bedrock/latest/userguide/prov-throughput.html"><span class="No-Break"><span class="koboSpan" id="kobo.740.1">https://docs.aws.amazon.com/bedrock/latest/userguide/prov-throughput.html</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.741.1">.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.742.1">By creating an alias, Bedrock takes a snapshot of the agent’s current code and configuration settings and links that snapshot (version) to the alias you’ve defined. </span><span class="koboSpan" id="kobo.742.2">You can then use this alias to integrate and interact with that specific version of the agent within your applications. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.743.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.744.1">.12</span></em><span class="koboSpan" id="kobo.745.1"> showcases two aliases that were created for the </span><span class="No-Break"><span class="koboSpan" id="kobo.746.1">summarizer-translator agent:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer159">
<span class="koboSpan" id="kobo.747.1"><img alt="Figure 10.12 – Aliases for Amazon Bedrock Agents" src="image/B22045_10_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.748.1">Figure 10.12 – Aliases for Amazon Bedrock Agents</span></p>
<p><span class="koboSpan" id="kobo.749.1">The alias essentially acts as a stable reference point, allowing you to manage different versions of your agent while ensuring your applications are interacting with the </span><span class="No-Break"><span class="koboSpan" id="kobo.750.1">desired version.</span></span></p>
<p><span class="koboSpan" id="kobo.751.1">Amazon Bedrock agents enable productivity gains, enhanced customer experiences, and automated workflows. </span><span class="koboSpan" id="kobo.751.2">Their versatility allows innovative implementations across domains such as task automation, conversational interfaces, and DevOps processes, driving </span><a id="_idIndexMarker892"/><span class="koboSpan" id="kobo.752.1">operational </span><a id="_idIndexMarker893"/><span class="koboSpan" id="kobo.753.1">efficiency and </span><span class="No-Break"><span class="koboSpan" id="kobo.754.1">business value.</span></span></p>
<p><span class="koboSpan" id="kobo.755.1">There can be several other industrial use cases with Bedrock Agents. </span><span class="koboSpan" id="kobo.755.2">For instance, in the case of insurance, by leveraging GenAI through Amazon Bedrock, insurance companies can enhance operational efficiency and customer experience. </span><span class="koboSpan" id="kobo.755.3">The agent can automate tedious and repetitive tasks, freeing up human resources to focus on more complex and strategic endeavors. </span><span class="koboSpan" id="kobo.755.4">Additionally, the agent’s ability to process natural language instructions allows for seamless integration into existing workflows and systems, facilitating a smoother transition toward </span><span class="No-Break"><span class="koboSpan" id="kobo.756.1">AI-driven operations.</span></span></p>
<p><span class="koboSpan" id="kobo.757.1">Moreover, the potential applications of GenAI in the insurance industry extend beyond claim processing. </span><span class="koboSpan" id="kobo.757.2">Agents can be trained to assist with personalized policy recommendations, risk assessment, fraud detection, and even customer support through natural language interactions. </span><span class="koboSpan" id="kobo.757.3">As technology continues to evolve, the opportunities for innovation and optimization within the insurance sector will </span><span class="No-Break"><span class="koboSpan" id="kobo.758.1">undoubtedly expand.</span></span></p>
<p><span class="koboSpan" id="kobo.759.1">The following link demonstrates an end-to-end scenario to get started with Amazon Bedrock Agents using the AWS Python </span><span class="No-Break"><span class="koboSpan" id="kobo.760.1">SDK: </span></span><a href="https://github.com/awsdocs/aws-doc-sdk-examples/blob/main/python/example_code/bedrock-agent/scenario_get_started_with_agents.py"><span class="No-Break"><span class="koboSpan" id="kobo.761.1">https://github.com/awsdocs/aws-doc-sdk-examples/blob/main/python/example_code/bedrock-agent/scenario_get_started_with_agents.py</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.762.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.763.1">The notebook uncovers the </span><span class="No-Break"><span class="koboSpan" id="kobo.764.1">following steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.765.1">Generating an execution role specifically for the </span><span class="No-Break"><span class="koboSpan" id="kobo.766.1">Bedrock agent</span></span></li>
<li><span class="koboSpan" id="kobo.767.1">Instantiating the Bedrock agent and deploying an initial </span><span class="No-Break"><span class="koboSpan" id="kobo.768.1">draft version</span></span></li>
<li><span class="koboSpan" id="kobo.769.1">Building a Lambda function and its corresponding </span><span class="No-Break"><span class="koboSpan" id="kobo.770.1">execution role</span></span></li>
<li><span class="koboSpan" id="kobo.771.1">Granting the necessary IAM permissions to provision the agent to invoke the </span><span class="No-Break"><span class="koboSpan" id="kobo.772.1">Lambda function</span></span></li>
<li><span class="koboSpan" id="kobo.773.1">Establishing an action group that links the agent with the </span><span class="No-Break"><span class="koboSpan" id="kobo.774.1">Lambda function</span></span></li>
<li><span class="koboSpan" id="kobo.775.1">Deploying the fully configured agent using a </span><span class="No-Break"><span class="koboSpan" id="kobo.776.1">designated alias</span></span></li>
<li><span class="koboSpan" id="kobo.777.1">Invoking the agent with </span><span class="No-Break"><span class="koboSpan" id="kobo.778.1">user-provided prompts</span></span></li>
<li><span class="koboSpan" id="kobo.779.1">Removing all resources created during </span><span class="No-Break"><span class="koboSpan" id="kobo.780.1">the process</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.781.1">Users can execute this scenario end to end in order to imbibe a deeper understanding of creating a GenAI agent on Amazon Bedrock for </span><span class="No-Break"><span class="koboSpan" id="kobo.782.1">their utility.</span></span></p>
<p><span class="koboSpan" id="kobo.783.1">For readers interested in diving further into the world of Agents for Amazon Bedrock, you are highly encouraged to leverage Amazon’s </span><em class="italic"><span class="koboSpan" id="kobo.784.1">Building generative AI applications with Amazon Bedrock using agents</span></em> <span class="No-Break"><span class="koboSpan" id="kobo.785.1">workshop: </span></span><a href="https://catalog.us-east-1.prod.workshops.aws/workshops/f8a7a3f8-1603-4b10-95cb-0b471db272d8/en-US"><span class="No-Break"><span class="koboSpan" id="kobo.786.1">https://catalog.us-east-1.prod.workshops.aws/workshops/f8a7a3f8-1603-4b10-95cb-0b471db272d8/en-US</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.787.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.788.1">Readers are </span><a id="_idIndexMarker894"/><span class="koboSpan" id="kobo.789.1">further </span><a id="_idIndexMarker895"/><span class="koboSpan" id="kobo.790.1">encouraged to check out workflow orchestration using Amazon Bedrock Agent chaining with a digital insurance Agent use </span><span class="No-Break"><span class="koboSpan" id="kobo.791.1">case: </span></span><a href="https://github.com/build-on-aws/workflow-orchestration-bedrock-agent-chaining/tree/main"><span class="No-Break"><span class="koboSpan" id="kobo.792.1">https://github.com/build-on-aws/workflow-orchestration-bedrock-agent-chaining/tree/main</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.793.1">.</span></span></p>
<h1 id="_idParaDest-192"><a id="_idTextAnchor205"/><span class="koboSpan" id="kobo.794.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.795.1">In this chapter, we explored the intricate concept of Agents within the GenAI universe. </span><span class="koboSpan" id="kobo.795.2">We examined various use cases and personas associated with agents, further elucidating practical examples of their applications in real-world scenarios. </span><span class="koboSpan" id="kobo.795.3">Additionally, we uncovered the seamless integration of LangChain agents with Amazon Bedrock and explored the creation of Amazon Bedrock Agents through practical code examples, as well as their orchestration workflow for building, testing, and deploying </span><span class="No-Break"><span class="koboSpan" id="kobo.796.1">Bedrock agents.</span></span></p>
<p><span class="koboSpan" id="kobo.797.1">Now that we have gained a thorough understanding of Agents and their orchestration processes, we will explore effective strategies for monitoring Amazon Bedrock models within large-scale enterprises in the next chapter. </span><span class="koboSpan" id="kobo.797.2">This will equip us with the necessary knowledge to manage and optimize the security and governance of these models in complex organizational settings, ensuring optimal utilization </span><span class="No-Break"><span class="koboSpan" id="kobo.798.1">and efficiency.</span></span></p>
</div>


<div class="Content" id="_idContainer161">
<h1 id="_idParaDest-193" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor206"/><span class="koboSpan" id="kobo.1.1">Part 3: Model Management and Security Considerations</span></h1>
<p><span class="koboSpan" id="kobo.2.1">In this part, we will understand the core aspects of evaluating and monitoring models, as well as ensuring security and privacy within the Amazon Bedrock environment. </span><a href="B22045_11.xhtml#_idTextAnchor207"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.3.1">Chapter 11</span></em></span></a><span class="koboSpan" id="kobo.4.1"> explores techniques for assessing model performance, including automatic model evaluation, human evaluation, and open source tools. </span><span class="koboSpan" id="kobo.4.2">Additionally, it covers monitoring techniques such as Amazon CloudWatch, model invocation logging, and integration with AWS CloudTrail and Amazon EventBridge. </span><a href="B22045_12.xhtml#_idTextAnchor226"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.5.1">Chapter 12</span></em></span></a><span class="koboSpan" id="kobo.6.1"> centers on data protection, identity and access management, network security, ethical considerations, and implementing guardrails to adhere to responsible AI practices </span><span class="No-Break"><span class="koboSpan" id="kobo.7.1">and policies.</span></span></p>
<p><span class="koboSpan" id="kobo.8.1">This part has the </span><span class="No-Break"><span class="koboSpan" id="kobo.9.1">following chapters:</span></span></p>
<ul>
<li><a href="B22045_11.xhtml#_idTextAnchor207"><em class="italic"><span class="koboSpan" id="kobo.10.1">Chapter 11</span></em></a><span class="koboSpan" id="kobo.11.1">, </span><em class="italic"><span class="koboSpan" id="kobo.12.1">Evaluating and Monitoring Models with Amazon Bedrock</span></em></li>
<li><a href="B22045_12.xhtml#_idTextAnchor226"><em class="italic"><span class="koboSpan" id="kobo.13.1">Chapter 12</span></em></a><span class="koboSpan" id="kobo.14.1">, </span><em class="italic"><span class="koboSpan" id="kobo.15.1">Ensuring Security and Privacy in Amazon Bedrock</span></em></li>
</ul>
</div>
<div>
<div id="_idContainer162">
</div>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer163">
</div>
</div>
</body></html>