<html><head></head><body>
  <div id="_idContainer192">
   <h1 class="chapter-number" id="_idParaDest-216">
    <a id="_idTextAnchor218">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     11
    </span>
   </h1>
   <h1 id="_idParaDest-217">
    <a id="_idTextAnchor219">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Understanding the Environment Query System
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     The
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.4.1">
      Environment Query System
     </span>
    </strong>
    <span class="koboSpan" id="kobo.5.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.6.1">
      EQS
     </span>
    </strong>
    <span class="koboSpan" id="kobo.7.1">
     ) in
    </span>
    <a id="_idIndexMarker557">
    </a>
    <span class="koboSpan" id="kobo.8.1">
     Unreal Engine is a powerful feature within the AI framework that allows developers to collect data about the virtual environment by letting AI agents query the environment and make informed decisions based on the returned results.
    </span>
    <span class="koboSpan" id="kobo.8.2">
     In this chapter, you will learn how to properly set up an environment query and how to integrate it inside the behavior tree of an
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.9.1">
      AI agent.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.10.1">
     By mastering the EQS, you’ll gain the power to create intelligent AI systems that can make informed decisions based on their surroundings.
    </span>
    <span class="koboSpan" id="kobo.10.2">
     Whether it’s finding the best vantage point, locating crucial resources, or strategizing for optimal gameplay, the EQS opens a world of possibilities.
    </span>
    <span class="koboSpan" id="kobo.10.3">
     While still an experimental feature, learning about the EQS will let you create intelligent and dynamic AI systems in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.11.1">
      Unreal Engine.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.12.1">
     In this chapter, we will be covering the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.13.1">
      following topics:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.14.1">
      Introducing the Environment
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.15.1">
       Query System
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.16.1">
      Setting up an
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.17.1">
       environment query
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.18.1">
      Handling environment queries within a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.19.1">
       behavior tree
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.20.1">
      Displaying
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.21.1">
       EQS information
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-218">
    <a id="_idTextAnchor220">
    </a>
    <span class="koboSpan" id="kobo.22.1">
     Technical requirements
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.23.1">
     To follow the topics presented in this chapter, you should have completed the previous ones and understood
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.24.1">
      their content.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.25.1">
     Additionally, if you would prefer to begin with code from the companion repository for this book, you can download the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.26.1">
      .zip
     </span>
    </strong>
    <span class="koboSpan" id="kobo.27.1">
     project files provided in this book’s companion project
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.28.1">
      repository:
     </span>
    </span>
    <a href="https://github.com/PacktPublishing/Artificial-Intelligence-in-Unreal-Engine-5">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.29.1">
       https://github.com/PacktPublishing/Artificial-Intelligence-in-Unreal-Engine-5
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.30.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.31.1">
     To download the files from the end of the last chapter, click the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.32.1">
      Unreal Agility Arena –
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.33.1">
       Chapter 10
      </span>
     </strong>
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.34.1">
      -
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.35.1">
       End
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.36.1">
      link.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-219">
    <a id="_idTextAnchor221">
    </a>
    <span class="koboSpan" id="kobo.37.1">
     Introducing the Environment Query System
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.38.1">
     Well, it seems Dr.
    </span>
    <span class="koboSpan" id="kobo.38.2">
     Markus is making some progress in his
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.39.1">
      secret lab:
     </span>
    </span>
   </p>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.40.1">
      Deep within the hidden confines of their secret laboratory, Dr.
     </span>
     <span class="koboSpan" id="kobo.40.2">
      Markus and Professor Viktoria toiled tirelessly on their latest endeavor; they were determined to revolutionize their AI dummy puppets by granting them the ability to analyze and probe their environment in
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.41.1">
       unprecedented ways.
      </span>
     </em>
    </span>
   </p>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.42.1">
      With their minds brimming with excitement, Dr.
     </span>
     <span class="koboSpan" id="kobo.42.2">
      Markus and Professor Viktoria meticulously crafted intricate algorithms as they imbued their creations with an insatiable hunger for knowledge, equipping them with experimental methods to observe and interact with the world around them.
     </span>
     <span class="koboSpan" id="kobo.42.3">
      As the AI dummy puppets awakened, their eyes flickered with a newfound spark of intelligence, each one exploring its surroundings and analyzing
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.43.1">
       the environment.
      </span>
     </em>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.44.1">
     Unreal Engine’s
    </span>
    <a id="_idIndexMarker558">
    </a>
    <span class="koboSpan" id="kobo.45.1">
     EQS is a powerful tool that allows developers to define complex queries to gather information about the game world.
    </span>
    <span class="koboSpan" id="kobo.45.2">
     The EQS enables developers to create AI behaviors that can dynamically adapt to changing environmental conditions.
    </span>
    <span class="koboSpan" id="kobo.45.3">
     By using the EQS, NPCs or other game entities can make intelligent decisions based on their surroundings.
    </span>
    <span class="koboSpan" id="kobo.45.4">
     With its flexibility and ease of use, the EQS is a valuable feature in Unreal Engine for creating immersive and interactive
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.46.1">
      gameplay experiences.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.47.1">
     With the EQS, you can inquire about gathered data using a set of
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.48.1">
      tests
     </span>
    </strong>
    <span class="koboSpan" id="kobo.49.1">
     that will generate elements that align most closely with the nature of the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.50.1">
      query posed.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.51.1">
     An
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.52.1">
      EQS query
     </span>
    </strong>
    <span class="koboSpan" id="kobo.53.1">
     can
    </span>
    <a id="_idIndexMarker559">
    </a>
    <span class="koboSpan" id="kobo.54.1">
     be triggered inside a behavior tree – or, alternatively, through scripting – to guide decisions based on the result of tests.
    </span>
    <span class="koboSpan" id="kobo.54.2">
     These queries mainly consist
    </span>
    <a id="_idIndexMarker560">
    </a>
    <span class="koboSpan" id="kobo.55.1">
     of
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.56.1">
      generators
     </span>
    </strong>
    <span class="koboSpan" id="kobo.57.1">
     (elements that determine the locations or actors to
    </span>
    <a id="_idIndexMarker561">
    </a>
    <span class="koboSpan" id="kobo.58.1">
     be tested and weighted) and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.59.1">
      contexts
     </span>
    </strong>
    <span class="koboSpan" id="kobo.60.1">
     (elements that provide a reference frame for tests or generators).
    </span>
    <span class="koboSpan" id="kobo.60.2">
     EQS queries empower AI characters to locate optimal positions for tasks such as attacking a player with a line of sight, retrieving health or ammo pickups, or seeking the nearest cover point, among
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.61.1">
      other options.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.62.1">
     Let’s start by examining all these elements
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.63.1">
      in detail.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-220">
    <a id="_idTextAnchor222">
    </a>
    <span class="koboSpan" id="kobo.64.1">
     Explaining generators
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.65.1">
     A generator
    </span>
    <a id="_idIndexMarker562">
    </a>
    <span class="koboSpan" id="kobo.66.1">
     creates the locations or actors – known as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.67.1">
      items
     </span>
    </strong>
    <span class="koboSpan" id="kobo.68.1">
     – that will undergo testing and weighting; the result will be returned to the
    </span>
    <a id="_idIndexMarker563">
    </a>
    <span class="koboSpan" id="kobo.69.1">
     behavior tree to which the query
    </span>
    <a id="_idIndexMarker564">
    </a>
    <span class="koboSpan" id="kobo.70.1">
     belongs.
    </span>
    <span class="koboSpan" id="kobo.70.2">
     Generators that are available out of the box are
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.71.1">
      as follows:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.72.1">
       Actors of Class
      </span>
     </strong>
     <span class="koboSpan" id="kobo.73.1">
      : This will find all actors of a given class returning them as items
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.74.1">
       for tests
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.75.1">
       Composite
      </span>
     </strong>
     <span class="koboSpan" id="kobo.76.1">
      : This will let you create an array of generators and use them
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.77.1">
       for tests
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.78.1">
       Current Location
      </span>
     </strong>
     <span class="koboSpan" id="kobo.79.1">
      : This will let you get the location of a specified context and use it to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.80.1">
       validate tests
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.81.1">
       Points
      </span>
     </strong>
     <span class="koboSpan" id="kobo.82.1">
      : Generators can be used to create shape-based traces –
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.83.1">
       Circle
      </span>
     </strong>
     <span class="koboSpan" id="kobo.84.1">
      ,
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.85.1">
       Cone
      </span>
     </strong>
     <span class="koboSpan" id="kobo.86.1">
      ,
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.87.1">
       Donut
      </span>
     </strong>
     <span class="koboSpan" id="kobo.88.1">
      ,
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.89.1">
       Grid
      </span>
     </strong>
     <span class="koboSpan" id="kobo.90.1">
      , and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.91.1">
       Pathing Grid
      </span>
     </strong>
     <span class="koboSpan" id="kobo.92.1">
      – around a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.93.1">
       predefined location
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.94.1">
     What’s more, you may implement your own by extending the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.95.1">
      EnvQueryGenerator
     </span>
    </strong>
    <span class="koboSpan" id="kobo.96.1">
     class (if developing in C++) or
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.97.1">
      EnvQueryGenerator_BlueprintBase
     </span>
    </strong>
    <span class="koboSpan" id="kobo.98.1">
     (if developing
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.99.1">
      with Blueprints).
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.100.1">
     Note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.101.1">
     Generators created in C++ typically run faster than those developed
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.102.1">
      in Blueprints.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-221">
    <a id="_idTextAnchor223">
    </a>
    <span class="koboSpan" id="kobo.103.1">
     Explaining contexts
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.104.1">
     A context supplies a point of
    </span>
    <a id="_idIndexMarker565">
    </a>
    <span class="koboSpan" id="kobo.105.1">
     reference for the different tests and generators and can range from the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.106.1">
      querier
     </span>
    </strong>
    <span class="koboSpan" id="kobo.107.1">
     – the pawn currently possessed by the AI controller executing the
    </span>
    <a id="_idIndexMarker566">
    </a>
    <span class="koboSpan" id="kobo.108.1">
     behavior tree – to more complex scenarios involving all actors of a certain type.
    </span>
    <span class="koboSpan" id="kobo.108.2">
     A generator, such as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.109.1">
      Points: Circle
     </span>
    </strong>
    <span class="koboSpan" id="kobo.110.1">
     , can use a context that will provide multiple locations
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.111.1">
      or actors.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.112.1">
     Available
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.113.1">
      Context
     </span>
    </strong>
    <span class="koboSpan" id="kobo.114.1">
     classes are
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.115.1">
      as follows:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.116.1">
       EnvQueryContext_Item
      </span>
     </strong>
     <span class="koboSpan" id="kobo.117.1">
      : This represents either a location – as a vector – or
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.118.1">
       an actor
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.119.1">
       EnvQueryContext_Querier
      </span>
     </strong>
     <span class="koboSpan" id="kobo.120.1">
      : This represents the querier executing the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.121.1">
       behavior tree
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.122.1">
     As you may
    </span>
    <a id="_idIndexMarker567">
    </a>
    <span class="koboSpan" id="kobo.123.1">
     have guessed, you may implement your own context by extending
    </span>
    <a id="_idIndexMarker568">
    </a>
    <span class="koboSpan" id="kobo.124.1">
     the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.125.1">
      EnvQueryContext
     </span>
    </strong>
    <span class="koboSpan" id="kobo.126.1">
     class if developing in C++ or
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.127.1">
      EnvQueryContext_BlueprintBase
     </span>
    </strong>
    <span class="koboSpan" id="kobo.128.1">
     if developing
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.129.1">
      with Blueprints.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-222">
    <a id="_idTextAnchor224">
    </a>
    <span class="koboSpan" id="kobo.130.1">
     Explaining tests
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.131.1">
     A test
    </span>
    <a id="_idIndexMarker569">
    </a>
    <span class="koboSpan" id="kobo.132.1">
     determines
    </span>
    <a id="_idIndexMarker570">
    </a>
    <span class="koboSpan" id="kobo.133.1">
     the criteria used by the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.134.1">
      environment query
     </span>
    </strong>
    <span class="koboSpan" id="kobo.135.1">
     – the actual request to the environment – to select the optimal Item from the generator, given
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.136.1">
      a context.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.137.1">
     Some of the out-of-the-box available tests are
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.138.1">
      as follows:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.139.1">
       Distance
      </span>
     </strong>
     <span class="koboSpan" id="kobo.140.1">
      : This will return the distance between the item location and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.141.1">
       another location
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.142.1">
       Overlap: Box
      </span>
     </strong>
     <span class="koboSpan" id="kobo.143.1">
      : This can be used to check whether an item is within the bounds defined by the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.144.1">
       test itself
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.145.1">
       PathExists: from Querier
      </span>
     </strong>
     <span class="koboSpan" id="kobo.146.1">
      : This can be used to check whether a path to the context exists and will return some useful information about it, such as how long the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.147.1">
       path is
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.148.1">
     You may implement your own tests by extending the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.149.1">
      EnvQueryTest
     </span>
    </strong>
    <span class="koboSpan" id="kobo.150.1">
     class both in C++
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.151.1">
      and Blueprints.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.152.1">
     Now that you have acquired a basic understanding of the main EQS elements, it is time to delve deeper and begin implementing a fully working and effective AI agent
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.153.1">
      with it.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-223">
    <a id="_idTextAnchor225">
    </a>
    <span class="koboSpan" id="kobo.154.1">
     Setting up an environment query
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.155.1">
     In this section, you’ll be learning how to add a query to a behavior tree; in particular, we will be tweaking the dummy gunner AI brain in order to let it shoot at a target achieved by an
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.156.1">
      environment query.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.157.1">
     Note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.158.1">
     As previously mentioned, the EQS is still an experimental feature, so you should use caution if you want to develop a game using it.
    </span>
    <span class="koboSpan" id="kobo.158.2">
     At the time of writing this book, the EQS is enabled by default by using
    </span>
    <a id="_idIndexMarker571">
    </a>
    <span class="koboSpan" id="kobo.159.1">
     the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.160.1">
      Environment Query
     </span>
    </strong>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.161.1">
       Editor
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.162.1">
      plugin.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-224">
    <a id="_idTextAnchor226">
    </a>
    <span class="koboSpan" id="kobo.163.1">
     Creating the gym
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.164.1">
     As a first step, we are going to
    </span>
    <a id="_idIndexMarker572">
    </a>
    <span class="koboSpan" id="kobo.165.1">
     create a proper gym, so start by doing
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.166.1">
      the following:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.167.1">
      Create a level of your choice, starting from the Level Instances and Packed Level Actors, which I provided in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.168.1">
       project template.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.169.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.170.1">
       BP_GunnerDummyCharacter
      </span>
     </strong>
     <span class="koboSpan" id="kobo.171.1">
      instance; just remember to check
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.172.1">
       Use Controller Rotation Yaw
      </span>
     </strong>
     <span class="koboSpan" id="kobo.173.1">
      so it will be able to rotate and point to the target when prompted to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.174.1">
       do this.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.175.1">
      Add one or more
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.176.1">
       BP_Target
      </span>
     </strong>
     <span class="koboSpan" id="kobo.177.1">
      instances so that your AI character will have a line of sight
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.178.1">
       to them.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.179.1">
      Add some obstacles that will block the line of sight with the AI agent.
     </span>
     <span class="koboSpan" id="kobo.179.2">
      The final gym should look similar to the one depicted in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.180.1">
        Figure 11
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.181.1">
        .1
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.182.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer183">
     <span class="koboSpan" id="kobo.183.1">
      <img alt="Figure 11.1 – Finished gym" src="image/Figure_11.1_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.184.1">
     Figure 11.1 – Finished gym
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.185.1">
     It’s now time to set up the AI controller for the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.186.1">
      AI agent.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-225">
    <a id="_idTextAnchor227">
    </a>
    <span class="koboSpan" id="kobo.187.1">
     Creating the AI controller
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.188.1">
     The second step is
    </span>
    <a id="_idIndexMarker573">
    </a>
    <span class="koboSpan" id="kobo.189.1">
     to create a dedicated behavior tree and an AI controller, so do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.190.1">
      the following:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.191.1">
      In the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.192.1">
       AI
      </span>
     </strong>
     <span class="koboSpan" id="kobo.193.1">
      folder, create a new behavior tree and call
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.194.1">
       it
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.195.1">
        BT_EQSGunnerDummy
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.196.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.197.1">
      In the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.198.1">
       Blueprints
      </span>
     </strong>
     <span class="koboSpan" id="kobo.199.1">
      folder, create a new Blueprint class extending from
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.200.1">
       BaseDummyAIController
      </span>
     </strong>
     <span class="koboSpan" id="kobo.201.1">
      , name it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.202.1">
       AIEQSGunnerDummyController
      </span>
     </strong>
     <span class="koboSpan" id="kobo.203.1">
      , and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.204.1">
       open it.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.205.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.206.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.207.1">
      panel, look for the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.208.1">
       Dummy AI Controller
      </span>
     </strong>
     <span class="koboSpan" id="kobo.209.1">
      category and set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.210.1">
       Behavior Tree
      </span>
     </strong>
     <span class="koboSpan" id="kobo.211.1">
      attribute
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.212.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.213.1">
        BT_EQSGunnerDummy
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.214.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.215.1">
      Select the gunner dummy in the level and set its
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.216.1">
       AI Controller Class
      </span>
     </strong>
     <span class="koboSpan" id="kobo.217.1">
      attribute
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.218.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.219.1">
        AIEQSGunnerDummyController
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.220.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.221.1">
     Now that the AI controller and its controller character are properly set, it’s time to set up an environment query that we will be using in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.222.1">
      behavior tree.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-226">
    <a id="_idTextAnchor228">
    </a>
    <span class="koboSpan" id="kobo.223.1">
     Creating an environment query
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.224.1">
     We are now going to
    </span>
    <a id="_idIndexMarker574">
    </a>
    <span class="koboSpan" id="kobo.225.1">
     create an environment query that will look for a viable target in the level.
    </span>
    <span class="koboSpan" id="kobo.225.2">
     This is going to be pretty similar to the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.226.1">
      FindAvailableTarget
     </span>
    </strong>
    <span class="koboSpan" id="kobo.227.1">
     task we implemented in
    </span>
    <a href="B31016_09.xhtml#_idTextAnchor170">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.228.1">
        Chapter 9
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.229.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.230.1">
      Extending Behavior Trees
     </span>
    </em>
    <span class="koboSpan" id="kobo.231.1">
     , with a couple of differences; we will be searching for instances of a particular class and the target will need to be in line of sight with the gunner.
    </span>
    <span class="koboSpan" id="kobo.231.2">
     Additionally, we won’t be writing a single line of code.
    </span>
    <span class="koboSpan" id="kobo.231.3">
     So, let’s start by doing the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.232.1">
      following steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.233.1">
      In the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.234.1">
       AI
      </span>
     </strong>
     <span class="koboSpan" id="kobo.235.1">
      folder, right-right click and select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.236.1">
       Artificial Intelligence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.237.1">
      |
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.238.1">
       Environment Query
      </span>
     </strong>
     <span class="koboSpan" id="kobo.239.1">
      to create one
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.240.1">
       such asset.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.241.1">
      Name the newly created asset
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.242.1">
       EQS_FindTarget
      </span>
     </strong>
     <span class="koboSpan" id="kobo.243.1">
      and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.244.1">
       open it.
      </span>
     </span>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.245.1">
       You will be presented with a graph named
      </span>
      <strong class="bold">
       <span class="koboSpan" id="kobo.246.1">
        Query Graph
       </span>
      </strong>
      <span class="koboSpan" id="kobo.247.1">
       (pretty similar to the behavior tree one) that will let you implement your
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.248.1">
        own query.
       </span>
      </span>
     </p>
    </li>
    <li>
     <span class="koboSpan" id="kobo.249.1">
      Click and drag from the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.250.1">
       ROOT
      </span>
     </strong>
     <span class="koboSpan" id="kobo.251.1">
      node and add an
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.252.1">
       Actors of Class
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.253.1">
       generator node.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.254.1">
      Select the newly created node and, in the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.255.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.256.1">
      panel, do
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.257.1">
       the following:
      </span>
     </span>
     <ul>
      <li>
       <span class="koboSpan" id="kobo.258.1">
        Set the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.259.1">
         Searched Actor Class
        </span>
       </strong>
       <span class="koboSpan" id="kobo.260.1">
        attribute
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.261.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.262.1">
          BP_Target
         </span>
        </strong>
       </span>
      </li>
      <li>
       <span class="koboSpan" id="kobo.263.1">
        Set the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.264.1">
         Search Radius
        </span>
       </strong>
       <span class="koboSpan" id="kobo.265.1">
        attribute
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.266.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.267.1">
          3000.0
         </span>
        </strong>
       </span>
      </li>
     </ul>
    </li>
    <li>
     <span class="koboSpan" id="kobo.268.1">
      Right-click on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.269.1">
       ActorsOfClass
      </span>
     </strong>
     <span class="koboSpan" id="kobo.270.1">
      node and select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.271.1">
       Add Test
      </span>
     </strong>
     <span class="koboSpan" id="kobo.272.1">
      |
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.273.1">
       Trace
      </span>
     </strong>
     <span class="koboSpan" id="kobo.274.1">
      ; a test will be added inside
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.275.1">
       the node.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.276.1">
      Select the test and, in the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.277.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.278.1">
      panel, do
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.279.1">
       the following:
      </span>
     </span>
     <ul>
      <li>
       <span class="koboSpan" id="kobo.280.1">
        Set the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.281.1">
         Test Purpose
        </span>
       </strong>
       <span class="koboSpan" id="kobo.282.1">
        attribute to
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.283.1">
          Filter Only
         </span>
        </strong>
       </span>
      </li>
      <li>
       <span class="koboSpan" id="kobo.284.1">
        Set the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.285.1">
         Item Height Offset
        </span>
       </strong>
       <span class="koboSpan" id="kobo.286.1">
        attribute
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.287.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.288.1">
          50.0
         </span>
        </strong>
       </span>
      </li>
      <li>
       <span class="koboSpan" id="kobo.289.1">
        Set the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.290.1">
         Context Height Offset
        </span>
       </strong>
       <span class="koboSpan" id="kobo.291.1">
        attribute
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.292.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.293.1">
          50.0
         </span>
        </strong>
       </span>
      </li>
     </ul>
    </li>
    <li>
     <span class="koboSpan" id="kobo.294.1">
      Uncheck
     </span>
     <a id="_idIndexMarker575">
     </a>
     <span class="koboSpan" id="kobo.295.1">
      the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.296.1">
       Bool
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.297.1">
        Match
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.298.1">
       attribute.
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.299.1">
     The complete graph for the environment query is depicted in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.300.1">
       Figure 11
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.301.1">
       .2
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.302.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer184">
     <span class="koboSpan" id="kobo.303.1">
      <img alt="Figure 11.2 – Finished environment query" src="image/Figure_11.2_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.304.1">
     Figure 11.2 – Finished environment query
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.305.1">
     What we have done here obviously needs some explanation; we have added a generator that will look for all actors of a certain class –
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.306.1">
      BP_Target
     </span>
    </strong>
    <span class="koboSpan" id="kobo.307.1">
     – that are near the querier (the AI agent executing this environment query).
    </span>
    <span class="koboSpan" id="kobo.307.2">
     Only the items that are in line of sight with the queries will pass the trace test and so they will be the only ones that will be considered for selecting a viable target.
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.308.1">
      Test Purpose
     </span>
    </strong>
    <span class="koboSpan" id="kobo.309.1">
     has been set to
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.310.1">
      Filter Only
     </span>
    </strong>
    <span class="koboSpan" id="kobo.311.1">
     because we only need to
    </span>
    <a id="_idIndexMarker576">
    </a>
    <span class="koboSpan" id="kobo.312.1">
     have a list of Items and are not interested in their importance – or
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.313.1">
      score
     </span>
    </strong>
    <span class="koboSpan" id="kobo.314.1">
     – in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.315.1">
      the search.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.316.1">
     Now that the environment query has been defined, we can start implementing the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.317.1">
      behavior tree.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-227">
    <a id="_idTextAnchor229">
    </a>
    <span class="koboSpan" id="kobo.318.1">
     Handling environment queries within a behavior tree
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.319.1">
     We are
    </span>
    <a id="_idIndexMarker577">
    </a>
    <span class="koboSpan" id="kobo.320.1">
     now ready to implement the
    </span>
    <a id="_idIndexMarker578">
    </a>
    <span class="koboSpan" id="kobo.321.1">
     behavior tree, which, as you will see, shows some similarities with the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.322.1">
      BT_GunnerDummy
     </span>
    </strong>
    <span class="koboSpan" id="kobo.323.1">
     asset; the only difference is the way we get possible targets.
    </span>
    <span class="koboSpan" id="kobo.323.2">
     For this reason, we will be using the same Blackboard as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.324.1">
      BT_GunnerDummy
     </span>
    </strong>
    <span class="koboSpan" id="kobo.325.1">
     .
    </span>
    <span class="koboSpan" id="kobo.325.2">
     So, without further ado, open
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.326.1">
      BT_EQSGunnerDummy
     </span>
    </strong>
    <span class="koboSpan" id="kobo.327.1">
     and, in the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.328.1">
      Details
     </span>
    </strong>
    <span class="koboSpan" id="kobo.329.1">
     panel, set the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.330.1">
      Blackboard Asset
     </span>
    </strong>
    <span class="koboSpan" id="kobo.331.1">
     attribute
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.332.1">
      to
     </span>
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.333.1">
       BB_GunnerDummy
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.334.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.335.1">
     Now, focus on the behavior tree graph and do the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.336.1">
      following steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.337.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.338.1">
       Selector
      </span>
     </strong>
     <span class="koboSpan" id="kobo.339.1">
      node to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.340.1">
       ROOT
      </span>
     </strong>
     <span class="koboSpan" id="kobo.341.1">
      node and name it
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.342.1">
        Root Selector
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.343.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.344.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.345.1">
       Sequence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.346.1">
      node to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.347.1">
       Root Selector
      </span>
     </strong>
     <span class="koboSpan" id="kobo.348.1">
      node and name it
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.349.1">
        Shoot Sequence
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.350.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.351.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.352.1">
       Blackboard
      </span>
     </strong>
     <span class="koboSpan" id="kobo.353.1">
      decorator to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.354.1">
       Shoot Sequence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.355.1">
      node and name it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.356.1">
       Has Ammo?
      </span>
     </strong>
     <span class="koboSpan" id="kobo.357.1">
      .
     </span>
     <span class="koboSpan" id="kobo.357.2">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.358.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.359.1">
      panel, do
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.360.1">
       the following:
      </span>
     </span>
     <ul>
      <li>
       <span class="koboSpan" id="kobo.361.1">
        Set the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.362.1">
         Notify Observers
        </span>
       </strong>
       <span class="koboSpan" id="kobo.363.1">
        attribute to
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.364.1">
         On
        </span>
       </strong>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.365.1">
          Value Change
         </span>
        </strong>
       </span>
      </li>
      <li>
       <span class="koboSpan" id="kobo.366.1">
        Set the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.367.1">
         Key Query
        </span>
       </strong>
       <span class="koboSpan" id="kobo.368.1">
        attribute to
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.369.1">
         Is
        </span>
       </strong>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.370.1">
          Not Set
         </span>
        </strong>
       </span>
      </li>
      <li>
       <span class="koboSpan" id="kobo.371.1">
        Set the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.372.1">
         Blackboard Key
        </span>
       </strong>
       <span class="koboSpan" id="kobo.373.1">
        attribute
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.374.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.375.1">
          NeedsReload
         </span>
        </strong>
       </span>
      </li>
     </ul>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.376.1">
       The graph so far should look like the one shown in
      </span>
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.377.1">
         Figure 11
        </span>
       </em>
      </span>
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.378.1">
         .3
        </span>
       </em>
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.379.1">
        :
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer185">
     <span class="koboSpan" id="kobo.380.1">
      <img alt="Figure 11.3 – Starting graph" src="image/Figure_11.3_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.381.1">
     Figure 11.3 – Starting graph
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.382.1">
     Now, let’s connect the environment query to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.383.1">
      the graph.
     </span>
    </span>
   </p>
   <ol>
    <li value="4">
     <span class="koboSpan" id="kobo.384.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.385.1">
       Run EQSQuery
      </span>
     </strong>
     <span class="koboSpan" id="kobo.386.1">
      task to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.387.1">
       Shoot Sequence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.388.1">
      and name it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.389.1">
       Find
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.390.1">
        Visible Target
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.391.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.392.1">
      With the task selected, do the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.393.1">
       following steps:
      </span>
     </span>
     <ul>
      <li>
       <span class="koboSpan" id="kobo.394.1">
        Set the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.395.1">
         Query Template
        </span>
       </strong>
       <span class="koboSpan" id="kobo.396.1">
        attribute
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.397.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.398.1">
          EQS_FindTarget
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.399.1">
         .
        </span>
       </span>
      </li>
      <li>
       <span class="koboSpan" id="kobo.400.1">
        Set the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.401.1">
         Run Mode
        </span>
       </strong>
       <span class="koboSpan" id="kobo.402.1">
        attribute to
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.403.1">
         Single Random Item from
        </span>
       </strong>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.404.1">
          Best 25%
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.405.1">
         .
        </span>
       </span>
      </li>
      <li>
       <span class="koboSpan" id="kobo.406.1">
        Set the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.407.1">
         Blackboard Key
        </span>
       </strong>
       <span class="koboSpan" id="kobo.408.1">
        attribute
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.409.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.410.1">
          TargetActor
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.411.1">
         .
        </span>
       </span>
      </li>
     </ul>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.412.1">
       What we are doing here is executing the environment query and, once the resulting items are returned, we select a random one and assign it to the
      </span>
      <strong class="bold">
       <span class="koboSpan" id="kobo.413.1">
        TargetActor
       </span>
      </strong>
      <span class="koboSpan" id="kobo.414.1">
       key of the Blackboard so it will be available to the behavior tree.
      </span>
      <span class="koboSpan" id="kobo.414.2">
       Now, let’s continue our
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.415.1">
        AI logic.
       </span>
      </span>
     </p>
    </li>
    <li>
     <span class="koboSpan" id="kobo.416.1">
      Add
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.417.1">
       RotateToFaceBBEntry
      </span>
     </strong>
     <span class="koboSpan" id="kobo.418.1">
      to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.419.1">
       Shoot Sequence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.420.1">
      at the right of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.421.1">
       Find Visible Target
      </span>
     </strong>
     <span class="koboSpan" id="kobo.422.1">
      node and name it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.423.1">
       Rotate
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.424.1">
        Towards Target
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.425.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.426.1">
      Select the newly created node and set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.427.1">
       Blackboard Key
      </span>
     </strong>
     <span class="koboSpan" id="kobo.428.1">
      attribute
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.429.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.430.1">
        TargetActor
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.431.1">
       .
      </span>
     </span>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.432.1">
       You should be already familiar with this portion of the graph; we are simply rotating the AI agent toward the target, in order to be ready
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.433.1">
        to shoot.
       </span>
      </span>
     </p>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.434.1">
       Let’s go
      </span>
      <a id="_idIndexMarker579">
      </a>
      <span class="koboSpan" id="kobo.435.1">
       on with
      </span>
      <a id="_idIndexMarker580">
      </a>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.436.1">
        the graph.
       </span>
      </span>
     </p>
    </li>
    <li>
     <span class="koboSpan" id="kobo.437.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.438.1">
       Play Montage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.439.1">
      node to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.440.1">
       Shoot Sequence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.441.1">
      node, at the right of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.442.1">
       Rotate Towards Target
      </span>
     </strong>
     <span class="koboSpan" id="kobo.443.1">
      node and name it
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.444.1">
        Shoot Montage
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.445.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.446.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.447.1">
       Anim Montage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.448.1">
      property
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.449.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.450.1">
        AM_1H_Shoot
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.451.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.452.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.453.1">
       Set Ammo
      </span>
     </strong>
     <span class="koboSpan" id="kobo.454.1">
      service to the node and name it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.455.1">
       Deplete Ammo
      </span>
     </strong>
     <span class="koboSpan" id="kobo.456.1">
      .
     </span>
     <span class="koboSpan" id="kobo.456.2">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.457.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.458.1">
      panel, do the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.459.1">
       following steps:
      </span>
     </span>
     <ul>
      <li>
       <span class="koboSpan" id="kobo.460.1">
        Set the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.461.1">
         Needs Reload
        </span>
       </strong>
       <span class="koboSpan" id="kobo.462.1">
        property
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.463.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.464.1">
          NeedsReload
         </span>
        </strong>
       </span>
      </li>
      <li>
       <span class="koboSpan" id="kobo.465.1">
        Check the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.466.1">
         Key
        </span>
       </strong>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.467.1">
          Value
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.468.1">
         property
        </span>
       </span>
      </li>
     </ul>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.469.1">
       This will start the shooting animation montage and, subsequently, will spawn
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.470.1">
        a projectile.
       </span>
      </span>
     </p>
    </li>
    <li>
     <span class="koboSpan" id="kobo.471.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.472.1">
       Wait
      </span>
     </strong>
     <span class="koboSpan" id="kobo.473.1">
      task to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.474.1">
       Shoot Sequence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.475.1">
      at the right of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.476.1">
       Shoot Montage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.477.1">
      node, setting the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.478.1">
       Wait Time
      </span>
     </strong>
     <span class="koboSpan" id="kobo.479.1">
      attribute to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.480.1">
       2.0
      </span>
     </strong>
     <span class="koboSpan" id="kobo.481.1">
      and the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.482.1">
       Random Deviation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.483.1">
      attribute
     </span>
     <a id="_idIndexMarker581">
     </a>
     <span class="koboSpan" id="kobo.484.1">
      to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.485.1">
       0.5
      </span>
     </strong>
     <span class="koboSpan" id="kobo.486.1">
      .
     </span>
     <span class="koboSpan" id="kobo.486.2">
      This portion of the
     </span>
     <a id="_idIndexMarker582">
     </a>
     <span class="koboSpan" id="kobo.487.1">
      graph should look like the one depicted in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.488.1">
        Figure 11
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.489.1">
        .4
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.490.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer186">
     <span class="koboSpan" id="kobo.491.1">
      <img alt="Figure 11.4 – Shoot sequence" src="image/Figure_11.4_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.492.1">
     Figure 11.4 – Shoot sequence
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.493.1">
     We now need to create the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.494.1">
      reload sequence.
     </span>
    </span>
   </p>
   <ol>
    <li value="12">
     <span class="koboSpan" id="kobo.495.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.496.1">
       Sequence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.497.1">
      node to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.498.1">
       Root Selector
      </span>
     </strong>
     <span class="koboSpan" id="kobo.499.1">
      at the right of
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.500.1">
       Shoot Sequence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.501.1">
      and name it
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.502.1">
        Reload Sequence
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.503.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.504.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.505.1">
       Play Montage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.506.1">
      node to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.507.1">
       Reload Sequence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.508.1">
      node and name it
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.509.1">
        Reload Montage
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.510.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.511.1">
      Set the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.512.1">
       Anim Montage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.513.1">
      property
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.514.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.515.1">
        AM_1H_Reload
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.516.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.517.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.518.1">
       Set Ammo
      </span>
     </strong>
     <span class="koboSpan" id="kobo.519.1">
      service to the node and name it
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.520.1">
       Refill Ammo
      </span>
     </strong>
     <span class="koboSpan" id="kobo.521.1">
      .
     </span>
     <span class="koboSpan" id="kobo.521.2">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.522.1">
       Details
      </span>
     </strong>
     <span class="koboSpan" id="kobo.523.1">
      panel, do the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.524.1">
       following steps:
      </span>
     </span>
     <ul>
      <li>
       <span class="koboSpan" id="kobo.525.1">
        Set the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.526.1">
         Needs Reload
        </span>
       </strong>
       <span class="koboSpan" id="kobo.527.1">
        property
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.528.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.529.1">
          NeedsReload
         </span>
        </strong>
       </span>
      </li>
      <li>
       <span class="koboSpan" id="kobo.530.1">
        Leave the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.531.1">
         Key Value
        </span>
       </strong>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.532.1">
         property unchecked
        </span>
       </span>
      </li>
     </ul>
    </li>
    <li>
     <span class="koboSpan" id="kobo.533.1">
      Add a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.534.1">
       Wait
      </span>
     </strong>
     <span class="koboSpan" id="kobo.535.1">
      task to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.536.1">
       Reload Sequence
      </span>
     </strong>
     <span class="koboSpan" id="kobo.537.1">
      at the right of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.538.1">
       Reload Montage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.539.1">
      node, setting the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.540.1">
       Wait Time
      </span>
     </strong>
     <span class="koboSpan" id="kobo.541.1">
      attribute to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.542.1">
       2.0
      </span>
     </strong>
     <span class="koboSpan" id="kobo.543.1">
      and the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.544.1">
       Random Deviation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.545.1">
      attribute
     </span>
     <a id="_idIndexMarker583">
     </a>
     <span class="koboSpan" id="kobo.546.1">
      to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.547.1">
       0.5
      </span>
     </strong>
     <span class="koboSpan" id="kobo.548.1">
      .
     </span>
     <span class="koboSpan" id="kobo.548.2">
      This portion of the graph
     </span>
     <a id="_idIndexMarker584">
     </a>
     <span class="koboSpan" id="kobo.549.1">
      is depicted in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.550.1">
        Figure 11
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.551.1">
        .5
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.552.1">
       :
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer187">
     <span class="koboSpan" id="kobo.553.1">
      <img alt="Figure 11.5 – Reload sequence" src="image/Figure_11.5_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.554.1">
     Figure 11.5 – Reload sequence
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.555.1">
     The behavior tree is now finished and ready to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.556.1">
      be used.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.557.1">
     In this section, we showed how to integrate an environment query inside a behavior tree; in the next section, we will be testing its functionality, and I will show you how to use the debugging tools
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.558.1">
      with it.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-228">
    <a id="_idTextAnchor230">
    </a>
    <span class="koboSpan" id="kobo.559.1">
     Displaying EQS information
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.560.1">
     To test your gym, just start the
    </span>
    <a id="_idIndexMarker585">
    </a>
    <span class="koboSpan" id="kobo.561.1">
     simulation; you should notice the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.562.1">
      following behavior:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.563.1">
      The AI agent will shoot at a target and then reload
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.564.1">
       the weapon
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.565.1">
      The AI agent will avoid shooting at targets that are not in the line
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.566.1">
       of sight
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.567.1">
     This behavior should go on indefinitely; that’s perfectly fine as the gunner is looking for targets by searching for the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.568.1">
      BP_Target
     </span>
    </strong>
    <span class="koboSpan" id="kobo.569.1">
     class.
    </span>
    <span class="koboSpan" id="kobo.569.2">
     To improve the gym, you may wish to implement some extra logic, such as a destroy system for targets that have been hit or a points counter for each target that has
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.570.1">
      been hit.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.571.1">
     To show on the screen what’s happening, you will need to enable the debugging tools, as explained in
    </span>
    <a href="B31016_06.xhtml#_idTextAnchor116">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.572.1">
        Chapter 6
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.573.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.574.1">
      Optimizing the Navigation System
     </span>
    </em>
    <span class="koboSpan" id="kobo.575.1">
     .
    </span>
    <span class="koboSpan" id="kobo.575.2">
     Once the debugging tools are enabled, you will just need to hit the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.576.1">
      3
     </span>
    </em>
    <span class="koboSpan" id="kobo.577.1">
     key on your numpad to show the EQS information and then select the AI agent; in our case, you should see a set of information similar to the one depicted in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.578.1">
       Figure 11
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.579.1">
       .6
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.580.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer188">
     <span class="koboSpan" id="kobo.581.1">
      <img alt="Figure 11.6 – EQS debugging" src="image/Figure_11.6_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.582.1">
     Figure 11.6 – EQS debugging
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.583.1">
     Obviously, each
    </span>
    <a id="_idIndexMarker586">
    </a>
    <span class="koboSpan" id="kobo.584.1">
     environment query will have its own information.
    </span>
    <span class="koboSpan" id="kobo.584.2">
     In this example, you will notice that each target will show some data and a red wireframe, and the selected target will be marked as a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.585.1">
      Winner
     </span>
    </strong>
    <span class="koboSpan" id="kobo.586.1">
     , as shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.587.1">
       Figure 11
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.588.1">
       .7
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.589.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer189">
     <span class="koboSpan" id="kobo.590.1">
      <img alt="Figure 11.7 – Selected target" src="image/Figure_11.7_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.591.1">
     Figure 11.7 – Selected target
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.592.1">
     Targets that won’t be in the line of sight with the querier will be labeled as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.593.1">
      Trace(0)
     </span>
    </strong>
    <span class="koboSpan" id="kobo.594.1">
     to show that the trace failed, as shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.595.1">
       Figure 11
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.596.1">
       .8
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.597.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer190">
     <span class="koboSpan" id="kobo.598.1">
      <img alt="Figure 11.8 – Target not in the line of sight" src="image/Figure_11.8_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.599.1">
     Figure 11.8 – Target not in the line of sight
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.600.1">
     If you want more
    </span>
    <a id="_idIndexMarker587">
    </a>
    <span class="koboSpan" id="kobo.601.1">
     detailed information for each item in the query, as shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.602.1">
       Figure 11
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.603.1">
      .9
     </span>
    </em>
    <span class="koboSpan" id="kobo.604.1">
     , you may want to hit the divide key (
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.605.1">
      /
     </span>
    </em>
    <span class="koboSpan" id="kobo.606.1">
     ) from
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.607.1">
      the numpad:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer191">
     <span class="koboSpan" id="kobo.608.1">
      <img alt="Figure 11.9 – Detailed information" src="image/Figure_11.9_B31016.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.609.1">
     Figure 11.9 – Detailed information
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.610.1">
     I highly encourage you to create your own queries and test them in the level.
    </span>
    <span class="koboSpan" id="kobo.610.2">
     Using the debugging tools can be a significant time-saver during the development of your project.
    </span>
    <span class="koboSpan" id="kobo.610.3">
     Take full advantage of these tools to streamline your workflow and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.611.1">
      enhance efficiency.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-229">
    <a id="_idTextAnchor231">
    </a>
    <span class="koboSpan" id="kobo.612.1">
     Summary
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.613.1">
     In this chapter, we saw a new way – although experimental – to let your AI agents probe the level and gather information in order to make
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.614.1">
      meaningful decisions.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.615.1">
     Beginning with a bit of theory, we created an environment query, developed a fully operational behavior tree utilizing environment queries effectively, and tested it in a gym setting.
    </span>
    <span class="koboSpan" id="kobo.615.2">
     Furthermore, we explored the use of debugging tools to analyze the activities within
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.616.1">
      the level.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.617.1">
     This concludes
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.618.1">
      Part 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.619.1">
     of this book.
    </span>
    <span class="koboSpan" id="kobo.619.2">
     In the upcoming chapters, we will delve into new features within the AI framework, beginning with a glimpse at an alternative method of implementing AI agents: hierarchical
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.620.1">
      state machines.
     </span>
    </span>
   </p>
  </div>
 

  <div class="Content" id="_idContainer193">
   <h1 id="_idParaDest-230" lang="en-US" xml:lang="en-US">
    <a id="_idTextAnchor232">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     Part 4: Exploring Advanced Topics
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.2.1">
     In the fourth part of this book, you will be presented with some cutting-edge and experimental AI features within the Unreal Engine ecosystem.
    </span>
    <span class="koboSpan" id="kobo.2.2">
     Additionally, you will gain knowledge on how to integrate these features within your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.3.1">
      own projects.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.4.1">
     This part includes the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.5.1">
      following chapters:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <a href="B31016_12.xhtml#_idTextAnchor233">
      <em class="italic">
       <span class="koboSpan" id="kobo.6.1">
        Chapter 12
       </span>
      </em>
     </a>
     <span class="koboSpan" id="kobo.7.1">
      ,
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.8.1">
       Using Hierarchical State Machines with State Trees
      </span>
     </em>
    </li>
    <li>
     <a href="B31016_13.xhtml#_idTextAnchor251">
      <em class="italic">
       <span class="koboSpan" id="kobo.9.1">
        Chapter 13
       </span>
      </em>
     </a>
     <span class="koboSpan" id="kobo.10.1">
      ,
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.11.1">
       Implementing Data-Oriented Calculations with Mass
      </span>
     </em>
    </li>
    <li>
     <a href="B31016_14.xhtml#_idTextAnchor270">
      <em class="italic">
       <span class="koboSpan" id="kobo.12.1">
        Chapter 14
       </span>
      </em>
     </a>
     <span class="koboSpan" id="kobo.13.1">
      ,
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.14.1">
       Implementing Interactable Elements with Smart Objects
      </span>
     </em>
    </li>
   </ul>
  </div>
  <div>
   <div id="_idContainer194">
   </div>
  </div>
  <div>
   <div class="Basic-Graphics-Frame" id="_idContainer195">
   </div>
  </div>
 </body></html>