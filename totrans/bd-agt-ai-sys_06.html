<html><head></head><body>
  <div><h1 class="chapter-number" id="_idParaDest-128">
    <a id="_idTextAnchor138">
    </a>
    
     6
    
   </h1>
   <h1 id="_idParaDest-129">
    <a id="_idTextAnchor139">
    </a>
    
     Exploring the Coordinator, Worker, and Delegator Approach
    
   </h1>
   <p>
    
     In the previous chapter, we looked into the concepts of tool use and planning, which lay an essential foundation for intelligent agents to enhance their problem-solving capabilities.
    
    
     We explored various planning algorithms, including state space search techniques and
    
    <strong class="bold">
     
      hierarchical task networks
     
    </strong>
    
     (
    
    <strong class="bold">
     
      HTNs
     
    </strong>
    
     ), and examined how these algorithms
    
    <a id="_idIndexMarker469">
    </a>
    
     can be seamlessly integrated with external tools and resources to enable agents to
    
    
     
      perform optimally.
     
    
   </p>
   <p>
    
     Building upon this foundation, in this chapter, we will ground our understanding by exploring
    
    <a id="_idIndexMarker470">
    </a>
    
     a powerful organizational framework for intelligent agents: the
    
    <strong class="bold">
     
      coordinator-worker-delegator
     
    </strong>
    
     (
    
    <strong class="bold">
     
      CWD
     
    </strong>
    
     ) approach.
    
    
     This chapter is divided into the following
    
    
     
      main sections:
     
    
   </p>
   <ul>
    <li>
     
      Understanding the
     
     
      
       CWD model
      
     
    </li>
    <li>
     
      Designing agents with
     
     
      
       role assignments
      
     
    </li>
    <li>
     
      Communication and collaboration
     
     
      
       between agents
      
     
    </li>
    <li>
     
      Implementing the CWD approach in generative
     
     
      
       AI systems
      
     
    </li>
   </ul>
   <p>
    
     By the end of this chapter, you will have a comprehensive understanding of how to design and implement multi-agent systems using the CWD approach.
    
    
     You’ll know how to effectively assign roles to different agents, establish robust communication protocols between them, and orchestrate their interactions to tackle
    
    
     
      complex problems.
     
    
   </p>
   <h1 id="_idParaDest-130">
    <a id="_idTextAnchor140">
    </a>
    
     Technical requirements
    
   </h1>
   <p>
    
     You can find the code file for this chapter on GitHub at
    
    <a href="https://github.com/PacktPublishing/Building-Agentic-AI-Systems">
     
      https://github.com/PacktPublishing/Building-Agentic-AI-Systems
     
    </a>
    
     .
    
    
     In this chapter, we will also use the Python frameworks that we have already used in previous chapters to demonstrate the various aspects of the CWD approach and
    
    
     
      agent roles.
     
    
   </p>
   <h1 id="_idParaDest-131">
    <a id="_idTextAnchor141">
    </a>
    
     Understanding the CWD model
    
   </h1>
   <p>
    
     The CWD model is a comprehensive framework designed to facilitate the development of multi-agent systems, emphasizing collaboration, specialization, and effective distribution of
    
    <a id="_idIndexMarker471">
    </a>
    
     tasks and resource management.
    
    
     Just as human organizations benefit from clear role delegation and hierarchical structures, intelligent agents can achieve greater effectiveness through thoughtful division of labor.
    
    
     The CWD framework, as shown in
    
    
     <em class="italic">
      
       Figure 6
      
     </em>
    
    <em class="italic">
     
      .1
     
    </em>
    
     , draws inspiration from organizational psychology and management theory, adapting proven principles of human coordination to the field of intelligent agents.
    
    
     This approach is particularly valuable as agent systems grow in complexity and need to handle increasingly intricate tasks that require multiple specialized capabilities working in concert.
    
    
     This model is particularly well suited for environments where autonomous agents must collaborate to achieve complex objectives that may be beyond the capabilities of a
    
    
     
      single agent.
     
    
   </p>
   <div><div><img alt="img" role="presentation" src="img/B31483_06_01.jpg"/>
     
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    
     Figure 6.1 – The CWD model
    
   </p>
   <p>
    
     The CWD model establishes three distinct roles that work together to accomplish
    
    
     
      complex tasks:
     
    
   </p>
   <ul>
    <li>
     <strong class="bold">
      
       Coordinators
      
     </strong>
     
      : Coordinators are agents responsible for managing tasks, resources, and the
     
     <a id="_idIndexMarker472">
     </a>
     
      overall workflow of the system.
     
     
      Their primary responsibilities encompass facilitating progress monitoring, assigning tasks to appropriate agents, and enabling effective collaboration among workers.
     
     
      coordinators play a crucial role in ensuring smooth operations and keeping the system aligned with its objectives.
     
     
      They act as orchestrators, overseeing the entire process and coordinating the various components to work in harmony.
     
     
      Coordinators prioritize workloads by dynamically allocating tasks based on urgency, resource availability, and dependencies.
     
     
      They monitor progress, adjust assignments as needed, and ensure seamless collaboration among agents.
     
     
      By optimizing task distribution and workflow execution, they maintain system efficiency and alignment with
     
     
      
       overall objectives.
      
     
    </li>
    <li>
     <strong class="bold">
      
       Workers
      
     </strong>
     
      : Workers are
     
     <a id="_idIndexMarker473">
     </a>
     
      specialized agents dedicated to carrying out specific tasks or functions within the system.
     
     
      These agents possess diverse capabilities and expertise, reflecting a broad range of skills that can be applied to various tasks.
     
     
      When assigned a task by the delegators, workers leverage their specialized knowledge and proficiency to efficiently realize the task’s objectives.
     
     
      The diversity of worker agents allows for a division of l
     
     <a id="_idIndexMarker474">
     </a>
     
      abor and the allocation of tasks to the most suitable agents, optimizing the system’s
     
     
      
       overall performance.
      
     
    </li>
    <li>
     <strong class="bold">
      
       Delegators
      
     </strong>
     
      : Delegators serve as intermediaries between coordinators and workers, responsible for implementing workload assignments to workers based on resource
     
     <a id="_idIndexMarker475">
     </a>
     
      availability and system needs.
     
     
      They act as interfaces, facilitating the communication and coordination between the coordinators and workers.
     
     
      delegators play a crucial role in dispatching and balancing the workload across multiple workers, ensuring that tasks are assigned to the appropriate agents in a timely and efficient manner.
     
     
      The most critical function of delegators is optimizing overall performance by assigning tasks to the right workers at the right time, considering their capabilities and the system’s constraints.
     
     
      Delegators optimize performance by balancing
     
     <strong class="bold">
      
       throughput
      
     </strong>
     
      ,
     
     <strong class="bold">
      
       latency
      
     </strong>
     
      , and
     
     <strong class="bold">
      
       resource utilization
      
     </strong>
     
      .
     
     
      They ensure tasks are assigned efficiently to minimize delays (low latency), maximize completed tasks per unit time (high throughput), and prevent resource bottlenecks (optimal resource utilization).
     
     
      By dynamically adjusting assignments based on worker capacity and system constraints, they enhance overall efficiency
     
     
      
       and responsiveness.
      
     
    </li>
   </ul>
   <p>
    
     The CWD model defines distinct roles—coordinators, workers, and delegators—that work together to enhance system efficiency and collaboration.
    
    
     By structuring task allocation, communication, and execution, it ensures operational harmony, driven by key principles that underpin
    
    
     
      its effectiveness.
     
    
   </p>
   <h2 id="_idParaDest-132">
    <a id="_idTextAnchor142">
    </a>
    
     Key principles of the CWD model
    
   </h2>
   <p>
    
     The CWD
    
    <a id="_idIndexMarker476">
    </a>
    
     model is founded on several key principles that guide its design
    
    
     
      and implementation:
     
    
   </p>
   <ul>
    <li>
     <strong class="bold">
      
       Separation of concerns
      
     </strong>
     
      : The fundamental philosophy behind CWD is the clear separation of responsibilities between strategic planning (coordinator), resource management (delegator), and task execution (worker).
     
     
      This separation allows each component to focus on its core competencies while maintaining system flexibility
     
     
      
       and scalability.
      
     
    </li>
    <li>
     <strong class="bold">
      
       Hierarchical organization
      
     </strong>
     
      : The model implements a hierarchical structure that
     
     <a id="_idIndexMarker477">
     </a>
     
      mirrors successful organizational patterns found in
     
     
      
       human institutions:
      
     
     <ul>
      <li>
       <strong class="bold">
        
         Top level
        
       </strong>
       
        : Strategic oversight
       
       
        
         and planning
        
       
      </li>
      <li>
       <strong class="bold">
        
         Middle level
        
       </strong>
       
        : Resource management
       
       
        
         and coordination
        
       
      </li>
      <li>
       <strong class="bold">
        
         Base level
        
       </strong>
       
        : Specialized
       
       
        
         task execution
        
       
      </li>
     </ul>
    </li>
    <li>
     <strong class="bold">
      
       Information flow and feedback loops
      
     </strong>
     
      : The CWD model emphasizes bidirectional
     
     
      
       communication flows:
      
     
     <ul>
      <li>
       <strong class="bold">
        
         Downward flow
        
       </strong>
       
        : Task
       
       <a id="_idIndexMarker478">
       </a>
       
        assignments, priorities,
       
       
        
         and constraints
        
       
      </li>
      <li>
       <strong class="bold">
        
         Upward flow
        
       </strong>
       
        : Progress
       
       <a id="_idIndexMarker479">
       </a>
       
        updates, results, and
       
       
        
         resource utilization
        
       
      </li>
     </ul>
    </li>
    <li>
     <strong class="bold">
      
       Adaptability and resilience
      
     </strong>
     
      : The model is designed to be inherently adaptable through
     
     
      
       the following:
      
     
     <ul>
      <li>
       <strong class="bold">
        
         Dynamic resource allocation
        
       </strong>
       
        : Agents continuously assess workload demands and redistribute computational or operational resources in real time to optimize efficiency and
       
       
        
         prevent bottlenecks
        
       
      </li>
      <li>
       <strong class="bold">
        
         Fault tolerance through redundancy
        
       </strong>
       
        : The system employs multiple agents with overlapping capabilities, allowing seamless handoff and recovery in case of failures, and ensuring
       
       
        
         uninterrupted operations
        
       
      </li>
      <li>
       <strong class="bold">
        
         Load balancing across agents
        
       </strong>
       
        : Tasks are intelligently distributed among agents based on their availability, expertise, and current workload, preventing performance degradation and
       
       
        
         improving responsiveness
        
       
      </li>
      <li>
       <strong class="bold">
        
         Runtime role reassignment
        
       </strong>
       
        : Agents can adapt their roles based on evolving system needs, stepping into different responsibilities as required to maintain workflow continuity and
       
       
        
         operational effectiveness
        
       
      </li>
     </ul>
    </li>
   </ul>
   <p>
    
     These mechanisms
    
    <a id="_idIndexMarker480">
    </a>
    
     collectively enhance the system’s ability to adapt, recover, and function efficiently, even in unpredictable conditions, ensuring sustained performance
    
    
     
      and reliability.
     
    
   </p>
   <p>
    
     The CWD model’s key principles ensure clarity, organization, and adaptability by defining roles, fostering hierarchy, and enabling robust communication.
    
    
     This structured approach enhances efficiency and resilience, making it versatile for various applications, including the development of an intelligent travel
    
    
     
      agent system.
     
    
   </p>
   <h2 id="_idParaDest-133">
    <a id="_idTextAnchor143">
    </a>
    
     The CWD model for the intelligent travel agent
    
   </h2>
   <p>
    
     As an
    
    <a id="_idIndexMarker481">
    </a>
    
     example, let’s discuss how the CWD model may be implemented for the intelligent travel agent system.
    
    
     The overall structure and flow may be
    
    
     
      as follows:
     
    
   </p>
   <ul>
    <li>
     <strong class="bold">
      
       Coordinator agent
      
     </strong>
     
      : This agent will act as the travel planning coordinator.
     
     
      This agent will be responsible for
     
     
      
       the following:
      
     
     <ul>
      <li>
       
        Managing the overall travel planning process based on a
       
       
        
         user request
        
       
      </li>
      <li>
       
        Facilitating progress monitoring and effective collaboration among
       
       
        
         worker agents
        
       
      </li>
      <li>
       
        Assigning tasks and coordinating the workflow based on the customer’s
       
       
        
         travel requirements
        
       
      </li>
     </ul>
    </li>
    <li>
     <strong class="bold">
      
       Worker agents
      
     </strong>
     
      : There can be a number of different agents, each specializing in its own domain and expertise within travel and
     
     
      
       hospitality management:
      
     
     <ul>
      <li>
       <strong class="bold">
        
         Flight booking worker
        
       </strong>
       
        : Specialized in searching for and booking flight options based on travel dates, destinations,
       
       
        
         and preferences
        
       
      </li>
      <li>
       <strong class="bold">
        
         Hotel booking worker
        
       </strong>
       
        : Focused on finding and reserving suitable accommodations based on location, amenities, and
       
       
        
         customer preferences
        
       
      </li>
      <li>
       <strong class="bold">
        
         Activity planning worker
        
       </strong>
       
        : Responsible for researching and planning activities, tours, and experiences at the travel destination, tailored to the
       
       
        
         customer’s interests
        
       
      </li>
      <li>
       <strong class="bold">
        
         Transportation worker
        
       </strong>
       
        : Specialized in arranging ground transportation, such as rental cars, airport transfers, or local
       
       
        
         transportation options
        
       
      </li>
     </ul>
    </li>
    <li>
     <strong class="bold">
      
       Delegator agent
      
     </strong>
     
      : This
     
     <a id="_idIndexMarker482">
     </a>
     
      agent will act as the travel task delegator agent.
     
     
      This agent performs
     
     
      
       the following:
      
     
     <ul>
      <li>
       
        Acts as an interface between the travel planning coordinator and the specialized
       
       
        
         worker agents
        
       
      </li>
      <li>
       
        Receives travel planning tasks from
       
       
        
         the coordinator
        
       
      </li>
      <li>
       
        Assesses the capabilities and availability of
       
       
        
         worker agents
        
       
      </li>
      <li>
       
        Assigns appropriate tasks to the suitable worker agents based on their expertise
       
       
        
         and workload
        
       
      </li>
      <li>
       
        Coordinates and balances the workload among the
       
       
        
         worker agents
        
       
      </li>
     </ul>
     <p class="list-inset">
      
       <em class="italic">
        
         Figure 6
        
       </em>
      
      <em class="italic">
       
        .2
       
      </em>
      
       depicts an extension and adaptation of our previous high-level CWD model diagram to this travel
      
      
       
        planning scenario:
       
      
     </p>
    </li>
   </ul>
   <div><div><img alt="img" role="presentation" src="img/B31483_06_02.jpg"/>
     
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    
     Figure 6.2 – The CWD model for the travel planner
    
   </p>
   <p>
    
     Let’s walk
    
    <a id="_idIndexMarker483">
    </a>
    
     through an example of the user requirement
    
    
     
      and workflow:
     
    
   </p>
   <ol>
    <li>
     
      A user approaches the intelligent travel agent system with their travel requirements, such as destination, travel dates, budget, and preferences (for example, family-friendly, cultural experiences, and
     
     
      
       beach vacation).
      
     
    </li>
    <li>
     
      The travel planning coordinator analyzes the customer’s requirements and breaks down the overall travel planning task into subtasks.
     
     
      This is where the task decomposition happens, as we learned about in the
     
     
      
       previous chapter.
      
     
    </li>
    <li>
     
      The coordinator communicates these subtasks to the travel
     
     
      
       task delegator.
      
     
    </li>
    <li>
     
      The delegator assesses the available worker agents and assigns
     
     
      
       tasks accordingly.
      
     
    </li>
    <li>
     
      The worker agents collaborate and coordinate with each other as needed, sharing relevant information and ensuring a cohesive
     
     
      
       travel plan.
      
     
    </li>
    <li>
     
      The delegator monitors the progress of the tasks and ensures workload balance among the
     
     
      
       worker agents.
      
     
    </li>
    <li>
     
      Once all the tasks are completed, the worker agents submit their respective outputs (for example, flight bookings, hotel reservations, activity itineraries, and transportation arrangements) to
     
     
      
       the delegator.
      
     
    </li>
    <li>
     
      The delegator compiles and integrates the outputs from the worker agents into a comprehensive
     
     
      
       travel plan.
      
     
    </li>
    <li>
     
      The travel planning coordinator reviews the final travel plan, makes any necessary adjustments, and presents it to the customer
     
     
      
       for approval.
      
     
    </li>
   </ol>
   <p>
    
     In this example, we’ve seen how the CWD model can be effectively applied to create a sophisticated
    
    <a id="_idIndexMarker484">
    </a>
    
     travel planning system.
    
    
     The model demonstrates how complex tasks can be broken down and managed efficiently through specialized agents, each handling specific aspects of the travel planning process.
    
    
     This approach not only ensures thorough coverage of all travel requirements but also maintains clear communication channels and responsibility allocation throughout the planning process.
    
    
     By structuring the system this way, we can handle multiple travel requests simultaneously while maintaining quality and attention to detail for each customer’s
    
    
     
      unique needs.
     
    
   </p>
   <p>
    
     For those interested in implementing this system, the complete code implementation, including detailed examples and documentation, can be found in the
    
    <strong class="source-inline">
     
      Chapter_06.ipynb
     
    </strong>
    
     Python notebook in the GitHub repository.
    
    
     This code sample uses many of the concepts of tool and planning to implement the CWD travel planner.
    
    
     It also utilizes popular frameworks such as CrewAI
    
    
     
      and AutoGen.
     
    
   </p>
   <p>
    
     In this section, we’ve explored the CWD model, a framework that mirrors effective human organizational practices to build scalable, efficient, and collaborative multi-agent systems.
    
    
     This model’s emphasis on role delineation, adaptability, and structured communication ensures that it can manage complex, multi-faceted tasks such as travel planning seamlessly.
    
    
     Understanding this model is essential, as it provides a foundation for designing intelligent agent systems capable of handling specialized roles while working in concert to achieve
    
    
     
      overarching goals.
     
    
   </p>
   <p>
    
     In the next section, we will dive deeper into the principles of agent design, focusing on how assigning roles and responsibilities can optimize system performance and align agent behavior with specific objectives.
    
    
     This builds directly on the CWD framework, equipping you with practical tools to create intelligent systems tailored to diverse
    
    
     
      real-world applications.
     
    
   </p>
   <h1 id="_idParaDest-134">
    <a id="_idTextAnchor144">
    </a>
    
     Designing agents with role assignments
    
   </h1>
   <p>
    
     In the context of the CWD model, designing agents with appropriate role assignments is crucial for
    
    <a id="_idIndexMarker485">
    </a>
    
     ensuring the effective functioning of a multi-agent system.
    
    
     Careful consideration must be given to the specific roles and contributions of each agent toward achieving the overall system objectives.
    
    
     This is perhaps very easily explained using CrewAI agents, which can be initialized with a role, a goal, and
    
    
     
      a backstory.
     
    
   </p>
   <p>
    
     When designing these agents, the role definition serves as the foundation for their behavior and responsibilities within the system.
    
    
     The role explicitly defines what the agent is supposed to do and how it fits into the larger system architecture.
    
    
     For instance, a coordinator agent might be assigned the role of
    
    <em class="italic">
     
      Strategic Planning Manager
     
    </em>
    
     , which immediately establishes their authority in overseeing and directing the
    
    
     
      overall workflow.
     
    
   </p>
   <p>
    
     Equally important is the backstory, which provides depth and context to how the agent approaches its responsibilities.
    
    
     The backstory isn’t just a biography – it’s a carefully crafted narrative that shapes the agent’s decision-making process and interaction style.
    
    
     Consider a coordinator agent with a backstory of “
    
    <em class="italic">
     
      A veteran project manager who has successfully led diverse teams in Silicon Valley start-ups, known for balancing innovation with practical execution
     
    </em>
    
     .”
    
    
     This backstory naturally influences how the agent makes decisions, communicates with other agents, and approaches problem-solving.
    
    
     It’s important to note that this backstory is a CrewAI-specific implementation and CrewAI merges this backstory along with the role in the LLM’s system prompt, which helps set the context for the model.
    
    
     Here’s an example
    
    
     
      with CrewAI:
     
    
   </p>
   <pre class="source-code">
coordinator = Agent(
    role="Strategic Planning Manager",
    backstory="A veteran project manager who has successfully led
              diverse teams in Silicon Valley startups, known for
              balancing innovation with practical execution. Expertise
              in bridging communication gaps between technical and
              non-technical teams while maintaining focus on key
              deliverables.",
    verbose=True
)</pre>
   <p>
    
     The combination of role and backstory creates a more nuanced and effective agent that can operate
    
    <a id="_idIndexMarker486">
    </a>
    
     within the complex dynamics of a multi-agent system while maintaining a clear purpose and direction.
    
    
     Within CWD-based systems, several typical agent roles can be identified,
    
    
     
      as follows:
     
    
   </p>
   <ul>
    <li>
     <strong class="bold">
      
       Manager
      
     </strong>
     
      : The Manager
     
     <a id="_idIndexMarker487">
     </a>
     
      agent is responsible for monitoring the system’s operations, managing resources, and ensuring timely task
     
     <a id="_idIndexMarker488">
     </a>
     
      completion.
     
     
      Manager agents are synonymous with
     
     <strong class="bold">
      
       coordinators
      
     </strong>
     
      in the CWD model.
     
     
      Managers play a critical role in overseeing the entire system and ensuring its overall effectiveness.
     
     
      In the context of an intelligent travel agent system, the Manager agent could be responsible for tasks such as
     
     
      
       the following:
      
     
     <ul>
      <li>
       
        Monitoring the progress of travel
       
       
        
         planning processes
        
       
      </li>
      <li>
       
        Allocating resources (for example, computational resources and access to external APIs) to
       
       
        
         other agents
        
       
      </li>
      <li>
       
        Ensuring that travel plans are generated within specified
       
       
        
         time constraints
        
       
      </li>
     </ul>
    </li>
    <li>
     <strong class="bold">
      
       Analyst
      
     </strong>
     
      : The Analyst agent
     
     <a id="_idIndexMarker489">
     </a>
     
      possesses expertise in analyzing
     
     <a id="_idIndexMarker490">
     </a>
     
      data and providing insights and recommendations based on its findings.
     
     
      These agents can inform and guide decision-making processes within the system.
     
     
      In the travel agent scenario, an Analyst agent could be employed for
     
     
      
       the following:
      
     
     <ul>
      <li>
       
        Analyzing customer preferences and
       
       
        
         travel trends
        
       
      </li>
      <li>
       
        Providing
       
       <a id="_idIndexMarker491">
       </a>
       
        recommendations for popular destinations
       
       <a id="_idIndexMarker492">
       </a>
       
        or activities based on
       
       
        
         data analysis
        
       
      </li>
      <li>
       
        Identifying potential cost-saving opportunities or optimal
       
       
        
         travel routes
        
       
      </li>
      <li>
       
        Summarizing outcomes and recommendations for
       
       
        
         the user
        
       
      </li>
     </ul>
    </li>
    <li>
     <strong class="bold">
      
       Reflector
      
     </strong>
     
      : The Reflector
     
     <a id="_idIndexMarker493">
     </a>
     
      agent observes the system’s performance
     
     <a id="_idIndexMarker494">
     </a>
     
      and identifies areas for improvement.
     
     
      By continuously monitoring the system’s operations, the Reflector can suggest changes or adjustments that would enhance efficiency and effectiveness.
     
     
      In the travel agent context, a Reflector agent could do
     
     
      
       the following:
      
     
     <ul>
      <li>
       
        Analyze customer feedback and
       
       
        
         satisfaction levels
        
       
      </li>
      <li>
       
        Identify bottlenecks or inefficiencies in the travel
       
       
        
         planning process
        
       
      </li>
      <li>
       
        Propose improvements to the system’s algorithms
       
       
        
         or workflows
        
       
      </li>
     </ul>
    </li>
    <li>
     <strong class="bold">
      
       Searcher
      
     </strong>
     
      : The Searcher
     
     <a id="_idIndexMarker495">
     </a>
     
      agent explores the problem space, constantly seeking new solutions and sharing relevant information
     
     <a id="_idIndexMarker496">
     </a>
     
      with other agents.
     
     
      This role often involves innovation, as the Searcher adapts the system to cope with novel situations.
     
     
      In the travel agent domain, a Searcher agent could do
     
     
      
       the following:
      
     
     <ul>
      <li>
       
        Discover new travel destinations
       
       
        
         or activities
        
       
      </li>
      <li>
       
        Explore alternative transportation options or
       
       
        
         travel routes
        
       
      </li>
      <li>
       
        Share information about emerging travel trends or regulations with
       
       
        
         other agents
        
       
      </li>
     </ul>
     <p class="list-inset">
      
       Note that the Analyst, Reflector, and Searcher roles fit squarely under
      
      <strong class="bold">
       
        workers
       
      </strong>
      
       in the
      
      
       
        CWD model.
       
      
     </p>
    </li>
    <li>
     <strong class="bold">
      
       Task Interpreter
      
     </strong>
     
      : The Task Interpreter agent serves as a bridge between the coordinators
     
     <a id="_idIndexMarker497">
     </a>
     
      and workers, mapping high-level
     
     <a id="_idIndexMarker498">
     </a>
     
      tasks into lower-level, concrete, and performable actions for the worker agents.
     
     
      This role ensures that tasks are well defined and understood by the workers.
     
     
      Task interpreters are synonymous with
     
     <strong class="bold">
      
       delegators
      
     </strong>
     
      in the CWD model.
     
     
      In the travel agent system, a task interpreter agent could do
     
     
      
       the following:
      
     
     <ul>
      <li>
       
        Break down a customer’s travel request into specific subtasks (for example, flight booking, hotel reservation, or
       
       
        
         activity planning)
        
       
      </li>
      <li>
       
        Translate the customer’s preferences into actionable tasks for the
       
       
        
         worker agents
        
       
      </li>
      <li>
       
        Ensure that the tasks assigned to the worker agents are clear
       
       
        
         and unambiguous
        
       
      </li>
     </ul>
    </li>
   </ul>
   <p>
    
     The concept of
    
    <a id="_idIndexMarker499">
    </a>
    
     multi-agent systems isn’t new, and neither is role assignment – in fact, a study was done more than a decade ago by Kazík (2010) (https://physics.mff.cuni.cz/wds/proc/pdf10/WDS10_103_i1_Kazik.pdf), which comprehensively explored role-based approaches in multi-agent system development.
    
    
     The study highlighted how roles serve as abstract representations of stereotypical behavior common to different agent classes, providing interfaces through which agents obtain knowledge of and affect their environment.
    
    
     The study highlighted how roles serve as abstract representations of stereotypical behavior common to different agent classes, providing interfaces through which agents obtain knowledge of and affect their environment.
    
    
     While these foundational concepts were initially developed for traditional multi-agent systems, they provide valuable insights for designing modern LLM-based
    
    
     
      agent systems.
     
    
   </p>
   <p>
    
     The key principles of role-based modeling – including separation of interaction logic from inner algorithmic logic, dynamic role assignment, and modular system organization – are particularly relevant as we design collaborative LLM agents that need to coordinate effectively while maintaining clear responsibilities and interaction patterns.
    
    
     By assigning specific roles to agents based on their capabilities and the system’s requirements, designers can achieve a role-based abstraction that supports the separation of concerns and allows for modular and reusable design in multi-agent systems.
    
    
     For example, in the intelligent travel agent system, agents could be assigned roles such as coordinator, worker, delegator, and
    
    
     
      so on.
     
    
   </p>
   <h2 id="_idParaDest-135">
    <a id="_idTextAnchor145">
    </a>
    
     Roles and responsibilities of each agent
    
   </h2>
   <p>
    
     Here is an overview of the roles and responsibilities of each agent within our intelligent travel
    
    <a id="_idIndexMarker500">
    </a>
    
     planning multi-agent system, and how they collectively work toward achieving the
    
    
     
      system’s objectives.
     
    
   </p>
   <ul>
    <li>
     <strong class="bold">
      
       Travel planning agent (coordinator)
      
     </strong>
     
      : This agent functions as the strategic overseer
     
     <a id="_idIndexMarker501">
     </a>
     
      of the entire travel planning operation.
     
     
      With expertise in project management and travel coordination, they break down
     
     <a id="_idIndexMarker502">
     </a>
     
      customer requests into manageable components, establish timelines, and ensure all aspects of travel planning align with customer expectations.
     
     
      They maintain a holistic view of each travel plan, ensuring all elements work together cohesively while managing contingencies and adjusting plans
     
     
      
       as needed.
      
     
     <p class="list-inset">
      
       To better understand how the CWD model applies to real-world scenarios, consider the example of a travel planning agent functioning as the coordinator, as shown in the following snippet.
      
      
       This agent oversees the travel planning process, ensuring all components of the plan align with customer expectations while managing resources and contingencies effectively.
      
      
       To illustrate the functionality of core travel worker agents in the CWD model, the following example snippet showcases their specialized roles and expertise.
      
      
       Each agent contributes to the seamless execution of specific travel
      
      
       
        planning tasks:
       
      
     </p>
     <pre class="source-code">
coordinator = Agent(
    role="Travel Planning Executive",
    backstory="A seasoned travel industry veteran with 15 years of experience in luxury travel planning and project management. Known for orchestrating seamless multi-destination trips for high-profile clients and managing complex itineraries across different time zones and cultures. Expert in crisis management and adaptive planning.",
    goals=["Ensure cohesive travel plans", "Maintain high customer satisfaction", "Optimize resource allocation"]
)</pre>
    </li>
    <li>
     <strong class="bold">
      
       Core travel worker agents
      
     </strong>
     
      : These
     
     <a id="_idIndexMarker503">
     </a>
     
      agents
     
     <a id="_idIndexMarker504">
     </a>
     
      comprise the
     
     
      
       following roles:
      
     
     <ul>
      <li>
       <strong class="bold">
        
         Flight booking worker
        
       </strong>
       
        : This agent specializes in navigating the complex world of
       
       <a id="_idIndexMarker505">
       </a>
       
        airline reservations, understanding fare classes, routing rules, and alliance partnerships.
       
       
        It stays updated on airline schedules, pricing trends, and booking policies while maintaining relationships with airline representatives for special requests or problem resolution, as shown in the
       
       
        
         following snippet:
        
       
       <pre class="source-code">
flight_specialist = Agent(
    role="Aviation Booking Specialist",
    backstory="Former airline revenue management expert with deep knowledge of global aviation networks. Skilled in finding optimal flight combinations and hidden fare opportunities. Has handled over 10,000 flight bookings across all major airlines and alliances.",
    goals=["Secure optimal flight arrangements", "Maximize value for money", "Ensure booking accuracy"]
)</pre>
      </li>
      <li>
       <strong class="bold">
        
         Hotel booking worker
        
       </strong>
       
        : An expert in global hospitality, this agent understands
       
       <a id="_idIndexMarker506">
       </a>
       
        hotel categories, room types, and amenity offerings across different markets.
       
       
        It maintains extensive knowledge of hotel loyalty programs, seasonal pricing patterns, and
       
       <a id="_idIndexMarker507">
       </a>
       
        special promotional offers, as displayed in the
       
       
        
         following snippet:
        
       
       <pre class="source-code">hotel_specialist = Agent(
    role="Hospitality Accommodation Expert",
    backstory="Previous luxury hotel chain executive with extensive connections in the hospitality industry. Expert in boutique hotels and major chains alike, with deep knowledge of room categories, seasonal trends, and upgrade opportunities across global markets.",
    goals=["Find perfect accommodation matches", "Secure best available rates", "Ensure special requests are met"]
)</pre>
      </li>
      <li>
       <strong class="bold">
        
         Activity planning worker
        
       </strong>
       
        : This agent combines deep cultural knowledge with
       
       <a id="_idIndexMarker508">
       </a>
       
        practical experience
       
       <a id="_idIndexMarker509">
       </a>
       
        in tour operations.
       
       
        It excels at matching activities to traveler interests and abilities while considering factors such as seasonal availability, local customs, and logistical constraints, as highlighted in the
       
       
        
         following snippet:
        
       
       <pre class="source-code">activity_planner = Agent(
    role="Destination Experience Curator",
    backstory="Professional tour guide turned experience designer with expertise in creating memorable travel moments. Has lived in 5 continents and personally vetted thousands of local experiences. Specialist in combining cultural authenticity with traveler comfort.",
    goals=["Create engaging itineraries", "Balance activities and free time", "Ensure cultural authenticity"]
)</pre>
      </li>
      <li>
       <strong class="bold">
        
         Transportation worker
        
       </strong>
       
        : This agent focuses on ground logistics and local transportation
       
       <a id="_idIndexMarker510">
       </a>
       
        solutions.
       
       
        It
       
       <a id="_idIndexMarker511">
       </a>
       
        understands various transportation options across different destinations, from private car services to public transportation systems, as shown in the
       
       
        
         following snippet:
        
       
       <pre class="source-code">transport_coordinator = Agent(
    role="Ground Transportation Logistics Specialist",
    backstory="Former urban mobility consultant with extensive experience in transportation systems worldwide. Expert in coordinating seamless transfers and creating reliable ground transportation plans across diverse global locations.",
    goals=["Ensure reliable transfers", "Optimize local transportation", "Maintain backup options"]
)</pre>
      </li>
     </ul>
    </li>
    <li>
     <strong class="bold">
      
       Analysis and intelligence worker agents
      
     </strong>
     
      : In
     
     <a id="_idIndexMarker512">
     </a>
     
      these
     
     <a id="_idIndexMarker513">
     </a>
     
      agents, we have the
     
     
      
       following roles:
      
     
     <ul>
      <li>
       <strong class="bold">
        
         Travel data analyst worker
        
       </strong>
       
        : This
       
       <a id="_idIndexMarker514">
       </a>
       
        agent focuses
       
       <a id="_idIndexMarker515">
       </a>
       
        on transforming raw travel data into actionable insights.
       
       
        It analyzes booking patterns, customer preferences, and market trends to inform decision-making and enhance travel recommendations, as
       
       
        
         shown here:
        
       
       <pre class="source-code">
analyst = Agent(
    role="Travel Intelligence Specialist",
    backstory="Data scientist with deep expertise in travel industry analytics. Previously led data science initiatives at major online travel platforms. Developed predictive models for travel trends and customer behavior that increased customer satisfaction scores by 25%. Expert in combining quantitative analysis with qualitative travel insights.",
    goals=["Generate actionable insights", "Identify travel trends", "Optimize customer matching"]
)</pre>
      </li>
      <li>
       <strong class="bold">
        
         Travel experience worker (Reflector)
        
       </strong>
       
        : This agent acts as the system’s quality
       
       <a id="_idIndexMarker516">
       </a>
       
        assurance and continuous improvement specialist.
       
       
        It analyzes
       
       <a id="_idIndexMarker517">
       </a>
       
        feedback, monitors performance, and suggests systemic improvements to enhance the travel planning experience, as
       
       
        
         shown here:
        
       
       <pre class="source-code">reflector = Agent(
    role="Travel Experience Optimization Expert",
    backstory="Customer experience strategist with background in both luxury hospitality and digital transformation. Pioneered feedback analysis systems that revolutionized service delivery in major hotel chains. Passionate about creating memorable travel experiences through systematic improvements.",
    goals=["Analyze customer feedback", "Identify improvement areas", "Enhance service quality"]
)</pre>
      </li>
      <li>
       <strong class="bold">
        
         Travel opportunity worker (Searcher)
        
       </strong>
       
        : This agent functions as the system’s
       
       <a id="_idIndexMarker518">
       </a>
       
        explorer and innovator, constantly seeking new destinations, unique experiences, and emerging travel opportunities that could
       
       <a id="_idIndexMarker519">
       </a>
       
        enhance the service offering, as
       
       
        
         shown here:
        
       
       <pre class="source-code">searcher = Agent(
    role="Travel Discovery Specialist",
    backstory="Former travel journalist and destination researcher with a network spanning 100+ countries. Has uncovered numerous hidden gems and emerging destinations that became major travel trends. Combines deep cultural understanding with a keen eye for unique travel opportunities. Expert in identifying experiences that match evolving traveler preferences.",
    goals=["Discover unique opportunities", "Identify emerging destinations", "Expand service offerings"]
)</pre>
      </li>
     </ul>
    </li>
    <li>
     <strong class="bold">
      
       Delegator agent
      
     </strong>
     
      : The critical
     
     <a id="_idIndexMarker520">
     </a>
     
      link between strategy and
     
     <a id="_idIndexMarker521">
     </a>
     
      execution, this agent excels at task prioritization and resource allocation.
     
     
      They understand each worker agent’s capabilities and current workload, ensuring optimal task distribution and workflow management, as
     
     
      
       shown here:
      
     
     <pre class="source-code">
delegator = Agent(
    role="Travel Operations Orchestrator",
    backstory="Experienced project manager with a background in both travel operations and workflow optimization. Known for exceptional ability to match tasks with the right expertise and maintain balanced workloads across teams. Previously managed large-scale travel operations for Fortune 500 companies.",
    goals=["Optimize task distribution", "Maintain workflow efficiency", "Ensure quality standards"]
)</pre>
    </li>
   </ul>
   <p>
    
     So far, this structured role-based agent approach creates a well-defined hierarchy with clear responsibilities
    
    <a id="_idIndexMarker522">
    </a>
    
     while maintaining flexibility for handling complex
    
    <a id="_idIndexMarker523">
    </a>
    
     travel planning scenarios.
    
    
     Each agent’s role and backstory provide depth and context to their function within the larger system, enabling more natural and effective interactions.
    
    
     Let’s define the Manager, Analyst, Reflector, and Searcher agents.
    
    
     <em class="italic">
      
       Figure 6
      
     </em>
    
    <em class="italic">
     
      .3
     
    </em>
    
     is a further adaptation of our CWD model with role-based agents for the travel
    
    
     
      planning system:
     
    
   </p>
   <div><div><img alt="img" role="presentation" src="img/B31483_06_03.jpg"/>
     
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    
     Figure 6.3 – Role-based agents within the CWD model for travel planner
    
   </p>
   <p>
    
     Let’s examine how our travel planning multi-agent system orchestrates a seamless journey from initial customer request to final travel plan.
    
    
     The system leverages a hierarchical structure where the coordinator agent provides strategic oversight, the delegator agent manages task distribution, and specialized worker agents execute both core travel tasks and analytical functions in parallel.
    
    
     This coordinated workflow demonstrates the practical application of the CWD model, enabling efficient and intelligent travel planning through clear role definition and effective collaboration.
    
    
     Here’s the breakdown of
    
    
     
      the steps:
     
    
   </p>
   <ol>
    <li>
     <strong class="bold">
      
       Initial request
      
     </strong>
     
      <strong class="bold">
       
        and planning
       
      </strong>
     
     
      
       :
      
     
     <ol>
      <li class="upper-roman">
       
        The customer submits their travel requirements to
       
       
        
         the system.
        
       
      </li>
      <li class="upper-roman">
       
        The coordinator agent analyzes these requirements and develops a
       
       
        
         strategic plan.
        
       
      </li>
     </ol>
    </li>
    <li>
     
      <strong class="bold">
       
        Task distribution
       
      </strong>
     
     
      
       :
      
     
     <ol>
      <li class="upper-roman">
       
        The coordinator
       
       <a id="_idIndexMarker524">
       </a>
       
        agent passes the strategic plan to the
       
       
        
         delegator agent.
        
       
      </li>
      <li class="upper-roman">
       
        The delegator
       
       <a id="_idIndexMarker525">
       </a>
       
        agent breaks down the plan into specific tasks for both core and
       
       
        
         analysis workers.
        
       
      </li>
     </ol>
    </li>
    <li>
     <strong class="bold">
      
       Parallel processing (core travel tasks)
      
     </strong>
     
      : The delegator agent assigns specialized tasks to core travel workers,
     
     
      
       as follows:
      
     
     <ul>
      <li>
       
        The
       
       <strong class="bold">
        
         flight booking worker
        
       </strong>
       
        searches for and reserves
       
       
        
         optimal flights
        
       
      </li>
      <li>
       
        The
       
       <strong class="bold">
        
         hotel booking worker
        
       </strong>
       
        identifies and books
       
       
        
         suitable accommodations
        
       
      </li>
      <li>
       
        The
       
       <strong class="bold">
        
         activity planning worker
        
       </strong>
       
        creates an itinerary
       
       
        
         of experiences
        
       
      </li>
      <li>
       
        The
       
       <strong class="bold">
        
         transportation worker
        
       </strong>
       
        arranges ground
       
       
        
         transport solutions
        
       
      </li>
     </ul>
    </li>
    <li>
     <strong class="bold">
      
       Parallel processing (analysis and intelligence)
      
     </strong>
     
      : Simultaneously, the delegator agent engages analysis workers,
     
     
      
       as follows:
      
     
     <ul>
      <li>
       
        The
       
       <strong class="bold">
        
         data analyst worker
        
       </strong>
       
        processes customer data and
       
       
        
         travel patterns
        
       
      </li>
      <li>
       
        The
       
       <strong class="bold">
        
         experience reflector worker
        
       </strong>
       
        reviews similar
       
       
        
         past itineraries
        
       
      </li>
      <li>
       
        The
       
       <strong class="bold">
        
         opportunity searcher worker
        
       </strong>
       
        identifies
       
       
        
         unique options/alternatives
        
       
      </li>
     </ul>
    </li>
    <li>
     <strong class="bold">
      
       Integration
      
     </strong>
     
      <strong class="bold">
       
        and refinement
       
      </strong>
     
     
      
       :
      
     
     <ol>
      <li class="upper-roman">
       
        All workers submit their outputs back to the
       
       
        
         delegator agent.
        
       
      </li>
      <li class="upper-roman">
       
        The delegator agent consolidates
       
       
        
         the information.
        
       
      </li>
      <li class="upper-roman">
       
        The coordinator agent receives the
       
       
        
         consolidated plan.
        
       
      </li>
     </ol>
    </li>
    <li>
     <strong class="bold">
      
       Final review
      
     </strong>
     
      <strong class="bold">
       
        and delivery
       
      </strong>
     
     
      
       :
      
     
     <ol>
      <li class="upper-roman">
       
        The coordinator agent reviews and optimizes the complete
       
       
        
         travel plan.
        
       
      </li>
      <li class="upper-roman">
       
        The final travel plan is presented to
       
       
        
         the customer.
        
       
      </li>
     </ol>
    </li>
   </ol>
   <p>
    
     This flow showcases the collaboration between the various agent roles, leveraging their specialized
    
    <a id="_idIndexMarker526">
    </a>
    
     expertise and contributions to generate a personalized and optimized travel plan for the customer.
    
    
     Each agent plays a specific role, and their
    
    <a id="_idIndexMarker527">
    </a>
    
     outputs are consolidated and integrated by the Manager agent (travel operations manager) and the coordinator agent (travel planning coordinator) to deliver the final
    
    
     
      travel plan.
     
    
   </p>
   <p>
    
     By carefully designing agents with well-defined roles, the CWD-based multi-agent system can effectively collaborate, leverage specialized expertise, and distribute tasks efficiently, ultimately delivering personalized and optimized travel plans tailored to customer requirements.
    
    
     However, the success of such a sophisticated multi-agent system heavily depends on how these agents communicate and interact with each other.
    
    
     Let’s explore how effective communication and collaboration are achieved between these agents in the
    
    
     
      next section.
     
    
   </p>
   <h1 id="_idParaDest-136">
    <a id="_idTextAnchor146">
    </a>
    
     Communication and collaboration between agents
    
   </h1>
   <p>
    
     In multi-agent systems based on the CWD model, effective communication and collaboration
    
    <a id="_idIndexMarker528">
    </a>
    
     among agents are crucial for achieving successful outcomes.
    
    
     Agents need to be capable of sharing information, coordinating their actions, and behaving cooperatively to work toward common goals.
    
    
     Communication and collaboration in CWD-based systems involve the key aspects as discussed in the
    
    
     
      following subsections.
     
    
   </p>
   <h2 id="_idParaDest-137">
    <a id="_idTextAnchor147">
    </a>
    
     Communication
    
   </h2>
   <p>
    
     Agents should follow well-defined protocols for their interactions, including the format of messages and interaction patterns.
    
    
     These protocols ensure that agents can understand
    
    <a id="_idIndexMarker529">
    </a>
    
     each other clearly and act appropriately.
    
    
     For example, in a travel agent system, the agents may employ a standardized message format and communication protocol to exchange information about flight options, hotel availability, or customer preferences.
    
    
     By adhering to these protocols, agents can effectively communicate and interpret messages from other agents, enabling
    
    
     
      seamless collaboration.
     
    
   </p>
   <p>
    
     The agents in the example travel agent system can follow a standardized communication
    
    <a id="_idIndexMarker530">
    </a>
    
     protocol, such as the FIPA
    
    <strong class="bold">
     
      Agent Communication Language
     
    </strong>
    
     (
    
    <strong class="bold">
     
      ACL
     
    </strong>
    
     ), to exchange messages and information.
    
    
     For instance, when the hotel booking worker agent needs to communicate with the flight booking worker agent to coordinate travel dates, it can send a message in the FIPA ACL format, specifying the content (for example, requested travel dates), the sender (hotel booking worker), and the recipient (flight
    
    
     
      booking worker).
     
    
   </p>
   <h2 id="_idParaDest-138">
    <a id="_idTextAnchor148">
    </a>
    
     Coordination mechanism
    
   </h2>
   <p>
    
     Coordinators play a vital role in establishing mechanisms for coordination that align the activities
    
    <a id="_idIndexMarker531">
    </a>
    
     of worker agents with the overall objectives of the system.
    
    
     These coordination mechanisms allow for the control of dependencies and ensure that tasks are completed within the required timeframes.
    
    
     In the context of a travel agent system, the travel planning coordinator agent could implement a coordination mechanism that involves task prioritization, resource allocation, and progress monitoring to ensure that the travel planning process proceeds smoothly
    
    
     
      and efficiently.
     
    
   </p>
   <p>
    
     The travel planning coordinator agent can implement a coordination mechanism to align the activities of the worker agents with the overall travel planning objectives.
    
    
     For example, it could employ a task prioritization mechanism based on customer preferences or travel dates.
    
    
     If a customer prioritizes finding suitable accommodations first, the coordinator agent can instruct the delegator agent to assign the hotel booking worker agent a higher priority than the other worker agents.
    
    
     Additionally, the coordinator agent can monitor the progress of each worker agent and reallocate resources or adjust priorities as needed to ensure timely
    
    
     
      task completion.
     
    
   </p>
   <h2 id="_idParaDest-139">
    <a id="_idTextAnchor149">
    </a>
    
     Negotiation and conflict resolution
    
   </h2>
   <p>
    
     In complex multi-agent systems, there may be cases where the goals or actions of different
    
    <a id="_idIndexMarker532">
    </a>
    
     agents conflict with one another.
    
    
     To address such situations, agents should be equipped with negotiation strategies or mechanisms for conflict resolution.
    
    
     These strategies help maintain harmony in the working environment by facilitating compromise or reaching mutually acceptable solutions.
    
    
     For instance, if multiple worker agents in a travel agent system propose conflicting activity plans or transportation options, a negotiation mechanism could be employed to resolve the conflict based on predefined criteria or by involving the coordinator agent
    
    
     
      for mediation.
     
    
   </p>
   <p>
    
     Suppose the activity planning worker agent and the transportation worker agent propose conflicting plans for a particular day of the trip.
    
    
     The activity planning worker agent might have scheduled a full-day tour, while the transportation worker agent has arranged for a rental car to be available for the entire day.
    
    
     In such a scenario, a negotiation mechanism can be employed to resolve the conflict.
    
    
     The delegator agent could act as a mediator, gathering the conflicting plans from both worker agents and proposing alternative solutions, such as rescheduling the tour or modifying the rental car reservation.
    
    
     If a resolution cannot be reached, the coordinator agent can intervene and make a final decision based on predefined criteria or
    
    
     
      customer preferences.
     
    
   </p>
   <h2 id="_idParaDest-140">
    <a id="_idTextAnchor150">
    </a>
    
     Knowledge sharing
    
   </h2>
   <p>
    
     Agents should have the capability to share knowledge, insights, and findings from their research
    
    <a id="_idIndexMarker533">
    </a>
    
     or experiences with other agents in the system.
    
    
     This knowledge-sharing facilitates continuous learning and adaptation, enabling the system to improve its overall performance over time.
    
    
     In the travel agent context, the travel data analyst agent could share insights derived from customer preference analysis with other agents, enabling them to make more informed decisions.
    
    
     Similarly, the travel opportunity searcher agent could share information about new travel destinations or emerging trends, allowing the system to stay up-to-date and adapt its
    
    
     
      offerings accordingly.
     
    
   </p>
   <p>
    
     The travel data analyst agent can analyze customer preferences, travel trends, and feedback from past trips to generate insights and recommendations.
    
    
     These insights can be shared with other agents in the system to improve their decision-making processes.
    
    
     For example, the travel data analyst agent might identify a growing trend for eco-friendly travel options and share this information with the activity planning worker agent and the transportation worker agent.
    
    
     These agents can then adjust their offerings to include more sustainable activities and transportation options, reflecting the changing customer preferences.
    
    
     The travel opportunity searcher agent may continuously explore new travel destinations, unique experiences, or emerging travel trends.
    
    
     This agent can share its findings with other agents, enabling them to incorporate these new opportunities into their respective planning processes.
    
    
     For instance, if the travel opportunity searcher agent discovers a newly opened eco-resort in a popular destination, it can share this information with the hotel booking worker agent and the activity planning worker agent, allowing them to consider this new option when generating hotel recommendations and
    
    
     
      activity plans.
     
    
   </p>
   <p>
    
     The CWD model’s role-based approach establishes clear boundaries for communication channels
    
    <a id="_idIndexMarker534">
    </a>
    
     and agent responsibilities.
    
    
     By implementing well-defined protocols for communication, coordination, and knowledge sharing, the system harnesses its agents’ collective intelligence to deliver adaptable and efficient travel planning services.
    
    
     This structured collaboration enables the system to tackle complex challenges while continuously improving its performance
    
    
     
      over time.
     
    
   </p>
   <p>
    
     While this section has outlined the theoretical framework for communication and collaboration in our CWD-based travel planning system, the practical implementation requires careful consideration of technical aspects.
    
    
     This section has provided a comprehensive exploration of the foundational aspects of communication and collaboration within multi-agent systems guided by the CWD model.
    
    
     By adhering to well-defined communication protocols, establishing robust coordination mechanisms, and fostering effective knowledge sharing, such systems are equipped to handle complex,
    
    
     
      dynamic scenarios.
     
    
   </p>
   <p>
    
     The next section transitions from these foundational concepts to a deeper exploration of practical methodologies.
    
    
     It focuses on implementing the CWD approach in generative AI systems, detailing advanced techniques such as state space management, environment modeling, memory systems, and handling LLM contexts to bring these theoretical concepts to life in
    
    
     
      real-world applications.
     
    
   </p>
   <h1 id="_idParaDest-141">
    <a id="_idTextAnchor151">
    </a>
    
     Implementing the CWD approach in generative AI systems
    
   </h1>
   <p>
    
     While we’ve explored how the CWD model maps to LLM-based agents and discussed role adaptations for our travel planning system, implementing this approach in generative
    
    <a id="_idIndexMarker535">
    </a>
    
     AI systems requires
    
    <a id="_idIndexMarker536">
    </a>
    
     careful attention to several technical considerations.
    
    
     The transition from traditional multi-agent systems to LLM-based implementations brings unique challenges and opportunities.
    
    
     LLMs, with their natural language understanding and generation capabilities, offer new ways to implement agent behaviors and interactions but also require specific architectural considerations to maintain the structured approach of the
    
    
     
      CWD model.
     
    
   </p>
   <p>
    
     In traditional multi-agent systems, behaviors and interactions are typically programmed explicitly through code.
    
    
     However, in LLM-based implementations, these aspects are primarily controlled through carefully crafted prompts and interaction patterns.
    
    
     This fundamental difference requires us to adapt the CWD model’s principles to work effectively with the nature of LLMs while maintaining the clear role boundaries and hierarchical structure
    
    
     
      we’ve discussed.
     
    
   </p>
   <p>
    
     Before diving into the technical details that will be covered in the next chapter, let’s examine three key implementation considerations that form the foundation of any LLM-based CWD system.
    
    
     These considerations – system prompts, instruction formatting, and interaction patterns – are essential for translating our theoretical model into a practical,
    
    
     
      functioning system.
     
    
   </p>
   <h2 id="_idParaDest-142">
    <a id="_idTextAnchor152">
    </a>
    
     System prompts and agent behavior
    
   </h2>
   <p>
    
     System prompts
    
    <a id="_idIndexMarker537">
    </a>
    
     act as the fundamental configuration layer for LLM agents, defining their core
    
    <a id="_idIndexMarker538">
    </a>
    
     characteristics and operational parameters.
    
    
     Unlike regular prompts that provide task-specific instructions, system prompts
    
    <a id="_idIndexMarker539">
    </a>
    
     establish an agent’s persistent
    
    <a id="_idIndexMarker540">
    </a>
    
     traits, boundaries, and behavioral frameworks throughout its operational life cycle.
    
    
     In our travel planning system, each agent’s system prompt must encompass
    
    
     
      the following:
     
    
   </p>
   <ul>
    <li>
     
      Role definition and scope
     
     
      
       of responsibilities
      
     
    </li>
    <li>
     
      Constraints and
     
     
      
       operational boundaries
      
     
    </li>
    <li>
     
      Communication protocols with
     
     
      
       other agents
      
     
    </li>
    <li>
     
      Decision-making frameworks specific to
     
     
      
       their role
      
     
    </li>
   </ul>
   <p>
    
     For example, the flight booking worker’s system prompt would include specific instructions about flight search parameters, pricing considerations, and airline partnerships, while the Coordinator’s system prompt would focus on high-level planning and
    
    
     
      oversight capabilities.
     
    
   </p>
   <p>
    
     We saw earlier
    
    <a id="_idIndexMarker541">
    </a>
    
     how LLM agent frameworks such as CrewAI
    
    <a id="_idIndexMarker542">
    </a>
    
     structure system prompts through
    
    <strong class="source-inline">
     
      role
     
    </strong>
    
     and
    
    <strong class="source-inline">
     
      backstory
     
    </strong>
    
     definitions.
    
    
     The
    
    <strong class="source-inline">
     
      role
     
    </strong>
    
     component defines the agent’s functional boundaries and responsibilities, while
    
    <strong class="source-inline">
     
      backstory
     
    </strong>
    
     provides the context and expertise that
    
    <a id="_idIndexMarker543">
    </a>
    
     shapes how the agent approaches these responsibilities.
    
    
     Together, they create a rich system prompt that guides the agent’s behavior and
    
    <a id="_idIndexMarker544">
    </a>
    
     decision-making process.
    
    
     For instance, an agent’s role might be an
    
    <em class="italic">
     
      aviation booking specialist
     
    </em>
    
     , while its backstory as a “
    
    <em class="italic">
     
      former airline revenue management expert with deep knowledge of global aviation networks
     
    </em>
    
     ” helps it make more nuanced decisions about routing and
    
    
     
      pricing options.
     
    
   </p>
   <h2 id="_idParaDest-143">
    <a id="_idTextAnchor153">
    </a>
    
     Instruction formatting
    
   </h2>
   <p>
    
     Clear and consistent instruction formatting ensures reliable agent performance and effective
    
    <a id="_idIndexMarker545">
    </a>
    
     inter-agent communication.
    
    
     This becomes particularly crucial in LLM-based systems where instructions are interpreted through natural
    
    <a id="_idIndexMarker546">
    </a>
    
     language understanding.
    
    
     Key aspects of instruction formatting include
    
    
     
      the following:
     
    
   </p>
   <ul>
    <li>
     <strong class="bold">
      
       Input structuring
      
     </strong>
     
      : Standardized
     
     <a id="_idIndexMarker547">
     </a>
     
      formats for task assignments
     
     <a id="_idIndexMarker548">
     </a>
     
      and requests.
     
     
      For example, the following structured input format ensures the flight booking worker receives unambiguous search parameters, with clear specifications for departure and destination locations along with desired
     
     
      
       travel dates:
      
     
     <pre class="source-code">
{
  "task_type": "flight_search",
  "parameters": {
    "departure": "location",
    "destination": "location",
    "dates": "date_range"
  }
}</pre>
    </li>
    <li>
     <strong class="bold">
      
       Output templates
      
     </strong>
     
      : Consistent
     
     <a id="_idIndexMarker549">
     </a>
     
      response structures that other
     
     <a id="_idIndexMarker550">
     </a>
     
      agents can reliably parse.
     
     
      The standardized output format allows agents to quickly identify the task status and access relevant information.
     
     
      The
     
     <strong class="source-inline">
      
       options
      
     </strong>
     
      array might contain available flights, while
     
     <strong class="source-inline">
      
       recommendations
      
     </strong>
     
      could include preferred choices based on
     
     
      
       customer preferences:
      
     
     <pre class="source-code">
{
    "status": "completed/failed",
    "result": {
        "options": [...],
        "recommendations": [...],
        "constraints": [...]
    }
}</pre>
    </li>
    <li>
     <strong class="bold">
      
       Communication protocols
      
     </strong>
     
      : Clear formats for inter-agent messages and status
     
     <a id="_idIndexMarker551">
     </a>
     
      updates.
     
     
      These protocols
     
     <a id="_idIndexMarker552">
     </a>
     
      ensure transparent communication between agents, with clear identification of message type, sender, and recipient, along with structured content that can be
     
     
      
       easily processed:
      
     
     <pre class="source-code">
{
  "message_type": "update",
  "sender": "flight_booking_worker",
  "recipient": "coordinator",
  "content": {
    "progress": "in_progress",
    "completion": "60%",
    "pending_tasks": [...]
  }
}</pre>
    </li>
   </ul>
   <h2 id="_idParaDest-144">
    <a id="_idTextAnchor154">
    </a>
    
     Interaction patterns
    
   </h2>
   <p>
    
     The success of a CWD-based system heavily depends on well-defined interaction patterns
    
    <a id="_idIndexMarker553">
    </a>
    
     between agents.
    
    
     In an LLM-based implementation, these patterns
    
    <a id="_idIndexMarker554">
    </a>
    
     must account for the unique characteristics of language model interactions.
    
    
     Essential interaction patterns include
    
    
     
      the following:
     
    
   </p>
   <ul>
    <li>
     <strong class="bold">
      
       Message
      
     </strong>
     
      <strong class="bold">
       
        passing protocols
       
      </strong>
     
     
      
       :
      
     
     <ul>
      <li>
       
        Structured
       
       <a id="_idIndexMarker555">
       </a>
       
        formats for
       
       <a id="_idIndexMarker556">
       </a>
       
        
         agent-to-agent communication
        
       
      </li>
      <li>
       
        Clear handoff procedures between different
       
       
        
         processing stages
        
       
      </li>
      <li>
       
        Error handling and
       
       
        
         recovery mechanisms
        
       
      </li>
     </ul>
    </li>
    <li>
     
      <strong class="bold">
       
        State management
       
      </strong>
     
     
      
       :
      
     
     <ul>
      <li>
       
        How
       
       <a id="_idIndexMarker557">
       </a>
       
        agents maintain awareness
       
       <a id="_idIndexMarker558">
       </a>
       
        of their current
       
       
        
         task status
        
       
      </li>
      <li>
       
        Methods for tracking progress through
       
       
        
         multi-step processes
        
       
      </li>
      <li>
       
        Coordination of
       
       
        
         parallel activities
        
       
      </li>
     </ul>
    </li>
    <li>
     
      <strong class="bold">
       
        Feedback loops
       
      </strong>
     
     
      
       :
      
     
     <ul>
      <li>
       
        How
       
       <a id="_idIndexMarker559">
       </a>
       
        agents
       
       
        
         communicate success/failure
        
       
      </li>
      <li>
       
        Methods
       
       <a id="_idIndexMarker560">
       </a>
       
        for requesting clarification or
       
       
        
         additional information
        
       
      </li>
      <li>
       
        Mechanisms for continuous improvement through
       
       
        
         interaction history
        
       
      </li>
     </ul>
    </li>
   </ul>
   <h1 id="_idParaDest-145">
    <a id="_idTextAnchor155">
    </a>
    
     Summary
    
   </h1>
   <p>
    
     In this chapter, we explored the CWD model as a framework for designing effective multi-agent systems.
    
    
     Starting with the foundational concepts from early role-based research, we saw how these principles adapt perfectly to modern LLM-based agent architectures.
    
    
     We examined this through a practical travel planning system, where different agents – from flight bookers to activity planners – work together under a clear hierarchical organization.
    
    
     Key takeaways highlight the importance of well-defined roles and responsibilities within multi-agent systems, ensuring that each agent operates with clarity and purpose.
    
    
     They emphasize how specialized worker agents collaborate effectively under the oversight of coordinators, who align their efforts with overarching goals.
    
    
     Delegators play a crucial role in managing tasks and facilitating smooth workflow distribution.
    
    
     Additionally, the chapter underscored the significance of effective communication and collaboration patterns, which are essential for seamless information exchange and cooperative behavior among agents.
    
    
     Finally, implementation considerations such as designing system prompts and formatting instructions are critical for operational success, ensuring clarity and consistency in
    
    
     
      agent interactions.
     
    
   </p>
   <p>
    
     This structured approach to agent design enables complex tasks to be broken down and executed efficiently while maintaining clear lines of communication and responsibility.
    
    
     Our travel planning example demonstrated how theoretical concepts translate into
    
    
     
      practical applications.
     
    
   </p>
   <p>
    
     In the next chapter, we will dive deeper and explore how we can effectively design agents in
    
    
     
      real life.
     
    
   </p>
   <h1 id="_idParaDest-146">
    <a id="_idTextAnchor156">
    </a>
    
     Questions
    
   </h1>
   <ol>
    <li>
     
      Explain how the CWD model enhances the efficiency of multi-agent systems, using the travel planning system as
     
     
      
       an example.
      
     
    </li>
    <li>
     
      What is the significance of “role” and “backstory” in LLM agent design, and how do they contribute to system prompts?
     
     
      Provide
     
     
      
       an example.
      
     
    </li>
    <li>
     
      Compare and contrast the core travel workers with analysis and intelligence workers in the travel planning system.
     
     
      How do their functions complement
     
     
      
       each other?
      
     
    </li>
    <li>
     
      Describe the key aspects of communication and collaboration in a CWD-based system, including protocols, coordination mechanisms, and
     
     
      
       knowledge sharing.
      
     
    </li>
    <li>
     
      How does instruction formatting contribute to effective agent communication in an LLM-based system?
     
     
      Explain with examples of input and
     
     
      
       output structures.
      
     
    </li>
   </ol>
   <h1 id="_idParaDest-147">
    <a id="_idTextAnchor157">
    </a>
    
     Answers
    
   </h1>
   <ol>
    <li value="1">
     
      The CWD model enhances efficiency by creating a clear hierarchical structure where the coordinator provides strategic oversight, the delegator manages task distribution, and specialized workers execute specific functions.
     
     
      In the travel planning system, this allows for parallel processing of tasks – while core travel workers handle bookings and arrangements, analysis workers simultaneously process data and search for opportunities.
     
     
      This structured approach ensures efficient task completion while maintaining clear lines of responsibility
     
     
      
       and communication.
      
     
    </li>
    <li>
     
      Roles and backstories are crucial components in LLM agent design that form the system prompt.
     
     
      The role defines an agent’s functional boundaries and responsibilities (for example, aviation booking specialist), while the backstory provides context and expertise that shapes decision-making (for example, “
     
     <em class="italic">
      
       former airline revenue management expert with deep knowledge of global aviation networks
      
     </em>
     
      ”).
     
     
      Together, they create a rich system prompt that guides the agent’s behavior and interaction patterns.
     
     
      For example, the flight booking worker’s role and backstory enable it to make sophisticated decisions about routing and pricing based on its “experience” in
     
     
      
       airline operations.
      
     
    </li>
    <li>
     
      Core travel workers (flight, hotel, activity, and transportation workers) handle the practical aspects of travel arrangements, making bookings, and confirming reservations.
     
     
      In contrast, analysis and intelligence workers (data analyst, experience reflector, and opportunity searcher) provide strategic support by analyzing trends, processing feedback, and identifying new opportunities.
     
     
      While core workers execute immediate tasks, analysis workers enhance the system’s decision-making capabilities and future performance through data-driven insights and
     
     
      
       continuous improvement.
      
     
    </li>
    <li>
     
      Communication and collaboration in CWD systems involve several key components: standardized communication protocols (such as FIPA ACL) ensure clear message exchange between agents; coordination mechanisms allow the coordinator to manage dependencies and timelines; negotiation strategies help resolve conflicts between agents (such as conflicting activity and transportation plans); and knowledge sharing enables continuous system improvement through shared insights and experiences.
     
     
      These elements work together to create a cohesive and efficient
     
     
      
       multi-agent system.
      
     
    </li>
    <li>
     
      Instruction formatting in LLM-based systems ensures reliable agent communication through structured input/output patterns.
     
     
      This standardized formatting ensures unambiguous communication between agents, clear task specifications, and easily parseable results, contributing to the system’s overall efficiency
     
     
      
       and reliability.
      
     
    </li>
   </ol>
   <h1 id="_idParaDest-148">
    <a id="_idTextAnchor158">
    </a>
    
     Join our communities on Discord and Reddit
    
   </h1>
   <p>
    
     Have questions about the book or want to contribute to discussions on Generative AI and LLMs?
    
    
     Join our Discord server at
    
    <a href="https://packt.link/I1tSU">
     
      https://packt.link/I1tSU
     
    </a>
    
     and our Reddit channel at
    
    <a href="https://packt.link/ugMW0">
     
      https://packt.link/ugMW0
     
    </a>
    
     to connect, share, and collaborate with
    
    
     
      like-minded enthusiasts.
     
    
   </p>
   <div><div><img alt="img" role="presentation" src="img/B31483_Discord_QR_new.jpg"/>
     
    </div>
   </div>
   <p>
   </p>
   <div><div><img alt="img" role="presentation" src="img/qrcode_Reddit_Channel.jpg"/>
     
    </div>
   </div>
  </div>
 </body></html>