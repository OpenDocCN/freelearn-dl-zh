- en: <st c="0">9</st>
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="0">9</st>
- en: <st c="2">Evaluating RAG Quantitatively and with Visualizations</st>
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="2">以量和可视化评估 RAG</st>
- en: <st c="55">Evaluation plays a crucial role in building and maintaining</st>
    **<st c="116">retrieval-augmented generation</st>** <st c="146">(</st>**<st c="148">RAG</st>**<st
    c="151">) pipelines.</st> <st c="165">While you build the pipeline, you can use
    evaluation to identify areas for improvement, optimize the system’s performance,
    and systematically measure the impact of improvements.</st> <st c="343">When your
    RAG system is deployed, evaluation can help ensure the effectiveness, reliability,
    and performance of</st> <st c="455">the system.</st>
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="55">评估在构建和维护</st> **<st c="116">检索增强生成</st>** <st c="146">(</st>**<st
    c="148">RAG</st>**<st c="151">) 管道中发挥着关键作用。</st> <st c="165">在构建管道时，你可以使用评估来识别改进领域，优化系统性能，并系统地衡量改进的影响。</st>
    <st c="343">当你的 RAG 系统部署后，评估可以帮助确保系统的有效性、可靠性和性能</st> <st c="455">。</st>
- en: <st c="466">In this chapter, we will cover the</st> <st c="502">following topics:</st>
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="466">在本章中，我们将涵盖以下主题：</st> <st c="502">以下内容：</st>
- en: <st c="519">Evaluating when building a</st> <st c="547">RAG application</st>
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="519">在构建</st> <st c="547">RAG 应用</st>时进行评估
- en: <st c="562">Evaluating a RAG application</st> <st c="592">after deployment</st>
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="562">部署后评估</st> <st c="592">RAG 应用</st>
- en: <st c="608">Standardized</st> <st c="622">evaluation frameworks</st>
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="608">标准化</st> <st c="622">评估框架</st>
- en: <st c="643">Ground truth</st>
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="643">真实值</st>
- en: <st c="656">Code lab 9.1 –</st> <st c="672">ragas</st>
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="656">代码实验室 9.1 –</st> <st c="672">ragas</st>
- en: <st c="677">Additional evaluation techniques for</st> <st c="715">RAG systems</st>
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="677">针对 RAG 系统的额外评估技术</st>
- en: <st c="726">Let’s start by talking about how evaluation can help during the
    initial stages of building your</st> <st c="823">RAG system.</st>
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="726">让我们先谈谈评估如何帮助你在构建你的</st> <st c="823">RAG 系统</st>的初期阶段。
- en: <st c="834">Technical requirements</st>
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="834">技术要求</st>
- en: <st c="857">The code for this chapter is placed in the following GitHub</st>
    <st c="918">repository:</st> [<st c="930">https://github.com/PacktPublishing/Unlocking-Data-with-Generative-AI-and-RAG/tree/main/Chapter_09</st>](https://github.com/PacktPublishing/Unlocking-Data-with-Generative-AI-and-RAG/tree/main/Chapter_09)
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="857">本章的代码放置在以下 GitHub</st> <st c="918">仓库中：</st> [<st c="930">https://github.com/PacktPublishing/Unlocking-Data-with-Generative-AI-and-RAG/tree/main/Chapter_09</st>](https://github.com/PacktPublishing/Unlocking-Data-with-Generative-AI-and-RAG/tree/main/Chapter_09)
- en: <st c="1027">Evaluate as you build</st>
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="1027">构建时评估</st>
- en: <st c="1049">Evaluation plays a crucial role throughout the development process
    of a RAG pipeline.</st> <st c="1136">By continuously evaluating your system as
    you build it, you can identify areas that need improvement, optimize the system’s
    performance, and systematically measure the impact of any modifications or enhancements</st>
    <st c="1348">you make.</st>
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="1049">评估在整个 RAG 管道开发过程中发挥着关键作用。</st> <st c="1136">在构建系统时，通过持续评估你的系统，你可以确定需要改进的领域，优化系统的性能，并系统地衡量你做出的任何修改或增强的影响</st>
    <st c="1348">。</st>
- en: <st c="1357">Evaluation is</st> <st c="1372">essential for understanding the
    trade-offs and limitations of different approaches within the RAG pipeline.</st>
    <st c="1480">RAG pipelines often involve various technical choices, such as the
    vector store, the retrieval algorithm, and the language generation model.</st>
    <st c="1621">Each of these components can have a significant impact on the overall
    performance of the system.</st> <st c="1718">By systematically evaluating different
    combinations of these components, you can gain valuable insights into which approaches
    yield the best results for your specific tasks</st> <st c="1891">and domain.</st>
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="1357">评估对于理解 RAG 管道中不同方法的权衡和限制至关重要。</st> <st c="1372">RAG 管道通常涉及各种技术选择，例如向量存储、检索算法和语言生成模型。</st>
    <st c="1480">这些组件中的每一个都可能对系统的整体性能产生重大影响。</st> <st c="1621">通过系统地评估这些组件的不同组合，你可以获得宝贵的见解，了解哪些方法对你的特定任务和领域产生最佳结果</st>
    <st c="1891">。</st>
- en: <st c="1902">For instance, you might experiment with different embedding models,
    such as local open source models that you can download for free or cloud service
    APIs that charge each time you convert text to an embedding.</st> <st c="2113">You
    may need to understand whether the cloud API service is better than the free model,
    and if so, whether it is good enough to offset the additional cost.</st> <st c="2269">Similarly,
    you can evaluate the performance of various language generation models, such as
    ChatGPT, Llama,</st> <st c="2376">and Claude.</st>
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="1902">例如，你可能尝试不同的嵌入模型，例如可以免费下载的本地开源模型或每次将文本转换为嵌入时收费的云服务API。</st> <st
    c="2113">你可能需要了解云API服务是否优于免费模型，如果是的话，它是否足够好以抵消额外的成本。</st> <st c="2269">同样，你可以评估各种语言生成模型的表现，例如ChatGPT、Llama</st>
    <st c="2376">和Claude。</st>
- en: <st c="2387">This iterative evaluation process helps you make informed decisions
    about the most suitable architecture and components for your RAG pipeline.</st>
    <st c="2531">By considering factors such as efficiency, scalability, and generalization
    ability, you can fine-tune your system to achieve optimal performance while minimizing
    computational costs and ensuring robustness across</st> <st c="2744">different
    scenarios.</st>
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="2387">这个迭代评估过程帮助你做出关于最适合你的RAG管道架构和组件的明智决策。</st> <st c="2531">通过考虑效率、可扩展性和泛化能力等因素，你可以微调你的系统以实现最佳性能，同时最小化计算成本并确保在不同场景下的鲁棒性。</st>
    <st c="2744">这至关重要。</st>
- en: <st c="2764">Evaluation is essential for understanding the trade-offs and limitations
    of different approaches within the RAG pipeline.</st> <st c="2887">But evaluation
    can also be useful after deployment, which we will talk</st> <st c="2958">about
    next.</st>
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="2764">评估对于理解RAG管道中不同方法的权衡和限制至关重要。</st> <st c="2887">但评估在部署后也可能很有用，我们将在下一节中讨论。</st>
- en: <st c="2969">Evaluate after you deploy</st>
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="2969">部署后进行评估</st>
- en: <st c="2995">Once your RAG</st> <st c="3010">system is deployed, evaluation
    remains a crucial aspect of ensuring its ongoing effectiveness, reliability, and
    performance.</st> <st c="3135">Continuous monitoring and assessment of your deployed
    RAG pipeline are essential for maintaining its quality and identifying any potential
    issues or degradation</st> <st c="3296">over time.</st>
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="2995">一旦你的RAG</st> <st c="3010">系统部署完成，评估仍然是确保其持续有效性、可靠性和性能的关键方面。</st>
    <st c="3135">对已部署的RAG管道进行持续监控和评估对于保持其质量以及识别任何潜在问题或随时间退化至关重要。</st> <st c="3296">随着时间的推移，这至关重要。</st>
- en: <st c="3306">There are numerous reasons why a RAG system’s performance might
    decline after deployment.</st> <st c="3397">For example, the data used for retrieval
    may become outdated or irrelevant as new information emerges.</st> <st c="3500">The
    language generation model may struggle to adapt to evolving user queries or changes
    in the target domain.</st> <st c="3610">Additionally, the underlying infrastructure,
    such as hardware or software components, may experience performance issues</st>
    <st c="3730">or failures.</st>
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="3306">有众多原因可能导致RAG系统在部署后性能下降。</st> <st c="3397">例如，用于检索的数据可能随着新信息的出现而变得过时或不相关。</st>
    <st c="3500">语言生成模型可能难以适应不断变化的患者查询或目标领域的变更。</st> <st c="3610">此外，底层基础设施，如硬件或软件组件，可能会遇到性能问题</st>
    <st c="3730">或故障。</st>
- en: <st c="3742">Imagine a situation where you are at a financial wealth management
    company that has a RAG-based application that helps users understand the most
    likely factors to impact their financial portfolio.</st> <st c="3940">Your data
    sources might include all of the analyses published by major financial firms in
    the past five years covering all the financial assets represented by</st> <st
    c="4099">your clientele.</st>
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="3742">想象一下，你是一家金融财富管理公司，该公司有一个基于RAG的应用程序，帮助用户了解可能影响其金融投资组合的最可能因素。</st>
    <st c="3940">你的数据源可能包括过去五年内由主要金融公司发布的所有分析，涵盖了你的客户群所代表的全部金融资产。</st>
- en: <st c="4114">In financial markets, though, major (macro) events around the world
    can have a dramatic impact</st> <st c="4210">on those portfolios that have not
    been captured in the past five years of data.</st> <st c="4290">Major catastrophes,
    political instability, or even a regional event for some stocks can set a whole
    new trajectory for their performance.</st> <st c="4428">For your RAG application,
    this represents shifts in the value that the data can provide to your end user,
    and over time, that value can decrease rapidly without proper updates.</st> <st
    c="4605">Users may start asking questions about those specific events that the
    RAG application will not be able to handle, such as</st> *<st c="4727">“What impact
    will the Category 5 hurricane that just occurred have on my portfolio in the next
    year?”</st>* <st c="4828">But with continual updates and monitoring, and particularly
    with more recent reports about the impacts of the hurricane, these issues will
    likely be</st> <st c="4978">well addressed.</st>
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，在金融市场，全球范围内的重大（宏观）事件可以对过去五年数据中未捕捉到的投资组合产生重大影响。<st c="4290">重大灾难、政治不稳定，甚至某些股票的区域性事件都可能为它们的业绩设定全新的轨迹。</st>
    <st c="4428">对于您的RAG应用来说，这代表着数据可以为您的最终用户提供的价值的变化，而且如果没有适当的更新，这种价值可能会随着时间的推移而迅速下降。</st>
    <st c="4605">用户可能会开始询问RAG应用无法处理的具体事件，例如</st> *<st c="4727">“刚刚发生的五级飓风将在下一年对我的投资组合产生什么影响？”</st>*
    <st c="4828">但是，通过持续的更新和监控，尤其是关于飓风影响的最新报告，这些问题很可能会得到妥善解决。</st>
- en: <st c="4993">To mitigate these risks, it is crucial to continuously monitor
    your RAG system, particularly at common failure points.</st> <st c="5113">By continuously
    evaluating these critical components of your RAG pipeline, you can proactively
    identify and address any degradation in performance.</st> <st c="5261">This may
    involve updating the retrieval corpus with fresh and relevant data, fine-tuning
    the language generation model on new data, or optimizing the system’s infrastructure
    to handle increased load or address</st> <st c="5471">performance bottlenecks.</st>
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="4993">为了减轻这些风险，持续监控您的RAG系统至关重要，尤其是在常见的故障点。</st> <st c="5113">通过持续评估您RAG管道的这些关键组件，您可以主动识别并解决任何性能下降。</st>
    <st c="5261">这可能包括用新鲜和相关的数据更新检索语料库，在新数据上微调语言生成模型，或者优化系统的基础设施以处理增加的负载或解决</st> <st
    c="5471">性能瓶颈。</st>
- en: <st c="5495">Furthermore, it is essential to establish a feedback loop that
    allows users to report any issues or provide suggestions for improvement.</st>
    <st c="5633">By actively soliciting and incorporating user feedback, you can continuously
    refine and enhance your RAG system to better meet the needs of its users.</st>
    <st c="5784">This can also include monitoring aspects such as user interface usage,
    response times, and the relevance and usefulness of the generated outputs from
    the user’s perspective.</st> <st c="5958">Conducting user surveys, analyzing user
    interaction logs, and monitoring user satisfaction metrics can provide valuable
    insights into how well your RAG system is meeting its intended purpose.</st> <st
    c="6150">How you utilize this information depends heavily on what type of RAG
    application you have developed, but in general, these are the most common areas
    monitored for continual improvement of deployed</st> <st c="6347">RAG applications.</st>
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="5495">此外，建立允许用户报告任何问题或提供改进建议的反馈循环至关重要。</st> <st c="5633">通过积极征求并整合用户反馈，您可以持续改进和增强您的RAG系统，更好地满足用户的需求。</st>
    <st c="5784">这也可以包括监控用户界面使用、响应时间以及用户视角下生成的输出的相关性有用性等方面。</st> <st c="5958">进行用户调查、分析用户交互日志和监控用户满意度指标可以提供有关您的RAG系统是否满足其预期目的的有价值见解。</st>
    <st c="6150">您如何利用这些信息在很大程度上取决于您开发了哪种类型的RAG应用，但一般来说，这些是部署的RAG应用持续改进中最常见的监控领域。</st>
- en: <st c="6364">By regularly</st> <st c="6378">evaluating your deployed RAG system,
    you can ensure its long-term effectiveness, reliability, and performance.</st>
    <st c="6489">Continuous monitoring, proactive issue detection, and a commitment
    to ongoing improvement are key to maintaining a high-quality RAG pipeline that
    delivers value to its users</st> <st c="6663">over time.</st>
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 通过定期评估您部署的RAG系统，您可以确保其长期的有效性、可靠性和性能。<st c="6489">持续监控、主动问题检测以及持续改进的承诺是维护高质量RAG管道的关键，该管道能够随着时间的推移为用户带来价值</st>
    <st c="6663">。</st>
- en: <st c="6673">Evaluation helps you get better</st>
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="6673">评估帮助你变得更好</st>
- en: <st c="6705">Why is evaluation so important?</st> <st c="6738">Put simply, if
    you don’t measure where you are at, and then measure again after you have made
    improvements, it will be difficult to understand</st> <st c="6881">how or what
    improved (or hurt) the performance of your</st> <st c="6936">RAG system.</st>
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="6705">为什么评估如此重要？</st> <st c="6738">简单来说，如果你不衡量你目前的位置，然后在改进之后再次衡量，那么将很难理解</st>
    <st c="6881">如何或是什么改进（或损害）了你的</st> <st c="6936">RAG系统。</st>
- en: <st c="6947">It is also difficult to understand what is going wrong when something
    does go wrong without something objective to compare against.</st> <st c="7080">Was
    it your retrieval mechanism?</st> <st c="7113">Was it the prompt?</st> <st c="7132">Is
    it your LLM responses?</st> <st c="7158">These are questions a good evaluation
    system can</st> <st c="7207">help answer.</st>
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="6947">当出现问题时，如果没有客观标准进行比较，理解出了什么问题也很困难。</st> <st c="7080">是你的检索机制出了问题吗？</st>
    <st c="7113">是提示出了问题吗？</st> <st c="7132">是你的LLM响应出了问题吗？</st> <st c="7158">这些问题是一个好的评估系统可以帮助回答的。</st>
- en: <st c="7219">Evaluation provides a systematic and objective way to measure the
    performance of your pipeline, identify areas for enhancement, and track the impact
    of any changes or improvements you make.</st> <st c="7410">Without a robust evaluation
    framework, it becomes challenging to understand how your RAG system is progressing
    and where it needs</st> <st c="7540">further refinement.</st>
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="7219">评估提供了一个系统性和客观的方式来衡量你的管道性能，确定需要改进的领域，并跟踪你做出的任何更改或改进的影响。</st> <st
    c="7410">没有强大的评估框架，理解你的RAG系统进展如何以及它需要</st> <st c="7540">进一步改进的地方变得具有挑战性。</st>
- en: <st c="7559">By embracing evaluation as an integral part of your development
    process, you can continuously refine and optimize your RAG pipeline, ensuring
    that it delivers the best possible results and meets the evolving needs of</st>
    <st c="7777">its users.</st>
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="7559">通过将评估视为开发过程的一个基本部分，你可以持续改进和优化你的RAG管道，确保它提供最佳可能的结果，并满足其用户不断变化的需求。</st>
- en: <st c="7787">Early in the RAG system development process, you have to start
    making decisions about what technical components you are going to consider.</st>
    <st c="7927">At this point, you haven’t even installed</st> <st c="7969">anything,
    so you can’t evaluate your code yet, but you can still use</st> **<st c="8038">standardized
    evaluation frameworks</st>** <st c="8072">to narrow down what you are considering.</st>
    <st c="8114">Let’s discuss these standardized evaluation frameworks for some of
    the most common RAG</st> <st c="8201">system elements.</st>
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="7787">在RAG系统开发过程的早期，你必须开始决定你将考虑哪些技术组件。</st> <st c="7927">在这个时候，你甚至还没有安装</st>
    <st c="7969">任何东西，所以你还不能评估你的代码，但你仍然可以使用</st> **<st c="8038">标准化的评估框架</st>** <st
    c="8072">来缩小你考虑的范围。</st> <st c="8114">让我们讨论一些最常见的RAG</st> <st c="8201">系统元素的标准化评估框架。</st>
- en: <st c="8217">Standardized evaluation frameworks</st>
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="8217">标准化的评估框架</st>
- en: <st c="8252">Key technical components of your RAG system include the embedding
    model that makes</st> <st c="8336">your embeddings, the vector store, the vector
    search, and the LLM.</st> <st c="8403">When you look at the different options
    for each technical component, there are a number of standardized metrics that
    are available for each that help you compare them against each other.</st> <st
    c="8590">Here are some common metrics for</st> <st c="8623">each category.</st>
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="8252">你的RAG系统的关键技术组件包括创建嵌入的嵌入模型、向量存储、向量搜索和LLM。</st> <st c="8336">当你查看每个技术组件的不同选项时，每个组件都有一些标准化的指标可供选择，这些指标可以帮助你比较它们。</st>
    <st c="8403">以下是每个类别的一些常见指标。</st> <st c="8590">这里有一些常见指标。</st>
- en: <st c="8637">Embedding model benchmarks</st>
  id: totrans-35
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="8637">嵌入模型基准</st>
- en: <st c="8664">The</st> **<st c="8669">Massive Text Embedding Benchmark</st>**
    <st c="8701">(</st>**<st c="8703">MTEB</st>**<st c="8707">) Retrieval Leaderboard
    evaluates</st> <st c="8742">the performance of embedding models on various retrieval
    tasks across different datasets.</st> <st c="8832">The MTEB leaderboard ranks
    models based on their average performance across many embedding and</st> <st c="8927">retrieval-related
    tasks.</st> <st c="8952">You can visit the leaderboard using this</st> <st c="8993">link:</st>
    [<st c="8999">https://huggingface.co/spaces/mteb/leaderboard</st>](https://huggingface.co/spaces/mteb/leaderboard)
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '**<st c="8664">大规模文本嵌入基准</st>** <st c="8701">(</st>**<st c="8703">MTEB</st>**<st
    c="8707">) 检索排行榜评估了</st> <st c="8742">不同数据集上各种检索任务中嵌入模型的性能。</st> <st c="8832">MTEB排行榜根据模型在多个嵌入和</st>
    <st c="8927">检索相关任务上的平均性能进行排名。</st> <st c="8952">您可以通过此</st> <st c="8993">链接访问排行榜：</st>
    [<st c="8999">https://huggingface.co/spaces/mteb/leaderboard</st>](https://huggingface.co/spaces/mteb/leaderboard)'
- en: <st c="9045">When visiting this web page, click on the</st> **<st c="9088">Retrieval</st>**
    <st c="9097">and</st> **<st c="9102">Retrieval w/Instructions</st>** <st c="9126">tabs
    for</st> <st c="9136">retrieval-specific embedding ratings.</st> <st c="9174">To
    evaluate each of the models on the leaderboard, the model’s outputs are tested
    using a number of datasets that cover a wide range of domains, such as</st> <st
    c="9327">the following:</st>
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="9045">访问此网页时，点击</st> **<st c="9088">检索</st>** <st c="9097">和</st> **<st
    c="9102">带说明的检索</st>** <st c="9126">选项卡以获取</st> <st c="9136">特定检索的嵌入评分。</st> <st
    c="9174">为了评估排行榜上的每个模型，使用涵盖广泛领域的多个数据集测试模型的输出，例如</st> <st c="9327">以下内容：</st>
- en: <st c="9341">Argument</st> <st c="9351">retrieval (</st>`<st c="9362">ArguAna</st>`<st
    c="9370">)</st>
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="9341">论点</st> <st c="9351">检索（</st>`<st c="9362">ArguAna</st>`<st c="9370">）</st>
- en: <st c="9372">Climate fact</st> <st c="9385">retrieval (</st>`<st c="9396">ClimateFEVER</st>`<st
    c="9409">)</st>
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="9372">气候事实</st> <st c="9385">检索（</st>`<st c="9396">ClimateFEVER</st>`<st
    c="9409">）</st>
- en: <st c="9411">Duplicate question</st> <st c="9430">retrieval (</st>`<st c="9441">CQADupstackRetrieval</st>`<st
    c="9462">)</st>
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="9411">重复问题</st> <st c="9430">检索（</st>`<st c="9441">CQADupstackRetrieval</st>`<st
    c="9462">）</st>
- en: <st c="9464">Entity</st> <st c="9471">retrieval (</st>`<st c="9482">DBPedia</st>`<st
    c="9490">)</st>
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="9464">实体</st> <st c="9471">检索（</st>`<st c="9482">DBPedia</st>`<st c="9490">）</st>
- en: <st c="9492">Fact extraction and</st> <st c="9512">verification (</st>`<st c="9526">FEVER</st>`<st
    c="9532">)</st>
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="9492">事实抽取和</st> <st c="9512">验证（</st>`<st c="9526">FEVER</st>`<st c="9532">）</st>
- en: <st c="9534">Financial</st> <st c="9544">question-answering (</st>`<st c="9564">FiQA2018</st>`<st
    c="9573">)</st>
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="9534">金融</st> <st c="9544">问答（</st>`<st c="9564">FiQA2018</st>`<st c="9573">）</st>
- en: <st c="9575">Multi-hop</st> <st c="9585">question-answering (</st>`<st c="9605">HotpotQA</st>`<st
    c="9614">)</st>
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="9575">多跳</st> <st c="9585">问答（</st>`<st c="9605">HotpotQA</st>`<st c="9614">）</st>
- en: <st c="9616">Passage and document</st> <st c="9637">ranking (</st>`<st c="9646">MSMARCO</st>`<st
    c="9654">)</st>
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="9616">段落和文档</st> <st c="9637">排序（</st>`<st c="9646">MSMARCO</st>`<st
    c="9654">）</st>
- en: <st c="9656">Fact-checking (</st>`<st c="9671">NFCorpus</st>`<st c="9680">)</st>
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="9656">事实核查（</st>`<st c="9671">NFCorpus</st>`<st c="9680">）</st>
- en: <st c="9682">Open-domain</st> <st c="9694">question-answering (</st>`<st c="9714">NQ</st>`<st
    c="9717">)</st>
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="9682">开放域</st> <st c="9694">问答（</st>`<st c="9714">NQ</st>`<st c="9717">）</st>
- en: <st c="9719">Duplicate-question</st> <st c="9738">detection (</st>`<st c="9749">QuoraRetrieval</st>`<st
    c="9764">)</st>
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="9719">重复问题</st> <st c="9738">检测（</st>`<st c="9749">QuoraRetrieval</st>`<st
    c="9764">）</st>
- en: <st c="9766">Scientific document</st> <st c="9786">retrieval (</st>`<st c="9797">SCIDOCS</st>`<st
    c="9805">)</st>
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="9766">科学文档</st> <st c="9786">检索（</st>`<st c="9797">SCIDOCS</st>`<st c="9805">）</st>
- en: <st c="9807">Scientific claim</st> <st c="9824">verification (</st>`<st c="9838">SciFact</st>`<st
    c="9846">)</st>
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="9807">科学声明</st> <st c="9824">验证（</st>`<st c="9838">SciFact</st>`<st c="9846">）</st>
- en: <st c="9848">Argument</st> <st c="9857">retrieval (</st>`<st c="9868">Touche2020</st>`<st
    c="9879">)</st>
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="9848">论点</st> <st c="9857">检索（</st>`<st c="9868">Touche2020</st>`<st
    c="9879">）</st>
- en: <st c="9881">COVID-19-related information</st> <st c="9910">retrieval (</st>`<st
    c="9921">TRECCOVID</st>`<st c="9931">)</st>
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="9881">与COVID-19相关的信息</st> <st c="9910">检索（</st>`<st c="9921">TRECCOVID</st>`<st
    c="9931">）</st>
- en: <st c="9933">The leaderboard</st> <st c="9949">ranks embedding models based
    on</st> <st c="9981">their average performance across these tasks, providing a
    comprehensive view of their strengths and weaknesses.</st> <st c="10093">You can
    also click on any metric to order the board by that metric.</st> <st c="10161">So,
    for example, if you are interested in a metric that is more focused on financial
    question-answering, look at what model scored top marks on the</st> <st c="10309">FiQA2018
    dataset.</st>
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="9933">排行榜</st> <st c="9949">根据</st> <st c="9981">这些任务的平均性能对嵌入模型进行排名，从而全面展示它们的优缺点。</st>
    <st c="10093">您还可以点击任何指标，按该指标对排行榜进行排序。</st> <st c="10161">例如，如果您对更关注金融问答的指标感兴趣，请查看在</st>
    <st c="10309">FiQA2018数据集上得分最高的模型。</st>
- en: <st c="10326">Vector store and vector search benchmarks</st>
  id: totrans-54
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="10326">向量存储和向量搜索基准测试</st>
- en: '**<st c="10368">ANN-Benchmarks</st>** <st c="10383">is a</st> <st c="10389">benchmarking
    tool that evaluates the performance</st> <st c="10438">of</st> **<st c="10441">approximate
    nearest neighbor</st>** <st c="10469">(</st>**<st c="10471">ANN</st>**<st c="10474">)
    algorithms, which we discussed thoroughly in</st> [*<st c="10522">Chapter 8</st>*](B22475_08.xhtml#_idTextAnchor152)<st
    c="10531">. ANN-Benchmarks</st> <st c="10548">assesses the</st> <st c="10561">search</st>
    <st c="10568">accuracy, speed, and memory usage of different</st> <st c="10615">vector
    search tools on various datasets, including</st> <st c="10666">the vector search
    tools we mentioned in</st> [*<st c="10706">Chapter 8</st>*](B22475_08.xhtml#_idTextAnchor152)<st
    c="10715">—</st>**<st c="10717">Facebook AI Similarity Search</st>** <st c="10746">(</st>**<st
    c="10748">FAISS</st>**<st c="10753">),</st> **<st c="10757">Approximate Nearest
    Neighbors Oh Yeah</st>** <st c="10794">(</st>**<st c="10796">ANNOY</st>**<st c="10801">),
    and</st> **<st c="10809">Hierarchical Navigable Small</st>** **<st c="10838">Worlds</st>**
    <st c="10844">(</st>**<st c="10846">HNSW</st>**<st c="10850">).</st>'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '**<st c="10368">近似最近邻基准测试</st>** <st c="10383">是一个</st> <st c="10389">基准测试工具，用于评估</st>
    **<st c="10441">近似最近邻</st>** <st c="10469">(</st>**<st c="10471">ANN</st>**<st
    c="10474">) 算法的性能，我们已在</st> [*<st c="10522">第8章</st>*](B22475_08.xhtml#_idTextAnchor152)<st
    c="10531">中详细讨论。</st> ANN-Benchmarks <st c="10548">评估了不同向量搜索工具在各种数据集上的搜索准确性、速度和内存使用情况，包括</st>
    <st c="10666">我们在</st> [*<st c="10706">第8章</st>*](B22475_08.xhtml#_idTextAnchor152)<st
    c="10715">中提到的向量搜索工具</st>—**<st c="10717">Facebook AI相似度搜索</st>** <st c="10746">(</st>**<st
    c="10748">FAISS</st>**<st c="10753">)，**<st c="10757">近似最近邻哦，是的</st>** <st c="10794">(</st>**<st
    c="10796">ANNOY</st>**<st c="10801">)，以及**<st c="10809">分层可导航小世界</st>** **<st
    c="10838">（HNSW）</st>**。</st>'
- en: '**<st c="10853">Benchmarking IR</st>** <st c="10869">(</st>**<st c="10871">BEIR</st>**<st
    c="10875">) is another</st> <st c="10889">useful</st> <st c="10896">resource for
    evaluating vector stores and search algorithms.</st> <st c="10957">It provides
    a heterogeneous benchmark for zero-shot evaluation of information retrieval models
    across diverse domains, including question-answering, fact-checking, and entity
    retrieval.</st> <st c="11143">We will further discuss what</st> *<st c="11172">zero-shot</st>*
    <st c="11181">means in</st> [*<st c="11191">Chapter 13</st>*](B22475_13.xhtml#_idTextAnchor256)<st
    c="11201">, but basically, it means questions/user queries that do not have any
    examples included with them, which is a common situation in RAG.</st> <st c="11336">BEIR
    offers a standardized evaluation framework and includes popular datasets such
    as</st> <st c="11422">the following:</st>'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '**<st c="10853">信息检索基准测试</st>** <st c="10869">(</st>**<st c="10871">BEIR</st>**<st
    c="10875">) 是另一个</st> <st c="10889">有用的</st> <st c="10896">资源，用于评估向量存储和搜索算法。</st>
    <st c="10957">它提供了一个异构基准，用于跨多个领域（包括问答、事实核查和实体检索）对信息检索模型进行零样本评估。</st> <st c="11143">我们将在</st>
    *<st c="11172">第13章</st>* <st c="11191">中进一步讨论</st> *<st c="11172">零样本</st>* <st
    c="11181">的含义</st> [*<st c="11191">](B22475_13.xhtml#_idTextAnchor256)<st c="11201">，但基本上，这意味着没有包含任何示例的问题/用户查询，这在RAG中是一种常见情况。</st>
    <st c="11336">BEIR提供了一个标准化的评估框架，包括以下流行数据集：</st>'
- en: '`<st c="11436">MSMARCO</st>`<st c="11444">: A large-scale dataset derived from
    real-world queries and answers for evaluating deep learning models in search</st>
    <st c="11559">and question-answering</st>'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<st c="11436">MSMARCO</st>`<st c="11444">：一个从现实世界的查询和答案中提取的大规模数据集，用于评估搜索和问答中的深度学习模型</st>
    <st c="11559">和问答</st>'
- en: '`<st c="11581">HotpotQA</st>`<st c="11590">: A question-answering dataset that
    features natural, multi-hop questions, with strong supervision for supporting
    facts and enabling more explainable</st> <st c="11741">question-answering systems</st>'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<st c="11581">HotpotQA</st>`<st c="11590">：一个具有自然、多跳问题的问答数据集，对支持事实进行强监督，以支持更可解释的</st>
    <st c="11741">问答系统</st>'
- en: '`<st c="11767">CQADupStack</st>`<st c="11779">: A benchmark dataset for</st>
    **<st c="11806">community question-answering</st>** <st c="11834">(</st>**<st
    c="11836">cQA</st>**<st c="11839">) research, taken</st> <st c="11858">from 12
    Stack Exchange subforums and annotated with duplicate</st> <st c="11920">question
    information</st>'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<st c="11767">CQADupStack</st>`<st c="11779">：一个用于</st> **<st c="11806">社区问答</st>**
    <st c="11834">(</st>**<st c="11836">cQA</st>**<st c="11839">) 研究的基准数据集，从12个Stack
    Exchange子论坛中提取，并标注了重复</st> <st c="11920">问题信息</st>'
- en: <st c="11940">These</st> <st c="11947">datasets, along</st> <st c="11963">with
    others in the</st> <st c="11982">BEIR benchmark, cover a diverse range of domains
    and</st> <st c="12035">information retrieval tasks, allowing you to assess the
    performance of your retrieval system in different contexts and compare it against</st>
    <st c="12173">state-of-the-art methods.</st>
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="11940">这些数据集，以及BEIR基准中的其他数据集，涵盖了广泛的领域和信息检索任务，使您能够评估您的检索系统在不同环境中的性能，并将其与</st>
    <st c="12173">最先进的方法进行比较。</st>
- en: <st c="12198">LLM benchmarks</st>
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="12198">LLM基准</st>
- en: <st c="12213">The Artificial Analysis LLM Performance Leaderboard is a comprehensive
    resource for evaluating</st> <st c="12309">both open source and proprietary language
    models, such as</st> <st c="12367">ChatGPT, Claude, and Llama.</st> <st c="12395">It</st>
    <st c="12398">assesses the models’ performance</st> <st c="12431">on a wide range
    of tasks.</st> <st c="12457">For quality comparisons, it uses a number</st> <st
    c="12499">of sub-leaderboards:</st>
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="12213">人工分析LLM性能排行榜是一个全面的资源，用于评估</st> <st c="12309">开源和专有语言模型，如</st>
    <st c="12367">ChatGPT、Claude和Llama。</st> <st c="12395">它</st> <st c="12398">评估了模型在广泛任务上的性能。</st>
    <st c="12431">为了进行质量比较，它使用了一系列子排行榜：</st>
- en: '**<st c="12519">General ability</st>**<st c="12535">:</st> <st c="12538">Chatbot
    Arena</st>'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="12519">通用能力</st>**<st c="12535">：</st> <st c="12538">聊天机器人竞技场</st>'
- en: '**<st c="12551">Reasoning</st>** **<st c="12562">and knowledge</st>**<st c="12575">:</st>'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="12551">推理</st>** **<st c="12562">和知识</st>**<st c="12575">：</st>'
- en: '**<st c="12577">Massive Multitask Language</st>** **<st c="12604">Understanding</st>**
    <st c="12617">(</st>**<st c="12619">MMLU</st>**<st c="12623">)</st>'
  id: totrans-65
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="12577">大规模多任务语言</st>** **<st c="12604">理解</st>** <st c="12617">(</st>**<st
    c="12619">MMLU</st>**<st c="12623">)</st>'
- en: '**<st c="12625">Multi-turn Benchmark</st>** <st c="12645">(</st>**<st c="12647">MT
    Bench</st>**<st c="12655">)</st>'
  id: totrans-66
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="12625">多轮基准</st>** <st c="12645">(</st>**<st c="12647">MT Bench</st>**<st
    c="12655">)</st>'
- en: <st c="12657">They also track speed and price and provide analysis to allow
    you to compare a balance of each of these areas.</st> <st c="12768">By ranking
    the models based on their performance across these tasks, the leaderboard provides
    a holistic view of</st> <st c="12881">their capabilities.</st>
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="12657">他们还跟踪速度和价格，并提供分析，以便您比较这些领域的平衡。</st> <st c="12768">通过根据这些任务上的性能对模型进行排名，排行榜提供了对它们能力的全面看法。</st>
- en: <st c="12900">It can be found</st> <st c="12917">here:</st> [<st c="12923">https://artificialanalysis.ai/</st>](https://artificialanalysis.ai/)
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="12900">它可以在以下位置找到：</st> <st c="12917">[</st> <st c="12923">https://artificialanalysis.ai/</st>](https://artificialanalysis.ai/)
- en: <st c="12953">In addition to the general LLM leaderboard, there are specialized
    leaderboards that focus on specific aspects of LLM performance.</st> <st c="13084">The
    Artificial Analysis LLM Performance Leaderboard</st> <st c="13136">evaluates the
    technical aspects of LLMs, such as inference speed, memory consumption, and scalability.</st>
    <st c="13239">It</st> <st c="13242">includes metrics such as throughput (tokens
    processed per second), latency (time to generate a response), memory footprint,
    and scaling efficiency.</st> <st c="13390">These metrics help you understand the
    computational requirements and performance characteristics of</st> <st c="13490">different
    LLMs.</st>
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 除了通用的LLM排行榜，还有专注于LLM性能特定方面的专业排行榜。<st c="12953">《人工分析LLM性能排行榜</st> <st c="13084">》评估LLM的技术方面，例如推理速度、内存消耗和可扩展性。</st>
    <st c="13136">它包括吞吐量（每秒处理的令牌数）、延迟（生成响应的时间）、内存占用和扩展效率等指标。</st> <st c="13239">这些指标有助于您了解不同LLM的计算需求和性能特征。</st>
    <st c="13490">。
- en: <st c="13505">The Open LLM Leaderboard tracks the performance of open source
    language models on various</st> <st c="13596">natural language understanding and
    generation tasks.</st> <st c="13649">It includes benchmarks such as the</st> **<st
    c="13684">AI2 Reasoning Challenge</st>** <st c="13707">(</st>**<st c="13709">ARC</st>**<st
    c="13712">) for complex scientific reasoning, HellaSwag for common-sense reasoning,
    MMLU for domain-specific performance, TruthfulQA for generating truthful and informative
    responses, WinoGrande</st> <st c="13898">for common-sense reasoning through pronoun
    disambiguation, and</st> **<st c="13961">Grade School Math 8K</st>** <st c="13981">(</st>**<st
    c="13983">GSM8K</st>**<st c="13988">) for mathematical</st> <st c="14008">reasoning
    abilities.</st>
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="13505">开放LLM排行榜跟踪开源语言模型在各种</st> <st c="13596">自然语言理解和生成任务上的性能。</st> <st
    c="13649">它包括基准测试，如**<st c="13684">AI2推理挑战</st>** <st c="13707">(**<st c="13709">ARC</st>**<st
    c="13712">)用于复杂科学推理，HellaSwag用于常识推理，MMLU用于特定领域的性能，TruthfulQA用于生成真实和有信息量的响应，WinoGrande</st>
    <st c="13898">通过代词消歧进行常识推理，以及**<st c="13961">小学数学8K</st>** <st c="13981">(**<st
    c="13983">GSM8K</st>**<st c="13988">)用于数学</st> <st c="14008">推理能力。</st>
- en: <st c="14028">Final thoughts on standardized evaluation frameworks</st>
  id: totrans-71
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="14028">关于标准化评估框架的最终思考</st>
- en: <st c="14081">Using standardized evaluation frameworks and benchmarks offers
    a valuable starting point for</st> <st c="14175">comparing the performance of
    different components in your RAG pipeline.</st> <st c="14247">They cover a wide
    range of tasks and domains, allowing you to assess the strengths and weaknesses
    of various approaches.</st> <st c="14368">By considering the results on these
    benchmarks, along with other factors such as computational efficiency and ease
    of integration, you can narrow down your options and make better-informed decisions
    when selecting the most suitable components for your specific</st> <st c="14629">RAG
    application.</st>
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="14081">使用标准化评估框架和基准测试为比较您RAG管道中不同组件的性能提供了一个有价值的起点。</st> <st c="14175">它们涵盖了广泛的任务和领域，使您能够评估各种方法的优缺点。</st>
    <st c="14247">通过考虑这些基准测试的结果，以及其他因素如计算效率和易于集成，您可以在选择最适合您特定</st> <st c="14629">RAG应用的最佳组件时缩小选择范围并做出更明智的决策。</st>
- en: <st c="14645">However, it’s important to note that while these standardized
    evaluation metrics are helpful for initial component selection, they may not fully
    capture the performance of your specific RAG pipeline with your unique inputs
    and outputs.</st> <st c="14882">To truly understand how well your RAG system performs
    in your particular use case, you need to set up your own evaluation framework
    tailored to your specific requirements.</st> <st c="15054">This customized evaluation</st>
    <st c="15081">system will provide the most accurate and relevant insights into
    the performance of your</st> <st c="15170">RAG pipeline.</st>
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="14645">然而，需要注意的是，尽管这些标准化评估指标对于初始组件选择有帮助，但它们可能无法完全捕捉到您特定RAG管道与独特输入和输出的性能。</st>
    <st c="14882">为了真正了解您的RAG系统在特定用例中的表现，您需要设置自己的评估框架，以适应您特定的需求。</st> <st c="15054">这个定制化的评估</st>
    <st c="15081">系统将为您的</st> <st c="15170">RAG管道提供最准确和相关的见解。</st>
- en: <st c="15183">Next, we need to talk about one of the most important and often
    overlooked aspects of RAG evaluation, your</st> <st c="15291">ground-truth data.</st>
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="15183">接下来，我们需要讨论RAG评估中最重要且经常被忽视的一个方面，那就是您的</st> <st c="15291">真实数据。</st>
- en: <st c="15309">What is the ground truth?</st>
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="15309">什么是基准数据？</st>
- en: <st c="15335">Simply put, ground-truth data is data that represents the ideal
    responses you would expect if your RAG system was operating at</st> <st c="15463">peak
    performance.</st>
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="15335">简单来说，基准数据是代表如果你RAG系统处于</st> <st c="15463">最佳性能时你期望的理想响应的数据。</st>
- en: <st c="15480">As a practical example, if you had a RAG system focused on allowing
    someone to ask questions about</st> <st c="15580">the latest cancer research in
    veterinarian medicine for dogs, with your data source being all the latest research
    papers on the subject that have been submitted to PubMed, your ground truth would
    likely be questions and answers that could be asked and answered of that data.</st>
    <st c="15855">You would want to use realistic questions that your target audience
    would really ask, and the answers should be what you consider to be the ideal
    answer expected from the LLM.</st> <st c="16031">This could be somewhat objective,
    but nonetheless, having a set of ground-truth data to compare against the input
    and output of your RAG system is a critical way to help compare the impact of
    changes you make and ultimately make the system</st> <st c="16271">more effective.</st>
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="15480">作为一个实际例子，如果你有一个专注于允许某人询问关于</st> <st c="15580">犬类兽医医学最新癌症研究的RAG系统，你的数据源是所有提交给PubMed的关于该主题的最新研究论文，你的基准数据很可能是可以对该数据提出和回答的问题和答案。</st>
    <st c="15855">你希望使用目标受众真正会提出的问题，并且答案应该是你认为从LLM期望的理想答案。</st> <st c="16031">这可能有一定的客观性，但无论如何，拥有可以与你的RAG系统的输入和输出进行比较的基准数据集是帮助比较你做出的更改的影响并最终使系统更有效的一种关键方式。</st>
    <st c="16271">更有效。</st>
- en: <st c="16286">How to use the ground truth?</st>
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="16286">如何使用基准数据？</st>
- en: <st c="16315">Ground-truth data serves as a benchmark to measure the performance
    of RAG systems.</st> <st c="16399">By comparing</st> <st c="16412">the output
    generated by the RAG system to the ground truth, you can assess how well the system
    retrieves relevant information and generates accurate and coherent responses.</st>
    <st c="16585">The ground truth helps quantify the effectiveness of different RAG
    approaches and identify areas</st> <st c="16682">for improvement.</st>
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="16315">基准数据作为衡量RAG系统性能的基准。</st> <st c="16399">通过比较</st> <st c="16412">RAG系统生成的输出与基准数据，你可以评估系统检索相关信息和生成准确、连贯响应的能力。</st>
    <st c="16585">基准数据有助于量化不同RAG方法的有效性并确定改进领域。</st>
- en: <st c="16698">Generating the ground truth</st>
  id: totrans-80
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="16698">生成基准数据</st>
- en: <st c="16726">Creating</st> <st c="16736">ground-truth data manually can be
    time-consuming.</st> <st c="16786">If your company already has a dataset of ideal
    responses for specific queries or prompts, that can be a valuable resource.</st>
    <st c="16909">However, if such data is not readily available, there are alternative
    methods to obtain the ground truth that we will look</st> <st c="17032">into next.</st>
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="16726">手动创建基准数据</st> <st c="16736">可能耗时。</st> <st c="16786">如果你的公司已经有一组针对特定查询或提示的理想响应的数据集，那将是一个宝贵的资源。</st>
    <st c="16909">然而，如果此类数据不可用，我们将在下一部分探讨获取基准数据的替代方法。</st>
- en: <st c="17042">Human annotation</st>
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="17042">人工标注</st>
- en: <st c="17059">You can</st> <st c="17068">employ human annotators to manually
    create ideal responses for a set of queries or prompts.</st> <st c="17160">This
    ensures high-quality ground-truth data but can be costly and time-consuming, especially
    for</st> <st c="17257">large-scale evaluations.</st>
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="17059">你可以</st> <st c="17068">雇佣人工标注员手动为一系列查询或提示创建理想响应。</st> <st c="17160">这确保了高质量的基准数据，但可能成本高昂且耗时，尤其是对于</st>
    <st c="17257">大规模评估。</st>
- en: <st c="17281">Expert knowledge</st>
  id: totrans-84
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="17281">专家知识</st>
- en: <st c="17298">In some</st> <st c="17307">domains, you may have access to</st>
    **<st c="17339">subject-matter experts</st>** <st c="17361">(</st>**<st c="17363">SMEs</st>**<st
    c="17367">) who can provide ground-truth responses based on their</st> <st c="17424">expertise.</st>
    <st c="17435">This can be particularly useful for specialized or technical domains
    where accurate information</st> <st c="17531">is crucial.</st>
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="17298">在某些</st> <st c="17307">领域，你可能可以访问</st> **<st c="17339">领域专家</st>**
    <st c="17361">(</st>**<st c="17363">SMEs</st>**<st c="17367">) 他们可以根据他们的</st>
    <st c="17424">专业知识</st> <st c="17435">提供基准响应。</st> <st c="17531">这在需要准确信息的专业或技术领域尤其有用。</st>
- en: <st c="17542">One common</st> <st c="17554">approach to help with this method
    is called</st> **<st c="17598">rule-based generation</st>**<st c="17619">. With
    rule-based generation, for specific domains or tasks, you can define a set of
    rules or templates to generate the synthetic ground truth and utilize your SMEs
    to fill in the template.</st> <st c="17809">By leveraging domain knowledge and
    predefined patterns, you can create responses that align with the expected format</st>
    <st c="17926">and content.</st>
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="17542">一种常见的帮助此方法的方法称为</st> **<st c="17598">基于规则生成</st>**<st c="17619">。使用基于规则生成，对于特定领域或任务，您可以定义一组规则或模板来生成合成地面实况，并利用您的SMEs来填写模板。</st>
    <st c="17809">通过利用领域知识和预定义的模式，您可以创建与预期格式和内容相符的响应。</st>
- en: <st c="17938">For example, if you are building a customer support chatbot to
    support mobile phones, you may have a template such as this:</st> `<st c="18063">To
    resolve [issue], you can try [solution]</st>`<st c="18105">. Your SMEs can fill
    in various issue-solution approaches where an issue might be</st> *<st c="18187">battery
    drain</st>* <st c="18200">and the solution</st> *<st c="18218">reducing screen
    brightness and closing background apps</st>*<st c="18272">. This would be fed
    to the template (what we call hydrating) and the final output would be something
    such as this:</st> `<st c="18387">To resolve [battery drain], you can try [reducing
    screen brightness and closing</st>` `<st c="18467">background apps]</st>`<st c="18483">.</st>
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="17938">例如，如果您正在构建一个用于支持手机的客户支持聊天机器人，您可能有一个这样的模板：</st> `<st c="18063">要解决[问题]，您可以尝试[解决方案]</st>`<st
    c="18105">。您的SMEs可以在可能的问题-解决方案方法中填写各种问题-解决方案，其中问题可能是</st> *<st c="18187">电池耗尽</st>*
    <st c="18200">，解决方案是</st> *<st c="18218">降低屏幕亮度和关闭后台应用</st>*<st c="18272">。这将输入到模板中（我们称之为“加水”），最终输出将是这样的：</st>
    `<st c="18387">要解决[电池耗尽]，您可以尝试[降低屏幕亮度和关闭</st>` `<st c="18467">后台应用]</st>`<st c="18483">。</st>
- en: <st c="18484">Crowdsourcing</st>
  id: totrans-88
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="18484">众包</st>
- en: <st c="18498">Platforms</st> <st c="18509">such as Amazon Mechanical Turk and
    Figure Eight allow you to outsource the task of creating ground-truth data to
    a large pool of workers.</st> <st c="18647">By providing clear instructions and
    quality control measures, you can obtain a diverse set</st> <st c="18738">of responses.</st>
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="18498">平台</st> <st c="18509">如Amazon Mechanical Turk和Figure Eight允许您将创建地面实况数据的任务外包给大量工作者。</st>
    <st c="18647">通过提供清晰的指示和质量控制措施，您可以获得多样化的响应集。</st>
- en: <st c="18751">Synthetic ground truth</st>
  id: totrans-90
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="18751">合成地面实况</st>
- en: <st c="18774">In cases where obtaining real ground-truth data is challenging
    or infeasible, generating the synthetic</st> <st c="18878">ground truth can be
    a viable</st> <st c="18907">alternative.</st> <st c="18920">The synthetic ground
    truth involves using existing LLMs or techniques to automatically generate plausible
    responses.</st> <st c="19037">Here are a</st> <st c="19048">few approaches:</st>
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 在获取真实地面实况数据具有挑战性或不切实际的情况下，生成合成地面实况可以是一个可行的替代方案。<st c="18920">合成地面实况涉及使用现有的LLM或技术自动生成合理的响应。</st>
    <st c="19037">以下是一些方法：</st>
- en: '**<st c="19063">Fine-tuned language models</st>**<st c="19090">: You can fine-tune
    LLMs on a smaller dataset of</st> <st c="19140">high-quality responses.</st> <st
    c="19164">By</st> <st c="19167">providing the model with examples of ideal responses,
    it can learn to generate similar responses for new queries or prompts.</st> <st
    c="19292">The generated responses can serve as a synthetic</st> <st c="19341">ground
    truth.</st>'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="19063">微调语言模型</st>**<st c="19090">：您可以在较小的高质量响应数据集上微调LLM。</st> <st
    c="19140">通过向模型提供理想响应的示例，它可以学习为新查询或提示生成类似的响应。</st> <st c="19164">生成的响应可以用作合成</st>
    <st c="19341">地面实况。</st>'
- en: '**<st c="19354">Retrieval-based methods</st>**<st c="19378">: If you have a
    large corpus of high-quality text data, you</st> <st c="19439">can use retrieval-based
    methods to find</st> <st c="19479">relevant passages or sentences that closely
    match the query or prompt.</st> <st c="19550">These retrieved passages can be
    used as a proxy for</st> <st c="19602">ground-truth responses.</st>'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="19354">基于检索的方法</st>**<st c="19378">：如果您拥有大量高质量的文本数据，您可以使用基于检索的方法来找到与查询或提示紧密匹配的相关段落或句子。</st>
    <st c="19439">这些检索到的段落可以用作地面实况响应的代理。</st>'
- en: <st c="19625">Obtaining the ground truth can be a challenging step in building
    your RAG system, but once you have obtained it, you will have a strong foundation
    for effective RAG evaluation.</st> <st c="19803">In the next section, we have
    a code lab where we generate synthetic ground-truth data and then integrate a
    useful evaluation platform into our RAG system that will tell us how the hybrid
    search we used in the previous chapter impacted</st> <st c="20038">our results.</st>
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="19625">获取真实信息是构建您的 RAG 系统中的一个具有挑战性的步骤，但一旦您获得了它，您将为有效的 RAG 评估打下坚实的基础。</st>
    <st c="19803">在下一节中，我们有一个代码实验室，我们将生成合成真实信息数据，然后整合一个有用的评估平台到我们的 RAG 系统中，这将告诉我们上一章中使用的混合搜索对我们结果的影响。</st>
- en: <st c="20050">Code lab 9.1 – ragas</st>
  id: totrans-95
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="20050">代码实验室 9.1 – ragas</st>
- en: '**<st c="20071">Retrieval-augmented generation assessment</st>** <st c="20113">(</st>**<st
    c="20115">ragas</st>**<st c="20120">) is an evaluation platform designed</st>
    <st c="20158">specifically for RAG.</st> <st c="20180">In this code lab, we will
    step through the implementation of ragas in your code, generating a synthetic
    ground truth, and then establishing a comprehensive set of metrics that you can
    integrate into your RAG system.</st> <st c="20396">But evaluation systems are
    meant to evaluate something, right?</st> <st c="20459">What will we evaluate in
    our</st> <st c="20488">code lab?</st>'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '**<st c="20071">检索增强生成评估</st>** <st c="20113">(**<st c="20115">ragas</st>**<st
    c="20120">) 是一个专门为 RAG 设计的评估平台。</st> <st c="20158">在本代码实验室中，我们将逐步实现 ragas 在您的代码中的实现，生成合成真实信息，然后建立一个全面的指标集，您可以将其集成到您的
    RAG 系统中。</st> <st c="20396">但评估系统是用来评估某物的，对吧？</st> <st c="20459">在我们的</st> <st
    c="20488">代码实验室中，我们将评估什么？</st>'
- en: <st c="20497">If you remember in</st> [*<st c="20517">Chapter 8</st>*](B22475_08.xhtml#_idTextAnchor152)<st
    c="20526">, we introduced a new search method for our retrieval stage called</st>
    **<st c="20593">hybrid search</st>**<st c="20606">. In this</st> <st c="20616">code
    lab, we will both implement the original dense vector semantic-based search and
    then use ragas to evaluate the impact of using the hybrid search method.</st>
    <st c="20774">This will give you a real-world working example of how a comprehensive
    evaluation system can be implemented in your</st> <st c="20890">own code!</st>
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="20497">如果您还记得</st> [*<st c="20517">第 8 章</st>*](B22475_08.xhtml#_idTextAnchor152)<st
    c="20526">，我们介绍了一种新的检索阶段搜索方法，称为</st> **<st c="20593">混合搜索</st>**<st c="20606">。在本</st>
    <st c="20616">代码实验室中，我们将实现基于密集向量语义的原始搜索，然后使用 ragas 来评估使用混合搜索方法的影响。</st> <st c="20774">这将为您提供一个真实世界的实际工作示例，说明如何在自己的代码中实现一个全面的评估系统！</st>
- en: <st c="20899">Before we dive</st> <st c="20915">into how to use ragas, it is
    important to note that it is a highly evolving project.</st> <st c="21000">New
    features and API changes are happening often with new releases, so be sure to
    refer to the documentation website when walking through code</st> <st c="21143">examples:</st>
    [<st c="21153">https://docs.ragas.io/</st>](https://docs.ragas.io/)
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="20899">在我们深入探讨如何使用 ragas 之前，重要的是要注意它是一个高度发展的项目。</st> <st c="20915">随着新版本的发布，新功能和
    API 变更经常发生，因此在使用代码</st> <st c="21143">示例时，务必参考文档网站：</st> [<st c="21153">https://docs.ragas.io/</st>](https://docs.ragas.io/)
- en: <st c="21175">This code lab picks up right where we left off in the last chapter
    when we added</st> `<st c="21257">EnsembleRetriever</st>` <st c="21274">from LangChain
    (</st>*<st c="21291">Code</st>* *<st c="21297">lab 8.3</st>*<st c="21304">):</st>
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="21175">本代码实验室从上一章我们添加的</st> `<st c="21257">EnsembleRetriever</st>` <st
    c="21274">（</st>*<st c="21291">代码</st>* *<st c="21297">实验室 8.3</st>*<st c="21304">）</st>继续进行：</st>
- en: <st c="21307">Let’s start with some new packages</st> <st c="21343">to install:</st>
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: <st c="21307">让我们从一些需要安装的新软件包开始：</st> <st c="21343">开始：</st>
- en: '[PRE0]'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '[PRE1]'
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '[PRE2]'
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: <st c="21867">Next, we need to add several imports related to what we</st> <st
    c="21924">just installed:</st>
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: <st c="21867">接下来，我们需要添加一些与我们刚刚安装的</st> <st c="21924">相关的一些导入：</st>
- en: '[PRE3]'
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[PRE4]'
  id: totrans-106
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[PRE5]'
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '[PRE6]'
  id: totrans-108
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[PRE7]'
  id: totrans-109
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '[PRE8]'
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[PRE9]'
  id: totrans-111
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '[PRE10]'
  id: totrans-112
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-113
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '[PRE12]'
  id: totrans-114
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[PRE13]'
  id: totrans-115
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '[PRE14]'
  id: totrans-116
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '[PRE15]'
  id: totrans-117
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '[PRE16]'
  id: totrans-118
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '[PRE17]'
  id: totrans-119
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '[PRE18]'
  id: totrans-120
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '**`<st c="23571">from ragas.testset.generator import TestsetGenerator</st>`<st
    c="23624">: The</st> `<st c="23631">TestsetGenerator</st>` <st c="23647">class
    is used to generate synthetic ground-truth datasets for evaluating RAG pipelines.</st>
    <st c="23736">It takes a set of documents and generates question-answer pairs
    along with the corresponding contexts.</st> <st c="23839">One key aspect of</st>
    `<st c="23857">TestsetGenerator</st>` <st c="23873">is that it allows the customization
    of the test data distribution by specifying the</st> <st c="23958">proportions
    of different question types (e.g., simple, multi-context, or reasoning) using
    the</st> `<st c="24052">distributions</st>` <st c="24065">parameter.</st> <st
    c="24077">It supports generating test sets using both LangChain and LlamaIndex</st>
    <st c="24146">document loaders.</st>**'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**`<st c="23571">from ragas.testset.generator import TestsetGenerator</st>`<st
    c="23624">: The</st> `<st c="23631">TestsetGenerator</st>` <st c="23647">class
    is used to generate synthetic ground-truth datasets for evaluating RAG pipelines.</st>
    <st c="23736">It takes a set of documents and generates question-answer pairs
    along with the corresponding contexts.</st> <st c="23839">One key aspect of</st>
    `<st c="23857">TestsetGenerator</st>` <st c="23873">is that it allows the customization
    of the test data distribution by specifying the</st> <st c="23958">proportions
    of different question types (e.g., simple, multi-context, or reasoning) using
    the</st> `<st c="24052">distributions</st>` <st c="24065">parameter.</st> <st
    c="24077">It supports generating test sets using both LangChain and LlamaIndex</st>
    <st c="24146">document loaders.</st>****'
- en: '**`<st c="24163">from ragas.testset.evolutions import simple, reasoning, multi_context</st>`<st
    c="24233">: These imports represent different types of question evolutions used
    in the test dataset generation process.</st> <st c="24344">These evolutions help
    create a diverse and comprehensive test dataset that covers various types of questions
    encountered in</st> <st c="24468">real-world scenarios:</st>'
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**`<st c="24163">from ragas.testset.evolutions import simple, reasoning, multi_context</st>`<st
    c="24233">: These imports represent different types of question evolutions used
    in the test dataset generation process.</st> <st c="24344">These evolutions help
    create a diverse and comprehensive test dataset that covers various types of questions
    encountered in</st> <st c="24468">real-world scenarios:</st>**'
- en: '`<st c="24807">from ragas.metrics import…()</st>`<st c="24836">: This</st>
    `<st c="24844">import</st>` <st c="24850">statement brings in various evaluation
    metrics provided by the ragas library.</st> <st c="24929">The metrics imported
    include</st> `<st c="24958">answer_relevancy</st>`<st c="24974">,</st> `<st c="24976">faithfulness</st>`<st
    c="24988">,</st> `<st c="24990">context_recall</st>`<st c="25004">,</st> `<st
    c="25006">context_precision</st>`<st c="25023">,</st> `<st c="25025">answer_correctness</st>`<st
    c="25043">, and</st> `<st c="25049">answer_similarity</st>`<st c="25066">. There
    are currently two more component-wise metrics (context relevancy and context entity
    recall) that we can import, but to reduce the complexity of this, we will skip
    over them here.</st> <st c="25253">We will talk about additional metrics you can
    use toward the end of the code lab.</st> <st c="25335">These metrics assess different
    aspects of the RAG pipeline’s performance that relate to the retrieval and generation
    and, overall, all the end-to-end stages of the</st> <st c="25499">active pipeline.</st>**'
  id: totrans-123
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**`<st c="24807">from ragas.metrics import…()</st>`<st c="24836">: This</st>
    `<st c="24844">import</st>` <st c="24850">statement brings in various evaluation
    metrics provided by the ragas library.</st> <st c="24929">The metrics imported
    include</st> `<st c="24958">answer_relevancy</st>`<st c="24974">,</st> `<st c="24976">faithfulness</st>`<st
    c="24988">,</st> `<st c="24990">context_recall</st>`<st c="25004">,</st> `<st
    c="25006">context_precision</st>`<st c="25023">,</st> `<st c="25025">answer_correctness</st>`<st
    c="25043">, and</st> `<st c="25049">answer_similarity</st>`<st c="25066">. There
    are currently two more component-wise metrics (context relevancy and context entity
    recall) that we can import, but to reduce the complexity of this, we will skip
    over them here.</st> <st c="25253">We will talk about additional metrics you can
    use toward the end of the code lab.</st> <st c="25335">These metrics assess different
    aspects of the RAG pipeline’s performance that relate to the retrieval and generation
    and, overall, all the end-to-end stages of the</st> <st c="25499">active pipeline.</st>****'
- en: '**<st c="25515">Overall, these</st> <st c="25531">imports from the ragas library
    provide a comprehensive set of tools for generating synthetic test datasets, evaluating
    RAG pipelines using various metrics, and analyzing the</st> <st c="25705">performance
    results.</st>'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '**`<st c="25515">Overall, these</st> <st c="25531">imports from the ragas library
    provide a comprehensive set of tools for generating synthetic test datasets, evaluating
    RAG pipelines using various metrics, and analyzing the</st> <st c="25705">performance
    results.</st>**'
- en: <st c="25725">Setting up LLMs/embedding models</st>
  id: totrans-125
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**`<st c="25725">Setting up LLMs/embedding models</st>**'
- en: <st c="25758">Now, we are going to upgrade how we handle our LLM and embedding
    services.</st> <st c="25834">With ragas, we</st> <st c="25849">are introducing
    more complexity to the number of LLMs that we use; we want to better</st> <st
    c="25934">manage that by setting our initializations upfront for both the embedding
    service and the LLM services.</st> <st c="26038">Let’s look at</st> <st c="26052">the
    code:</st>
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="25758">现在，我们将升级我们处理 LLM 和嵌入服务的方式。</st> <st c="25834">使用 ragas，我们在使用的
    LLM 数量上引入了更多复杂性；我们希望通过提前设置嵌入服务和 LLM 服务来更好地管理这一点。</st> <st c="25934">让我们看看</st>
    <st c="26038">代码：</st>
- en: '[PRE19]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: <st c="26514">Note that while we still only use one embedding service, we now
    have two different LLMs to call.</st> <st c="26612">The main goal of this, though,
    is to establish the</st> *<st c="26663">primary</st>* <st c="26670">LLM that we
    want to use directly for LLMs (</st>`<st c="26714">llm</st>`<st c="26718">), and
    then two additional LLMs that are designated for the evaluation process (</st>`<st
    c="26799">generator_llm</st>` <st c="26813">and</st> `<st c="26818">critic_llm</st>`<st
    c="26828">).</st>
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="26514">请注意，尽管我们仍然只使用一个嵌入服务，但我们现在有两个不同的 LLM 可以调用。</st> <st c="26612">然而，这个主要目标是建立我们想要直接用于
    LLM 的</st> *<st c="26663">主要</st> <st c="26670">LLM</st>，然后是两个额外的 LLM，它们被指定用于评估过程（</st>`<st
    c="26714">llm</st>`<st c="26718">)，以及</st> `<st c="26799">generator_llm</st>`
    <st c="26813">和</st> `<st c="26818">critic_llm</st>`<st c="26828">）。</st>
- en: <st c="26831">We have the benefit of having a more advanced LLM available, ChatGPT-4o-mini,
    which we can use as the critic LLM, which, in theory, means it can be more effective
    at evaluating input that we feed to it.</st> <st c="27035">This may not always
    be the case, or you may have an LLM</st> <st c="27091">that you fine-tune specifically
    for the task of evaluation.</st> <st c="27151">Either way, breaking these LLMs
    out into specialized designations shows you how different LLMs can be used for
    different</st> <st c="27272">purposes within a RAG system.</st> <st c="27302">You
    can remove the following line from the previous code that was initializing the
    LLM object that we were</st> <st c="27409">originally using:</st>
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="26831">我们有一个好处，那就是有一个更先进的 LLM 可用，ChatGPT-4o-mini，我们可以将其用作评论 LLM，理论上这意味着它可以更有效地评估我们输入给它的内容。</st>
    <st c="27035">这并不总是如此，或者你可能有一个专门针对评估任务微调的 LLM。</st> <st c="27091">无论如何，将这些 LLM
    分离成专门的设计表明了不同的 LLM 可以在 RAG 系统中用于不同的</st> <st c="27272">目的。</st> <st c="27302">你可以从之前初始化
    LLM 对象的代码中删除以下行，我们最初使用的是：</st> <st c="27409"></st>
- en: '[PRE20]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: <st c="27484">Next, we will add a new RAG chain for running the similarity search
    (which is what we were originally running with just the</st> <st c="27609">dense
    embeddings):</st>
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="27484">接下来，我们将添加一个新的 RAG 链来运行相似度搜索（这是我们最初仅使用密集嵌入运行的内容）：</st>
- en: '[PRE21]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: <st c="27769">To make things clearer, we will update the hybrid RAG chain with</st>
    <st c="27835">this name:</st>
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使事情更清晰，我们将使用以下名称更新混合 RAG 链：<st c="27769"></st> <st c="27835"></st>
- en: '[PRE22]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: <st c="27986">Note the change of the variable that is bolded, which used to
    be</st> `<st c="28052">rag_chain_with_source</st>`<st c="28073">. It is now called</st>
    `<st c="28092">rag_chain_hybrid</st>`<st c="28108">, representing the hybrid</st>
    <st c="28134">search aspect.</st>
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="27986">请注意，粗体显示的变量发生了变化，它曾经是</st> `<st c="28052">rag_chain_with_source</st>`<st
    c="28073">。现在它被称为</st> `<st c="28092">rag_chain_hybrid</st>`<st c="28108">，代表混合</st>
    <st c="28134">搜索方面。</st>
- en: <st c="28148">Now we are going to update our original code for submitting a
    user query, only this time, we are going to use both the similarity and hybrid</st>
    <st c="28290">search versions.</st>
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="28148">现在我们将更新我们提交用户查询的原始代码，但这次我们将使用相似度和混合</st> <st c="28290">搜索版本。</st>
- en: <st c="28306">Create the</st> <st c="28318">similarity version:</st>
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="28306">创建相似度版本：</st> <st c="28318"></st>
- en: '[PRE23]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: <st c="28889">Now, create</st> <st c="28902">the</st> <st c="28906">hybrid version:</st>
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="28889">现在，创建</st> <st c="28902">混合版本：</st>
- en: '[PRE24]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: <st c="29465">The</st> <st c="29470">primary difference between these two sets
    of code is that they show the use of the different</st> <st c="29563">RAG chains
    we have created,</st> `<st c="29591">rag_chain_similarity</st>` <st c="29611">and</st>
    `<st c="29616">rag_chain_hybrid</st>`<st c="29632">.</st>
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="29465">这两组代码之间的主要区别在于它们展示了我们创建的不同</st> <st c="29470">RAG 链的使用，</st> `<st
    c="29591">rag_chain_similarity</st>` <st c="29611">和</st> `<st c="29616">rag_chain_hybrid</st>`<st
    c="29632">。</st>
- en: <st c="29633">First, let’s take a look at the output from the</st> <st c="29682">similarity
    search:</st>
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="29633">首先，让我们看看相似度搜索的输出：</st> <st c="29682"></st>
- en: '[PRE25]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: <st c="30477">Next is the output from the</st> <st c="30506">hybrid search:</st>
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="30477">接下来是混合搜索的输出：</st>
- en: '[PRE26]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: <st c="31464">Saying which is better may be subjective, but if you look back
    at the code from</st> [*<st c="31545">Chapter 8</st>*](B22475_08.xhtml#_idTextAnchor152)<st
    c="31554">, the retrieval mechanism for each of these chains returns a different
    set of data for the</st> <st c="31645">LLM to use as the basis for answering the
    user query.</st> <st c="31699">You can see these differences reflected</st> <st
    c="31739">in the preceding responses, where each has slightly different information
    and highlights slightly different aspects of</st> <st c="31858">that information.</st>
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="31464">说哪个更好可能是主观的，但如果你回顾一下</st> [*<st c="31545">第8章</st>*](B22475_08.xhtml#_idTextAnchor152)<st
    c="31554">中的代码，每个链的检索机制都会为LLM返回一组不同的数据，作为回答用户查询的基础。</st> <st c="31645">你可以在前面的响应中看到这些差异的反映，每个响应都有略微不同的信息和突出显示该信息的不同方面。</st>
- en: <st c="31875">So far, we have set up our RAG system to have the ability to use
    two different RAG chains, one focused on using just the similarity/dense search
    and the other using the hybrid search.</st> <st c="32060">This sets the foundation
    for applying ragas to our code to establish a more objective approach to evaluating
    the results we are getting from either of</st> <st c="32211">these chains.</st>
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经设置了我们的RAG系统，使其能够使用两个不同的RAG链，一个专注于仅使用相似性/密集搜索，另一个使用混合搜索。<st c="32060">这为将拉加斯应用于我们的代码以建立评估我们从中获得的结果的更客观方法奠定了基础。</st>
- en: <st c="32224">Generating the synthetic ground truth</st>
  id: totrans-148
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="32224">生成合成真实情况</st>
- en: <st c="32262">As we mentioned in the previous section, ground truth is a key
    element for us to conduct</st> <st c="32352">this evaluation analysis.</st> <st
    c="32378">But we have no ground truth—oh no!</st> <st c="32413">No problem, we
    can use ragas to generate synthetic data for</st> <st c="32473">this purpose.</st>
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，**真实情况**是我们进行此评估分析的关键要素。<st c="32352">但我们没有真实情况——哦不！</st> <st c="32413">没问题，我们可以使用拉加斯来生成用于此目的的合成数据。</st>
- en: <st c="32486">WARNING</st>
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="32486">警告</st>
- en: <st c="32494">The ragas library uses your LLM API extensively.</st> <st c="32544">The
    analysis that ragas will provide is LLM-assisted evaluation, meaning every time
    a ground-truth example is generated or evaluated, an LLM is called (sometimes
    multiple times for one metric) and an API charge is incurred.</st> <st c="32768">If
    you generate 100 ground-truth examples, which includes the generation of both
    questions and answers, and then run six different evaluation metrics, the number
    of LLM API calls you make multiplies substantially, well into the thousands of
    calls.</st> <st c="33016">It is recommended to use it sparingly until you have
    a good grasp on how often the calls are being made.</st> <st c="33121">These are
    cost-incurring API calls and they have the potential to run up your LLM API bills!</st>
    <st c="33214">At the time of this writing, I was incurring a cost of about $2
    to $2.50 every time I ran through the entire code lab with just 10 ground examples
    and 6 metrics.</st> <st c="33376">If you have a larger dataset or set</st> `<st
    c="33412">test_size</st>` <st c="33421">for your</st> `<st c="33431">testset</st>`
    <st c="33438">generator to generate more than 10 examples, the costs will</st>
    <st c="33499">increase substantially.</st>
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 拉加斯库广泛使用了您的LLM API。<st c="32544">拉加斯提供的分析是LLM辅助评估，这意味着每次生成或评估一个真实情况示例时，都会调用一个LLM（有时为一个指标调用多次），并产生API费用。</st>
    <st c="32768">如果您生成100个真实情况示例，包括问题和答案的生成，然后运行六个不同的评估指标，您进行的LLM API调用次数将大幅增加，达到数千次。</st>
    <st c="33016">建议您在使用之前谨慎使用，直到您对调用频率有很好的了解。</st> <st c="33121">这些是产生费用的API调用，它们有可能使您的LLM
    API账单大幅增加！</st> <st c="33214">在撰写本文时，我每次运行整个代码实验室（仅使用10个真实示例和6个指标）时，费用约为2到2.50美元。</st>
    <st c="33376">如果您有一个更大的数据集或设置了</st> `<st c="33412">test_size</st>` <st c="33421">，用于您的</st>
    `<st c="33431">testset</st>` <st c="33438">生成器以生成超过10个示例，费用将大幅增加。</st>
- en: <st c="33522">We start</st> <st c="33532">with creating an instance of our generator
    that we will use to generate our</st> <st c="33608">ground-truth dataset:</st>
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="33522">我们首先</st> <st c="33532">创建一个我们将用于生成我们的</st> <st c="33608">真实情况数据集的生成器实例：</st>
- en: '[PRE27]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: <st c="34099">As you can see in this code, we are using both</st> `<st c="34147">generator_llm</st>`
    <st c="34160">and</st> `<st c="34165">critic_llm</st>`<st c="34175">, as well
    as</st> `<st c="34188">embedding_function</st>`<st c="34206">. As the previous</st>*<st
    c="34223">WARNING</st>* <st c="34231">box states, be careful about this!</st>
    <st c="34267">That is three different APIs that can generate substantial costs
    if you are not careful with the settings in this code.</st> <st c="34387">In this
    code, we also take our splits of data generated earlier in the code and preprocess
    them to work more effectively with ragas.</st> <st c="34520">Each</st> <st c="34525">chunk
    in splits is assumed to be a string representing a portion of a document.</st>
    <st c="34605">The</st> `<st c="34609">Document</st>` <st c="34617">class is from
    the LangChain library and is a convenient way to represent a document with</st>
    <st c="34707">its content.</st>
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '`<st c="34099">如你在代码中所见，我们正在使用</st>` `<st c="34147">generator_llm</st>` `<st
    c="34160">和</st>` `<st c="34165">critic_llm</st>` `<st c="34175">，以及</st>` `<st
    c="34188">embedding_function</st>` `<st c="34206">。正如之前</st>` `<st c="34223">警告</st>`
    `<st c="34231">框中所述，请注意这一点！</st>` `<st c="34267">这是三个不同的API，如果不小心设置此代码中的设置，它们可能会产生大量成本。</st>`
    `<st c="34387">在此代码中，我们还对我们的早期代码中生成的数据拆分进行预处理，以便更有效地与ragas一起工作。</st>` `<st c="34520">拆分中的每个</st>`
    `<st c="34525">块</st>` `<st c="34520">被假定为表示文档一部分的字符串。</st>` `<st c="34605">类</st>`
    `<st c="34609">Document</st>` `<st c="34617">来自LangChain库，是一种方便的方式，用其内容表示文档。</st>`'
- en: '`<st c="34719">testset</st>` <st c="34727">uses the</st> `<st c="34737">generator_with_langchain_docs</st>`
    <st c="34766">function from our generator object to generate a synthetic test.</st>
    <st c="34832">This function takes the documents list as input.</st> <st c="34881">The</st>
    `<st c="34885">test_size</st>` <st c="34894">parameter sets the desired number
    of test questions to be generated (in this case, 10).</st> <st c="34983">The</st>
    `<st c="34987">distributions</st>` <st c="35000">parameter defines the distribution
    of question types, with simple questions comprising 50% of the dataset, reasoning
    questions 25%, and multi-context questions 25%, in this example.</st> <st c="35183">We
    then convert</st> `<st c="35199">testset</st>` <st c="35206">into a pandas DataFrame,
    which we can use to view the results, and save it as a file.</st> <st c="35293">Given
    the costs we just mentioned, saving the data at this point to a CSV that can persist
    in your file directory offers the added convenience of only having to run this</st>
    <st c="35463">code once!</st>'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '`<st c="34719">testset</st>` `<st c="34727">使用</st>` `<st c="34737">generator_with_langchain_docs</st>`
    `<st c="34766">函数</st>` 从我们的生成器对象中生成一个合成测试。`<st c="34832">此函数接受文档列表作为输入。</st>`
    `<st c="34881">参数</st>` `<st c="34885">test_size</st>` `<st c="34894">设置要生成的期望测试题数量（在本例中为10）。</st>`
    `<st c="34983">参数</st>` `<st c="34987">distributions</st>` `<st c="35000">定义了问题类型的分布，其中简单问题占数据集的50%，推理问题占25%，多上下文问题占25%，在本例中。</st>`
    `<st c="35183">然后</st>` 将 `<st c="35199">testset</st>` `<st c="35206">转换为pandas
    DataFrame，我们可以用它来查看结果，并将其保存为文件。</st>` `<st c="35293">鉴于我们刚才提到的成本，将数据保存到CSV文件中，以便在文件目录中持久化，提供了只需运行此</st>`
    `<st c="35463">代码一次</st>` 的额外便利！'
- en: <st c="35473">Now let’s pull our saved dataset back up and look</st> <st c="35524">at
    it!</st>
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: '`<st c="35473">现在让我们将保存的数据集拉回来并查看</st>` `<st c="35524">它！</st>`'
- en: '[PRE28]'
  id: totrans-157
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: <st c="35689">The output should look something like what you see here in</st>
    *<st c="35749">Figure 9</st>**<st c="35757">.1</st>*<st c="35759">:</st>
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: '`<st c="35689">输出应该看起来像你在</st>` `<st c="35749">图9</st>` `<st c="35757">.1</st>`
    `<st c="35759">中看到的那样</st>`：'
- en: '![Figure 9.1 – DataFrame showing synthesized ground-truth data](img/B22475_09_01.jpg)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![图9.1 – 显示合成真实数据的DataFrame](img/B22475_09_01.jpg)'
- en: <st c="36615">Figure 9.1 – DataFrame showing synthesized ground-truth data</st>
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '`<st c="36615">图9.1 – 显示合成真实数据的DataFrame</st>`'
- en: <st c="36675">In this dataset, you see questions and answers (</st>`<st c="36724">ground_truth</st>`<st
    c="36737">) that have been generated by the</st> `<st c="36772">generator_llm</st>`
    <st c="36785">instance you initialized earlier.</st> <st c="36820">You now have
    your ground truth!</st> <st c="36852">The LLM will attempt to generate 10 different
    question-and-answer pairs for our ground truth, but in some cases, a failure will
    occur that limits this generation.</st> <st c="37015">This will result</st> <st
    c="37032">in fewer ground-truth examples than you had set in the</st> `<st c="37087">test_size</st>`
    <st c="37096">variable.</st> <st c="37107">In this case, the generation resulted
    in 7 examples, rather than 10\.</st> <st c="37176">Overall, you will likely want
    to generate more than 10 examples for a thorough test of your RAG system.</st>
    <st c="37280">We are going to accept seven examples for this simple example though,
    primarily to keep your API</st> <st c="37377">costs down!</st>
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="36675">在这个数据集中，你可以看到由</st>`<st c="36724">ground_truth</st>`<st c="36737">)
    生成的</st> `<st c="36772">generator_llm</st>` <st c="36785">实例你之前初始化的。</st> <st
    c="36820">你现在有了你的基准答案了！</st> <st c="36852">LLM 将尝试为我们的基准答案生成 10 个不同的问答对，但在某些情况下，可能会发生失败，这限制了这种生成。</st>
    <st c="37015">这将导致</st> <st c="37032">基准答案的例子数量少于你在</st> `<st c="37087">test_size</st>`
    <st c="37096">变量中设置的。</st> <st c="37107">在这种情况下，生成结果是 7 个例子，而不是 10 个。</st> <st
    c="37176">总的来说，你可能希望为彻底测试你的 RAG 系统生成超过 10 个例子。</st> <st c="37280">尽管如此，我们在这个简单示例中只接受
    7 个例子，主要是为了降低你的 API</st> <st c="37377">成本！</st>
- en: <st c="37388">Next, let’s prepare the</st> <st c="37413">similarity dataset:</st>
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="37388">接下来，让我们准备</st> <st c="37413">相似度数据集：</st>
- en: '[PRE29]'
  id: totrans-163
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: <st c="37670">Here, we are performing some more data conversion to make formats
    compatible with other parts of our code (for ragas input in this case).</st> <st
    c="37809">We convert the</st> `<st c="37824">saved_testset_df</st>` <st c="37840">DataFrame
    into a dictionary format using the</st> `<st c="37886">to_dict()</st>` <st c="37895">method
    with</st> `<st c="37908">orient='list'</st>`<st c="37921">, after converting all
    columns to the string type using</st> `<st c="37977">astype(str)</st>`<st c="37988">.
    The resulting</st> `<st c="38004">saved_testing_data</st>` <st c="38022">dictionary
    is then used to create a</st> `<st c="38059">Dataset</st>` <st c="38066">object
    called</st> `<st c="38081">saved_testing_dataset</st>` <st c="38102">using the</st>
    `<st c="38113">from_dict()</st>` <st c="38124">method from the</st> `<st c="38141">datasets</st>`
    <st c="38149">library.</st> <st c="38159">We create a new dataset called</st>
    `<st c="38190">saved_testing_dataset_sm</st>` <st c="38214">representing a smaller
    section of the data containing just the columns</st> <st c="38286">we need.</st>
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="37670">在这里，我们正在进行一些更多的数据转换，以使格式与其他代码部分兼容（在这种情况下是 ragas 输入）。</st> <st
    c="37809">我们将使用</st> `<st c="37824">saved_testset_df</st>` <st c="37840">DataFrame
    通过</st> `<st c="37886">to_dict()</st>` <st c="37895">方法转换为字典格式，使用</st> `<st c="37908">orient='list'</st>`<st
    c="37921">，在将所有列转换为字符串类型后使用</st> `<st c="37977">astype(str)</st>`<st c="37988">。生成的</st>
    `<st c="38004">saved_testing_data</st>` <st c="38022">字典随后用于使用</st> `<st c="38113">from_dict()</st>`
    <st c="38124">方法从</st> `<st c="38141">datasets</st>` <st c="38149">库创建一个名为</st>
    `<st c="38190">saved_testing_dataset</st>` <st c="38102">的</st> `<st c="38059">Dataset</st>`
    <st c="38066">对象。</st> <st c="38159">我们创建一个新的数据集</st> `<st c="38190">saved_testing_dataset_sm</st>`
    <st c="38214">，它代表数据的一个较小部分，只包含我们需要的列。</st>
- en: <st c="38294">In this case, we remove the</st> `<st c="38323">evolution_type</st>`
    <st c="38337">and</st> `<st c="38342">episode_done</st>` <st c="38354">columns
    using the</st> `<st c="38373">remove_columns()</st>` <st c="38389">method.</st>
    <st c="38398">Let’s take a look by adding this code in a</st> <st c="38441">separate
    cell:</st>
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="38294">在这种情况下，我们使用</st> `<st c="38373">remove_columns()</st>` <st c="38389">方法删除了</st>
    `<st c="38323">evolution_type</st>` <st c="38337">和</st> `<st c="38342">episode_done</st>`
    <st c="38354">列。</st> <st c="38398">让我们通过在单独的单元中添加此代码来查看：</st>
- en: '[PRE30]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: <st c="38480">The output should look</st> <st c="38504">like this:</st>
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="38480">输出应该看起来</st> <st c="38504">像这样：</st>
- en: '[PRE31]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: <st c="38603">If you</st> <st c="38611">have more ground-truth examples, the</st>
    `<st c="38648">num_rows</st>` <st c="38656">variable will reflect that, but the
    rest should be the same.</st> <st c="38718">The</st> `<st c="38722">Dataset</st>`
    <st c="38729">object indicates the “features” we have, representing the columns
    we passed into it, and then this indicates that we have seven rows</st> <st c="38863">of
    data.</st>
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="38603">如果您</st> <st c="38611">有更多的ground-truth示例，</st> `<st c="38648">num_rows</st>`
    <st c="38656">变量将反映这一点，但其余部分应该相同。</st> <st c="38718">`<st c="38722">Dataset</st>`
    <st c="38729">对象表示我们拥有的“特征”，代表我们传递给它的列，然后这表明我们有七行</st> <st c="38863">的数据。</st>
- en: <st c="38871">Next, we will set up a function to run the RAG chains we pass
    to it, and then add some additional formatting that enables it to work</st> <st
    c="39005">with ragas:</st>
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="38871">接下来，我们将设置一个函数来运行我们传递给它的RAG链，然后添加一些额外的格式化，使其能够与ragas一起工作：</st>
    <st c="39005">with ragas:</st>
- en: '[PRE32]'
  id: totrans-171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: <st c="39275">This block defines a</st> `<st c="39297">generate_answer()</st>`
    <st c="39314">function that takes a question, the</st> `<st c="39351">ground_truth</st>`
    <st c="39363">data, and</st> `<st c="39374">rag_chain</st>` <st c="39383">as inputs.</st>
    <st c="39395">This function is flexible in that it accepts either of the chains
    that we provide to it, which will come in handy when we want to generate an analysis
    of both the similarity and hybrid chains.</st> <st c="39588">The first step in
    this function is to invoke the</st> `<st c="39637">rag_chain</st>` <st c="39646">input
    that has been passed to it with the given question</st> <st c="39704">and retrieve
    the result.</st> <st c="39729">The second step is to return a dictionary containing
    the question, the final answer from the result, the contexts extracted from the
    result, and the</st> <st c="39878">ground truth.</st>
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="39275">此块定义了一个</st> `<st c="39297">generate_answer()</st>` <st c="39314">函数，它接受一个问题、</st>
    `<st c="39351">ground_truth</st>` <st c="39363">数据，以及</st> `<st c="39374">rag_chain</st>`
    <st c="39383">作为输入。</st> <st c="39395">此函数非常灵活，因为它接受我们提供的任意一条链，这在我们需要生成相似性和混合链的分析时将非常有用。</st>
    <st c="39588">此函数的第一步是调用</st> `<st c="39637">rag_chain</st>` <st c="39646">输入，该输入已通过给定的问题传递给它，并检索结果。</st>
    <st c="39704">第二步是返回一个包含问题、结果中的最终答案、从结果中提取的上下文，以及</st> `<st c="39878">ground truth</st>`
    的字典。</st>
- en: <st c="39891">Now we are ready to prep our datasets more to work</st> <st c="39943">with
    ragas:</st>
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="39891">现在我们已准备好进一步准备我们的数据集以与ragas一起工作：</st> <st c="39943">with ragas:</st>
- en: '[PRE33]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: <st c="40338">In this code, we create two new datasets,</st> `<st c="40381">testing_dataset_similarity</st>`
    <st c="40407">and</st> `<st c="40412">testing_dataset_hybrid</st>`<st c="40434">,
    by applying the</st> `<st c="40452">generate_answer()</st>` <st c="40469">function
    to each row of</st> `<st c="40494">saved_testing_dataset_sm</st>` <st c="40518">for
    each of our RAG chains (similarity and hybrid) using the</st> `<st c="40580">map()</st>`
    <st c="40585">method.</st> `<st c="40594">rag_chain_similarity</st>` <st c="40614">and</st>
    `<st c="40619">rag_chain_hybrid</st>` <st c="40635">are used as the</st> `<st
    c="40652">rag_chain</st>` <st c="40661">argument in the respective dataset creations.</st>
    <st c="40708">The original columns of</st> `<st c="40732">saved_testing_dataset_sm</st>`
    <st c="40756">are removed</st> <st c="40769">using</st> `<st c="40775">remove_columns=saved_testing_dataset_sm.column_names</st>`<st
    c="40827">.</st>
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="40338">在此代码中，我们通过将</st> `<st c="40452">generate_answer()</st>` <st c="40469">函数应用于每个RAG链（相似性和混合）的</st>
    `<st c="40494">saved_testing_dataset_sm</st>` <st c="40518">行的每一行来创建两个新的数据集，</st>
    `<st c="40381">testing_dataset_similarity</st>` <st c="40407">和</st> `<st c="40412">testing_dataset_hybrid</st>`<st
    c="40434">，使用</st> `<st c="40580">map()</st>` <st c="40585">方法。</st> `<st c="40594">rag_chain_similarity</st>`
    <st c="40614">和</st> `<st c="40619">rag_chain_hybrid</st>` <st c="40635">分别用作相应数据集创建中的</st>
    `<st c="40652">rag_chain</st>` <st c="40661">参数。</st> <st c="40708">使用</st> `<st
    c="40775">remove_columns=saved_testing_dataset_sm.column_names</st>`<st c="40827">移除了</st>
    `<st c="40732">saved_testing_dataset_sm</st>` <st c="40756">的原始列。</st>
- en: <st c="40828">And finally, let’s run ragas on the two datasets.</st> <st c="40879">Here
    is the code for applying ragas to our similarity</st> <st c="40933">RAG chain:</st>
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="40828">最后，让我们在两个数据集上运行ragas。</st> <st c="40879">以下是应用ragas到我们的相似性</st>
    <st c="40933">RAG链</st> 的代码：</st>
- en: '[PRE34]'
  id: totrans-177
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: <st c="41164">Here, we</st> <st c="41174">apply ragas to evaluate</st> `<st
    c="41198">testing_dataset_similarity</st>` <st c="41224">using the</st> `<st c="41235">evaluate()</st>`
    <st c="41245">function from the ragas library.</st> <st c="41279">The evaluation
    is performed using the specified metrics, which include</st> `<st c="41350">faithfulness</st>`<st
    c="41362">,</st> `<st c="41364">answer_relevancy</st>`<st c="41380">,</st> `<st
    c="41382">context_precision</st>`<st c="41399">,</st> `<st c="41401">context_recall</st>`<st
    c="41415">,</st> `<st c="41417">answer_correctness</st>`<st c="41435">, and</st>
    `<st c="41441">answer_similarity</st>`<st c="41458">. The evaluation results are
    stored in the</st> `<st c="41501">score_similarity</st>` <st c="41517">variable,
    which is then converted to a pandas DataFrame,</st> `<st c="41575">similarity_df</st>`<st
    c="41588">, using the</st> `<st c="41600">to_pandas()</st>` <st c="41611">method.</st>
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="41164">在这里，我们</st> <st c="41174">应用ragas来评估</st> `<st c="41198">testing_dataset_similarity</st>`
    <st c="41224">，使用ragas库中的</st> `<st c="41235">evaluate()</st>` <st c="41245">函数。</st>
    <st c="41279">评估使用指定的指标进行，包括</st> `<st c="41350">faithfulness</st>`<st c="41362">、</st>
    `<st c="41364">answer_relevancy</st>`<st c="41380">、</st> `<st c="41382">context_precision</st>`<st
    c="41399">、</st> `<st c="41401">context_recall</st>`<st c="41415">、</st> `<st
    c="41417">answer_correctness</st>`<st c="41435">和</st> `<st c="41441">answer_similarity</st>`<st
    c="41458">。评估结果存储在</st> `<st c="41501">score_similarity</st>` <st c="41517">变量中，然后使用</st>
    `<st c="41600">to_pandas()</st>` <st c="41611">方法将其转换为pandas DataFrame，</st> `<st
    c="41575">similarity_df</st>`<st c="41588">。</st>
- en: <st c="41619">We will do the same with the</st> <st c="41649">hybrid dataset:</st>
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="41619">我们将对</st> <st c="41649">混合数据集</st> <st c="41619">进行相同的处理：</st>
- en: '[PRE35]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: <st c="41869">Once</st> <st c="41875">you have reached this point, the use of
    ragas is done!</st> <st c="41930">We have now performed a full evaluation of our
    two chains using ragas, and within these two DataFrames,</st> `<st c="42034">similarity_df</st>`
    <st c="42047">and</st> `<st c="42052">hybrid_df</st>`<st c="42061">, we have all
    of our metrics data.</st> <st c="42096">All we have left to do is analyze the
    data</st> <st c="42139">ragas provided.</st>
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="41869">一旦</st> <st c="41875">你达到这一点，ragas的使用就完成了！</st> <st c="41930">我们现在已经使用ragas对两条链进行了全面评估，并且在这两个DataFrame中，</st>
    `<st c="42034">similarity_df</st>` <st c="42047">和</st> `<st c="42052">hybrid_df</st>`<st
    c="42061">，我们有了所有的指标数据。</st> <st c="42096">我们剩下要做的就是分析ragas提供的数据。</st>
- en: <st c="42154">Analyzing the ragas results</st>
  id: totrans-182
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="42154">分析ragas的结果</st>
- en: <st c="42182">We will spend the rest of this code lab formatting the data so
    that we can first save and persist it (because again, this can be a more expensive
    part of our RAG system).</st> <st c="42354">The rest of this</st> <st c="42371">code
    can be reused in the future to pull the data from the</st> `<st c="42430">.csv</st>`
    <st c="42434">files if you save them, preventing you from having to re-run this
    potentially expensive</st> <st c="42523">evaluation process.</st>
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="42182">我们将在这段代码实验室的剩余部分中格式化数据，以便我们首先将其保存和持久化（因为，同样，这可能是我们RAG系统成本较高的部分）。</st>
    <st c="42354">这段代码的其余部分可以在将来重用，以从</st> `<st c="42430">.csv</st>` <st c="42434">文件中提取数据，如果您保存它们，这将防止您不得不重新运行这个可能成本较高的</st>
    <st c="42523">评估过程。</st>
- en: <st c="42542">Let’s start with setting up some important variables and then
    saving the data we’ve collected to</st> `<st c="42640">csv</st>` <st c="42643">files:</st>
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="42542">让我们先设置一些重要的变量，然后将我们收集到的数据保存到</st> `<st c="42640">csv</st>` <st
    c="42643">文件中：</st>
- en: '[PRE36]'
  id: totrans-185
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: <st c="43350">In this</st> <st c="43359">code, we first define a</st> `<st c="43383">key_columns</st>`
    <st c="43394">list containing the names of the key columns to be used for comparison.</st>
    <st c="43467">We then calculate the mean scores for each key column in</st> `<st
    c="43524">similarity_df</st>` <st c="43537">and</st> `<st c="43542">hybrid_df</st>`
    <st c="43551">using the</st> `<st c="43562">mean()</st>` <st c="43568">method
    and store them in</st> `<st c="43594">similarity_means</st>` <st c="43610">and</st>
    `<st c="43615">hybrid_means</st>`<st c="43627">, respectively.</st>
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="43350">在这段</st> <st c="43359">代码中，我们首先定义了一个</st> `<st c="43383">key_columns</st>`
    <st c="43394">列表，包含用于比较的关键列的名称。</st> <st c="43467">然后，我们使用</st> `<st c="43562">mean()</st>`
    <st c="43568">方法计算</st> `<st c="43524">similarity_df</st>` <st c="43537">和</st>
    `<st c="43542">hybrid_df</st>` <st c="43551">中每个关键列的平均分数，并将它们分别存储在</st> `<st c="43594">similarity_means</st>`
    <st c="43610">和</st> `<st c="43615">hybrid_means</st>`<st c="43627">中。</st>
- en: <st c="43642">Next, we create a new DataFrame called</st> `<st c="43682">comparison_df</st>`
    <st c="43695">that compares the mean scores of the similarity run and the hybrid
    run.</st> <st c="43768">The</st> `<st c="43772">Difference</st>` <st c="43782">column
    is added to</st> `<st c="43802">comparison_df</st>`<st c="43815">, calculated
    as the difference between the mean scores of the similarity run and the hybrid
    run.</st> <st c="43912">And finally, we save the</st> `<st c="43937">similarity_df</st>`<st
    c="43950">,</st> `<st c="43952">hybrid_df</st>`<st c="43961">, and</st> `<st c="43967">comparison_df</st>`
    <st c="43980">DataFrames as</st> `<st c="43995">.csv</st>` <st c="43999">files.</st>
    <st c="44007">We will save the files again, and we can work from these files in
    the future without having to go back and re-generate everything again.</st>
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="43642">接下来，我们创建一个新的DataFrame，称为</st> `<st c="43682">comparison_df</st>`
    <st c="43695">，用于比较相似性运行和混合运行的均值分数。</st> <st c="43768">在</st> `<st c="43772">Difference</st>`
    <st c="43782">列被添加到</st> `<st c="43802">comparison_df</st>`<st c="43815">中，计算为相似性运行和混合运行均值分数之间的差异。</st>
    <st c="43912">最后，我们将</st> `<st c="43937">similarity_df</st>`<st c="43950">，`<st
    c="43952">hybrid_df</st>`<st c="43961">，和</st> `<st c="43967">comparison_df</st>`
    <st c="43980">DataFrame保存为</st> `<st c="43995">.csv</st>` <st c="43999">文件。</st>
    <st c="44007">我们将再次保存文件，我们可以在未来从这些文件中工作，而无需返回并重新生成一切。</st>
- en: <st c="44144">Also, keep in mind that this is just one way to conduct the analysis.</st>
    <st c="44214">This is where you will want to get creative and adjust this code
    to conduct an analysis that focuses on the aspects you find important in your
    specific RAG system.</st> <st c="44378">For example, you may be focused solely
    on improving your retrieval mechanisms.</st> <st c="44457">Or you could be applying
    this to data that is streaming from a deployed environment, in which case you
    likely have no ground truth and will want to focus on the metrics that can work
    without a ground truth (see the</st> *<st c="44672">ragas founder insights</st>*
    <st c="44694">section later in this chapter for more information about</st> <st
    c="44752">that concept).</st>
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="44144">此外，请记住，这只是进行分析的一种方式。</st> <st c="44214">这就是你想要发挥创意并调整此代码以进行关注你特定RAG系统中重要方面的分析的地方。</st>
    <st c="44378">例如，你可能只专注于改进你的检索机制。</st> <st c="44457">或者，你可以将此应用于从部署环境中流出的数据，在这种情况下，你可能没有真实数据，并希望关注可以在没有真实数据的情况下工作的指标（有关该概念的更多信息，请参阅本章后面的</st>
    *<st c="44672">ragas创始人见解</st>* <st c="44694">部分）。</st>
- en: <st c="44766">Moving</st> <st c="44774">on with this analysis, though, we now
    want to pull the files we saved back up to complete our analysis, and then print
    out our analysis of each of the stages of our RAG system across the two</st> <st
    c="44965">different chains:</st>
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="44766">尽管如此，我们继续分析，现在我们希望将我们保存的文件拉回来以完成我们的分析，然后打印出我们对RAG系统两个不同链的每个阶段的分析的总结：</st>
    <st c="44965">：</st>
- en: '[PRE37]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: <st c="45570">This section of the code will generate a set of metrics that we
    will examine further as follows.</st> <st c="45668">We first load DataFrames from
    the CSV files we generated in the previous code block.</st> <st c="45753">We then
    apply an analysis that consolidates everything into</st> <st c="45813">easier-to-read
    scores.</st>
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="45570">此代码段将生成一系列我们将进一步检查的指标。</st> <st c="45668">我们首先从我们在前面的代码块中生成的CSV文件中加载DataFrame。</st>
    <st c="45753">然后，我们应用一个分析，将所有内容整合为</st> <st c="45813">更易于阅读的分数。</st>
- en: <st c="45835">We continue on, using variables we defined in the previous code
    block to help generate plots</st> <st c="45929">with</st> `<st c="45934">matplotlib</st>`<st
    c="45944">:</st>
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="45835">我们继续前进，使用我们在前面的代码块中定义的变量来帮助生成</st> <st c="45929">使用</st> `<st
    c="45934">matplotlib</st>`<st c="45944">:</st>
- en: '[PRE38]'
  id: totrans-193
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: <st c="46229">Here, we</st> <st c="46239">are creating subplots for each category
    with</st> <st c="46284">increased spacing.</st>
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="46229">在这里，我们</st> <st c="46239">正在为每个类别创建子图，并</st> <st c="46284">增加间距。</st>
- en: <st c="46302">Next, we will iterate over each of those categories and plot the</st>
    <st c="46368">corresponding metrics:</st>
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="46302">接下来，我们将遍历这些类别中的每一个，并绘制</st> <st c="46368">相应的指标：</st>
- en: '[PRE39]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: <st c="47334">Most</st> <st c="47340">of this code is focused on formatting
    our visualizations, including plotting bars for both the similarity and hybrid
    runs, as well as adding values to those bars.</st> <st c="47503">We give the bars
    some color and even add some hashing to improve accessibility for the</st> <st
    c="47590">visually impaired.</st>
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="47334">大部分</st> <st c="47340">代码都集中在格式化我们的可视化上，包括为相似性和混合运行绘制条形图，以及向这些条形图中添加值。</st>
    <st c="47503">我们给条形图添加了一些颜色，甚至添加了一些散列来提高对</st> <st c="47590">视觉障碍者的可访问性。</st>
- en: <st c="47608">We have just a few more improvements to make to</st> <st c="47657">the
    visualization:</st>
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="47608">我们只需对</st> <st c="47657">可视化</st> 进行一些更多的改进：</st>
- en: '[PRE40]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: <st c="47902">In this code, we add labels and the title to our visualization.</st>
    <st c="47967">We also adjust the spacing between the subplots and increase the
    top margin.</st> <st c="48044">Then, finally, we</st> `<st c="48062">use plt.show()</st>`
    <st c="48076">to display the visualization within the</st> <st c="48117">notebook
    interface.</st>
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="47902">在这段代码中，我们添加了标签和标题到我们的可视化中。</st> <st c="47967">我们还调整了子图之间的间距并增加了顶部边距。</st>
    <st c="48044">然后，最后，我们</st> `<st c="48062">使用 plt.show()</st>` <st c="48076">在笔记本界面中显示可视化。</st>
- en: <st c="48136">Overall, the code in this section will generate a text-based analysis
    that shows you results</st> <st c="48230">from both chains, and then it generates
    a visualization in the form of bar charts comparing the results.</st> <st c="48335">While
    the code will generate all of this together, we are going to break this up and
    discuss each part of the output as it relates to the main stages of our</st> <st
    c="48492">RAG system.</st>
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="48136">总的来说，本节中的代码将生成一个基于文本的分析，显示你从两个链中获取的结果，然后以条形图的形式生成一个比较结果的可视化。</st>
    <st c="48230">虽然代码会一起生成所有这些内容，但我们将将其拆分，并讨论输出中的每个部分，以及它与我们的RAG系统主要阶段的相关性。</st>
    <st c="48335">我们将讨论每个部分与我们的RAG系统主要阶段的相关性。</st> <st c="48492">RAG系统。</st>
- en: '<st c="48503">As we discussed in previous chapters, RAG has two primary stages
    of action when it is engaged: retrieval and generation.</st> <st c="48625">When
    evaluating a RAG system, you can break down your evaluation by those two categories
    as well.</st> <st c="48723">Let’s first talk about</st> <st c="48746">evaluating
    retrieval.</st>'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="48503">正如我们在前面的章节中讨论的，当RAG被激活时，它有两个主要的行为阶段：检索和生成。</st> <st c="48625">在评估一个RAG系统时，你也可以根据这两个类别来分解你的评估。</st>
    <st c="48723">让我们首先来谈谈</st> <st c="48746">如何评估检索。</st>
- en: <st c="48767">Retrieval evaluation</st>
  id: totrans-203
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="48767">检索评估</st>
- en: <st c="48788">Ragas</st> <st c="48795">provides metrics</st> <st c="48812">for
    evaluating each stage of the RAG pipeline in</st> <st c="48861">isolation.</st>
    <st c="48872">For retrieval, ragas has two metrics, called</st> **<st c="48917">context
    precision</st>** <st c="48934">and</st> **<st c="48939">context recall</st>**<st
    c="48953">. You</st> <st c="48959">can see this here in this part of the output</st>
    <st c="49004">and charts:</st>
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="48788">Ragas</st> <st c="48795">提供了用于评估RAG管道每个阶段的指标。</st> <st c="48812">对于检索，ragas有两个指标，称为</st>
    **<st c="48917">上下文精确度</st>** <st c="48934">和</st> **<st c="48939">上下文召回率</st>**<st
    c="48953">。你</st> <st c="48959">可以在输出部分的这里和图表中看到这一点：</st> <st c="49004">和图表：</st>
- en: '[PRE41]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: <st c="49178">You can see the chart for the retrieval metrics in</st> *<st c="49230">Figure
    9</st>**<st c="49238">.2</st>*<st c="49240">:</st>
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="49178">你可以在</st> *<st c="49230">图9</st>**<st c="49238">.2</st>**<st c="49240">中看到检索指标的图表：</st>
- en: '![Figure 9.2 – Chart showing retrieval performance comparison between similarity
    search and hybrid search](img/B22475_09_02.jpg)'
  id: totrans-207
  prefs: []
  type: TYPE_IMG
  zh: '![图9.2 – 显示相似性搜索和混合搜索之间检索性能比较的图表](img/B22475_09_02.jpg)'
- en: <st c="49254">Figure 9.2 – Chart showing retrieval performance comparison between
    similarity search and hybrid search</st>
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="49254">图9.2 – 显示相似性搜索和混合搜索之间检索性能比较的图表</st>
- en: <st c="49357">Retrieval</st> <st c="49368">evaluation is focused on assessing
    the accuracy and relevance of the documents that were retrieved.</st> <st c="49468">We
    do this with ragas using these two metrics, as described on the ragas</st> <st
    c="49541">documentation website:</st>
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="49357">检索评估</st> <st c="49368">侧重于评估检索到的文档的准确性和相关性。</st> <st c="49468">我们使用ragas的这两个指标来完成这项工作，如ragas</st>
    <st c="49541">文档网站</st> 上所述：</st>
- en: '`<st c="49632">context_precision</st>` <st c="49649">is a metric that evaluates
    whether all of the ground-truth-relevant items present in the contexts are ranked
    higher or not.</st> <st c="49774">Ideally, all the relevant chunks must appear
    at the top ranks.</st> <st c="49837">This metric is computed using the question,</st>
    `<st c="49881">ground_truth</st>`<st c="49893">, and</st> `<st c="49899">contexts</st>`<st
    c="49907">, with values ranging between</st> `<st c="49937">0</st>` <st c="49938">and</st>
    `<st c="49943">1</st>`<st c="49944">, where higher scores indicate</st> <st c="49975">better
    precision.</st>'
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<st c="49632">context_precision</st>` <st c="49649">是一个指标，用于评估上下文中是否所有真实相关项都被排名更高。</st>
    <st c="49774">理想情况下，所有相关片段都必须出现在顶部排名。</st> <st c="49837">此指标使用问题，</st> `<st c="49881">ground_truth</st>`<st
    c="49893">，和</st> `<st c="49899">contexts</st>`<st c="49907">来计算，其值介于</st> `<st
    c="49937">0</st>` <st c="49938">和</st> `<st c="49943">1</st>`<st c="49944">之间，更高的分数表示</st>
    <st c="49975">更好的精确度。</st>'
- en: '`<st c="50088">context_recall</st>` <st c="50102">measures the extent to which
    the retrieved context aligns with the annotated answer, treated as the ground
    truth.</st> <st c="50217">It is computed based on the ground truth and the retrieved
    context, and the values range between</st> `<st c="50314">0</st>` <st c="50315">and</st>
    `<st c="50320">1</st>`<st c="50321">, with higher values indicating</st> <st c="50353">better
    performance.</st>'
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<st c="50088">context_recall</st>` <st c="50102">衡量检索到的上下文与作为真实情况的标注答案的一致性程度。</st>
    <st c="50217">它是基于真实情况和检索到的上下文计算的，其值介于</st> `<st c="50314">0</st>` <st c="50315">和</st>
    `<st c="50320">1</st>`<st c="50321">之间，更高的值表示</st> <st c="50353">更好的性能。</st>'
- en: <st c="50372">If you come from a traditional data science or information retrieval
    background, you may recognize the terms</st> *<st c="50482">precision</st>* <st
    c="50491">and</st> *<st c="50496">recall</st>* <st c="50502">and be wondering
    whether there is any relation to those terms.</st> <st c="50566">The context precision
    and context recall metrics used in ragas are conceptually similar to those traditional
    precision and</st> <st c="50689">recall metrics.</st>
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="50372">如果你来自传统的数据科学或信息检索背景，你可能已经认识到了术语</st> *<st c="50482">精确度</st>*
    <st c="50491">和</st> *<st c="50496">召回度</st>* <st c="50502">，并想知道这些术语之间是否有任何关系。</st>
    <st c="50566">ragas中使用的上下文精确度和召回度指标在概念上与传统精确度和召回度指标相似。</st>
- en: <st c="50704">In traditional terms, precision measures the proportion of retrieved
    items that are relevant, while recall measures the proportion of relevant items
    that</st> <st c="50859">are retrieved.</st>
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="50704">在传统意义上，精确度衡量检索到的相关项目的比例，而召回度衡量被检索到的相关项目的比例。</st> <st c="50859">。</st>
- en: <st c="50873">Similarly, context precision evaluates the relevance of the retrieved
    context by assessing whether</st> <st c="50973">the ground-truth-relevant items
    are ranked higher, while context recall measures the extent to which the retrieved
    context covers the relevant information required to answer</st> <st c="51147">the
    question.</st>
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 类似地，上下文精确度通过评估是否<st c="50873">真实相关项被排名更高来评估检索到的上下文的相关性，而上下文召回度衡量检索到的上下文覆盖所需回答问题的相关信息的程度。</st>
    <st c="51147">。</st>
- en: <st c="51160">However, there are some key differences</st> <st c="51201">to
    note.</st>
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="51160">然而，也有一些关键的区别</st> <st c="51201">需要注意。</st>
- en: <st c="51209">Traditional precision and recall are typically computed based
    on a binary relevance judgment (relevant or not relevant) for each item, whereas
    context precision and recall in ragas consider the ranking and alignment of the
    retrieved context with respect to the ground-truth answer.</st> <st c="51492">Additionally,
    context precision and recall are specifically designed to evaluate the retrieval
    performance in the context of question-answering tasks, taking into account the
    specific requirements of retrieving relevant information to answer a</st> <st
    c="51736">given question.</st>
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="51209">传统的精确度和召回度通常基于每个项目的二元相关性判断（相关或不相关）来计算，而ragas中的上下文精确度和召回度考虑了检索到的上下文与真实答案的排名和一致性。</st>
    <st c="51492">此外，上下文精确度和召回度专门设计来评估问答任务中的检索性能，考虑到检索相关信息以回答一个</st> <st c="51736">特定问题</st>的具体要求。
- en: <st c="51751">When looking at the results from our analysis, we need to keep
    in mind that we are using a small dataset for our ground truth.</st> <st c="51879">In
    fact, the original dataset our entire RAG system is based on is small and that
    could also impact our results.</st> <st c="51992">Therefore, I wouldn’t read into
    the numbers you are seeing here too much.</st> <st c="52066">But what this does
    show you is how you can use ragas to run an analysis and then provide a very informative
    representation of what is happening in the retrieval stage of our RAG system.</st>
    <st c="52252">This code lab is primarily to demonstrate real-world challenges
    you will likely encounter when building a RAG system, where you have to consider
    different metrics in the context of your specific use case, the trade-offs between
    those different metrics, and having to decide which approach fits your needs in
    the most</st> <st c="52569">effective way.</st>
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="51751">在查看我们的分析结果时，我们需要记住，我们使用的小数据集作为我们的基准。</st> <st c="51879">事实上，我们整个RAG系统基于的原始数据集很小，这也可能影响我们的结果。</st>
    <st c="51992">因此，我不会太在意您在这里看到的数字。</st> <st c="52066">但这一点确实向您展示了如何使用ragas进行分析，并提供关于我们RAG系统检索阶段发生情况的非常有信息量的表示。</st>
    <st c="52252">这个代码实验室主要是为了演示您在构建RAG系统时可能会遇到的真实世界挑战，在您的特定用例中，您必须考虑不同的指标，这些不同指标之间的权衡，以及必须决定哪种方法以最有效的方式满足您的需求。</st>
    <st c="52569">最有效的方式</st>。
- en: <st c="52583">Next, we will review a similar analysis in the generation stage
    of our</st> <st c="52655">RAG system.</st>
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="52583">接下来，我们将回顾我们RAG系统生成阶段的类似分析。</st>
- en: <st c="52666">Generation evaluation</st>
  id: totrans-219
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="52666">生成评估</st>
- en: <st c="52688">As</st> <st c="52692">mentioned, ragas provides metrics for evaluating
    each stage of the RAG pipeline in isolation.</st> <st c="52786">For the generation
    stage, ragas has two metrics, called</st> `<st c="52842">faithfulness</st>` <st
    c="52854">and</st> `<st c="52859">answer relevancy</st>`<st c="52875">, as you
    see here in this part of the output and the</st> <st c="52928">following chart:</st>
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 如<st c="52688">所述</st>，ragas为评估RAG管道每个阶段的独立指标提供了度量标准。<st c="52692">对于生成阶段</st>，ragas有两个指标，称为<st
    c="52842">忠实度</st> <st c="52854">和</st> <st c="52859">答案相关性</st>，正如您在这里的输出部分和以下图表中看到的那样：
- en: '[PRE42]'
  id: totrans-221
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: <st c="53081">The generation metrics can be seen in the chart in</st> *<st c="53133">Figure
    9</st>**<st c="53141">.3</st>*<st c="53143">:</st>
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="53081">生成指标可以在*<st c="53133">图9</st>**<st c="53141">.3</st>**<st c="53143">中的图表中看到：</st>
- en: '![Figure 9.3 – Chart showing generation performance comparison between similarity
    search and hybrid search](img/B22475_09_03.jpg)'
  id: totrans-223
  prefs: []
  type: TYPE_IMG
  zh: '![图9.3 – 比较相似性搜索和混合搜索生成性能的图表](img/B22475_09_03.jpg)'
- en: <st c="53175">Figure 9.3 – Chart showing generation performance comparison between
    similarity search and hybrid search</st>
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="53175">图9.3 – 比较相似性搜索和混合搜索生成性能的图表</st>
- en: <st c="53279">Generation evaluation measures the appropriateness of the response
    generated by the system when the context is provided.</st> <st c="53401">We do
    this with ragas using the following two metrics, as described in the</st> <st
    c="53476">ragas documentation:</st>
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="53279">生成评估衡量的是当提供上下文时，系统生成的响应的适当性。</st> <st c="53401">我们使用ragas通过以下两个指标来完成这项工作，如ragas文档中所述：</st>
    <st c="53476">ragas文档</st>：
- en: '`<st c="53496">faithfullness</st>`<st c="53510">: How factually accurate is
    the generated answer?</st> <st c="53561">This measures the factual consistency
    of the generated answer against the given context.</st> <st c="53650">It is calculated
    from the answer and retrieved context.</st> <st c="53706">The answer is scaled
    to a (</st>`<st c="53733">0-1</st>`<st c="53737">) range, with a higher score</st>
    <st c="53767">being better.</st>'
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<st c="53496">忠实度</st>`<st c="53510">：生成的答案在事实上的准确性如何？</st> <st c="53561">这衡量的是生成的答案与给定上下文的事实一致性。</st>
    <st c="53650">它从答案和检索到的上下文中计算得出。</st> <st c="53706">答案被缩放到（</st>`<st c="53733">0-1</st>`<st
    c="53737">）范围内，分数越高表示越好。</st>'
- en: '`<st c="53780">answer_relevancy</st>`<st c="53797">: How relevant is the generated
    answer to the question?</st> <st c="53854">Answer relevancy focuses on assessing
    how pertinent the generated answer is to the given prompt.</st> <st c="53951">A
    lower score is assigned to answers that are incomplete or contain redundant information
    and higher scores indicate better relevancy.</st> <st c="54086">This metric is
    computed using the question, the context, and</st> <st c="54147">the answer.</st>'
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<st c="53780">answer_relevancy</st>`<st c="53797">：生成的答案与问题有多相关？</st> <st
    c="53854">答案相关性侧重于评估生成的答案与给定提示的相关性。</st> <st c="53951">对于不完整或包含冗余信息的答案，将分配较低的分数，而较高的分数表示更好的相关性。</st>
    <st c="54086">此指标使用问题、上下文和</st> <st c="54147">答案来计算。</st>'
- en: <st c="54158">Again, I want</st> <st c="54173">to reiterate that we are using
    a small dataset for our ground truth and dataset, which likely makes these results
    less reliable.</st> <st c="54302">But you can see here how these results form
    the foundation for providing a very informative representation of what is happening
    in the generation stage of our</st> <st c="54461">RAG system.</st>
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="54158">再次，我想</st> <st c="54173">重申，我们正在使用一个小数据集作为我们的真实值和数据集，这可能会使这些结果不太可靠。</st>
    <st c="54302">但您可以看到这里这些结果如何成为为我们RAG系统的生成阶段提供非常有信息量的表示的基础。</st> <st c="54461">RAG系统。</st>
- en: <st c="54472">This leads us to our next set of metrics, the end-to-end evaluation
    metrics, which we</st> <st c="54559">discuss next.</st>
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="54472">这使我们来到了下一组指标，即端到端评估指标，我们将在下文中进行讨论。</st> <st c="54559">讨论。</st>
- en: <st c="54572">End-to-end evaluation</st>
  id: totrans-230
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="54572">端到端评估</st>
- en: <st c="54594">Beyond providing the metrics for evaluating each stage of the
    RAG pipeline in isolation, ragas</st> <st c="54690">provides metrics for the entire
    RAG system, called end-to-end</st> <st c="54752">evaluation.</st> <st c="54764">For
    the generation stage, ragas has two</st> <st c="54804">metrics, called</st> **<st
    c="54820">answer correctness</st>** <st c="54838">and</st> **<st c="54843">answer
    similarity</st>**<st c="54860">, as you see here in the last part of the output</st>
    <st c="54909">and charts:</st>
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="54594">除了提供评估RAG管道每个阶段的指标外，ragas</st> <st c="54690">还提供了整个RAG系统的指标，称为端到端</st>
    <st c="54752">评估。</st> <st c="54764">对于生成阶段，ragas有两个</st> <st c="54804">指标，称为</st>
    **<st c="54820">答案正确性</st>** <st c="54838">和</st> **<st c="54843">答案相似度</st>**<st
    c="54860">，正如您在输出</st> <st c="54909">和图表的最后一部分所看到的：</st>
- en: '[PRE43]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: <st c="55075">The chart in</st> *<st c="55089">Figure 9</st>**<st c="55097">.4</st>*
    <st c="55099">shows the visualization for</st> <st c="55128">these results:</st>
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="55075">图*<st c="55089">9</st>**<st c="55097">.4</st>* <st c="55099">中的图表显示了这些结果的</st>
    <st c="55128">可视化：</st>
- en: '![Figure 9.4 – Chart showing end-to-end performance comparison between similarity
    search and hybrid search](img/B22475_09_04.jpg)'
  id: totrans-234
  prefs: []
  type: TYPE_IMG
  zh: '![图9.4 – 展示相似性搜索和混合搜索之间端到端性能比较的图表](img/B22475_09_04.jpg)'
- en: <st c="55186">Figure 9.4 – Chart showing end-to-end performance comparison between
    similarity search and hybrid search</st>
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="55186">图9.4 – 展示相似性搜索和混合搜索之间端到端性能比较的图表</st>
- en: <st c="55290">End-to-end</st> <st c="55302">metrics are for evaluating the end-to-end
    performance of a pipeline, gauging the overall experience of using the pipeline.</st>
    <st c="55425">Combining these metrics provides a comprehensive evaluation of the
    RAG pipeline.</st> <st c="55506">We do this with ragas using the following two
    metrics, as described in the</st> <st c="55581">ragas documentation:</st>
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="55290">端到端</st> <st c="55302">指标用于评估管道的端到端性能，衡量使用管道的整体体验。</st> <st c="55425">结合这些指标提供了对RAG管道的全面评估。</st>
    <st c="55506">我们使用ragas通过以下两个指标来完成这项工作，如ragas文档中所述：</st> <st c="55581">ragas文档：</st>
- en: '`<st c="55601">answer_correctness</st>`<st c="55620">: Gauges the accuracy
    of the generated answer when compared to the ground truth.</st> <st c="55702">The
    assessment of answer correctness involves gauging the accuracy of the generated
    answer when compared to the ground truth.</st> <st c="55828">This evaluation relies
    on the ground truth and the answer, with scores ranging from 0 to 1\.</st> <st
    c="55920">A higher score indicates a closer alignment between the generated answer
    and the ground truth, signifying</st> <st c="56026">better correctness.</st>'
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<st c="55601">answer_correctness</st>`<st c="55620">：衡量生成的答案与真实值相比的准确性。</st>
    <st c="55702">答案正确性的评估涉及衡量生成的答案与真实值相比的准确性。</st> <st c="55828">这种评估依赖于真实值和答案，分数范围从0到1。</st>
    <st c="55920">更高的分数表示生成的答案与真实值之间的接近程度更高，意味着</st> <st c="56026">更好的正确性。</st>'
- en: '`<st c="56045">answer_similarity</st>`<st c="56063">: Assesses the semantic
    resemblance between the generated answer and the ground truth.</st> <st c="56151">The
    concept of answer semantic similarity pertains to the assessment of the semantic
    resemblance between the generated answer and the ground truth.</st> <st c="56299">This
    evaluation is based on the ground truth and the answer, with values falling within
    the range of</st> `<st c="56400">0</st>` <st c="56401">to</st> `<st c="56405">1</st>`<st
    c="56406">. A higher score signifies a better alignment between the generated
    answer and the</st> <st c="56489">ground truth.</st>'
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<st c="56045">answer_similarity</st>`<st c="56063">：评估生成的答案与ground truth之间的语义相似度。</st>
    <st c="56151">答案语义相似度的概念涉及对生成的答案与ground truth之间的语义相似度的评估。</st> <st c="56299">这种评估基于ground
    truth和答案，其值在`<st c="56400">0</st>` <st c="56401">到`<st c="56405">1</st>`<st c="56406">之间。更高的分数表示生成的答案与ground
    truth之间的对齐更好。</st>'
- en: <st c="56502">Evaluating</st> <st c="56514">the end-to-end performance of a
    pipeline is also crucial, as it directly affects the user experience and helps
    to ensure a</st> <st c="56637">comprehensive evaluation.</st>
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="56502">评估</st> <st c="56514">管道的端到端性能也非常关键，因为它直接影响用户体验，并有助于确保</st> <st
    c="56637">全面的评估。</st>
- en: <st c="56662">To keep this code lab simple, we left out a couple more metrics
    you might also consider in your analysis.</st> <st c="56769">Let’s talk about
    those</st> <st c="56792">metrics next.</st>
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使这个代码实验室保持简单，我们省略了一些你可能也在分析中考虑的更多指标。<st c="56769">接下来，让我们谈谈这些指标。</st>
- en: <st c="56805">Other component-wise evaluation</st>
  id: totrans-241
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="56805">其他分项评估</st>
- en: <st c="56837">Component-wise evaluation involves evaluating individual components
    of the pipeline, such as the</st> <st c="56935">retrieval and generation stages,
    to gain insights into their effectiveness and identify areas for improvement.</st>
    <st c="57046">We already shared two metrics for each of these stages, but here
    are a couple more that are available in the</st> <st c="57155">ragas platform:</st>
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="56837">分项评估涉及评估管道的各个组成部分，例如检索和生成阶段，以了解它们的有效性并确定改进领域。</st> <st c="57046">我们已经分享了这些阶段中每个阶段的两个指标，但这里还有一些在ragas平台中可用的指标：</st>
- en: '`<st c="57338">(0-1)</st>`<st c="57343">, with higher values indicating</st>
    <st c="57375">better relevancy.</st>'
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<st c="57338">(0-1)</st>`<st c="57343">，更高的值表示</st> <st c="57375">更好的相关性。</st>'
- en: '`<st c="57531">ground_truth</st>` <st c="57543">data and</st> `<st c="57553">contexts</st>`
    <st c="57561">data relative to the number of entities present in the</st> `<st
    c="57617">ground_truth</st>` <st c="57629">data alone.</st> <st c="57642">Simply
    put, it is a measure of what fraction of entities are recalled from</st> `<st
    c="57717">ground_truth</st>` <st c="57729">data.</st> <st c="57736">This metric
    is particularly useful in fact-based use cases such as a tourism help desk and
    historical Q&A.</st> <st c="57843">This metric can help evaluate the retrieval
    mechanism for entities, based on comparison with entities present in</st> `<st
    c="57956">ground_truth</st>` <st c="57968">data, because in cases where entities
    matter, we need the contexts that</st> <st c="58041">cover them.</st>'
  id: totrans-244
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<st c="57531">ground_truth</st>` <st c="57543">数据</st>和`<st c="57553">contexts</st>`
    <st c="57561">数据相对于`<st c="57617">ground_truth</st>` <st c="57629">数据中存在的实体数量。</st>
    <st c="57642">简单来说，这是一个衡量从`<st c="57717">ground_truth</st>` <st c="57729">数据中召回的实体比例的指标。</st>
    <st c="57736">这个指标在基于事实的使用案例中特别有用，例如旅游帮助台和历史问答。</st> <st c="57843">这个指标可以帮助评估实体检索机制，通过与`<st
    c="57956">ground_truth</st>` <st c="57968">数据中的实体进行比较，因为在这种情况下，实体很重要，我们需要涵盖它们的上下文。</st>'
- en: '**<st c="58052">Aspect critique</st>**<st c="58068">: Aspect critique is designed
    to assess submissions based on predefined aspects such as harmlessness and correctness.</st>
    <st c="58187">Additionally, users have the flexibility to define their own aspects
    for evaluating submissions according to their specific criteria.</st> <st c="58321">The
    output of aspect critiques is binary, indicating whether the submission aligns
    with the defined aspect or not.</st> <st c="58436">This evaluation is performed
    using the “</st>*<st c="58476">answer</st>*<st c="58483">”</st> <st c="58486">as
    input.</st>'
  id: totrans-245
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="58052">方面批评</st>**<st c="58068">：方面批评旨在根据预定义的方面（如无害性和正确性）评估提交内容。</st>
    <st c="58187">此外，用户可以根据其特定标准定义自己的方面来评估提交内容。</st> <st c="58321">方面批评的输出是二进制的，表示提交是否与定义的方面一致。</st>
    <st c="58436">此评估使用“</st>*<st c="58476">答案</st>*<st c="58483">”</st> <st c="58486">作为输入。</st>'
- en: <st c="58495">These additional component-wise evaluation metrics offer further
    granularity in assessing the retrieved context and the generated answers.</st>
    <st c="58635">To finish off this code lab, we are going</st> <st c="58677">to
    bring in some insights that one of the founders of ragas provided directly to
    help you with your</st> <st c="58777">RAG evaluation.</st>
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="58495">这些额外的按组件评估指标提供了进一步细化以评估检索到的上下文和生成的答案。</st> <st c="58635">为了完成这个代码实验室，我们将</st>
    <st c="58677">引入一些创始人直接提供的见解，以帮助您进行</st> <st c="58777">RAG评估。</st>
- en: <st c="58792">Founder’s perspective</st>
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="58792">创始人视角</st>
- en: <st c="58814">In preparation for this chapter, we had a chance to talk with
    one of the founders of ragas, Shahul Es, to gain additional insights into the
    platform and how you can better utilize it for RAG development and evaluation.</st>
    <st c="59034">Ragas is a young platform, but as you have seen in the code lab,
    it already has a solid foundation of metrics that you can implement to evaluate
    your RAG system.</st> <st c="59196">But this also means ragas has a lot of room
    for growth, this platform that is built specifically for RAG implementations will
    continue to evolve.</st> <st c="59342">Shahul provided some helpful tips and insights
    that we will summarize and share with you here.</st> <st c="59437">We share notes
    from that discussion in the</st> <st c="59480">following section.</st>
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="58814">为了准备这一章，我们有机会与ragas的创始人之一Shahul Es交谈，以获得对平台以及如何更好地利用它进行RAG开发和评估的额外见解。</st>
    <st c="59034">Ragas是一个年轻平台，但正如您在代码实验室中看到的，它已经建立了一个坚实的指标基础，您可以使用这些指标来评估您的RAG系统。</st>
    <st c="59196">但这也意味着ragas有很大的成长空间，这个专门为RAG实现构建的平台将继续发展。</st> <st c="59342">Shahul提供了一些有用的提示和见解，我们将在此总结并分享给您。</st>
    <st c="59437">我们将在以下部分分享那次讨论的笔记。</st>
- en: <st c="59498">Ragas founder insights</st>
  id: totrans-249
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="59498">Ragas创始人见解</st>
- en: <st c="59521">The following</st> <st c="59536">is a list of notes taken from
    a discussion with ragas co-founder Shahul Es, discussing how ragas can be used
    for</st> <st c="59649">RAG evaluation:</st>
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="59521">以下</st> <st c="59536">是从与ragas联合创始人Shahul Es的讨论中摘录的笔记，讨论了如何使用ragas进行</st>
    <st c="59649">RAG评估：</st>
- en: '**<st c="59664">Synthetic data generation</st>**<st c="59690">: The first roadblock
    people typically face with RAG evaluation is not having enough testing ground-truth
    data.</st> <st c="59803">Ragas’ main focus is to create an algorithm that could
    create a test dataset that covers a wide variety of question types, resulting
    in their synthetic data generation capabilities.</st> <st c="59985">Once you have
    used ragas to synthesize your ground truth, it is helpful to vet the ground truth
    generated and pick out any questions that</st> <st c="60123">don’t belong.</st>'
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="59664">合成数据生成</st>**<st c="59690">：人们在RAG评估中通常遇到的第一大障碍是没有足够的测试真实数据。</st>
    <st c="59803">Ragas的主要重点是创建一个算法，可以创建一个覆盖广泛问题类型的测试数据集，从而产生其合成数据生成能力。</st> <st c="59985">一旦您使用ragas合成您的真实数据，检查生成的真实数据并挑选出任何不属于的任何问题将是有帮助的。</st>'
- en: '**<st c="60136">Feedback metrics</st>**<st c="60153">: Something that is currently
    being emphasized in their development is incorporating various feedback loops
    into the evaluation from both performance and user feedback, where there are explicit
    metrics (something went wrong) and implicit metrics (levels of satisfaction, thumbs
    up/down, and similar mechanisms).</st> <st c="60466">Any kind of interaction with
    the user can potentially be implicit.</st> <st c="60533">Implicit feedback can
    be noisy (from a data standpoint), but can still be useful if</st> <st c="60617">used
    properly.</st>'
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="60136">反馈指标</st>**<st c="60153">：他们在开发中目前强调的是将各种反馈循环从性能和用户反馈中纳入评估，其中存在明确的指标（出了问题）和隐含指标（满意度水平、点赞/踩和类似机制）。</st>
    <st c="60466">与用户的任何互动都可能具有隐含性。</st> <st c="60533">隐含反馈可能嘈杂（从数据角度来看），但如果</st>
    <st c="60617">使用得当，仍然可以是有用的。</st>'
- en: '**<st c="60631">Reference and reference-free metrics</st>**<st c="60668">:
    Shahul categorized the metrics into reference metrics and reference-free metrics,
    where reference means it requires a ground truth to process.</st> <st c="60814">The
    ragas team place emphasis on building reference-free metrics in their work, which
    you can read more about in the ragas paper (</st>[<st c="60944">https://arxiv.org/abs/2309.15217</st>](https://arxiv.org/abs/2309.15217)<st
    c="60977">).</st> <st c="60981">For many fields, where the ground truth is difficult
    to collect, this is an important point, as this makes at least</st> <st c="61097">some
    of the evaluation still possible.</st> <st c="61136">Faithfulness and answer relevance
    were reference-free metrics</st> <st c="61198">Shahul mentioned.</st>'
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="60631">参考和非参考指标</st>**<st c="60668">：Shahul将这些指标分为参考指标和非参考指标，其中参考意味着它需要真实数据进行处理。</st>
    <st c="60814">ragas团队在其工作中强调构建非参考指标，您可以在ragas论文中了解更多信息（</st>[<st c="60944">https://arxiv.org/abs/2309.15217</st>](https://arxiv.org/abs/2309.15217)<st
    c="60977">）。</st> <st c="60981">对于许多领域，由于难以收集真实数据，这是一个重要的点，因为这至少使得</st> <st c="61097">一些评估仍然成为可能。</st>
    <st c="61136">Shahul提到了忠实度和答案相关性是非参考指标</st> <st c="61198">。</st>'
- en: '**<st c="61215">Deployment evaluation</st>**<st c="61237">: Reference-free
    evaluation metrics are also ideal for deployment evaluation, where you are less
    likely to have a ground</st> <st c="61359">truth available.</st>'
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="61215">部署评估</st>**<st c="61237">：非参考评估指标也适用于部署评估，在这种情况下，您不太可能有一个可用的真实</st>
    <st c="61359">数据。</st>'
- en: <st c="61375">These are some key insights, and it will be exciting to see where
    ragas development goes in the future to help us all continually improve our RAG
    systems.</st> <st c="61531">You can find the latest ragas documentation</st> <st
    c="61575">here:</st> [<st c="61581">https://docs.ragas.io/en/stable/</st>](https://docs.ragas.io/en/stable/)
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="61375">这些都是一些关键见解，看到未来ragas的发展将如何帮助我们所有人不断改进我们的RAG系统将会非常令人兴奋。</st> <st
    c="61531">您可以在以下位置找到最新的ragas文档</st> <st c="61575">：</st> [<st c="61581">https://docs.ragas.io/en/stable/</st>](https://docs.ragas.io/en/stable/)
- en: <st c="61613">That concludes our evaluation code lab using ragas.</st> <st c="61666">But
    ragas is not the only evaluation tool that is used for RAG evaluation; there are
    many more!</st> <st c="61762">Next, we will discuss some other approaches you</st>
    <st c="61810">can consider.</st>
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="61613">这就是我们使用ragas进行的评估代码实验室的结束。</st> <st c="61666">但ragas并不是用于RAG评估的唯一工具；还有更多！</st>
    <st c="61762">接下来，我们将讨论一些您</st> <st c="61810">可以考虑的其他方法。</st>
- en: <st c="61823">Additional evaluation techniques</st>
  id: totrans-257
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="61823">额外的评估技术</st>
- en: <st c="61856">Ragas is just one of many evaluation tools and techniques available
    to evaluate your RAG system.</st> <st c="61954">This is not an exhaustive list,
    but in the following subsections, we will discuss some of the more popular techniques
    you can use to evaluate the performance of your RAG system, once you have obtained
    or generated</st> <st c="62168">ground-truth data.</st>
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="61856">Ragas只是众多评估工具和技术中的一种，可用于评估您的RAG系统。</st> <st c="61954">这不是一个详尽的列表，但在接下来的小节中，我们将讨论一些更受欢迎的技术，您可以使用这些技术来评估您的RAG系统性能，一旦您获得或生成了</st>
    <st c="62168">真实数据。</st>
- en: <st c="62186">Bilingual Evaluation Understudy (BLEU)</st>
  id: totrans-259
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="62186">双语评估助理（BLEU）</st>
- en: <st c="62225">BLEU measures the overlap of n-grams between the generated response
    and the ground-truth</st> <st c="62315">response.</st> <st c="62325">It provides
    a score indicating the similarity between the two.</st> <st c="62388">In the context
    of RAG, BLEU can be used to evaluate the quality of the generated answers by comparing
    them to the ground-truth answers.</st> <st c="62524">By calculating the n-gram
    overlap, BLEU assesses how closely the generated answers match the reference answers
    in terms of word choice and phrasing.</st> <st c="62673">However, it’s important
    to note that BLEU is more focused on surface-level similarity and may not capture
    the semantic meaning or relevance of the</st> <st c="62820">generated answers.</st>
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="62225">BLEU衡量生成响应和真实响应之间的n-gram重叠</st> <st c="62315">。</st> <st c="62325">它提供了一个表示两者之间相似度的分数。</st>
    <st c="62388">在RAG的背景下，BLEU可以通过将生成的答案与真实答案进行比较来评估生成答案的质量。</st> <st c="62524">通过计算n-gram重叠，BLEU评估生成的答案在词汇选择和措辞方面与参考答案的匹配程度。</st>
    <st c="62673">然而，需要注意的是，BLEU更关注表面相似性，可能无法捕捉到生成答案的语义意义或相关性。</st> <st c="62820">。</st>
- en: <st c="62838">Recall-Oriented Understudy for Gisting Evaluation (ROUGE)</st>
  id: totrans-261
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="62838">用于摘要评估的召回率导向的辅助研究（ROUGE）</st>
- en: <st c="62896">ROUGE assesses the quality of the generated response by comparing
    it to the ground truth</st> <st c="62986">in terms of recall.</st> <st c="63006">It
    measures how much of the ground truth is captured in the generated response.</st>
    <st c="63086">For RAG evaluation, ROUGE can be used to evaluate the coverage and
    completeness of the generated answers.</st> <st c="63192">By calculating the recall
    between the generated answers and the ground-truth answers, ROUGE assesses how
    well the generated answers capture the key information and details present in
    the reference answers.</st> <st c="63398">ROUGE is particularly useful when the
    ground-truth answers are longer or more detailed, as it focuses on the overlap
    of information rather than exact</st> <st c="63548">word matches.</st>
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="62896">ROUGE通过比较生成的响应与真实值在召回率方面的表现来评估生成响应的质量</st> <st c="62986">来衡量真实值中有多少被捕获在生成的响应中。</st>
    <st c="63006">它衡量真实值中有多少被捕获在生成的响应中。</st> <st c="63086">在RAG评估中，ROUGE可以用来评估生成答案的覆盖率和完整性。</st>
    <st c="63192">通过计算生成的答案和真实答案之间的召回率，ROUGE评估生成的答案在多大程度上捕获了参考答案中的关键信息和细节。</st> <st
    c="63398">当真实答案更长或更详细时，ROUGE特别有用，因为它关注的是信息的重叠，而不是精确的</st> <st c="63548">单词匹配。</st>
- en: <st c="63561">Semantic similarity</st>
  id: totrans-263
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="63561">语义相似度</st>
- en: <st c="63581">Metrics</st> <st c="63590">such as cosine similarity or</st> **<st
    c="63619">semantic textual similarity</st>** <st c="63646">(</st>**<st c="63648">STS</st>**<st
    c="63651">) can be used to evaluate the semantic relevance between the generated
    response and the ground truth.</st> <st c="63754">These metrics capture the meaning
    and context beyond exact word matches.</st> <st c="63827">In RAG evaluation, semantic
    similarity metrics can be used to assess the semantic coherence and relevance
    of the generated answers.</st> <st c="63959">By comparing the semantic representations
    of the generated answers and the ground-truth answers, these metrics evaluate
    how well the generated answers capture the underlying meaning and context of the
    reference answers.</st> <st c="64179">Semantic similarity metrics are particularly
    useful when the generated answers may use different words or phrasing but still
    convey the same meaning as the</st> <st c="64335">ground truth.</st>
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="63581">指标</st> <st c="63590">如余弦相似度或</st> **<st c="63619">语义文本相似度</st>**
    <st c="63646">(</st>**<st c="63648">STS</st>**<st c="63651">)可以用来评估生成的响应与真实值之间的语义相关性。</st>
    <st c="63754">这些指标捕捉了超出精确单词匹配的意义和上下文。</st> <st c="63827">在RAG评估中，语义相似度指标可以用来评估生成答案的语义一致性和相关性。</st>
    <st c="63959">通过比较生成的答案和真实答案的语义表示，这些指标评估生成的答案在多大程度上捕捉了参考答案的潜在意义和上下文。</st> <st
    c="64179">当生成的答案可能使用不同的单词或措辞，但仍然传达与真实值相同的意义时，语义相似度指标特别有用。</st>
- en: <st c="64348">Human evaluation</st>
  id: totrans-265
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="64348">人工评估</st>
- en: <st c="64365">While automated metrics provide a quantitative assessment, human
    evaluation remains important</st> <st c="64460">for assessing the coherence, fluency,
    and overall quality of the generated responses compared to the ground truth.</st>
    <st c="64575">In the context of RAG, human evaluation involves having human raters
    assess the generated answers based on various criteria.</st> <st c="64700">These
    criteria may include relevance to the question, factual correctness, clarity of
    the answer, and overall coherence.</st> <st c="64821">Human evaluators can provide
    qualitative feedback and insights that automated metrics may not capture, such
    as the appropriateness of the answer tone, the presence of any inconsistencies
    or contradictions, and the overall user experience.</st> <st c="65060">Human evaluation
    can complement automated metrics by providing a more comprehensive and nuanced
    assessment of the RAG</st> <st c="65178">system’s performance.</st>
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="64365">虽然自动指标提供了定量评估，但人类评估在评估生成的响应与事实真相相比的连贯性、流畅性和整体质量方面仍然很重要。</st> <st
    c="64460">在RAG的背景下，人类评估涉及让人类评分者根据各种标准评估生成的答案。</st> <st c="64575">这些标准可能包括与问题的相关性、事实的正确性、答案的清晰度以及整体连贯性。</st>
    <st c="64700">人类评估者可以提供自动化指标可能无法捕捉到的定性反馈和见解，例如答案语气的适当性、是否存在任何不一致或矛盾，以及整体用户体验。</st>
    <st c="64821">人类评估可以通过提供对RAG系统性能的更全面和细致的评估来补充自动化指标。</st>
- en: <st c="65199">When evaluating a RAG system, it’s often beneficial to use a combination
    of these evaluation techniques to obtain a holistic view of the system’s performance.</st>
    <st c="65359">Each technique has its strengths and limitations, and using multiple
    metrics can provide a more robust and comprehensive evaluation.</st> <st c="65492">Additionally,
    it’s important to consider the specific requirements and goals of your RAG application
    when selecting the appropriate evaluation techniques.</st> <st c="65647">Some
    applications may prioritize factual correctness, while others may focus more on
    the fluency and coherence of the generated answers.</st> <st c="65784">By aligning
    the evaluation techniques with your specific needs, you can effectively assess
    the performance of your RAG system and identify areas</st> <st c="65929">for improvement.</st>
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="65199">在评估RAG系统时，通常有益于结合使用这些评估技术，以获得对系统性能的整体看法。</st> <st c="65359">每种技术都有其优势和局限性，使用多个指标可以提供更稳健和全面的评估。</st>
    <st c="65492">此外，在选择适当的评估技术时，考虑您RAG应用程序的具体需求和目标也很重要。</st> <st c="65647">某些应用程序可能优先考虑事实的正确性，而其他应用程序可能更关注生成的答案的流畅性和连贯性。</st>
    <st c="65784">通过将评估技术与您的具体需求对齐，您可以有效地评估RAG系统的性能并确定改进领域。</st>
- en: <st c="65945">Summary</st>
  id: totrans-268
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="65945">总结</st>
- en: <st c="65953">In this chapter, we explored the key role that evaluation plays
    in building and maintaining RAG pipelines.</st> <st c="66061">We discussed how
    evaluation helps developers identify areas for improvement, optimize system performance,
    and measure the impact of modifications throughout the development process.</st>
    <st c="66243">We also highlighted the importance of evaluating the system after
    deployment to ensure ongoing effectiveness, reliability,</st> <st c="66366">and
    performance.</st>
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="65953">在本章中，我们探讨了评估在构建和维护RAG管道中的关键作用。</st> <st c="66061">我们讨论了评估如何帮助开发者识别改进领域、优化系统性能，并在整个开发过程中衡量修改的影响。</st>
    <st c="66243">我们还强调了在部署后评估系统的重要性，以确保持续的效力、可靠性和性能。</st>
- en: <st c="66382">We introduced standardized evaluation frameworks for various components
    of a RAG pipeline, such as embedding models, vector stores, vector search, and
    LLMs.</st> <st c="66540">These frameworks provide valuable benchmarks for comparing
    the performance of different models and components.</st> <st c="66651">We emphasized
    the significance of ground-truth data in RAG evaluation and discussed methods
    for obtaining or generating the ground truth, including human annotation, expert
    knowledge, crowdsourcing, and synthetic</st> <st c="66864">ground-truth generation.</st>
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="66382">我们介绍了RAG管道各个组件的标准化评估框架，例如嵌入模型、向量存储、向量搜索和LLMs。</st> <st c="66540">这些框架为比较不同模型和组件的性能提供了有价值的基准。</st>
    <st c="66651">我们强调了在RAG评估中真实数据的重要性，并讨论了获取或生成真实数据的方法，包括人工标注、专家知识、众包和合成真实数据生成。</st>
- en: <st c="66888">The chapter included a hands-on code lab where we integrated the
    ragas evaluation platform into our RAG system.</st> <st c="67001">We generated
    synthetic ground-truth data and established a comprehensive set of metrics to
    evaluate the impact of using hybrid search compared to the original dense vector
    semantic-based search.</st> <st c="67196">We explored the different stages of
    RAG evaluation, including retrieval evaluation, generation evaluation, and end-to-end
    evaluation, and analyzed the results obtained from our evaluation.</st> <st c="67385">The
    code lab provided a real-world example of implementing a comprehensive evaluation
    system in a RAG pipeline, demonstrating how developers can leverage evaluation
    metrics to gain insights and make data-driven decisions to improve their RAG pipelines.</st>
    <st c="67638">We were also able to share key insights from one of the founders
    of ragas to help your RAG evaluation efforts</st> <st c="67748">even further.</st>
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 本章包含了一个动手代码实验室，我们将ragas评估平台集成到我们的RAG系统中。我们生成了合成的真实数据，并建立了一套全面的指标来评估使用混合搜索与原始密集向量语义搜索相比的影响。我们探讨了RAG评估的不同阶段，包括检索评估、生成评估和端到端评估，并分析了我们的评估结果。代码实验室提供了一个在RAG管道中实施全面评估系统的真实世界示例，展示了开发者如何利用评估指标来获得洞察力，并做出数据驱动的决策以改进他们的RAG管道。我们还能够分享ragas创始人之一的关键见解，以进一步帮助您的RAG评估工作。
- en: <st c="67761">In the next chapter, we will start our discussion about how to
    utilize LangChain with the key components of RAG systems in the most</st> <st
    c="67894">effective way.</st>
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将开始讨论如何以最有效的方式利用LangChain与RAG系统的关键组件。
- en: <st c="67908">References</st>
  id: totrans-273
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参考文献
- en: '`<st c="67919">MSMARCO</st>`<st c="67927">:</st> [<st c="67930">https://microsoft.github.io/msmarco/</st>](https://microsoft.github.io/msmarco/)'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: '**MSMARCO**：[https://microsoft.github.io/msmarco/](https://microsoft.github.io/msmarco/)'
- en: '`<st c="67966">HotpotQA</st>`<st c="67975">:</st> [<st c="67978">https://hotpotqa.github.io/</st>](https://hotpotqa.github.io/)'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: '**HotpotQA**：[https://hotpotqa.github.io/](https://hotpotqa.github.io/)'
- en: '`<st c="68005">CQADupStack</st>`<st c="68017">:</st> [<st c="68020">http://nlp.cis.unimelb.edu.au/resources/cqadupstack/</st>](http://nlp.cis.unimelb.edu.au/resources/cqadupstack/)'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: '**CQADupStack**：[http://nlp.cis.unimelb.edu.au/resources/cqadupstack/](http://nlp.cis.unimelb.edu.au/resources/cqadupstack/)'
- en: '**<st c="68072">Chatbot</st>** **<st c="68081">Arena</st>**<st c="68086">:</st>
    [<st c="68089">https://chat.lmsys.org/?leaderboard</st>](https://chat.lmsys.org/?leaderboard)'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: '**Chatbot** **Arena**：[https://chat.lmsys.org/?leaderboard](https://chat.lmsys.org/?leaderboard)'
- en: '**<st c="68124">MMLU</st>**<st c="68129">:</st> [<st c="68132">https://arxiv.org/abs/2009.03300</st>](https://arxiv.org/abs/2009.03300)'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: '**MMLU**：[https://arxiv.org/abs/2009.03300](https://arxiv.org/abs/2009.03300)'
- en: '**<st c="68164">MT</st>** **<st c="68168">Bench</st>**<st c="68173">:</st>
    [<st c="68176">https://arxiv.org/pdf/2402.14762</st>](https://arxiv.org/pdf/2402.14762)**'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: '**MT** **Bench**：[https://arxiv.org/pdf/2402.14762](https://arxiv.org/pdf/2402.14762)'
