- en: '23'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Reasoning WithOut Observation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Reasoning WithOut Observation** (**ReWOO**), proposed by Xu et al. ([https://arxiv.org/abs/2305.18323](https://arxiv.org/abs/2305.18323)),
    is a framework that combines a multi-step planner and variable substitution for
    effective tool use. It aims to improve upon ReAct-style agents by reducing token
    consumption and execution time by generating the full chain of tool usage in a
    single pass, thus minimizing redundant LLM calls. It also aims to simplify the
    fine-tuning process by enabling fine-tuning without actually invoking tools as
    planning data doesn’t depend on tool outputs (in theory).'
  prefs: []
  type: TYPE_NORMAL
- en: ReAct operates through a cyclical “think-act-observe” pattern, where an AI engages
    in reasoning, performs an action, examines the resulting feedback, and then adjusts
    its subsequent actions accordingly, facilitating a dynamic and responsive problem-solving
    strategy. In contrast, ReWOO emphasizes comprehensive upfront planning, generating
    a complete sequence of actions before any execution occurs, thereby minimizing
    the necessity for continuous observation and feedback. This distinction allows
    ReWOO to pursue greater efficiency by reducing token consumption and computational
    costs, shifting from ReAct’s iterative feedback loop to a more streamlined “plan-act”
    methodology.
  prefs: []
  type: TYPE_NORMAL
- en: So, ReWOO refers to an LLM’s ability to make inferences, predictions, or decisions
    about scenarios it has not directly observed or been trained on. ReWOO enhances
    this by incorporating external tool use into the reasoning process.
  prefs: []
  type: TYPE_NORMAL
- en: 'ReWOO’s ability to plan and reason without direct observation makes it suitable
    for complex planning and decision-making tasks:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Strategic planning**: As mentioned, ReWOO can generate strategic plans based
    on hypothetical situations, goals, and constraints'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Scenario analysis**: ReWOO can explore multiple potential outcomes of a given
    scenario, considering various factors and uncertainties'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Resource allocation**: By planning tool use and reasoning about their results,
    ReWOO can optimize resource allocation in complex environments'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Risk assessment**: ReWOO can help assess potential risks and develop mitigation
    strategies by simulating different scenarios and their consequences'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'In this chapter, we’ll be covering the following topics:'
  prefs: []
  type: TYPE_NORMAL
- en: Implementing ReWOO with LangGraph
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Advantages of ReWOO
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Evaluating quality and ethical considerations
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Future directions
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Implementing ReWOO with LangGraph
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: LangGraph is an open source framework designed for building stateful, multi-agent
    applications using LLMs. It extends the capabilities of the LangChain ecosystem
    by introducing a directed graph model, where nodes represent functions (including
    LLM invocations) and edges represent transitions between states based on logic,
    conditions, or memory. Unlike traditional sequential chains, LangGraph allows
    complex workflows involving conditional branching, loops, memory passing, and
    asynchronous agent coordination. LangGraph is particularly useful for implementing
    systems where interactions are dynamic, iterative, and dependent on state changes.
    This includes multi-agent collaboration, decision trees, retrieval-augmented generation
    with control flow, and autonomous agents that need to revisit prior steps or loop
    through subtasks until certain goals are met.
  prefs: []
  type: TYPE_NORMAL
- en: LangGraph leverages concepts from graph theory and automata, representing execution
    flows as state machines or directed acyclic graphs (or cyclic graphs when loops
    are needed). Developers define a graph with nodes (functions or tools), edges
    (state transitions), and conditions (logic for routing). The runtime engine then
    executes the graph in response to inputs, updating the state at each step.
  prefs: []
  type: TYPE_NORMAL
- en: LangGraph supports both synchronous and asynchronous execution, and it integrates
    with LangChain’s components, such as tools, memory, and agents. It also supports
    streaming responses, fine-grained control over state, and multi-modal inputs/outputs,
    making it suitable for production-level applications.
  prefs: []
  type: TYPE_NORMAL
- en: In practice, LangGraph is used to build agentic systems where different agents
    interact, coordinate, and share memory, while still following a well-defined computational
    graph. This makes it different from naive agent loops or unstructured LLM orchestration
    methods.
  prefs: []
  type: TYPE_NORMAL
- en: LangGraph is available at [https://github.com/langchain-ai/langgraph](https://github.com/langchain-ai/langgraph)
    and supports Python-based implementation, with core dependencies on LangChain
    and state machine execution frameworks.
  prefs: []
  type: TYPE_NORMAL
- en: 'The ReWOO architecture consists of three modules:'
  prefs: []
  type: TYPE_NORMAL
- en: '`search_result` or `price`, the AI can construct a clear blueprint of the task,
    deferring the resolution of dynamic information until it becomes available, thereby
    streamlining the planning process and avoiding unnecessary computations.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Worker**: Executes the tool with the provided arguments, potentially using
    variable substitution from previous steps.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Solver**: Generates the final answer based on the tool observations and the
    plan.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'This architecture may seem a little abstract initially. Let’s implement ReWOO
    using LangGraph. We’ll use a Tavily search engine as an example tool:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Install the necessary packages and set API keys:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Tavily is a search engine designed specifically for AI agents. It’s built to
    provide accurate and reliable information retrieval, tailored to the needs of
    AI systems performing complex tasks (see [https://tavily.com/](https://tavily.com/)).
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'The following script sets environment variables for API keys if they haven’t
    been defined yet:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Next, define the graph state. To do so, define the state dictionary so that
    it can hold the task, plan, steps, results, and final result:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Create the planner prompt and logic:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Create a LangGraph node for the planner:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Instantiate the search engine and define the tool execution logic:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Create the solver prompt and logic:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Build the LangGraph workflow:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The provided code establishes an AI workflow using `StateGraph`, a data structure
    for managing multi-step processes. The `_route` function acts as a conditional
    director, determining the next step based on the current state. It checks if further
    tool-based actions are required; if not, it routes the process to the `"solve"`
    node for final answer generation. Otherwise, it directs it to the `"tool"` node
    for tool execution.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Here, `StateGraph` defines the execution flow: starting with `"plan"` for strategy
    creation, proceeding to `"tool"` for external tool usage, and finally, to `"solve"`
    for result generation, culminating in the `END` state. The `_route` function’s
    conditional logic within the `"tool"` node is key, allowing dynamic routing based
    on the task’s progression.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '`StateGraph` is crucial for structured workflow management, enabling conditional
    branching for adaptive AI behavior, especially in tool-dependent tasks. It ensures
    logical action sequencing, improving robustness and clarity, and facilitating
    ReWOO’s planned execution. Compiling the graph into an `"app"` makes it executable.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Let’s look at an example use case, and test the ReWOO agent:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The preceding code provides a simple implementation of the ReWOO framework using
    LangGraph. It defines the state, planner, executor, and solver modules, and connects
    them into a graph. This example usage demonstrates how to run the agent on a sample
    task.
  prefs: []
  type: TYPE_NORMAL
- en: Advantages of ReWOO
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'ReWOO offers several advantages over traditional ReAct-style agents:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Reduced token consumption and execution time**: By generating the entire
    plan in a single pass and using variable substitution, ReWOO minimizes redundant
    LLM calls and context passing'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Simplified fine-tuning**: The independence of the planning data from tool
    outputs (in theory) allows for fine-tuning without the need to invoke the tools'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Efficient LLM calls**: The LLM tool receives less of the prompt, making calls
    more token-efficient compared to the ReACT paradigm'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Evaluating quality and ethical considerations
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Evaluating the quality of ReWOO’s reasoning can be challenging as it often
    deals with hypothetical scenarios. Possible approaches include the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Human evaluation**: Using human experts to assess the coherence, relevance,
    and completeness of the generated plans and reasoning'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Comparison with ground truth**: For scenarios with known outcomes, ReWOO’s
    predictions can be compared with actual results'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Benchmarking**: Using standardized test sets designed to evaluate abstract
    reasoning and planning capabilities'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'It is also crucial to keep ethical considerations in mind while doing any evaluation:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Bias amplification**: ReWOO might inherit and amplify biases present in the
    training data of the underlying LLM'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Misuse potential**: The ability to generate plans and reason about hypothetical
    scenarios could be misused for malicious purposes'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Overreliance**: Users might place too much trust in ReWOO’s outputs without
    considering their speculative nature'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Future directions
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'As research progresses, ReWOO and related techniques will likely play an increasingly
    important role in the development of more capable and versatile AI systems. The
    following are some promising directions for ReWOO:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Human-in-the-loop systems**: Integrating human oversight and feedback into
    the ReWOO framework to improve accuracy and address ethical concerns'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Improved planning algorithms**: Developing more sophisticated planning algorithms
    that can handle more complex scenarios and larger search spaces'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Enhanced tool integration**: Seamlessly integrating a wider range of tools,
    including specialized APIs and knowledge bases'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Multi-agent collaboration**: Enabling multiple ReWOO agents to collaborate
    on complex tasks, potentially leading to more robust and diverse solutions'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Meta-learning**: Applying meta-learning techniques to improve the agent’s
    ability to generalize and adapt to new scenarios over time'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This chapter delved into ReWOO, a framework designed to empower LLMs with the
    ability to reason about hypothetical situations and leverage external tools effectively.
    ReWOO utilizes a multi-step planner coupled with variable substitution, enabling
    it to generate comprehensive action plans in a single pass, thereby minimizing
    token consumption and execution time compared to the iterative “think-act-observe”
    cycle of ReAct agents. This chapter demonstrated the implementation of ReWOO using
    LangGraph, highlighting its architecture, components (planner, worker, solver),
    and advantages, such as simplified fine-tuning and efficient LLM calls.
  prefs: []
  type: TYPE_NORMAL
- en: Beyond simply reiterating the framework’s mechanics, this chapter emphasized
    ReWOO’s potential for strategic planning, scenario analysis, resource allocation,
    and risk assessment. However, it also touched upon the critical ethical considerations
    surrounding ReWOO, including the potential for bias amplification, misuse, and
    overreliance on its outputs. This chapter concluded with a view toward the future,
    discussing the need for human-in-the-loop systems, improved planning algorithms,
    enhanced tool integration, multi-agent collaboration, and the application of meta-learning
    techniques to further refine ReWOO’s capabilities and ensure responsible application
    in real-world scenarios.
  prefs: []
  type: TYPE_NORMAL
- en: In the next chapter, we will discuss techniques that enable LLMs to engage in
    self-reflection and iterative improvement.
  prefs: []
  type: TYPE_NORMAL
