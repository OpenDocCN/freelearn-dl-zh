- en: '6'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '6'
- en: Exploring the Coordinator, Worker, and Delegator Approach
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 探索协调者、工作者和委派者方法
- en: In the previous chapter, we looked into the concepts of tool use and planning,
    which lay an essential foundation for intelligent agents to enhance their problem-solving
    capabilities. We explored various planning algorithms, including state space search
    techniques and **hierarchical task networks** ( **HTNs** ), and examined how these
    algorithms can be seamlessly integrated with external tools and resources to enable
    agents to perform optimally.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们探讨了工具使用和规划的概念，这些概念为智能体增强其问题解决能力奠定了必要的基础。我们研究了各种规划算法，包括状态空间搜索技术和**分层任务网络**（**HTNs**），并考察了这些算法如何与外部工具和资源无缝集成，以使智能体能够最优地执行任务。
- en: 'Building upon this foundation, in this chapter, we will ground our understanding
    by exploring a powerful organizational framework for intelligent agents: the **coordinator-worker-delegator**
    ( **CWD** ) approach. This chapter is divided into the following main sections:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在此基础上，在本章中，我们将通过探索智能体的一种强大组织框架：**协调者-工作者-委派者**（**CWD**）方法来巩固我们的理解。本章分为以下主要部分：
- en: Understanding the CWD model
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解CWD模型
- en: Designing agents with role assignments
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设计具有角色分配的智能体
- en: Communication and collaboration between agents
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 智能体之间的通信和协作
- en: Implementing the CWD approach in generative AI systems
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在生成式AI系统中实现CWD方法
- en: By the end of this chapter, you will have a comprehensive understanding of how
    to design and implement multi-agent systems using the CWD approach. You’ll know
    how to effectively assign roles to different agents, establish robust communication
    protocols between them, and orchestrate their interactions to tackle complex problems.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 到本章结束时，你将全面了解如何使用CWD方法设计和实现多智能体系统。你将知道如何有效地为不同的智能体分配角色，在他们之间建立稳健的通信协议，并编排他们的互动以解决复杂问题。
- en: Technical requirements
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: You can find the code file for this chapter on GitHub at [https://github.com/PacktPublishing/Building-Agentic-AI-Systems](https://github.com/PacktPublishing/Building-Agentic-AI-Systems)
    . In this chapter, we will also use the Python frameworks that we have already
    used in previous chapters to demonstrate the various aspects of the CWD approach
    and agent roles.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在GitHub上找到本章的代码文件，网址为[https://github.com/PacktPublishing/Building-Agentic-AI-Systems](https://github.com/PacktPublishing/Building-Agentic-AI-Systems)。在本章中，我们还将使用我们在前几章中已经使用过的Python框架来展示CWD方法和智能体角色的各个方面。
- en: Understanding the CWD model
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解CWD模型
- en: The CWD model is a comprehensive framework designed to facilitate the development
    of multi-agent systems, emphasizing collaboration, specialization, and effective
    distribution of tasks and resource management. Just as human organizations benefit
    from clear role delegation and hierarchical structures, intelligent agents can
    achieve greater effectiveness through thoughtful division of labor. The CWD framework,
    as shown in *Figure 6* *.1* , draws inspiration from organizational psychology
    and management theory, adapting proven principles of human coordination to the
    field of intelligent agents. This approach is particularly valuable as agent systems
    grow in complexity and need to handle increasingly intricate tasks that require
    multiple specialized capabilities working in concert. This model is particularly
    well suited for environments where autonomous agents must collaborate to achieve
    complex objectives that may be beyond the capabilities of a single agent.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: CWD模型是一个旨在促进多智能体系统开发的综合框架，强调协作、专业化和任务及资源管理的有效分配。正如人类组织从明确的角色委派和层级结构中受益一样，智能体通过深思熟虑的劳动分工可以实现更高的效率。如图*图6.1*所示，CWD框架从组织心理学和管理理论中汲取灵感，将人类协调的既定原则应用于智能体领域。这种方法在智能体系统日益复杂且需要处理越来越复杂的任务，这些任务需要多个专业能力协同工作时尤其有价值。此模型特别适用于需要自主智能体协作以实现可能超出单个智能体能力范围复杂目标的场景。
- en: '![img](img/B31483_06_01.jpg)'
  id: totrans-13
  prefs: []
  type: TYPE_IMG
  zh: '![img](img/B31483_06_01.jpg)'
- en: Figure 6.1 – The CWD model
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.1 – CWD模型
- en: 'The CWD model establishes three distinct roles that work together to accomplish
    complex tasks:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: CWD模型建立了三个不同的角色，它们共同协作以完成复杂任务：
- en: '**Coordinators** : Coordinators are agents responsible for managing tasks,
    resources, and the overall workflow of the system. Their primary responsibilities
    encompass facilitating progress monitoring, assigning tasks to appropriate agents,
    and enabling effective collaboration among workers. coordinators play a crucial
    role in ensuring smooth operations and keeping the system aligned with its objectives.
    They act as orchestrators, overseeing the entire process and coordinating the
    various components to work in harmony. Coordinators prioritize workloads by dynamically
    allocating tasks based on urgency, resource availability, and dependencies. They
    monitor progress, adjust assignments as needed, and ensure seamless collaboration
    among agents. By optimizing task distribution and workflow execution, they maintain
    system efficiency and alignment with overall objectives.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**协调员**：协调员是负责管理任务、资源和系统整体工作流程的代理。他们的主要职责包括促进进度监控、将任务分配给适当的代理，以及促进工人之间的有效协作。协调员在确保系统平稳运行和与目标保持一致方面发挥着关键作用。他们作为指挥者，监督整个流程，协调各个组件协同工作。协调员通过根据紧急程度、资源可用性和依赖关系动态分配任务来优先处理工作负载。他们监控进度，根据需要调整分配，并确保代理之间的协作无缝进行。通过优化任务分配和工作流程执行，他们保持系统效率与整体目标的协调一致。'
- en: '**Workers** : Workers are specialized agents dedicated to carrying out specific
    tasks or functions within the system. These agents possess diverse capabilities
    and expertise, reflecting a broad range of skills that can be applied to various
    tasks. When assigned a task by the delegators, workers leverage their specialized
    knowledge and proficiency to efficiently realize the task’s objectives. The diversity
    of worker agents allows for a division of l abor and the allocation of tasks to
    the most suitable agents, optimizing the system’s overall performance.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**工人**：工人是专注于在系统内执行特定任务或功能的专用代理。这些代理拥有多样化的能力和专业知识，反映了可以应用于各种任务的广泛技能。当被分配任务时，工人利用他们的专业知识和熟练度来高效地实现任务目标。工人代理的多样性允许劳动分工，并将任务分配给最合适的代理，从而优化系统的整体性能。'
- en: '**Delegators** : Delegators serve as intermediaries between coordinators and
    workers, responsible for implementing workload assignments to workers based on
    resource availability and system needs. They act as interfaces, facilitating the
    communication and coordination between the coordinators and workers. delegators
    play a crucial role in dispatching and balancing the workload across multiple
    workers, ensuring that tasks are assigned to the appropriate agents in a timely
    and efficient manner. The most critical function of delegators is optimizing overall
    performance by assigning tasks to the right workers at the right time, considering
    their capabilities and the system’s constraints. Delegators optimize performance
    by balancing **throughput** , **latency** , and **resource utilization** . They
    ensure tasks are assigned efficiently to minimize delays (low latency), maximize
    completed tasks per unit time (high throughput), and prevent resource bottlenecks
    (optimal resource utilization). By dynamically adjusting assignments based on
    worker capacity and system constraints, they enhance overall efficiency and responsiveness.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**委托人**：委托人在协调员和工人之间充当中介，负责根据资源可用性和系统需求将工作负载分配给工人。他们作为接口，促进协调员和工人之间的沟通和协调。委托人在调度和平衡多个工人之间的工作负载方面发挥着关键作用，确保任务及时且高效地分配给适当的代理。委托人最关键的功能是通过在适当的时间将任务分配给合适的工人，考虑他们的能力和系统的限制来优化整体性能。委托人通过平衡**吞吐量**、**延迟**和**资源利用率**来优化性能。他们确保任务高效分配以最小化延迟（低延迟）、最大化单位时间完成的任务数量（高吞吐量）并防止资源瓶颈（最优资源利用率）。通过根据工人能力和系统限制动态调整分配，他们提高整体效率和响应能力。'
- en: The CWD model defines distinct roles—coordinators, workers, and delegators—that
    work together to enhance system efficiency and collaboration. By structuring task
    allocation, communication, and execution, it ensures operational harmony, driven
    by key principles that underpin its effectiveness.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: CWD模型定义了不同的角色——协调员、工人和委托人——他们共同工作以增强系统效率和协作。通过结构化任务分配、沟通和执行，它确保了由支撑其有效性的关键原则驱动的运营和谐。
- en: Key principles of the CWD model
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: CWD模型的关键原则
- en: 'The CWD model is founded on several key principles that guide its design and
    implementation:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: CWD模型基于几个关键原则，这些原则指导其设计和实施：
- en: '**Separation of concerns** : The fundamental philosophy behind CWD is the clear
    separation of responsibilities between strategic planning (coordinator), resource
    management (delegator), and task execution (worker). This separation allows each
    component to focus on its core competencies while maintaining system flexibility
    and scalability.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Hierarchical organization** : The model implements a hierarchical structure
    that mirrors successful organizational patterns found in human institutions:'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Top level** : Strategic oversight and planning'
  id: totrans-24
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Middle level** : Resource management and coordination'
  id: totrans-25
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Base level** : Specialized task execution'
  id: totrans-26
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Information flow and feedback loops** : The CWD model emphasizes bidirectional
    communication flows:'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Downward flow** : Task assignments, priorities, and constraints'
  id: totrans-28
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Upward flow** : Progress updates, results, and resource utilization'
  id: totrans-29
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Adaptability and resilience** : The model is designed to be inherently adaptable
    through the following:'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Dynamic resource allocation** : Agents continuously assess workload demands
    and redistribute computational or operational resources in real time to optimize
    efficiency and prevent bottlenecks'
  id: totrans-31
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Fault tolerance through redundancy** : The system employs multiple agents
    with overlapping capabilities, allowing seamless handoff and recovery in case
    of failures, and ensuring uninterrupted operations'
  id: totrans-32
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Load balancing across agents** : Tasks are intelligently distributed among
    agents based on their availability, expertise, and current workload, preventing
    performance degradation and improving responsiveness'
  id: totrans-33
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Runtime role reassignment** : Agents can adapt their roles based on evolving
    system needs, stepping into different responsibilities as required to maintain
    workflow continuity and operational effectiveness'
  id: totrans-34
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: These mechanisms collectively enhance the system’s ability to adapt, recover,
    and function efficiently, even in unpredictable conditions, ensuring sustained
    performance and reliability.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
- en: The CWD model’s key principles ensure clarity, organization, and adaptability
    by defining roles, fostering hierarchy, and enabling robust communication. This
    structured approach enhances efficiency and resilience, making it versatile for
    various applications, including the development of an intelligent travel agent
    system.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
- en: The CWD model for the intelligent travel agent
  id: totrans-37
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'As an example, let’s discuss how the CWD model may be implemented for the intelligent
    travel agent system. The overall structure and flow may be as follows:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: '**Coordinator agent** : This agent will act as the travel planning coordinator.
    This agent will be responsible for the following:'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Managing the overall travel planning process based on a user request
  id: totrans-40
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Facilitating progress monitoring and effective collaboration among worker agents
  id: totrans-41
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Assigning tasks and coordinating the workflow based on the customer’s travel
    requirements
  id: totrans-42
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Worker agents** : There can be a number of different agents, each specializing
    in its own domain and expertise within travel and hospitality management:'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**工作者代理**：可以有多种不同的代理，每个代理在其自己的旅游和酒店管理领域内都有其专业和专长：'
- en: '**Flight booking worker** : Specialized in searching for and booking flight
    options based on travel dates, destinations, and preferences'
  id: totrans-44
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**航班预订工作者**：专注于根据旅行日期、目的地和偏好搜索和预订航班选项'
- en: '**Hotel booking worker** : Focused on finding and reserving suitable accommodations
    based on location, amenities, and customer preferences'
  id: totrans-45
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**酒店预订工作者**：专注于根据位置、设施和客户偏好寻找和预订合适的住宿'
- en: '**Activity planning worker** : Responsible for researching and planning activities,
    tours, and experiences at the travel destination, tailored to the customer’s interests'
  id: totrans-46
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**活动策划工作者**：负责研究和策划旅游目的地的活动、旅游和体验，以满足客户的兴趣'
- en: '**Transportation worker** : Specialized in arranging ground transportation,
    such as rental cars, airport transfers, or local transportation options'
  id: totrans-47
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**交通工作者**：专门安排地面交通，如租车、机场接送或当地交通选项'
- en: '**Delegator agent** : This agent will act as the travel task delegator agent.
    This agent performs the following:'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**委托代理**：此代理将作为旅游任务委托代理。此代理执行以下操作：'
- en: Acts as an interface between the travel planning coordinator and the specialized
    worker agents
  id: totrans-49
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 作为旅游策划协调员和专门工作者代理之间的接口
- en: Receives travel planning tasks from the coordinator
  id: totrans-50
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从协调员那里接收旅游策划任务
- en: Assesses the capabilities and availability of worker agents
  id: totrans-51
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 评估工作者代理的能力和可用性
- en: Assigns appropriate tasks to the suitable worker agents based on their expertise
    and workload
  id: totrans-52
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据其专业知识和工作量，将适当的任务分配给合适的工作者代理
- en: Coordinates and balances the workload among the worker agents
  id: totrans-53
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在工作者代理之间协调和平衡工作量
- en: '*Figure 6* *.2* depicts an extension and adaptation of our previous high-level
    CWD model diagram to this travel planning scenario:'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*图6* *.2* 展示了我们对之前的高级CWD模型图进行扩展和适应，以适应这个旅游策划场景：'
- en: '![img](img/B31483_06_02.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![img](img/B31483_06_02.jpg)'
- en: Figure 6.2 – The CWD model for the travel planner
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.2 – 旅游策划者的CWD模型
- en: 'Let’s walk through an example of the user requirement and workflow:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过一个用户需求和工作流程的例子来了解一下：
- en: A user approaches the intelligent travel agent system with their travel requirements,
    such as destination, travel dates, budget, and preferences (for example, family-friendly,
    cultural experiences, and beach vacation).
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用户带着他们的旅行需求（例如，目的地、旅行日期、预算和偏好，例如家庭友好型、文化体验和海滩度假）接近智能旅行代理系统。
- en: The travel planning coordinator analyzes the customer’s requirements and breaks
    down the overall travel planning task into subtasks. This is where the task decomposition
    happens, as we learned about in the previous chapter.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 旅游策划协调员分析客户需求，将整体旅游策划任务分解为子任务。这就是我们在上一章中学到的任务分解发生的地方。
- en: The coordinator communicates these subtasks to the travel task delegator.
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 协调员将这些子任务传达给旅游任务委托代理。
- en: The delegator assesses the available worker agents and assigns tasks accordingly.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 委托人评估可用的工作者代理，并相应地分配任务。
- en: The worker agents collaborate and coordinate with each other as needed, sharing
    relevant information and ensuring a cohesive travel plan.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 工作者代理根据需要相互协作和协调，共享相关信息，确保旅游计划的一致性。
- en: The delegator monitors the progress of the tasks and ensures workload balance
    among the worker agents.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 委托人监控任务的进度，并确保工作者代理之间工作量的平衡。
- en: Once all the tasks are completed, the worker agents submit their respective
    outputs (for example, flight bookings, hotel reservations, activity itineraries,
    and transportation arrangements) to the delegator.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦所有任务都完成，工作者代理将它们各自的输出（例如，航班预订、酒店预订、活动行程和交通安排）提交给委托人。
- en: The delegator compiles and integrates the outputs from the worker agents into
    a comprehensive travel plan.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 委托人将工作者代理的输出编译和整合成一个全面的旅游计划。
- en: The travel planning coordinator reviews the final travel plan, makes any necessary
    adjustments, and presents it to the customer for approval.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 旅游策划协调员审查最终的旅游计划，进行任何必要的调整，并将其呈交给客户审批。
- en: In this example, we’ve seen how the CWD model can be effectively applied to
    create a sophisticated travel planning system. The model demonstrates how complex
    tasks can be broken down and managed efficiently through specialized agents, each
    handling specific aspects of the travel planning process. This approach not only
    ensures thorough coverage of all travel requirements but also maintains clear
    communication channels and responsibility allocation throughout the planning process.
    By structuring the system this way, we can handle multiple travel requests simultaneously
    while maintaining quality and attention to detail for each customer’s unique needs.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，我们看到了CWD模型如何有效地应用于创建一个复杂的旅行规划系统。该模型展示了如何通过专门的智能体将复杂任务分解并高效管理，每个智能体处理旅行规划过程中的特定方面。这种方法不仅确保了全面覆盖所有旅行需求，而且在规划过程中保持了清晰的沟通渠道和责任分配。通过以这种方式构建系统，我们可以在保持质量和对每个客户独特需求的关注的同时，同时处理多个旅行请求。
- en: For those interested in implementing this system, the complete code implementation,
    including detailed examples and documentation, can be found in the **Chapter_06.ipynb**
    Python notebook in the GitHub repository. This code sample uses many of the concepts
    of tool and planning to implement the CWD travel planner. It also utilizes popular
    frameworks such as CrewAI and AutoGen.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 对于有兴趣实施此系统的人来说，完整的代码实现、详细的示例和文档可以在GitHub仓库中的**Chapter_06.ipynb** Python笔记本中找到。此代码示例使用了工具和规划的概念来实现CWD旅行规划器。它还利用了流行的框架，如CrewAI和AutoGen。
- en: In this section, we’ve explored the CWD model, a framework that mirrors effective
    human organizational practices to build scalable, efficient, and collaborative
    multi-agent systems. This model’s emphasis on role delineation, adaptability,
    and structured communication ensures that it can manage complex, multi-faceted
    tasks such as travel planning seamlessly. Understanding this model is essential,
    as it provides a foundation for designing intelligent agent systems capable of
    handling specialized roles while working in concert to achieve overarching goals.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们探讨了CWD模型，这是一个模仿有效的人类组织实践以构建可扩展、高效和协作的多智能体系统的框架。该模型对角色划分、适应性和结构化沟通的重视确保了它能够无缝地管理诸如旅行规划等复杂、多方面的任务。理解这个模型是至关重要的，因为它为设计能够处理专门角色并在协同工作中实现总体目标的智能体系统提供了基础。
- en: In the next section, we will dive deeper into the principles of agent design,
    focusing on how assigning roles and responsibilities can optimize system performance
    and align agent behavior with specific objectives. This builds directly on the
    CWD framework, equipping you with practical tools to create intelligent systems
    tailored to diverse real-world applications.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将更深入地探讨智能体设计的原则，重点关注如何分配角色和责任可以优化系统性能并将智能体行为与特定目标对齐。这直接建立在CWD框架的基础上，为您提供了创建针对各种现实世界应用的智能系统的实用工具。
- en: Designing agents with role assignments
  id: totrans-71
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设计具有角色分配的智能体
- en: In the context of the CWD model, designing agents with appropriate role assignments
    is crucial for ensuring the effective functioning of a multi-agent system. Careful
    consideration must be given to the specific roles and contributions of each agent
    toward achieving the overall system objectives. This is perhaps very easily explained
    using CrewAI agents, which can be initialized with a role, a goal, and a backstory.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 在CWD模型的背景下，设计具有适当角色分配的智能体对于确保多智能体系统的有效运行至关重要。必须仔细考虑每个智能体在实现总体系统目标中的具体角色和贡献。使用CrewAI智能体可能是一个很好的解释方式，这些智能体可以初始化一个角色、一个目标和一段背景故事。
- en: When designing these agents, the role definition serves as the foundation for
    their behavior and responsibilities within the system. The role explicitly defines
    what the agent is supposed to do and how it fits into the larger system architecture.
    For instance, a coordinator agent might be assigned the role of *Strategic Planning
    Manager* , which immediately establishes their authority in overseeing and directing
    the overall workflow.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 在设计这些智能体时，角色定义是它们在系统中的行为和责任的基础。角色明确定义了智能体应该做什么以及它如何适应更大的系统架构。例如，协调智能体可能被分配为*战略规划经理*的角色，这立即确立了他们在监督和指导整体工作流程中的权威。
- en: 'Equally important is the backstory, which provides depth and context to how
    the agent approaches its responsibilities. The backstory isn’t just a biography
    – it’s a carefully crafted narrative that shapes the agent’s decision-making process
    and interaction style. Consider a coordinator agent with a backstory of “ *A veteran
    project manager who has successfully led diverse teams in Silicon Valley start-ups,
    known for balancing innovation with practical execution* .” This backstory naturally
    influences how the agent makes decisions, communicates with other agents, and
    approaches problem-solving. It’s important to note that this backstory is a CrewAI-specific
    implementation and CrewAI merges this backstory along with the role in the LLM’s
    system prompt, which helps set the context for the model. Here’s an example with
    CrewAI:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 与此同等重要的是背景故事，它为代理如何处理其职责提供了深度和背景。背景故事不仅仅是传记——它是一个精心编写的叙事，塑造了代理的决策过程和互动风格。考虑一个具有“*一位在硅谷初创公司成功领导多元化团队的资深项目经理，以平衡创新与实际执行而闻名*”背景故事的协调器代理。这个背景故事自然会影响到代理如何做出决策、与其他代理沟通以及处理问题解决方式。需要注意的是，这个背景故事是CrewAI特定的实现，CrewAI将这个背景故事与角色合并到LLM的系统提示中，这有助于为模型设定上下文。以下是一个CrewAI的示例：
- en: '[PRE0]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The combination of role and backstory creates a more nuanced and effective
    agent that can operate within the complex dynamics of a multi-agent system while
    maintaining a clear purpose and direction. Within CWD-based systems, several typical
    agent roles can be identified, as follows:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 角色和背景故事的结合创造了一个更加细腻和有效的代理，它可以在多代理系统的复杂动态中运行，同时保持明确的目的和方向。在基于CWD的系统内，可以识别出几个典型的代理角色，如下所示：
- en: '**Manager** : The Manager agent is responsible for monitoring the system’s
    operations, managing resources, and ensuring timely task completion. Manager agents
    are synonymous with **coordinators** in the CWD model. Managers play a critical
    role in overseeing the entire system and ensuring its overall effectiveness. In
    the context of an intelligent travel agent system, the Manager agent could be
    responsible for tasks such as the following:'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**管理者**：管理者代理负责监控系统操作、管理资源并确保及时完成任务。在CWD模型中，管理者代理与**协调器**同义。管理者在监督整个系统并确保其整体有效性方面发挥着关键作用。在智能旅行代理系统的背景下，管理者代理可能负责以下任务：'
- en: Monitoring the progress of travel planning processes
  id: totrans-78
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控旅行计划进程的进展
- en: Allocating resources (for example, computational resources and access to external
    APIs) to other agents
  id: totrans-79
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将资源（例如，计算资源和访问外部API的权限）分配给其他代理
- en: Ensuring that travel plans are generated within specified time constraints
  id: totrans-80
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保旅行计划在指定的时间限制内生成
- en: '**Analyst** : The Analyst agent possesses expertise in analyzing data and providing
    insights and recommendations based on its findings. These agents can inform and
    guide decision-making processes within the system. In the travel agent scenario,
    an Analyst agent could be employed for the following:'
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**分析师**：分析师代理在数据分析方面拥有专业知识，并基于其发现提供见解和建议。这些代理可以在系统中提供信息和指导决策过程。在旅行代理场景中，分析师代理可以用于以下任务：'
- en: Analyzing customer preferences and travel trends
  id: totrans-82
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分析客户偏好和旅行趋势
- en: Providing recommendations for popular destinations or activities based on data
    analysis
  id: totrans-83
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据数据分析提供对热门目的地或活动的推荐
- en: Identifying potential cost-saving opportunities or optimal travel routes
  id: totrans-84
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 识别潜在的节约成本机会或最佳旅行路线
- en: Summarizing outcomes and recommendations for the user
  id: totrans-85
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 总结对用户的成果和建议
- en: '**Reflector** : The Reflector agent observes the system’s performance and identifies
    areas for improvement. By continuously monitoring the system’s operations, the
    Reflector can suggest changes or adjustments that would enhance efficiency and
    effectiveness. In the travel agent context, a Reflector agent could do the following:'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**反射器**：反射器代理观察系统的性能并识别改进区域。通过持续监控系统操作，反射器可以建议改变或调整，从而提高效率和效果。在旅行代理的背景下，反射器代理可以执行以下操作：'
- en: Analyze customer feedback and satisfaction levels
  id: totrans-87
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分析客户反馈和满意度水平
- en: Identify bottlenecks or inefficiencies in the travel planning process
  id: totrans-88
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 识别旅行计划过程中的瓶颈或不效率
- en: Propose improvements to the system’s algorithms or workflows
  id: totrans-89
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提出改进系统算法或工作流程的建议
- en: '**Searcher** : The Searcher agent explores the problem space, constantly seeking
    new solutions and sharing relevant information with other agents. This role often
    involves innovation, as the Searcher adapts the system to cope with novel situations.
    In the travel agent domain, a Searcher agent could do the following:'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**搜索者**：搜索者智能体探索问题空间，不断寻求新的解决方案，并与其他智能体分享相关信息。这个角色通常涉及创新，因为搜索者会调整系统以应对新情况。在旅行代理领域，搜索者智能体可以执行以下操作：'
- en: Discover new travel destinations or activities
  id: totrans-91
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发现新的旅行目的地或活动
- en: Explore alternative transportation options or travel routes
  id: totrans-92
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 探索替代的交通工具或旅行路线
- en: Share information about emerging travel trends or regulations with other agents
  id: totrans-93
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与其他智能体分享有关新兴旅行趋势或法规的信息
- en: Note that the Analyst, Reflector, and Searcher roles fit squarely under **workers**
    in the CWD model.
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，分析师、反思者和搜索者角色在CWD模型中完全属于**工人**类别。
- en: '**Task Interpreter** : The Task Interpreter agent serves as a bridge between
    the coordinators and workers, mapping high-level tasks into lower-level, concrete,
    and performable actions for the worker agents. This role ensures that tasks are
    well defined and understood by the workers. Task interpreters are synonymous with
    **delegators** in the CWD model. In the travel agent system, a task interpreter
    agent could do the following:'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**任务解释者**：任务解释者智能体作为协调者和工人之间的桥梁，将高级任务映射到较低级、具体和可执行的动作，供工人智能体执行。这个角色确保任务被工人明确理解和执行。在CWD模型中，任务解释者与**委托人**同义。在旅行代理系统中，任务解释者智能体可以执行以下操作：'
- en: Break down a customer’s travel request into specific subtasks (for example,
    flight booking, hotel reservation, or activity planning)
  id: totrans-96
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将客户的旅行请求分解成具体的子任务（例如，航班预订、酒店预订或活动规划）
- en: Translate the customer’s preferences into actionable tasks for the worker agents
  id: totrans-97
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将客户的偏好翻译成工人代理可执行的任务
- en: Ensure that the tasks assigned to the worker agents are clear and unambiguous
  id: totrans-98
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保分配给工人代理的任务清晰且明确
- en: The concept of multi-agent systems isn’t new, and neither is role assignment
    – in fact, a study was done more than a decade ago by Kazík (2010) (https://physics.mff.cuni.cz/wds/proc/pdf10/WDS10_103_i1_Kazik.pdf),
    which comprehensively explored role-based approaches in multi-agent system development.
    The study highlighted how roles serve as abstract representations of stereotypical
    behavior common to different agent classes, providing interfaces through which
    agents obtain knowledge of and affect their environment. The study highlighted
    how roles serve as abstract representations of stereotypical behavior common to
    different agent classes, providing interfaces through which agents obtain knowledge
    of and affect their environment. While these foundational concepts were initially
    developed for traditional multi-agent systems, they provide valuable insights
    for designing modern LLM-based agent systems.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 多智能体系统的概念并不新颖，角色分配也是如此——实际上，早在十多年前，Kazík（2010）就进行了一项研究（https://physics.mff.cuni.cz/wds/proc/pdf10/WDS10_103_i1_Kazik.pdf），全面探讨了在多智能体系统开发中的基于角色的方法。该研究强调了角色如何作为不同智能体类中常见的典型行为的抽象表示，通过这些接口，智能体可以获取对环境的知识并影响环境。该研究还强调了角色如何作为不同智能体类中常见的典型行为的抽象表示，通过这些接口，智能体可以获取对环境的知识并影响环境。虽然这些基础概念最初是为传统的多智能体系统开发的，但它们为设计基于现代LLM的智能体系统提供了宝贵的见解。
- en: The key principles of role-based modeling – including separation of interaction
    logic from inner algorithmic logic, dynamic role assignment, and modular system
    organization – are particularly relevant as we design collaborative LLM agents
    that need to coordinate effectively while maintaining clear responsibilities and
    interaction patterns. By assigning specific roles to agents based on their capabilities
    and the system’s requirements, designers can achieve a role-based abstraction
    that supports the separation of concerns and allows for modular and reusable design
    in multi-agent systems. For example, in the intelligent travel agent system, agents
    could be assigned roles such as coordinator, worker, delegator, and so on.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 基于角色的建模的关键原则——包括将交互逻辑与内部算法逻辑分离、动态角色分配以及模块化系统组织——在我们设计需要有效协调同时保持明确责任和交互模式的协作LLM智能体时尤其相关。通过根据智能体的能力和系统的要求分配特定角色，设计者可以实现基于角色的抽象，这有助于分离关注点，并允许在多智能体系统中进行模块化和可重用设计。例如，在智能旅行代理系统中，智能体可以被分配协调者、工人、委托人等角色。
- en: Roles and responsibilities of each agent
  id: totrans-101
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 每个代理的职责和角色
- en: Here is an overview of the roles and responsibilities of each agent within our
    intelligent travel planning multi-agent system, and how they collectively work
    toward achieving the system’s objectives.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 这里概述了我们智能旅行规划多代理系统中每个代理的职责和角色，以及他们如何共同为实现系统目标而努力。
- en: '**Travel planning agent (coordinator)** : This agent functions as the strategic
    overseer of the entire travel planning operation. With expertise in project management
    and travel coordination, they break down customer requests into manageable components,
    establish timelines, and ensure all aspects of travel planning align with customer
    expectations. They maintain a holistic view of each travel plan, ensuring all
    elements work together cohesively while managing contingencies and adjusting plans
    as needed.'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**旅行规划代理（协调员）**：这个代理作为整个旅行规划运营的战略监督者。他们拥有项目管理与旅行协调的专长，将客户请求分解为可管理的组成部分，建立时间表，并确保所有旅行规划方面都符合客户期望。他们保持对每个旅行计划的全面视角，确保所有元素协同工作，同时管理突发情况并按需调整计划。'
- en: 'To better understand how the CWD model applies to real-world scenarios, consider
    the example of a travel planning agent functioning as the coordinator, as shown
    in the following snippet. This agent oversees the travel planning process, ensuring
    all components of the plan align with customer expectations while managing resources
    and contingencies effectively. To illustrate the functionality of core travel
    worker agents in the CWD model, the following example snippet showcases their
    specialized roles and expertise. Each agent contributes to the seamless execution
    of specific travel planning tasks:'
  id: totrans-104
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 为了更好地理解CWD模型如何应用于现实场景，考虑以下例子，一个作为协调员的旅行规划代理，如下面的片段所示。这个代理监督旅行规划过程，确保计划的各个方面都符合客户期望，同时有效地管理资源和应对突发情况。为了说明CWD模型中核心旅行工作人员代理的功能，以下示例片段展示了他们的专业角色和专长。每个代理都对特定旅行规划任务的顺利执行做出贡献：
- en: '[PRE1]'
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '**Core travel worker agents** : These agents comprise the following roles:'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**核心旅行工作人员代理**：这些代理包括以下角色：'
- en: '**Flight booking worker** : This agent specializes in navigating the complex
    world of airline reservations, understanding fare classes, routing rules, and
    alliance partnerships. It stays updated on airline schedules, pricing trends,
    and booking policies while maintaining relationships with airline representatives
    for special requests or problem resolution, as shown in the following snippet:'
  id: totrans-107
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**航班预订工作人员**：这个代理专注于复杂的航空预订世界，了解票价类别、航线规则和联盟伙伴关系。它关注航空时刻表、定价趋势和预订政策，同时与航空公司代表保持联系，以处理特殊请求或解决问题，如下面的片段所示：'
- en: '[PRE2]'
  id: totrans-108
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '**Hotel booking worker** : An expert in global hospitality, this agent understands
    hotel categories, room types, and amenity offerings across different markets.
    It maintains extensive knowledge of hotel loyalty programs, seasonal pricing patterns,
    and special promotional offers, as displayed in the following snippet:'
  id: totrans-109
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**酒店预订工作人员**：作为全球酒店业的专家，这位代理了解不同市场的酒店类别、房型和设施提供。它拥有广泛的酒店忠诚度计划、季节性定价模式和特别促销活动知识，如下面的片段所示：'
- en: '[PRE3]'
  id: totrans-110
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '**Activity planning worker** : This agent combines deep cultural knowledge
    with practical experience in tour operations. It excels at matching activities
    to traveler interests and abilities while considering factors such as seasonal
    availability, local customs, and logistical constraints, as highlighted in the
    following snippet:'
  id: totrans-111
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**活动规划工作人员**：这个代理结合了深厚的文化知识和旅游操作的实践经验。它擅长根据旅行者的兴趣和能力匹配活动，同时考虑季节性可用性、当地习俗和物流限制等因素，如下面的片段所示：'
- en: '[PRE4]'
  id: totrans-112
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '**Transportation worker** : This agent focuses on ground logistics and local
    transportation solutions. It understands various transportation options across
    different destinations, from private car services to public transportation systems,
    as shown in the following snippet:'
  id: totrans-113
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**交通工作人员**：这个代理专注于地面物流和当地交通解决方案。它了解不同目的地的各种交通选择，从私人车服务到公共交通系统，如下面的片段所示：'
- en: '[PRE5]'
  id: totrans-114
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '**Analysis and intelligence worker agents** : In these agents, we have the
    following roles:'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**分析和情报工作人员代理**：在这些代理中，我们有以下角色：'
- en: '**Travel data analyst worker** : This agent focuses on transforming raw travel
    data into actionable insights. It analyzes booking patterns, customer preferences,
    and market trends to inform decision-making and enhance travel recommendations,
    as shown here:'
  id: totrans-116
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-117
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '**Travel experience worker (Reflector)** : This agent acts as the system’s
    quality assurance and continuous improvement specialist. It analyzes feedback,
    monitors performance, and suggests systemic improvements to enhance the travel
    planning experience, as shown here:'
  id: totrans-118
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-119
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '**Travel opportunity worker (Searcher)** : This agent functions as the system’s
    explorer and innovator, constantly seeking new destinations, unique experiences,
    and emerging travel opportunities that could enhance the service offering, as
    shown here:'
  id: totrans-120
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-121
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '**Delegator agent** : The critical link between strategy and execution, this
    agent excels at task prioritization and resource allocation. They understand each
    worker agent’s capabilities and current workload, ensuring optimal task distribution
    and workflow management, as shown here:'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-123
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'So far, this structured role-based agent approach creates a well-defined hierarchy
    with clear responsibilities while maintaining flexibility for handling complex
    travel planning scenarios. Each agent’s role and backstory provide depth and context
    to their function within the larger system, enabling more natural and effective
    interactions. Let’s define the Manager, Analyst, Reflector, and Searcher agents.
    *Figure 6* *.3* is a further adaptation of our CWD model with role-based agents
    for the travel planning system:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
- en: '![img](img/B31483_06_03.jpg)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
- en: Figure 6.3 – Role-based agents within the CWD model for travel planner
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
- en: 'Let’s examine how our travel planning multi-agent system orchestrates a seamless
    journey from initial customer request to final travel plan. The system leverages
    a hierarchical structure where the coordinator agent provides strategic oversight,
    the delegator agent manages task distribution, and specialized worker agents execute
    both core travel tasks and analytical functions in parallel. This coordinated
    workflow demonstrates the practical application of the CWD model, enabling efficient
    and intelligent travel planning through clear role definition and effective collaboration.
    Here’s the breakdown of the steps:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
- en: '**Initial request** **and planning** :'
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The customer submits their travel requirements to the system.
  id: totrans-129
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: The coordinator agent analyzes these requirements and develops a strategic plan.
  id: totrans-130
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Task distribution** :'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The coordinator agent passes the strategic plan to the delegator agent.
  id: totrans-132
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: The delegator agent breaks down the plan into specific tasks for both core and
    analysis workers.
  id: totrans-133
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Parallel processing (core travel tasks)** : The delegator agent assigns specialized
    tasks to core travel workers, as follows:'
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The **flight booking worker** searches for and reserves optimal flights
  id: totrans-135
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: The **hotel booking worker** identifies and books suitable accommodations
  id: totrans-136
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: The **activity planning worker** creates an itinerary of experiences
  id: totrans-137
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**活动规划工作者** 创建体验行程。'
- en: The **transportation worker** arranges ground transport solutions
  id: totrans-138
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**运输工作者** 安排地面交通解决方案。'
- en: '**Parallel processing (analysis and intelligence)** : Simultaneously, the delegator
    agent engages analysis workers, as follows:'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**并行处理（分析和智能）**：同时，分配智能体参与分析工作者，如下所示：'
- en: The **data analyst worker** processes customer data and travel patterns
  id: totrans-140
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据分析工作者** 处理客户数据和旅行模式。'
- en: The **experience reflector worker** reviews similar past itineraries
  id: totrans-141
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**经验反思工作者** 审查类似的过去行程。'
- en: The **opportunity searcher worker** identifies unique options/alternatives
  id: totrans-142
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**机会搜索工作者** 识别独特的选项/替代方案。'
- en: '**Integration** **and refinement** :'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**集成** **和细化**：'
- en: All workers submit their outputs back to the delegator agent.
  id: totrans-144
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 所有工作者将他们的输出提交回分配智能体。
- en: The delegator agent consolidates the information.
  id: totrans-145
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 分配智能体综合信息。
- en: The coordinator agent receives the consolidated plan.
  id: totrans-146
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 协调智能体接收综合计划。
- en: '**Final review** **and delivery** :'
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**最终审查** **和交付**：'
- en: The coordinator agent reviews and optimizes the complete travel plan.
  id: totrans-148
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 协调智能体审查和优化完整的旅行计划。
- en: The final travel plan is presented to the customer.
  id: totrans-149
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最终的旅行计划被呈现给客户。
- en: This flow showcases the collaboration between the various agent roles, leveraging
    their specialized expertise and contributions to generate a personalized and optimized
    travel plan for the customer. Each agent plays a specific role, and their outputs
    are consolidated and integrated by the Manager agent (travel operations manager)
    and the coordinator agent (travel planning coordinator) to deliver the final travel
    plan.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 这种流程展示了各种智能体角色之间的协作，利用他们的专业知识和贡献为顾客生成个性化且优化的旅行计划。每个智能体都扮演着特定的角色，他们的输出由经理智能体（旅行运营经理）和协调智能体（旅行规划协调员）综合和整合，以交付最终的旅行计划。
- en: By carefully designing agents with well-defined roles, the CWD-based multi-agent
    system can effectively collaborate, leverage specialized expertise, and distribute
    tasks efficiently, ultimately delivering personalized and optimized travel plans
    tailored to customer requirements. However, the success of such a sophisticated
    multi-agent system heavily depends on how these agents communicate and interact
    with each other. Let’s explore how effective communication and collaboration are
    achieved between these agents in the next section.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 通过精心设计具有明确角色的智能体，基于CWD的多元智能体系统可以有效地协作、利用专业知识和高效分配任务，最终根据客户需求提供个性化且优化的旅行计划。然而，如此复杂的多元智能体系统的成功很大程度上取决于这些智能体之间的沟通和交互方式。让我们在下一节中探讨这些智能体之间如何实现有效的沟通和协作。
- en: Communication and collaboration between agents
  id: totrans-152
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 智能体之间的沟通和协作
- en: In multi-agent systems based on the CWD model, effective communication and collaboration
    among agents are crucial for achieving successful outcomes. Agents need to be
    capable of sharing information, coordinating their actions, and behaving cooperatively
    to work toward common goals. Communication and collaboration in CWD-based systems
    involve the key aspects as discussed in the following subsections.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 在基于CWD模型的多元智能体系统中，智能体之间的有效沟通和协作对于实现成功的结果至关重要。智能体需要能够共享信息、协调他们的行动，并为了共同目标而进行合作行为。基于CWD系统的沟通和协作涉及以下子节所述的关键方面。
- en: Communication
  id: totrans-154
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 沟通
- en: Agents should follow well-defined protocols for their interactions, including
    the format of messages and interaction patterns. These protocols ensure that agents
    can understand each other clearly and act appropriately. For example, in a travel
    agent system, the agents may employ a standardized message format and communication
    protocol to exchange information about flight options, hotel availability, or
    customer preferences. By adhering to these protocols, agents can effectively communicate
    and interpret messages from other agents, enabling seamless collaboration.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 智能体应遵循明确的协议进行交互，包括消息格式和交互模式。这些协议确保智能体能够清楚地理解彼此并适当地行动。例如，在旅行社系统中，智能体可能采用标准化的消息格式和通信协议来交换有关航班选项、酒店可用性或客户偏好的信息。通过遵守这些协议，智能体可以有效地沟通并解释来自其他智能体的消息，从而实现无缝协作。
- en: The agents in the example travel agent system can follow a standardized communication
    protocol, such as the FIPA **Agent Communication Language** ( **ACL** ), to exchange
    messages and information. For instance, when the hotel booking worker agent needs
    to communicate with the flight booking worker agent to coordinate travel dates,
    it can send a message in the FIPA ACL format, specifying the content (for example,
    requested travel dates), the sender (hotel booking worker), and the recipient
    (flight booking worker).
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 在示例旅行代理系统中，代理可以遵循标准化的通信协议，例如 FIPA **代理通信语言**（**ACL**），以交换消息和信息。例如，当酒店预订工人代理需要与航班预订工人代理沟通以协调旅行日期时，它可以发送一个
    FIPA ACL 格式的消息，指定内容（例如，请求的旅行日期）、发送者（酒店预订）和接收者（航班预订）。
- en: Coordination mechanism
  id: totrans-157
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 协调机制
- en: Coordinators play a vital role in establishing mechanisms for coordination that
    align the activities of worker agents with the overall objectives of the system.
    These coordination mechanisms allow for the control of dependencies and ensure
    that tasks are completed within the required timeframes. In the context of a travel
    agent system, the travel planning coordinator agent could implement a coordination
    mechanism that involves task prioritization, resource allocation, and progress
    monitoring to ensure that the travel planning process proceeds smoothly and efficiently.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 协调员在建立协调机制中扮演着至关重要的角色，这些机制确保工人代理的活动与系统的整体目标保持一致。这些协调机制允许控制依赖关系，并确保任务在所需的时间框架内完成。在旅行代理系统的背景下，旅行规划协调代理可以实施一种涉及任务优先级、资源分配和进度监控的协调机制，以确保旅行规划过程顺利进行且高效。
- en: The travel planning coordinator agent can implement a coordination mechanism
    to align the activities of the worker agents with the overall travel planning
    objectives. For example, it could employ a task prioritization mechanism based
    on customer preferences or travel dates. If a customer prioritizes finding suitable
    accommodations first, the coordinator agent can instruct the delegator agent to
    assign the hotel booking worker agent a higher priority than the other worker
    agents. Additionally, the coordinator agent can monitor the progress of each worker
    agent and reallocate resources or adjust priorities as needed to ensure timely
    task completion.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 旅行规划协调代理可以实施一种协调机制，以确保工人代理的活动与整体旅行规划目标保持一致。例如，它可以采用基于客户偏好或旅行日期的任务优先级机制。如果客户优先考虑首先找到合适的住宿，协调代理可以指示分配代理将酒店预订工人代理的优先级高于其他工人代理。此外，协调代理可以监控每个工人代理的进度，并在必要时重新分配资源或调整优先级，以确保及时完成任务。
- en: Negotiation and conflict resolution
  id: totrans-160
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 谈判和冲突解决
- en: In complex multi-agent systems, there may be cases where the goals or actions
    of different agents conflict with one another. To address such situations, agents
    should be equipped with negotiation strategies or mechanisms for conflict resolution.
    These strategies help maintain harmony in the working environment by facilitating
    compromise or reaching mutually acceptable solutions. For instance, if multiple
    worker agents in a travel agent system propose conflicting activity plans or transportation
    options, a negotiation mechanism could be employed to resolve the conflict based
    on predefined criteria or by involving the coordinator agent for mediation.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 在复杂的多人代理系统中，可能存在不同代理的目标或行为相互冲突的情况。为了解决这种情况，代理应该配备谈判策略或冲突解决机制。这些策略通过促进妥协或达成相互可接受的解决方案，有助于维护工作环境的和谐。例如，如果旅行代理系统中的多个工人代理提出了相互冲突的活动计划或交通选择，可以采用谈判机制，根据预定义的标准或通过涉及协调代理进行调解来解决冲突。
- en: Suppose the activity planning worker agent and the transportation worker agent
    propose conflicting plans for a particular day of the trip. The activity planning
    worker agent might have scheduled a full-day tour, while the transportation worker
    agent has arranged for a rental car to be available for the entire day. In such
    a scenario, a negotiation mechanism can be employed to resolve the conflict. The
    delegator agent could act as a mediator, gathering the conflicting plans from
    both worker agents and proposing alternative solutions, such as rescheduling the
    tour or modifying the rental car reservation. If a resolution cannot be reached,
    the coordinator agent can intervene and make a final decision based on predefined
    criteria or customer preferences.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 假设活动规划工作代理和交通工作代理在旅行的某一天提出了相互冲突的计划。活动规划工作代理可能安排了一整天的观光行程，而交通工作代理则安排了一整天可用的租赁汽车。在这种情况下，可以采用协商机制来解决冲突。委托代理可以充当调解人，收集来自两个工作代理的冲突计划，并提出替代解决方案，例如重新安排观光行程或修改租赁汽车预订。如果无法达成解决方案，协调代理可以介入并基于预定义的标准或客户偏好做出最终决定。
- en: Knowledge sharing
  id: totrans-163
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 知识共享
- en: Agents should have the capability to share knowledge, insights, and findings
    from their research or experiences with other agents in the system. This knowledge-sharing
    facilitates continuous learning and adaptation, enabling the system to improve
    its overall performance over time. In the travel agent context, the travel data
    analyst agent could share insights derived from customer preference analysis with
    other agents, enabling them to make more informed decisions. Similarly, the travel
    opportunity searcher agent could share information about new travel destinations
    or emerging trends, allowing the system to stay up-to-date and adapt its offerings
    accordingly.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: '代理应该具备与其他系统中的代理分享其研究或经验中的知识、见解和发现的能力。这种知识共享促进了持续学习和适应，使系统能够随着时间的推移提高其整体性能。在旅行代理的背景下，旅行数据分析代理可以与其它代理分享从客户偏好分析中得出的见解，使他们能够做出更明智的决策。同样，旅行机会搜索代理可以分享有关新旅行目的地或新兴趋势的信息，使系统能够保持最新状态并相应地调整其产品。 '
- en: The travel data analyst agent can analyze customer preferences, travel trends,
    and feedback from past trips to generate insights and recommendations. These insights
    can be shared with other agents in the system to improve their decision-making
    processes. For example, the travel data analyst agent might identify a growing
    trend for eco-friendly travel options and share this information with the activity
    planning worker agent and the transportation worker agent. These agents can then
    adjust their offerings to include more sustainable activities and transportation
    options, reflecting the changing customer preferences. The travel opportunity
    searcher agent may continuously explore new travel destinations, unique experiences,
    or emerging travel trends. This agent can share its findings with other agents,
    enabling them to incorporate these new opportunities into their respective planning
    processes. For instance, if the travel opportunity searcher agent discovers a
    newly opened eco-resort in a popular destination, it can share this information
    with the hotel booking worker agent and the activity planning worker agent, allowing
    them to consider this new option when generating hotel recommendations and activity
    plans.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 旅行数据分析代理可以分析客户偏好、旅行趋势和过往旅行的反馈，以生成见解和建议。这些见解可以与其他系统中的代理分享，以改善他们的决策过程。例如，旅行数据分析代理可能识别出生态友好型旅行选项的增长趋势，并将此信息与活动规划工作代理和交通工作代理分享。这些代理随后可以调整他们的产品，包括更多可持续的活动和交通选项，反映不断变化的客户偏好。旅行机会搜索代理可能持续探索新的旅行目的地、独特的体验或新兴的旅行趋势。该代理可以将其发现与其他代理分享，使他们能够将这些新机会纳入各自的规划过程中。例如，如果旅行机会搜索代理发现了一个在热门目的地新开设的生态度假村，它可以与酒店预订工作代理和活动规划工作代理分享这一信息，使他们能够在生成酒店推荐和活动计划时考虑这一新选项。
- en: The CWD model’s role-based approach establishes clear boundaries for communication
    channels and agent responsibilities. By implementing well-defined protocols for
    communication, coordination, and knowledge sharing, the system harnesses its agents’
    collective intelligence to deliver adaptable and efficient travel planning services.
    This structured collaboration enables the system to tackle complex challenges
    while continuously improving its performance over time.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: CWD模型基于角色的方法为通信渠道和智能体责任确立了明确的边界。通过实施定义良好的通信、协调和知识共享协议，系统利用其智能体的集体智慧，提供适应性强且高效的旅行规划服务。这种结构化的协作使系统能够应对复杂挑战，并在时间上不断改进其性能。
- en: While this section has outlined the theoretical framework for communication
    and collaboration in our CWD-based travel planning system, the practical implementation
    requires careful consideration of technical aspects. This section has provided
    a comprehensive exploration of the foundational aspects of communication and collaboration
    within multi-agent systems guided by the CWD model. By adhering to well-defined
    communication protocols, establishing robust coordination mechanisms, and fostering
    effective knowledge sharing, such systems are equipped to handle complex, dynamic
    scenarios.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管本节概述了基于CWD的旅行规划系统中通信和协作的理论框架，但实际实施需要仔细考虑技术方面。本节全面探讨了由CWD模型指导的多智能体系统内通信和协作的基础方面。通过遵循定义良好的通信协议、建立稳健的协调机制以及促进有效的知识共享，此类系统能够应对复杂、动态的场景。
- en: The next section transitions from these foundational concepts to a deeper exploration
    of practical methodologies. It focuses on implementing the CWD approach in generative
    AI systems, detailing advanced techniques such as state space management, environment
    modeling, memory systems, and handling LLM contexts to bring these theoretical
    concepts to life in real-world applications.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个部分将基础概念过渡到对实际方法的深入探讨。它侧重于在生成式AI系统中实施CWD方法，详细介绍了诸如状态空间管理、环境建模、记忆系统以及处理LLM上下文等高级技术，以将这些理论概念应用于现实世界的应用中。
- en: Implementing the CWD approach in generative AI systems
  id: totrans-169
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在生成式AI系统中实施CWD方法
- en: While we’ve explored how the CWD model maps to LLM-based agents and discussed
    role adaptations for our travel planning system, implementing this approach in
    generative AI systems requires careful attention to several technical considerations.
    The transition from traditional multi-agent systems to LLM-based implementations
    brings unique challenges and opportunities. LLMs, with their natural language
    understanding and generation capabilities, offer new ways to implement agent behaviors
    and interactions but also require specific architectural considerations to maintain
    the structured approach of the CWD model.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然我们已经探讨了CWD模型如何映射到基于LLM的智能体，并讨论了我们的旅行规划系统的角色适应性，但在生成式AI系统中实施这种方法需要仔细关注几个技术考虑因素。从传统的多智能体系统到基于LLM的实现转变带来了独特的挑战和机遇。LLM凭借其自然语言理解和生成能力，为实施智能体行为和交互提供了新的方式，但也需要特定的架构考虑，以保持CWD模型的有序方法。
- en: In traditional multi-agent systems, behaviors and interactions are typically
    programmed explicitly through code. However, in LLM-based implementations, these
    aspects are primarily controlled through carefully crafted prompts and interaction
    patterns. This fundamental difference requires us to adapt the CWD model’s principles
    to work effectively with the nature of LLMs while maintaining the clear role boundaries
    and hierarchical structure we’ve discussed.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 在传统的多智能体系统中，行为和交互通常通过代码明确编程。然而，在基于LLM的实现中，这些方面主要通过精心设计的提示和交互模式来控制。这种根本性的差异要求我们调整CWD模型的原则，以便有效地与LLM的本质相匹配，同时保持我们讨论的清晰的角色边界和层次结构。
- en: Before diving into the technical details that will be covered in the next chapter,
    let’s examine three key implementation considerations that form the foundation
    of any LLM-based CWD system. These considerations – system prompts, instruction
    formatting, and interaction patterns – are essential for translating our theoretical
    model into a practical, functioning system.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 在深入探讨下一章将要涉及的技术细节之前，让我们考察三个关键的实施考虑因素，这些因素构成了任何基于LLM的CWD系统的基石。这些考虑因素——系统提示、指令格式和交互模式——对于将我们的理论模型转化为实际、可运行的系统至关重要。
- en: System prompts and agent behavior
  id: totrans-173
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 系统提示和智能体行为
- en: 'System prompts act as the fundamental configuration layer for LLM agents, defining
    their core characteristics and operational parameters. Unlike regular prompts
    that provide task-specific instructions, system prompts establish an agent’s persistent
    traits, boundaries, and behavioral frameworks throughout its operational life
    cycle. In our travel planning system, each agent’s system prompt must encompass
    the following:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 系统提示是LLM代理的基本配置层，定义了它们的内核特性和操作参数。与提供特定任务指令的常规提示不同，系统提示在整个操作生命周期中建立代理的持久特性、边界和行为框架。在我们的旅行规划系统中，每个代理的系统提示必须包括以下内容：
- en: Role definition and scope of responsibilities
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 角色定义和责任范围
- en: Constraints and operational boundaries
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 约束和操作边界
- en: Communication protocols with other agents
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与其他代理的通信协议
- en: Decision-making frameworks specific to their role
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与其角色特定的决策框架
- en: For example, the flight booking worker’s system prompt would include specific
    instructions about flight search parameters, pricing considerations, and airline
    partnerships, while the Coordinator’s system prompt would focus on high-level
    planning and oversight capabilities.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，航班预订工作人员的系统提示将包括关于航班搜索参数、定价考虑因素和航空公司伙伴关系的具体指令，而协调员系统提示将专注于高级规划和监督能力。
- en: We saw earlier how LLM agent frameworks such as CrewAI structure system prompts
    through **role** and **backstory** definitions. The **role** component defines
    the agent’s functional boundaries and responsibilities, while **backstory** provides
    the context and expertise that shapes how the agent approaches these responsibilities.
    Together, they create a rich system prompt that guides the agent’s behavior and
    decision-making process. For instance, an agent’s role might be an *aviation booking
    specialist* , while its backstory as a “ *former airline revenue management expert
    with deep knowledge of global aviation networks* ” helps it make more nuanced
    decisions about routing and pricing options.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 我们之前已经看到，像CrewAI这样的LLM代理框架是如何通过**角色**和**背景故事**定义来结构化系统提示的。**角色**组件定义了代理的功能边界和责任，而**背景故事**提供了塑造代理如何处理这些责任的上下文和专业知识。它们共同创建了一个丰富的系统提示，指导代理的行为和决策过程。例如，一个代理的角色可能是*航空预订专家*，而其作为“*前航空公司收入管理专家，对全球航空网络有深入了解*”的背景故事帮助它在路线和定价选项上做出更细微的决策。
- en: Instruction formatting
  id: totrans-181
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 指令格式化
- en: 'Clear and consistent instruction formatting ensures reliable agent performance
    and effective inter-agent communication. This becomes particularly crucial in
    LLM-based systems where instructions are interpreted through natural language
    understanding. Key aspects of instruction formatting include the following:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 清晰和一致的指令格式化确保了代理的可靠性能和有效的代理间通信。这在基于LLM的系统尤其重要，因为指令是通过自然语言理解来解释的。指令格式化的关键方面包括以下内容：
- en: '**Input structuring** : Standardized formats for task assignments and requests.
    For example, the following structured input format ensures the flight booking
    worker receives unambiguous search parameters, with clear specifications for departure
    and destination locations along with desired travel dates:'
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**输入结构化**：任务分配和请求的标准格式。例如，以下结构化输入格式确保航班预订工作人员收到明确的搜索参数，包括出发地和目的地位置的明确规格以及期望的旅行日期：'
- en: '[PRE10]'
  id: totrans-184
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '**Output templates** : Consistent response structures that other agents can
    reliably parse. The standardized output format allows agents to quickly identify
    the task status and access relevant information. The **options** array might contain
    available flights, while **recommendations** could include preferred choices based
    on customer preferences:'
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**输出模板**：其他代理可以可靠解析的统一响应结构。标准化的输出格式允许代理快速识别任务状态并访问相关信息。**选项**数组可能包含可用的航班，而**推荐**可能包括基于客户偏好的首选选择：'
- en: '[PRE11]'
  id: totrans-186
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '**Communication protocols** : Clear formats for inter-agent messages and status
    updates. These protocols ensure transparent communication between agents, with
    clear identification of message type, sender, and recipient, along with structured
    content that can be easily processed:'
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**通信协议**：明确的消息和状态更新格式。这些协议确保了代理之间的透明通信，包括消息类型、发送者和接收者的明确标识，以及可以轻松处理的结构化内容：'
- en: '[PRE12]'
  id: totrans-188
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Interaction patterns
  id: totrans-189
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 交互模式
- en: 'The success of a CWD-based system heavily depends on well-defined interaction
    patterns between agents. In an LLM-based implementation, these patterns must account
    for the unique characteristics of language model interactions. Essential interaction
    patterns include the following:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 基于CWD的系统成功很大程度上依赖于代理之间定义良好的交互模式。在基于LLM的实现中，这些模式必须考虑到语言模型交互的独特特性。基本的交互模式包括以下内容：
- en: '**Message** **passing protocols** :'
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**消息传递协议**：'
- en: Structured formats for agent-to-agent communication
  id: totrans-192
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代理间通信的结构化格式
- en: Clear handoff procedures between different processing stages
  id: totrans-193
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不同处理阶段之间的清晰移交程序
- en: Error handling and recovery mechanisms
  id: totrans-194
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 错误处理和恢复机制
- en: '**State management** :'
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**状态管理**：'
- en: How agents maintain awareness of their current task status
  id: totrans-196
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代理如何保持对其当前任务状态的意识
- en: Methods for tracking progress through multi-step processes
  id: totrans-197
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过多步骤过程跟踪进度的方法
- en: Coordination of parallel activities
  id: totrans-198
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 平行活动的协调
- en: '**Feedback loops** :'
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**反馈循环**：'
- en: How agents communicate success/failure
  id: totrans-200
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代理如何沟通成功/失败
- en: Methods for requesting clarification or additional information
  id: totrans-201
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 请求澄清或获取额外信息的处理方法
- en: Mechanisms for continuous improvement through interaction history
  id: totrans-202
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过交互历史进行持续改进的机制
- en: Summary
  id: totrans-203
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we explored the CWD model as a framework for designing effective
    multi-agent systems. Starting with the foundational concepts from early role-based
    research, we saw how these principles adapt perfectly to modern LLM-based agent
    architectures. We examined this through a practical travel planning system, where
    different agents – from flight bookers to activity planners – work together under
    a clear hierarchical organization. Key takeaways highlight the importance of well-defined
    roles and responsibilities within multi-agent systems, ensuring that each agent
    operates with clarity and purpose. They emphasize how specialized worker agents
    collaborate effectively under the oversight of coordinators, who align their efforts
    with overarching goals. Delegators play a crucial role in managing tasks and facilitating
    smooth workflow distribution. Additionally, the chapter underscored the significance
    of effective communication and collaboration patterns, which are essential for
    seamless information exchange and cooperative behavior among agents. Finally,
    implementation considerations such as designing system prompts and formatting
    instructions are critical for operational success, ensuring clarity and consistency
    in agent interactions.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们探讨了CWD模型作为设计有效多代理系统的框架。从早期基于角色的研究的基础概念开始，我们看到这些原则如何完美地适应现代基于LLM的代理架构。我们通过一个实际的旅行规划系统来考察这一点，其中不同的代理——从航班预订者到活动规划者——在明确的层级组织下共同工作。关键要点强调了在多代理系统中定义良好的角色和责任的重要性，确保每个代理都能清晰且目的性地操作。它们强调了专业工作者代理如何在协调者的监督下有效地协作，协调者将他们的努力与总体目标对齐。委托人在管理任务和促进顺畅的工作流程分配中发挥着关键作用。此外，本章强调了有效沟通和协作模式的重要性，这对于代理之间无缝的信息交换和协作行为至关重要。最后，实施考虑因素，如设计系统提示和格式说明，对于操作成功至关重要，确保代理交互的清晰和一致性。
- en: This structured approach to agent design enables complex tasks to be broken
    down and executed efficiently while maintaining clear lines of communication and
    responsibility. Our travel planning example demonstrated how theoretical concepts
    translate into practical applications.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 这种结构化的代理设计方法使得复杂任务能够被分解并高效执行，同时保持清晰的沟通和责任线。我们的旅行规划示例展示了理论概念如何转化为实际应用。
- en: In the next chapter, we will dive deeper and explore how we can effectively
    design agents in real life.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将深入探讨如何有效地设计现实生活中的代理。
- en: Questions
  id: totrans-207
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: Explain how the CWD model enhances the efficiency of multi-agent systems, using
    the travel planning system as an example.
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解释CWD模型如何通过旅行规划系统等例子提高多代理系统的效率。
- en: What is the significance of “role” and “backstory” in LLM agent design, and
    how do they contribute to system prompts? Provide an example.
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: “角色”和“背景故事”在LLM代理设计中的意义是什么，它们如何对系统提示做出贡献？请提供一个例子。
- en: Compare and contrast the core travel workers with analysis and intelligence
    workers in the travel planning system. How do their functions complement each
    other?
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过分析和比较，探讨旅行规划系统中核心旅行工作者与分析和情报工作者之间的功能互补性。
- en: Describe the key aspects of communication and collaboration in a CWD-based system,
    including protocols, coordination mechanisms, and knowledge sharing.
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 描述基于 CWD 系统的通信和协作的关键方面，包括协议、协调机制和知识共享。
- en: How does instruction formatting contribute to effective agent communication
    in an LLM-based system? Explain with examples of input and output structures.
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 指令格式如何有助于在基于 LLM 的系统中实现有效的代理通信？请用输入和输出结构的例子进行说明。
- en: Answers
  id: totrans-213
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 答案
- en: The CWD model enhances efficiency by creating a clear hierarchical structure
    where the coordinator provides strategic oversight, the delegator manages task
    distribution, and specialized workers execute specific functions. In the travel
    planning system, this allows for parallel processing of tasks – while core travel
    workers handle bookings and arrangements, analysis workers simultaneously process
    data and search for opportunities. This structured approach ensures efficient
    task completion while maintaining clear lines of responsibility and communication.
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: CWD 模型通过创建一个清晰的层次结构来提高效率，其中协调者提供战略监督，分配者管理任务分配，专业工作人员执行特定功能。在旅行规划系统中，这允许并行处理任务——当核心旅行工作人员处理预订和安排时，分析工作人员同时处理数据和寻找机会。这种结构化的方法确保了高效的任务完成，同时保持清晰的职责和沟通线路。
- en: Roles and backstories are crucial components in LLM agent design that form the
    system prompt. The role defines an agent’s functional boundaries and responsibilities
    (for example, aviation booking specialist), while the backstory provides context
    and expertise that shapes decision-making (for example, “ *former airline revenue
    management expert with deep knowledge of global aviation networks* ”). Together,
    they create a rich system prompt that guides the agent’s behavior and interaction
    patterns. For example, the flight booking worker’s role and backstory enable it
    to make sophisticated decisions about routing and pricing based on its “experience”
    in airline operations.
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 角色和背景故事是 LLM 代理设计中至关重要的组成部分，它们构成了系统提示。角色定义了代理的功能边界和责任（例如，航空预订专家），而背景故事提供了决策所需的上下文和专业知识（例如，“*前航空公司收入管理专家，对全球航空网络有深入了解*”）。它们共同创造了一个丰富的系统提示，指导代理的行为和交互模式。例如，航班预订工作人员的角色和背景故事使其能够根据其在航空运营中的“经验”做出关于航线和定价的复杂决策。
- en: Core travel workers (flight, hotel, activity, and transportation workers) handle
    the practical aspects of travel arrangements, making bookings, and confirming
    reservations. In contrast, analysis and intelligence workers (data analyst, experience
    reflector, and opportunity searcher) provide strategic support by analyzing trends,
    processing feedback, and identifying new opportunities. While core workers execute
    immediate tasks, analysis workers enhance the system’s decision-making capabilities
    and future performance through data-driven insights and continuous improvement.
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 核心旅行工作人员（航班、酒店、活动和交通工作人员）处理旅行安排的实用方面，包括预订和确认预订。相比之下，分析和情报工作人员（数据分析师、经验反思者和机会寻找者）通过分析趋势、处理反馈和识别新机会提供战略支持。虽然核心工作人员执行即时任务，但分析工作人员通过数据驱动的洞察和持续改进增强了系统的决策能力和未来表现。
- en: 'Communication and collaboration in CWD systems involve several key components:
    standardized communication protocols (such as FIPA ACL) ensure clear message exchange
    between agents; coordination mechanisms allow the coordinator to manage dependencies
    and timelines; negotiation strategies help resolve conflicts between agents (such
    as conflicting activity and transportation plans); and knowledge sharing enables
    continuous system improvement through shared insights and experiences. These elements
    work together to create a cohesive and efficient multi-agent system.'
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 CWD 系统中的通信和协作涉及几个关键组件：标准化的通信协议（如 FIPA ACL）确保代理之间清晰的消息交换；协调机制允许协调者管理依赖关系和时间表；协商策略帮助解决代理之间的冲突（如冲突的活动和交通计划）；知识共享通过共享见解和经验使系统持续改进。这些元素共同工作，创建了一个统一且高效的多代理系统。
- en: Instruction formatting in LLM-based systems ensures reliable agent communication
    through structured input/output patterns. This standardized formatting ensures
    unambiguous communication between agents, clear task specifications, and easily
    parseable results, contributing to the system’s overall efficiency and reliability.
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在基于 LLM 的系统中，指令格式化确保通过结构化的输入/输出模式实现可靠的代理通信。这种标准化格式确保代理之间通信无歧义，任务规格明确，结果易于解析，从而有助于提高系统的整体效率和可靠性。
- en: Join our communities on Discord and Reddit
  id: totrans-219
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 加入我们的 Discord 和 Reddit 社区
- en: Have questions about the book or want to contribute to discussions on Generative
    AI and LLMs? Join our Discord server at [https://packt.link/I1tSU](https://packt.link/I1tSU)
    and our Reddit channel at [https://packt.link/ugMW0](https://packt.link/ugMW0)
    to connect, share, and collaborate with like-minded enthusiasts.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 对这本书有疑问或想参与关于生成式 AI 和 LLM 的讨论？加入我们的 Discord 服务器 [https://packt.link/I1tSU](https://packt.link/I1tSU)
    和 Reddit 频道 [https://packt.link/ugMW0](https://packt.link/ugMW0)，与志同道合的爱好者建立联系、分享和协作。
- en: '![img](img/B31483_Discord_QR_new.jpg)![img](img/qrcode_Reddit_Channel.jpg)'
  id: totrans-221
  prefs: []
  type: TYPE_IMG
  zh: '![img](img/B31483_Discord_QR_new.jpg)![img](img/qrcode_Reddit_Channel.jpg)'
