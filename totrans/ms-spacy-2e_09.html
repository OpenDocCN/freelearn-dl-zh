<html><head></head><body>
  <div id="_idContainer107">
   <h1 class="chapter-number" id="_idParaDest-124">
    <a id="_idTextAnchor123">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     9
    </span>
   </h1>
   <h1 id="_idParaDest-125">
    <a id="_idTextAnchor124">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Creating End-to-End spaCy Workflows with Weasel
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     In this chapter, we will explore how to create end-to-end NLP workflows using spaCy and its companion
    </span>
    <a id="_idIndexMarker432">
    </a>
    <span class="koboSpan" id="kobo.4.1">
     tool,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.5.1">
      Weasel
     </span>
    </strong>
    <span class="koboSpan" id="kobo.6.1">
     .
    </span>
    <span class="koboSpan" id="kobo.6.2">
     Originally a part of spaCy, Weasel has now become a standalone library, meaning you can also use it for other projects that are not created
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.7.1">
      with spaCy.
     </span>
    </span>
   </p>
   <p>
    <strong class="bold">
     <span class="koboSpan" id="kobo.8.1">
      Data Version Control
     </span>
    </strong>
    <span class="koboSpan" id="kobo.9.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.10.1">
      DVC
     </span>
    </strong>
    <span class="koboSpan" id="kobo.11.1">
     ) has an
    </span>
    <a id="_idIndexMarker433">
    </a>
    <span class="koboSpan" id="kobo.12.1">
     ecosystem of solutions for data/model versioning and experiment tracking, enhancing collaboration and experiment management.
    </span>
    <span class="koboSpan" id="kobo.12.2">
     By integrating Weasel with DVC, we ensure our projects are efficiently versioned and tracked, improving organization
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.13.1">
      and reliability.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.14.1">
     In this chapter, we will start by cloning and running a project template with Weasel, following the best software engineering practices to ensure a reproducible and well-structured workflow.
    </span>
    <span class="koboSpan" id="kobo.14.2">
     We will then adapt this template for a different use case and, finally, we will explore how to use DVC to track and manage trained models, enabling efficient collaboration.
    </span>
    <span class="koboSpan" id="kobo.14.3">
     This approach will allow us to create robust NLP pipelines, ready for production
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.15.1">
      and teamwork.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.16.1">
     We’re going to cover these
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.17.1">
      main topics:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.18.1">
      Cloning and running a project template
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.19.1">
       with Weasel
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.20.1">
      Modifying a project template for a different
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.21.1">
       use case
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.22.1">
      Managing models with the DVC Studio
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.23.1">
       model registry
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-126">
    <a id="_idTextAnchor125">
    </a>
    <span class="koboSpan" id="kobo.24.1">
     Technical requirements
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.25.1">
     In this chapter, we will be using the spaCy, Weasel, and DVC libraries.
    </span>
    <span class="koboSpan" id="kobo.25.2">
     The chapter code can be found
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.26.1">
      at
     </span>
    </span>
    <a href="https://github.com/PacktPublishing/Mastering-spaCy-Second-Edition">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.27.1">
       https://github.com/PacktPublishing/Mastering-spaCy-Second-Edition
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.28.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-127">
    <a id="_idTextAnchor126">
    </a>
    <span class="koboSpan" id="kobo.29.1">
     Cloning and running a project template with Weasel
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.30.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.31.1">
      spacy weasel clone
     </span>
    </strong>
    <span class="koboSpan" id="kobo.32.1">
     command
    </span>
    <a id="_idIndexMarker434">
    </a>
    <span class="koboSpan" id="kobo.33.1">
     clones a project
    </span>
    <a id="_idIndexMarker435">
    </a>
    <span class="koboSpan" id="kobo.34.1">
     template from a Git repository.
    </span>
    <span class="koboSpan" id="kobo.34.2">
     It uses spaCy’s project template repo (
    </span>
    <a href="https://github.com/explosion/projects">
     <span class="koboSpan" id="kobo.35.1">
      https://github.com/explosion/projects
     </span>
    </a>
    <span class="koboSpan" id="kobo.36.1">
     ) by default, but you can provide any other repo you have access to (public or private) using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.37.1">
      --
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.38.1">
       repo
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.39.1">
      option.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.40.1">
     In this chapter, we will use the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.41.1">
      categorization of emotions in Reddit posts
     </span>
    </strong>
    <span class="koboSpan" id="kobo.42.1">
     (also referred
    </span>
    <a id="_idIndexMarker436">
    </a>
    <span class="koboSpan" id="kobo.43.1">
     to as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.44.1">
      text classification
     </span>
    </strong>
    <span class="koboSpan" id="kobo.45.1">
     ) project as our project template.
    </span>
    <span class="koboSpan" id="kobo.45.2">
     Let’s go ahead and clone
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.46.1">
      the project:
     </span>
    </span>
   </p>
   <pre class="console">
<strong class="bold"><span class="koboSpan" id="kobo.47.1">python3 -m weasel clone tutorials/textcat_goemotions</span></strong></pre>
   <p>
    <span class="koboSpan" id="kobo.48.1">
     This command creates a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.49.1">
      textcat_goemotions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.50.1">
     folder in the current directory.
    </span>
    <span class="koboSpan" id="kobo.50.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.51.1">
      project.yml
     </span>
    </strong>
    <span class="koboSpan" id="kobo.52.1">
     file defines everything related to the project.
    </span>
    <span class="koboSpan" id="kobo.52.2">
     This includes assets and custom commands.
    </span>
    <span class="koboSpan" id="kobo.52.3">
     The main sections of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.53.1">
      project.yml
     </span>
    </strong>
    <span class="koboSpan" id="kobo.54.1">
     files are
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.55.1">
      as follows:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.56.1">
       title
      </span>
     </strong>
     <span class="koboSpan" id="kobo.57.1">
      : You guessed right, this defines the title of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.58.1">
       the project.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.59.1">
       description
      </span>
     </strong>
     <span class="koboSpan" id="kobo.60.1">
      : An optional
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.61.1">
       project description.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.62.1">
       vars
      </span>
     </strong>
     <span class="koboSpan" id="kobo.63.1">
      : A dictionary of variables for paths, URLs, and scripts, which can be overridden via
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.64.1">
       the CLI.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.65.1">
       env
      </span>
     </strong>
     <span class="koboSpan" id="kobo.66.1">
      : A dictionary mapping variables to environment names, allowing project scripts to use values such as
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.67.1">
       ${env.name}
      </span>
     </strong>
     <span class="koboSpan" id="kobo.68.1">
      from
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.69.1">
       environment variables.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.70.1">
       directories
      </span>
     </strong>
     <span class="koboSpan" id="kobo.71.1">
      : A list of directories to be created within the project, automatically generated by spaCy if they
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.72.1">
       don’t exist.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.73.1">
       assets
      </span>
     </strong>
     <span class="koboSpan" id="kobo.74.1">
      : A list of assets to be fetched, each defined by a URL or local path, a destination within the project, and an optional checksum for verification.
     </span>
     <span class="koboSpan" id="kobo.74.2">
      You can also specify a Git repository with
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.75.1">
       repo
      </span>
     </strong>
     <span class="koboSpan" id="kobo.76.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.77.1">
       branch
      </span>
     </strong>
     <span class="koboSpan" id="kobo.78.1">
      , and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.79.1">
       path
      </span>
     </strong>
     <span class="koboSpan" id="kobo.80.1">
      to download assets directly
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.81.1">
       from Git.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.82.1">
       commands
      </span>
     </strong>
     <span class="koboSpan" id="kobo.83.1">
      : A command specifies how to run the project steps.
     </span>
     <span class="koboSpan" id="kobo.83.2">
      It usually specifies how to run a Python script.
     </span>
     <span class="koboSpan" id="kobo.83.3">
      Each command is specified with
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.84.1">
       script
      </span>
     </strong>
     <span class="koboSpan" id="kobo.85.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.86.1">
       deps
      </span>
     </strong>
     <span class="koboSpan" id="kobo.87.1">
      , and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.88.1">
       outputs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.89.1">
      .
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.90.1">
       deps
      </span>
     </strong>
     <span class="koboSpan" id="kobo.91.1">
      define the files the command depends on, and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.92.1">
       outputs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.93.1">
      define the files the command produces.
     </span>
     <span class="koboSpan" id="kobo.93.2">
      This lets spaCy determine when to re-run a command if a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.94.1">
       dependency changed.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.95.1">
       workflows
      </span>
     </strong>
     <span class="koboSpan" id="kobo.96.1">
      : Workflows define a list of commands that should be executed
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.97.1">
       in order.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.98.1">
     Now that we have cloned the template, the next step is to fetch the assets.
    </span>
    <span class="koboSpan" id="kobo.98.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.99.1">
      spacy weasel assets
     </span>
    </strong>
    <span class="koboSpan" id="kobo.100.1">
     command downloads all the assets defined in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.101.1">
      assets
     </span>
    </strong>
    <span class="koboSpan" id="kobo.102.1">
     section of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.103.1">
      project.yml
     </span>
    </strong>
    <span class="koboSpan" id="kobo.104.1">
     .
    </span>
    <span class="koboSpan" id="kobo.104.2">
     Let’s download
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.105.1">
      the assets:
     </span>
    </span>
   </p>
   <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.106.1">cd ./textcat_goemotions</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.107.1">python3 -m weasel assets</span></strong></pre>
   <p>
    <span class="koboSpan" id="kobo.108.1">
     This project has four assets: a file with the categories to train and three files with data, one for training, one for development, and one for testing.
    </span>
    <span class="koboSpan" id="kobo.108.2">
     The data is in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.109.1">
      .tsv
     </span>
    </strong>
    <span class="koboSpan" id="kobo.110.1">
     format, so we need to convert it into
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.111.1">
      .spacy
     </span>
    </strong>
    <span class="koboSpan" id="kobo.112.1">
     binary format.
    </span>
    <span class="koboSpan" id="kobo.112.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.113.1">
      scripts/convert_corpus.py
     </span>
    </strong>
    <span class="koboSpan" id="kobo.114.1">
     script does that.
    </span>
    <span class="koboSpan" id="kobo.114.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.115.1">
      project.yml
     </span>
    </strong>
    <span class="koboSpan" id="kobo.116.1">
     file has a command named
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.117.1">
      preprocess
     </span>
    </strong>
    <span class="koboSpan" id="kobo.118.1">
     that we can use to run this script.
    </span>
    <span class="koboSpan" id="kobo.118.2">
     Let’s see how this command
    </span>
    <a id="_idIndexMarker437">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.119.1">
      is
     </span>
    </span>
    <span class="No-Break">
     <a id="_idIndexMarker438">
     </a>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.120.1">
      defined:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.121.1">
commands:
  - name: preprocess
    help: "Convert the corpus to spaCy's format"
    script:
      - "python scripts/convert_corpus.py"
    deps:
      - "assets/train.tsv"
      - "assets/dev.tsv"
      - "assets/test.tsv"
      - "assets/categories.txt"
    outputs:
      - "corpus/train.spacy"
      - "corpus/dev.spacy"
      - "corpus/test.spacy"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.122.1">
     The command specifies the assets in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.123.1">
      deps
     </span>
    </strong>
    <span class="koboSpan" id="kobo.124.1">
     keys (because we need them to run the code) and the outputs the code generates.
    </span>
    <span class="koboSpan" id="kobo.124.2">
     To run this command, we can use
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.125.1">
      spacy project run
     </span>
    </strong>
    <span class="koboSpan" id="kobo.126.1">
     and the name of the command, like this:
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.127.1">
      spacy project run preprocess
     </span>
    </strong>
    <span class="koboSpan" id="kobo.128.1">
     .
    </span>
    <span class="koboSpan" id="kobo.128.2">
     This command creates
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.129.1">
      train.spacy
     </span>
    </strong>
    <span class="koboSpan" id="kobo.130.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.131.1">
      dev.spacy
     </span>
    </strong>
    <span class="koboSpan" id="kobo.132.1">
     , and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.133.1">
      test.spacy
     </span>
    </strong>
    <span class="koboSpan" id="kobo.134.1">
     inside the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.135.1">
      /
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.136.1">
       corpus
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.137.1">
      folder.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.138.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.139.1">
      all
     </span>
    </strong>
    <span class="koboSpan" id="kobo.140.1">
     workflow calls the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.141.1">
      preprocess
     </span>
    </strong>
    <span class="koboSpan" id="kobo.142.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.143.1">
      train
     </span>
    </strong>
    <span class="koboSpan" id="kobo.144.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.145.1">
      evaluate
     </span>
    </strong>
    <span class="koboSpan" id="kobo.146.1">
     , and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.147.1">
      package
     </span>
    </strong>
    <span class="koboSpan" id="kobo.148.1">
     commands in order.
    </span>
    <span class="koboSpan" id="kobo.148.2">
     This is useful so we don’t have to call each command manually.
    </span>
    <span class="koboSpan" id="kobo.148.3">
     Let’s try running
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.149.1">
      this workflow:
     </span>
    </span>
   </p>
   <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.150.1">python3 -m weasel run all</span></strong></pre>
   <p>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.151.1">
       Figure 9
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.152.1">
      .1
     </span>
    </em>
    <span class="koboSpan" id="kobo.153.1">
     displays the command outputs.
    </span>
    <span class="koboSpan" id="kobo.153.2">
     Weasel verified that
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.154.1">
      deps
     </span>
    </strong>
    <span class="koboSpan" id="kobo.155.1">
     of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.156.1">
      preprocess
     </span>
    </strong>
    <span class="koboSpan" id="kobo.157.1">
     command
    </span>
    <a id="_idIndexMarker439">
    </a>
    <span class="koboSpan" id="kobo.158.1">
     didn’t change, so
    </span>
    <a id="_idIndexMarker440">
    </a>
    <span class="koboSpan" id="kobo.159.1">
     it skipped
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.160.1">
      this step.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer098">
     <span class="koboSpan" id="kobo.161.1">
      <img alt="Figure 9.1 – Outputs after running the all workflow" src="image/B22441_09_1.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.162.1">
     Figure 9.1 – Outputs after running the all workflow
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.163.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.164.1">
      visualize
     </span>
    </strong>
    <span class="koboSpan" id="kobo.165.1">
     command
    </span>
    <a id="_idIndexMarker441">
    </a>
    <span class="koboSpan" id="kobo.166.1">
     uses
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.167.1">
      Streamlit
     </span>
    </strong>
    <span class="koboSpan" id="kobo.168.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.169.1">
      spacy-streamlit
     </span>
    </strong>
    <span class="koboSpan" id="kobo.170.1">
     to serve a web app to interact with the model.
    </span>
    <span class="koboSpan" id="kobo.170.2">
     We can run this command with
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.171.1">
      weasel run visualize
     </span>
    </strong>
    <span class="koboSpan" id="kobo.172.1">
     .
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.173.1">
       Figure 9
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.174.1">
      .2
     </span>
    </em>
    <span class="koboSpan" id="kobo.175.1">
     shows the web app interface.
    </span>
    <span class="koboSpan" id="kobo.175.2">
     We will learn how to use spaCy with Streamlit in
    </span>
    <a href="B22441_11.xhtml#_idTextAnchor143">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.176.1">
        Chapter 11
       </span>
      </em>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.177.1">
      .
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer099">
     <span class="koboSpan" id="kobo.178.1">
      <img alt="Figure 9.2 – Streamlit interface to interact with the model" src="image/B22441_09_2.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.179.1">
     Figure 9.2 – Streamlit interface to interact with the model
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.180.1">
     With all that, we have successfully used the project template to recreate this text classification pipeline.
    </span>
    <span class="koboSpan" id="kobo.180.2">
     What if we have another dataset and need to execute these same project steps?
    </span>
    <span class="koboSpan" id="kobo.180.3">
     We
    </span>
    <a id="_idIndexMarker442">
    </a>
    <span class="koboSpan" id="kobo.181.1">
     can simply reuse the template and
    </span>
    <a id="_idIndexMarker443">
    </a>
    <span class="koboSpan" id="kobo.182.1">
     adapt it to our needs.
    </span>
    <span class="koboSpan" id="kobo.182.2">
     Let’s learn how to do it in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.183.1">
      next section.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-128">
    <a id="_idTextAnchor127">
    </a>
    <span class="koboSpan" id="kobo.184.1">
     Modifying a project template for a different use case
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.185.1">
     To reuse the
    </span>
    <a id="_idIndexMarker444">
    </a>
    <span class="koboSpan" id="kobo.186.1">
     project template for a different use case, the first thing we’ll do is clone the project, specifying a different
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.187.1">
      dest
     </span>
    </strong>
    <span class="koboSpan" id="kobo.188.1">
     folder.
    </span>
    <span class="koboSpan" id="kobo.188.2">
     Let’s
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.189.1">
      do that:
     </span>
    </span>
   </p>
   <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.190.1">cd ..</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.191.1">python3 -m weasel clone tutorials/textcat_goemotions textcat_github_issues</span></strong></pre>
   <p>
    <span class="koboSpan" id="kobo.192.1">
     This will create a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.193.1">
      textcat_github_issues
     </span>
    </strong>
    <span class="koboSpan" id="kobo.194.1">
     folder.
    </span>
    <span class="koboSpan" id="kobo.194.2">
     The new use case uses annotated data
    </span>
    <a id="_idIndexMarker445">
    </a>
    <span class="koboSpan" id="kobo.195.1">
     from
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.196.1">
      Prodigy
     </span>
    </strong>
    <span class="koboSpan" id="kobo.197.1">
     and we should predict whether a GitHub issue title is about documentation or not.
    </span>
    <span class="koboSpan" id="kobo.197.2">
     The original project is available here:
    </span>
    <a href="https://github.com/explosion/projects/tree/v3/tutorials/textcat_docs_issues">
     <span class="koboSpan" id="kobo.198.1">
      https://github.com/explosion/projects/tree/v3/tutorials/textcat_docs_issues
     </span>
    </a>
    <span class="koboSpan" id="kobo.199.1">
     .
    </span>
    <span class="koboSpan" id="kobo.199.2">
     The goal of this section is to learn how to reuse a project template, so we will modify the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.200.1">
      textcat_goemotions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.201.1">
     project to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.202.1">
      this domain.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.203.1">
     First, we should update
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.204.1">
      title
     </span>
    </strong>
    <span class="koboSpan" id="kobo.205.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.206.1">
      description
     </span>
    </strong>
    <span class="koboSpan" id="kobo.207.1">
     , and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.208.1">
      vars
     </span>
    </strong>
    <span class="koboSpan" id="kobo.209.1">
     with the information for this new GitHub issues project.
    </span>
    <span class="koboSpan" id="kobo.209.2">
     The assets of the GitHub issues are in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.210.1">
      .jsonl
     </span>
    </strong>
    <span class="koboSpan" id="kobo.211.1">
     format, so we will need to modify the command to convert the data to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.212.1">
      .spacy
     </span>
    </strong>
    <span class="koboSpan" id="kobo.213.1">
     format.
    </span>
    <span class="koboSpan" id="kobo.213.2">
     We have three files:
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.214.1">
      train.jsonl
     </span>
    </strong>
    <span class="koboSpan" id="kobo.215.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.216.1">
      dev.jsonl
     </span>
    </strong>
    <span class="koboSpan" id="kobo.217.1">
     , and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.218.1">
      eval.jsonl
     </span>
    </strong>
    <span class="koboSpan" id="kobo.219.1">
     .
    </span>
    <span class="koboSpan" id="kobo.219.2">
     Let’s first modify the assets key of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.220.1">
      project.yml
     </span>
    </strong>
    <span class="koboSpan" id="kobo.221.1">
     to point to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.222.1">
      these files:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.223.1">
assets:
  - dest: "assets/train.jsonl"
    url: "https://raw.githubusercontent.com/PacktPublishing/Mastering-spaCy-Second-Edition/refs/heads/main/chapter_09/data/train.jsonl"
    description: "JSONL-formatted training data exported from Prodigy, annotated with `DOCUMENTATION` (661 examples)"
  - dest: "assets/dev.jsonl"
    url: "https://raw.githubusercontent.com/PacktPublishing/Mastering-spaCy-Second-Edition/refs/heads/main/chapter_09/data/dev.jsonl"
    description: "JSONL-formatted development data exported from Prodigy, annotated with `DOCUMENTATION` (500 examples)"
  - dest: "assets/test.jsonl"
    url: "https://raw.githubusercontent.com/PacktPublishing/Mastering-spaCy-Second-Edition/refs/heads/main/chapter_09/data/eval.jsonl"
    description: "JSONL-formatted test data generated with GPT-3.5 (300 examples)"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.224.1">
     Now, we can
    </span>
    <a id="_idIndexMarker446">
    </a>
    <span class="koboSpan" id="kobo.225.1">
     download the assets using the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.226.1">
       assets
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.227.1">
      command:
     </span>
    </span>
   </p>
   <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.228.1">cd textcat_github_issues</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.229.1">python3 -m weasel assets</span></strong></pre>
   <p>
    <span class="koboSpan" id="kobo.230.1">
     Let’s see a snippet of the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.231.1">
      training data:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.232.1">
{"text":"add please","cats":{"DOCUMENTATION":0.0,"OTHER":1.0}}
{"text":"Examples, failed to load qml","cats":{"DOCUMENTATION":0.0,"OTHER":1.0}}
{"text":"DMCHMM","cats":{"DOCUMENTATION":0.0,"OTHER":1.0}}
{"text":"Moving from MySQL to Hybrid SQL","cats":{"DOCUMENTATION":0.0,"OTHER":1.0}}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.233.1">
     This format is different from
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.234.1">
      textcat_goemotions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.235.1">
     , so we will need to create a different
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.236.1">
      convert_corpus.py
     </span>
    </strong>
    <span class="koboSpan" id="kobo.237.1">
     script.
    </span>
    <span class="koboSpan" id="kobo.237.2">
     We will use
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.238.1">
      srsly
     </span>
    </strong>
    <span class="koboSpan" id="kobo.239.1">
     (a package that bundles some of the best Python serialization libraries) to read the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.240.1">
      .jsonl
     </span>
    </strong>
    <span class="koboSpan" id="kobo.241.1">
     data and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.242.1">
      typer
     </span>
    </strong>
    <span class="koboSpan" id="kobo.243.1">
     (a library for building CLI applications) to specify the arguments of the script.
    </span>
    <span class="koboSpan" id="kobo.243.2">
     Let’s write the script to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.244.1">
      do that:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.245.1">
      First, we
     </span>
     <a id="_idIndexMarker447">
     </a>
     <span class="koboSpan" id="kobo.246.1">
      import the libraries and define the variables for
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.247.1">
       the directories:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.248.1">
import srsly
import typer
import spacy
from spacy.tokens import DocBin
from pathlib import Path
ASSETS_DIR = Path(__file__).parent.parent / "assets"
CORPUS_DIR = Path(__file__).parent.parent / "corpus"</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.249.1">
      To run the script, we should specify the directory to read the assets, the directory to save the corpus, and the language of the model we’ll use to create the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.250.1">
       Doc
      </span>
     </strong>
     <span class="koboSpan" id="kobo.251.1">
      objects.
     </span>
     <span class="koboSpan" id="kobo.251.2">
      With
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.252.1">
       typer
      </span>
     </strong>
     <span class="koboSpan" id="kobo.253.1">
      , we can do this by creating a function with
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.254.1">
       these arguments:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.255.1">
def main(assets_dir: Path=ASSETS_DIR, 
         corpus_dir: Path=CORPUS_DIR, lang: str="en"):</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.256.1">
      The script should convert all the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.257.1">
       train.jsonl
      </span>
     </strong>
     <span class="koboSpan" id="kobo.258.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.259.1">
       dev.json
      </span>
     </strong>
     <span class="koboSpan" id="kobo.260.1">
      , and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.261.1">
       eval.jsonl
      </span>
     </strong>
     <span class="koboSpan" id="kobo.262.1">
      files, so we will need to loop through each file in
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.263.1">
       assets_dir
      </span>
     </strong>
     <span class="koboSpan" id="kobo.264.1">
      , and if it’s a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.265.1">
       .jsonl
      </span>
     </strong>
     <span class="koboSpan" id="kobo.266.1">
      file, we will create a
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.267.1">
        DocBin
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.268.1">
       object:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.269.1">
nlp = spacy.blank(lang)
for jsonl_file in assets_dir.iterdir():
    if not jsonl_file.parts[-1].endswith(".jsonl"):
        continue
    db = DocBin()</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.270.1">
      For each
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.271.1">
       jsonl_file
      </span>
     </strong>
     <span class="koboSpan" id="kobo.272.1">
      , we will build the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.273.1">
       Doc
      </span>
     </strong>
     <span class="koboSpan" id="kobo.274.1">
      object, set the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.275.1">
       cats
      </span>
     </strong>
     <span class="koboSpan" id="kobo.276.1">
      parameter, and add it to
     </span>
     <a id="_idIndexMarker448">
     </a>
     <span class="koboSpan" id="kobo.277.1">
      the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.278.1">
       DocBin
      </span>
     </strong>
     <span class="koboSpan" id="kobo.279.1">
      object.
     </span>
     <span class="koboSpan" id="kobo.279.2">
      Finally, we save this
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.280.1">
       DocBin
      </span>
     </strong>
     <span class="koboSpan" id="kobo.281.1">
      object
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.282.1">
       to disk:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.283.1">
for line in srsly.read_jsonl(jsonl_file):
    doc = nlp.make_doc(line["text"])
    doc.cats = line["cats"]
    db.add(doc)
out_file = corpus_dir / jsonl_file.with_suffix(
    ".spacy").parts[-1]
db.to_disk(out_file)</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.284.1">
      The last step is to tie this script with Typer.
     </span>
     <span class="koboSpan" id="kobo.284.2">
      We do that
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.285.1">
       with
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.286.1">
        typer.run(main)
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.287.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.288.1">
if __name__ == "__main__":
    typer.run(main)</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.289.1">
      Now, we can save this new
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.290.1">
       convert_corpus.py
      </span>
     </strong>
     <span class="koboSpan" id="kobo.291.1">
      script and run the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.292.1">
       following command:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.293.1">python3 -m weasel run preprocess</span></strong></pre>
     <p class="list-inset">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.294.1">
         Figure 9
        </span>
       </em>
      </span>
      <em class="italic">
       <span class="koboSpan" id="kobo.295.1">
        .3
       </span>
      </em>
      <span class="koboSpan" id="kobo.296.1">
       shows the output of
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.297.1">
        this command.
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer100">
     <span class="koboSpan" id="kobo.298.1">
      <img alt="Figure 9.3 – Weasel output after running the preprocess command" src="image/B22441_09_3.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.299.1">
     Figure 9.3 – Weasel output after running the preprocess command
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.300.1">
     Weasel is saying that we’re missing an
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.301.1">
      assets/train.tsv
     </span>
    </strong>
    <span class="koboSpan" id="kobo.302.1">
     dependency.
    </span>
    <span class="koboSpan" id="kobo.302.2">
     That’s because we didn’t update
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.303.1">
      deps
     </span>
    </strong>
    <span class="koboSpan" id="kobo.304.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.305.1">
      outputs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.306.1">
     of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.307.1">
      preprocess
     </span>
    </strong>
    <span class="koboSpan" id="kobo.308.1">
     command to work with this new use case.
    </span>
    <span class="koboSpan" id="kobo.308.2">
     Let’s do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.309.1">
      it now:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.310.1">
  - name: preprocess
    help: "Convert the corpus to spaCy's format"
    script:
      - "python scripts/convert_corpus.py"
    deps:
      - "assets/train.jsonl"
      - "assets/dev.jsonl"
      - "assets/test.jsonl"
    outputs_no_cache:
      - "corpus/train.spacy"
      - "corpus/dev.spacy"
      - "corpus/test.spacy"</span></pre>
   <ol>
    <li value="7">
     <span class="koboSpan" id="kobo.311.1">
      Now you can
     </span>
     <a id="_idIndexMarker449">
     </a>
     <span class="koboSpan" id="kobo.312.1">
      save these changes and try running the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.313.1">
       preprocess
      </span>
     </strong>
     <span class="koboSpan" id="kobo.314.1">
      command again.
     </span>
     <span class="koboSpan" id="kobo.314.2">
      The script creates the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.315.1">
       .spacy
      </span>
     </strong>
     <span class="koboSpan" id="kobo.316.1">
      files in the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.317.1">
       /corpus
      </span>
     </strong>
     <span class="koboSpan" id="kobo.318.1">
      directory.
     </span>
     <span class="koboSpan" id="kobo.318.2">
      Alright, let’s also update the dependencies of the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.319.1">
       evaluate
      </span>
     </strong>
     <span class="koboSpan" id="kobo.320.1">
      command and run the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.321.1">
       all
      </span>
     </strong>
     <span class="koboSpan" id="kobo.322.1">
      workflow to train, evaluate, and create a package for this GitHub
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.323.1">
       issues project:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.324.1">python3 -m weasel run all</span></strong></pre>
     <p class="list-inset">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.325.1">
         Figure 9
        </span>
       </em>
      </span>
      <em class="italic">
       <span class="koboSpan" id="kobo.326.1">
        .4
       </span>
      </em>
      <span class="koboSpan" id="kobo.327.1">
       displays the evaluation results for
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.328.1">
        this pipeline.
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer101">
     <span class="koboSpan" id="kobo.329.1">
      <img alt="Figure 9.4 – Evaluation results" src="image/B22441_09_4.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.330.1">
     Figure 9.4 – Evaluation results
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.331.1">
     Could we get better results using BERT?
    </span>
    <span class="koboSpan" id="kobo.331.2">
     Let’s change this in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.332.1">
      vars
     </span>
    </strong>
    <span class="koboSpan" id="kobo.333.1">
     section
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.334.1">
      of
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.335.1">
       project.yml
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.336.1">
      :
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.337.1">
vars:
  name: "textcat_github_issues"
  version: "0.0.1"
  # Choose your GPU here
  gpu_id: 0
  # Change this to "bert" to use the transformer-based model
  config: "bert"</span></pre>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.338.1">
     I had trouble
    </span>
    <a id="_idIndexMarker450">
    </a>
    <span class="koboSpan" id="kobo.339.1">
     running the training with the batch configuration defined on the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.340.1">
      configs/bert.cfg
     </span>
    </strong>
    <span class="koboSpan" id="kobo.341.1">
     file, so let’s change it
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.342.1">
      to
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.343.1">
       spacy.batch_by_padded.v1
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.344.1">
      :
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.345.1">
[training.batcher]
@batchers = "spacy.batch_by_padded.v1"
discard_oversize = true
size = 2000
buffer = 256
get_length = null</span></pre>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.346.1">
     Now we can run the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.347.1">
      workflow again:
     </span>
    </span>
   </p>
   <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.348.1">python3 -m weasel run all</span></strong></pre>
   <p class="list-inset">
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.349.1">
       Figure 9
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.350.1">
      .5
     </span>
    </em>
    <span class="koboSpan" id="kobo.351.1">
     displays the evaluation results of this model, which performs better than the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.352.1">
      first one.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer102">
     <span class="koboSpan" id="kobo.353.1">
      <img alt="Figure 9.5 – Results using BERT" src="image/B22441_09_5.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.354.1">
     Figure 9.5 – Results using BERT
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.355.1">
     Now that we have
    </span>
    <a id="_idIndexMarker451">
    </a>
    <span class="koboSpan" id="kobo.356.1">
     the trained models, we can use Weasel to upload them to remote storage.
    </span>
    <span class="koboSpan" id="kobo.356.2">
     Let’s do that in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.357.1">
      next section.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-129">
    <a id="_idTextAnchor128">
    </a>
    <span class="koboSpan" id="kobo.358.1">
     Uploading and downloading project outputs to remote storage
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.359.1">
     You can
    </span>
    <a id="_idIndexMarker452">
    </a>
    <span class="koboSpan" id="kobo.360.1">
     use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.361.1">
      spacy project push
     </span>
    </strong>
    <span class="koboSpan" id="kobo.362.1">
     command to store project outputs in remote storage, enabling you to share pipeline packages, collaborate with your team, or cache results to avoid redundant tasks.
    </span>
    <span class="koboSpan" id="kobo.362.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.363.1">
      spacy project pull
     </span>
    </strong>
    <span class="koboSpan" id="kobo.364.1">
     command retrieves any missing outputs from remote storage.
    </span>
    <span class="koboSpan" id="kobo.364.2">
     Remotes are specified in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.365.1">
      remotes
     </span>
    </strong>
    <span class="koboSpan" id="kobo.366.1">
     section of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.367.1">
      project.yml
     </span>
    </strong>
    <span class="koboSpan" id="kobo.368.1">
     .
    </span>
    <span class="koboSpan" id="kobo.368.2">
     To configure the remote storage, you can list one or more destinations in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.369.1">
      remotes
     </span>
    </strong>
    <span class="koboSpan" id="kobo.370.1">
     section of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.371.1">
      project.yml
     </span>
    </strong>
    <span class="koboSpan" id="kobo.372.1">
     file, mapping a string name to the storage URL.
    </span>
    <span class="koboSpan" id="kobo.372.2">
     spaCy uses
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.373.1">
      cloudpathlib
     </span>
    </strong>
    <span class="koboSpan" id="kobo.374.1">
     to communicate with remote storage, allowing the use of any protocol supported by
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.375.1">
      cloudpathlib
     </span>
    </strong>
    <span class="koboSpan" id="kobo.376.1">
     , including S3, Google Cloud Storage, Azure Blob Storage, and the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.377.1">
      local filesystem.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.378.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.379.1">
      push
     </span>
    </strong>
    <span class="koboSpan" id="kobo.380.1">
     command uploads all files or directories listed in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.381.1">
      outputs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.382.1">
     section of commands to remote storage.
    </span>
    <span class="koboSpan" id="kobo.382.2">
     Outputs are archived and compressed before upload.
    </span>
    <span class="koboSpan" id="kobo.382.3">
     Weasel uses a hash of the command string and dependencies and a hash of the file contents.
    </span>
    <span class="koboSpan" id="kobo.382.4">
     This means
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.383.1">
      push
     </span>
    </strong>
    <span class="koboSpan" id="kobo.384.1">
     should never overwrite a file in your remote storage.
    </span>
    <span class="koboSpan" id="kobo.384.2">
     If all hashes match, the contents are the same and nothing happens.
    </span>
    <span class="koboSpan" id="kobo.384.3">
     If the contents differ, the new version of the file
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.385.1">
      is uploaded.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.386.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.387.1">
      pull
     </span>
    </strong>
    <span class="koboSpan" id="kobo.388.1">
     command downloads all files or directories listed as outputs for commands unless they are already present locally.
    </span>
    <span class="koboSpan" id="kobo.388.2">
     When searching for files in the remote storage,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.389.1">
      pull
     </span>
    </strong>
    <span class="koboSpan" id="kobo.390.1">
     will consider not only the output path but also the command string and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.391.1">
      dependency hashes.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.392.1">
     We’ve trained two models for the GitHub issues use case.
    </span>
    <span class="koboSpan" id="kobo.392.2">
     If we were in a production setting, we would need to manage these trained models.
    </span>
    <span class="koboSpan" id="kobo.392.3">
     The straightforward use case would be to change between them in production.
    </span>
    <span class="koboSpan" id="kobo.392.4">
     DVC is a library that helps us connect to versioned data sources and code with pipelines, track experiments, and register models.
    </span>
    <span class="koboSpan" id="kobo.392.5">
     Weasel was inspired by DVC and we can use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.393.1">
      spacy weasel dvc
     </span>
    </strong>
    <span class="koboSpan" id="kobo.394.1">
     command to auto-generate a DVC configuration file.
    </span>
    <span class="koboSpan" id="kobo.394.2">
     With this file, we can manage the spaCy project like
    </span>
    <a id="_idIndexMarker453">
    </a>
    <span class="koboSpan" id="kobo.395.1">
     any other DVC project.
    </span>
    <span class="koboSpan" id="kobo.395.2">
     In the next section, we will use the DVC Studio model registry to
    </span>
    <a id="_idIndexMarker454">
    </a>
    <span class="koboSpan" id="kobo.396.1">
     catalog our
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.397.1">
      Machine Learning
     </span>
    </strong>
    <span class="koboSpan" id="kobo.398.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.399.1">
      ML
     </span>
    </strong>
    <span class="koboSpan" id="kobo.400.1">
     ) models and manage them
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.401.1">
      in production.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-130">
    <a id="_idTextAnchor129">
    </a>
    <span class="koboSpan" id="kobo.402.1">
     Managing models with the DVC model registry
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.403.1">
     DVC is an
    </span>
    <a id="_idIndexMarker455">
    </a>
    <span class="koboSpan" id="kobo.404.1">
     open source
    </span>
    <a id="_idIndexMarker456">
    </a>
    <span class="koboSpan" id="kobo.405.1">
     command-line tool that helps us develop reproducible ML projects.
    </span>
    <span class="koboSpan" id="kobo.405.2">
     Weasel itself was inspired by DVC (
    </span>
    <a href="https://x.com/honnibal/status/1316792615996592133">
     <span class="koboSpan" id="kobo.406.1">
      https://x.com/honnibal/status/1316792615996592133
     </span>
    </a>
    <span class="koboSpan" id="kobo.407.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.407.2">
     It comes with tools to version data and models, track experiments, compare data, and share experiments.
    </span>
    <span class="koboSpan" id="kobo.407.3">
     In this section, we’re going to use the model registry
    </span>
    <a id="_idIndexMarker457">
    </a>
    <span class="koboSpan" id="kobo.408.1">
     in
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.409.1">
      DVC Studio
     </span>
    </strong>
    <span class="koboSpan" id="kobo.410.1">
     , a web application that enables teams to run and track experiments and manage the model
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.411.1">
      life cycle.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.412.1">
     Under the hood, DVC Studio uses a command line
    </span>
    <a id="_idIndexMarker458">
    </a>
    <span class="koboSpan" id="kobo.413.1">
     called
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.414.1">
      Git Tag Ops
     </span>
    </strong>
    <span class="koboSpan" id="kobo.415.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.416.1">
      GTO
     </span>
    </strong>
    <span class="koboSpan" id="kobo.417.1">
     ) for model registry actions.
    </span>
    <span class="koboSpan" id="kobo.417.2">
     To work with DVC, it’s useful to learn more about
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.418.1">
      GitOps
     </span>
    </strong>
    <span class="koboSpan" id="kobo.419.1">
     .
    </span>
    <span class="koboSpan" id="kobo.419.2">
     Let’s
    </span>
    <a id="_idIndexMarker459">
    </a>
    <span class="koboSpan" id="kobo.420.1">
     do this in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.421.1">
      next section.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-131">
    <a id="_idTextAnchor130">
    </a>
    <span class="koboSpan" id="kobo.422.1">
     What is GitOps?
    </span>
   </h2>
   <p>
    <strong class="bold">
     <span class="koboSpan" id="kobo.423.1">
      GitOps
     </span>
    </strong>
    <span class="koboSpan" id="kobo.424.1">
     is a set of practices
    </span>
    <a id="_idIndexMarker460">
    </a>
    <span class="koboSpan" id="kobo.425.1">
     that emphasizes the use of the Git version
    </span>
    <a id="_idIndexMarker461">
    </a>
    <span class="koboSpan" id="kobo.426.1">
     control system as the source of truth for declarative infrastructure and applications.
    </span>
    <span class="koboSpan" id="kobo.426.2">
     It draws ideas from DevOps and infrastructure as code practices.
    </span>
    <span class="koboSpan" id="kobo.426.3">
     The
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.427.1">
      GitOps WG
     </span>
    </em>
    <span class="koboSpan" id="kobo.428.1">
     (
    </span>
    <a href="https://opengitops.dev/">
     <span class="koboSpan" id="kobo.429.1">
      https://opengitops.dev/
     </span>
    </a>
    <span class="koboSpan" id="kobo.430.1">
     ) defines four GitOps
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.431.1">
      principles (v1.0.0):
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.432.1">
       Declarative
      </span>
     </strong>
     <span class="koboSpan" id="kobo.433.1">
      : In a GitOps-managed
     </span>
     <a id="_idIndexMarker462">
     </a>
     <span class="koboSpan" id="kobo.434.1">
      system, the desired state must be
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.435.1">
       defined declaratively
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.436.1">
       Versioned and immutable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.437.1">
      : The desired state is stored in a way that enforces immutability and versioning and retains a complete
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.438.1">
       version history
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.439.1">
       Pulled automatically
      </span>
     </strong>
     <span class="koboSpan" id="kobo.440.1">
      : Software agents automatically pull the desired state declarations from
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.441.1">
       the source
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.442.1">
       Continuously reconciled
      </span>
     </strong>
     <span class="koboSpan" id="kobo.443.1">
      : Software agents constantly monitor the system and work to align it with the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.444.1">
       desired state
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.445.1">
     Let’s delve deeper into each principle in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.446.1">
      following list:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.447.1">
       Principle 1 – declarative
      </span>
     </strong>
     <span class="koboSpan" id="kobo.448.1">
      : In practical terms, this means that all the configurations and settings for your infrastructure and applications are described in a declarative format, such as YAML or JSON files.
     </span>
     <span class="koboSpan" id="kobo.448.2">
      Rather than writing scripts that perform a series of steps to reach the desired state, you define what the final state should look like.
     </span>
     <span class="koboSpan" id="kobo.448.3">
      This is also the principle of
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.449.1">
       Weasel
      </span>
     </strong>
     <span class="koboSpan" id="kobo.450.1">
      for the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.451.1">
       project.yml
      </span>
     </strong>
     <span class="koboSpan" id="kobo.452.1">
      file – it ensures that we have no hidden defaults.
     </span>
     <span class="koboSpan" id="kobo.452.2">
      The configuration files serve as a blueprint for how your system should
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.453.1">
       be configured.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.454.1">
       Principle 2 – versioned and immutable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.455.1">
      : This principle emphasizes that all configuration files (the declarative descriptions) should be stored in a Git repository.
     </span>
     <span class="koboSpan" id="kobo.455.2">
      Git naturally supports versioning, allowing you to track changes over time.
     </span>
     <span class="koboSpan" id="kobo.455.3">
      Immutability means that once a particular state is defined and committed, it shouldn’t be altered.
     </span>
     <span class="koboSpan" id="kobo.455.4">
      If changes are necessary, a new version should be created.
     </span>
     <span class="koboSpan" id="kobo.455.5">
      This practice ensures that you have a complete history of every change made to your configurations, making it easier to understand the evolution of your code and infrastructure and roll back to previous states if necessary.
     </span>
     <span class="koboSpan" id="kobo.455.6">
      For example, if a new configuration breaks your application, you can quickly revert to the last known good configuration using Git’s
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.456.1">
       version history.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.457.1">
       Principle 3 – pulled automatically
      </span>
     </strong>
     <span class="koboSpan" id="kobo.458.1">
      : In a GitOps setup, when a new commit is detected, the GitOps agent should automatically pull the updated configuration files and apply the changes to the infrastructure or applications.
     </span>
     <span class="koboSpan" id="kobo.458.2">
      This automation ensures that any updates made in the Git repository are promptly reflected in the actual running environment without
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.459.1">
       manual intervention.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.460.1">
       Principle 4 – continuously reconciled
      </span>
     </strong>
     <span class="koboSpan" id="kobo.461.1">
      : The GitOps agents should continuously compare the actual state of your infrastructure and applications with the desired state defined in your Git repository.
     </span>
     <span class="koboSpan" id="kobo.461.2">
      If there is a discrepancy between the two, the agents will try to reconcile them by making the necessary adjustments to bring the actual state in line with the desired state.
     </span>
     <span class="koboSpan" id="kobo.461.3">
      This continuous reconciliation ensures that your system is always aligned with the configurations in Git.
     </span>
     <span class="koboSpan" id="kobo.461.4">
      This
     </span>
     <a id="_idIndexMarker463">
     </a>
     <span class="koboSpan" id="kobo.462.1">
      principle ensures consistency and reliability, preventing drift between what is declared in Git and what is actually running in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.463.1">
       your
      </span>
     </span>
     <span class="No-Break">
      <a id="_idIndexMarker464">
      </a>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.464.1">
       environment.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.465.1">
     Let’s move on to DVC, addressing common data science and ML
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.466.1">
      challenges next.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-132">
    <a id="_idTextAnchor131">
    </a>
    <span class="koboSpan" id="kobo.467.1">
     How DVC addresses common data science and ML challenges
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.468.1">
     Data science
    </span>
    <a id="_idIndexMarker465">
    </a>
    <span class="koboSpan" id="kobo.469.1">
     and ML
    </span>
    <a id="_idIndexMarker466">
    </a>
    <span class="koboSpan" id="kobo.470.1">
     projects often face challenges that can be effectively addressed using DVC and GitOps principles.
    </span>
    <span class="koboSpan" id="kobo.470.2">
     Here are some common challenges and how these tools and principles can help
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.471.1">
      solve them:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.472.1">
       Difficult sharing and collaboration
      </span>
     </strong>
     <span class="koboSpan" id="kobo.473.1">
      : Sharing datasets, models, and experiments among team members can be complicated, especially when dealing with large files or multiple versions, leading to duplicated work and errors.
     </span>
     <span class="koboSpan" id="kobo.473.2">
      With DVC, we can use remote storage to track datasets and models just like we track code with Git.
     </span>
     <span class="koboSpan" id="kobo.473.3">
      This allows team members to pull and push assets to make sure everyone is working with the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.474.1">
       same state.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.475.1">
       Pipelines not reliable or not reproducible
      </span>
     </strong>
     <span class="koboSpan" id="kobo.476.1">
      : We usually start our project experiments in a Jupyter notebook.
     </span>
     <span class="koboSpan" id="kobo.476.2">
      This is completely fine for data analysis and prototypes, but when the project grows (as we hope so), structure and automation become beneficial.
     </span>
     <span class="koboSpan" id="kobo.476.3">
      Some requirements for structured pipelines include units of code as
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.477.1">
       .py
      </span>
     </strong>
     <span class="koboSpan" id="kobo.478.1">
      modules and managing configuration in dedicated files (to track parameters, file paths, etc.).
     </span>
     <span class="koboSpan" id="kobo.478.2">
      DVC (and Weasel) perfectly creates a structure for us to create these
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.479.1">
       reusable pipelines.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.480.1">
       Model metrics tracking
      </span>
     </strong>
     <span class="koboSpan" id="kobo.481.1">
      : Keeping a history of model performance metrics is crucial for understanding the evolution and effectiveness of models over time.
     </span>
     <span class="koboSpan" id="kobo.481.2">
      DVC allows the storing and versioning of performance metrics along with models, facilitating the comparison of different versions and the analysis of improvements.
     </span>
     <span class="koboSpan" id="kobo.481.3">
      With GitOps, these metrics can be integrated into CI/CD pipelines, ensuring that new model versions are always validated against previous versions
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.482.1">
       before deployment.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.483.1">
     By addressing these challenges with DVC and GitOps principles, data science and ML teams can achieve more reliable, reproducible, and scalable workflows.
    </span>
    <span class="koboSpan" id="kobo.483.2">
     The benefits of implementing GitOps principles include
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.484.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.485.1">
      Increased developer and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.486.1">
       operational productivity
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.487.1">
      Enhanced
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.488.1">
       developer experience
      </span>
     </span>
    </li>
    <li>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.489.1">
       Improved stability
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.490.1">
      Consistency
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.491.1">
       and standardization
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.492.1">
     DVC integrates seamlessly with GitOps practices, so by using the tool, we get all these benefits.
    </span>
    <span class="koboSpan" id="kobo.492.2">
     Now
    </span>
    <a id="_idIndexMarker467">
    </a>
    <span class="koboSpan" id="kobo.493.1">
     that we
    </span>
    <a id="_idIndexMarker468">
    </a>
    <span class="koboSpan" id="kobo.494.1">
     know what GitOps is and the challenges it addresses, let’s go ahead and convert our Weasel project to DVC and add our models to the model registry so we can
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.495.1">
      share them.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-133">
    <a id="_idTextAnchor132">
    </a>
    <span class="koboSpan" id="kobo.496.1">
     From Weasel to DVC
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.497.1">
     The first step is
    </span>
    <a id="_idIndexMarker469">
    </a>
    <span class="koboSpan" id="kobo.498.1">
     to install DVC.
    </span>
    <span class="koboSpan" id="kobo.498.2">
     DVC is a Python library, so we can carry out the installation using
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.499.1">
      pip
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.500.1">
      or
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.501.1">
       conda
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.502.1">
      :
     </span>
    </span>
   </p>
   <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.503.1">python3 -m pip install dvc dvc_gdrive</span></strong></pre>
   <p>
    <span class="koboSpan" id="kobo.504.1">
     Now, inside the project directory, we can run
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.505.1">
      dvc init
     </span>
    </strong>
    <span class="koboSpan" id="kobo.506.1">
     to initialize a DVC project.
    </span>
    <span class="koboSpan" id="kobo.506.2">
     There has to be a Git repository initialized in this directory.
    </span>
    <span class="koboSpan" id="kobo.506.3">
     Let’s initialize
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.507.1">
      the project:
     </span>
    </span>
   </p>
   <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.508.1">python3 -m dvc init</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.509.1">git commit -m "First commit"</span></strong></pre>
   <p>
    <span class="koboSpan" id="kobo.510.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.511.1">
      dvc init
     </span>
    </strong>
    <span class="koboSpan" id="kobo.512.1">
     command creates three files:
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.513.1">
      .dvc/config
     </span>
    </strong>
    <span class="koboSpan" id="kobo.514.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.515.1">
      .dvc/.gitignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.516.1">
     , and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.517.1">
      .dvcignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.518.1">
     .
    </span>
    <span class="koboSpan" id="kobo.518.2">
     DVC provides access to external storage locations, allowing us to manage and share our data and ML models.
    </span>
    <span class="koboSpan" id="kobo.518.3">
     It supports cloud providers such as Amazon S3, Microsoft Azure Blob Storage, and Google Cloud Storage, and self-hosted/on-premises options such as SSH and HDFS.
    </span>
    <span class="koboSpan" id="kobo.518.4">
     In this chapter, we will use Google Drive as remote storage.
    </span>
    <span class="koboSpan" id="kobo.518.5">
     For that, we need the folder ID of the Google Drive folder.
    </span>
    <span class="koboSpan" id="kobo.518.6">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.519.1">
      dvc remote add
     </span>
    </strong>
    <span class="koboSpan" id="kobo.520.1">
     command adds the remote configuration to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.521.1">
      .dvc/config
     </span>
    </strong>
    <span class="koboSpan" id="kobo.522.1">
     file.
    </span>
    <span class="koboSpan" id="kobo.522.2">
     Let’s
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.523.1">
      do it:
     </span>
    </span>
   </p>
   <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.524.1">python3 -m dvc remote add --default myremote gdrive:///path/to/folder</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.525.1">python3 -m dvc remote modify myremote gdrive_acknowledge_abuse true</span></strong></pre>
   <p>
    <span class="koboSpan" id="kobo.526.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.527.1">
      gdrive_acknowledge_abuse
     </span>
    </strong>
    <span class="koboSpan" id="kobo.528.1">
     flag allows the download of files flagged as potentially abusive, such as containing malware or personal information, but only by the file’s owner when this parameter is enabled.
    </span>
    <span class="koboSpan" id="kobo.528.2">
     Now, when we run
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.529.1">
      dvc pull
     </span>
    </strong>
    <span class="koboSpan" id="kobo.530.1">
     or
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.531.1">
      dvc push
     </span>
    </strong>
    <span class="koboSpan" id="kobo.532.1">
     to store or retrieve model artifacts using Google Drive as the remote storage, the browser will open a new window
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.533.1">
      for authentication.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.534.1">
     Once DVC is configured, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.535.1">
      spacy project dvc
     </span>
    </strong>
    <span class="koboSpan" id="kobo.536.1">
     command auto-generates a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.537.1">
      dvc.yaml
     </span>
    </strong>
    <span class="koboSpan" id="kobo.538.1">
     file from your
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.539.1">
      project.yml
     </span>
    </strong>
    <span class="koboSpan" id="kobo.540.1">
     .
    </span>
    <span class="koboSpan" id="kobo.540.2">
     This lets you manage your spaCy project as a DVC repository, using the workflow defined in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.541.1">
      project.yml
     </span>
    </strong>
    <span class="koboSpan" id="kobo.542.1">
     .
    </span>
    <span class="koboSpan" id="kobo.542.2">
     In this chapter, we’re just going to use the
    </span>
    <a id="_idIndexMarker470">
    </a>
    <span class="koboSpan" id="kobo.543.1">
     model registry functionality, so let’s go ahead and see how to do that in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.544.1">
      next section.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.545.1">
     Creating a command to add the model to the model registry
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.546.1">
     To add the
    </span>
    <a id="_idIndexMarker471">
    </a>
    <span class="koboSpan" id="kobo.547.1">
     model to the model registry, we need to install the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.548.1">
      DVCLive
     </span>
    </strong>
    <span class="koboSpan" id="kobo.549.1">
     Python package.
    </span>
    <span class="koboSpan" id="kobo.549.2">
     DVCLive is a Python library for logging ML metrics and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.550.1">
      other metadata:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.551.1">
      Let’s
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.552.1">
       install it:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.553.1">python3 -m pip install dvclive</span></strong></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.554.1">
      Now, let’s revisit our
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.555.1">
       project.yml
      </span>
     </strong>
     <span class="koboSpan" id="kobo.556.1">
      Weasel file.
     </span>
     <span class="koboSpan" id="kobo.556.2">
      We have the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.557.1">
       all
      </span>
     </strong>
     <span class="koboSpan" id="kobo.558.1">
      workflow defined there with
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.559.1">
       these commands:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.560.1">
  all:
    - preprocess
    - train
    - evaluate
    - package</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.561.1">
      What we’ll do is create three new commands, one to track the model with DVC, one to push the model to the remote storage, and one to add the model to the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.562.1">
       model registry.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.563.1">
      To push the model to the remote storage, first we need to track it with DVC.
     </span>
     <span class="koboSpan" id="kobo.563.2">
      We do this with
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.564.1">
       dvc add
      </span>
     </strong>
     <span class="koboSpan" id="kobo.565.1">
      .
     </span>
     <span class="koboSpan" id="kobo.565.2">
      Let’s
     </span>
     <a id="_idIndexMarker472">
     </a>
     <span class="koboSpan" id="kobo.566.1">
      create the command
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.567.1">
       inside
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.568.1">
        project.yml
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.569.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.570.1">
  - name: track_model
    help: Track model artifact with DVC
    script:
      - "dvc add packages/${vars.language}_${vars.name}-${vars.version}/dist/${vars.language}_${vars.name}-${vars.version}.tar.gz"
    deps:
      - "packages/${vars.language}_${vars.name}-${vars.version}/dist/${vars.language}_${vars.name}-${vars.version}.tar.gz"</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.571.1">
      Now, let’s run this command
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.572.1">
       with Weasel:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.573.1">python3 -m weasel run track_model</span></strong></pre>
    </li>
   </ol>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.574.1">
     Note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.575.1">
     You should remove the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.576.1">
      packages
     </span>
    </strong>
    <span class="koboSpan" id="kobo.577.1">
     folder from the root
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.578.1">
      .gitignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.579.1">
     file created by Weasel to add the model package to DVC (DVC will create a new
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.580.1">
      .gitignore
     </span>
    </strong>
    <span class="koboSpan" id="kobo.581.1">
     file inside the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.582.1">
       model
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.583.1">
      folder).
     </span>
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.584.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.585.1">
      dvc add
     </span>
    </strong>
    <span class="koboSpan" id="kobo.586.1">
     command creates a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.587.1">
      .dvc
     </span>
    </strong>
    <span class="koboSpan" id="kobo.588.1">
     file for the artifact, and this artifact is then tracked
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.589.1">
      with Git.
     </span>
    </span>
   </p>
   <ol>
    <li value="6">
     <span class="koboSpan" id="kobo.590.1">
      Now we can create the command to add this model to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.591.1">
       Google Drive:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.592.1">
  - name: push_remote
    help: Push model to DVC remote storage
    script:
      - "dvc push packages/${vars.language}_${vars.name}-${vars.version}/dist/${vars.language}_${vars.name}-${vars.version}.tar.gz"
    deps:
      - "packages/${vars.language}_${vars.name}-${vars.version}/dist/${vars.language}_${vars.name}-${vars.version}.tar.gz"</span></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.593.1">
       We can also run it
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.594.1">
        with Weasel:
       </span>
      </span>
     </p>
     <pre class="source-code"><strong class="bold"><span class="koboSpan" id="kobo.595.1">python3 -m weasel run push_remote</span></strong></pre>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.596.1">
     The command will
    </span>
    <a id="_idIndexMarker473">
    </a>
    <span class="koboSpan" id="kobo.597.1">
     open the browser so we can authenticate with Google Drive.
    </span>
    <span class="koboSpan" id="kobo.597.2">
     Now we are finally ready to create the command that adds the model to the DVC Studio model registry.
    </span>
    <span class="koboSpan" id="kobo.597.3">
     To do that, we will create a new Python script.
    </span>
    <span class="koboSpan" id="kobo.597.4">
     Let’s
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.598.1">
      do it:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.599.1">
      First, we import
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.600.1">
       the libraries:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.601.1">
import typer
from dvclive import Live</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.602.1">
      Now, we create a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.603.1">
       main()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.604.1">
      function with the context manager block for the DVCLive logger and use the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.605.1">
       log_artifact()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.606.1">
      method to add
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.607.1">
       the model:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.608.1">
def main(model: str, description: str, labels: str): 
    with Live() as live: 
        live.log_artifact( 
            str(model), 
            type="model", 
            name="model" 
        )</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.609.1">
      Finally, we add
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.610.1">
       typer.run(main)
      </span>
     </strong>
     <span class="koboSpan" id="kobo.611.1">
      to handle the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.612.1">
       command-line arguments:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.613.1">
if __name__ == "__main__":
  typer.run(main)</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.614.1">
      We can save this script as
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.615.1">
       scripts/add_model_registry.py
      </span>
     </strong>
     <span class="koboSpan" id="kobo.616.1">
      .
     </span>
     <span class="koboSpan" id="kobo.616.2">
      Now, we can create
     </span>
     <a id="_idIndexMarker474">
     </a>
     <span class="koboSpan" id="kobo.617.1">
      the command to run
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.618.1">
       this script:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.619.1">
- name: add_to_model_registry
    help: Add model to DVC Studio Model Registry
    script:
      - "python scripts/add_to_model_registry.py packages/${vars.language}_${vars.name}-${vars.version}/dist/${vars.language}_${vars.name}-${vars.version}.tar.gz ${vars.name}"
    deps:
      - "scripts/add_to_model_registry.py"
      - "packages/${vars.language}_${vars.name}-${vars.version}/dist/${vars.language}_${vars.name}-${vars.version}.tar.gz"</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.620.1">
      We should now commit the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.621.1">
       dvc.yaml
      </span>
     </strong>
     <span class="koboSpan" id="kobo.622.1">
      file that
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.623.1">
       was created:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.624.1">
git add dvc.yaml
git commit -m "feat: adding model using dvclive"
git push</span></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.625.1">
       Now you should go to
      </span>
      <a href="https://studio.iterative.ai/">
       <span class="koboSpan" id="kobo.626.1">
        https://studio.iterative.ai/
       </span>
      </a>
      <span class="koboSpan" id="kobo.627.1">
       , connect with GitHub/GitLab/Bitbucket and import your Git repo.
      </span>
      <span class="koboSpan" id="kobo.627.2">
       After doing that, you can click on the
      </span>
      <strong class="bold">
       <span class="koboSpan" id="kobo.628.1">
        Models
       </span>
      </strong>
      <span class="koboSpan" id="kobo.629.1">
       menu and see the model there.
      </span>
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.630.1">
         Figure 9
        </span>
       </em>
      </span>
      <em class="italic">
       <span class="koboSpan" id="kobo.631.1">
        .6
       </span>
      </em>
      <span class="koboSpan" id="kobo.632.1">
       shows
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.633.1">
        this interface.
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer103">
     <span class="koboSpan" id="kobo.634.1">
      <img alt="Figure 9.6 – DVC Studio Models" src="image/B22441_09_6.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.635.1">
     Figure 9.6 – DVC Studio Models
    </span>
   </p>
   <ol>
    <li value="6">
     <span class="koboSpan" id="kobo.636.1">
      The next step is to register the model.
     </span>
     <span class="koboSpan" id="kobo.636.2">
      Click on the model’s name to see the options
     </span>
     <a id="_idIndexMarker475">
     </a>
     <span class="koboSpan" id="kobo.637.1">
      displayed in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.638.1">
        Figure 9
       </span>
      </em>
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.639.1">
        .7
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.640.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer104">
     <span class="koboSpan" id="kobo.641.1">
      <img alt="Figure 9.7 – DVC Studio model options" src="image/B22441_09_7.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.642.1">
     Figure 9.7 – DVC Studio model options
    </span>
   </p>
   <ol>
    <li value="7">
     <span class="koboSpan" id="kobo.643.1">
      Now, click on the blue
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.644.1">
       Register first version
      </span>
     </strong>
     <span class="koboSpan" id="kobo.645.1">
      button to choose a specific commit in our model development history and attach a version to it to make it easier to keep track of it.
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.646.1">
        Figure 9
       </span>
      </em>
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.647.1">
       .8
      </span>
     </em>
     <span class="koboSpan" id="kobo.648.1">
      shows the register
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.649.1">
       model popup.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer105">
     <span class="koboSpan" id="kobo.650.1">
      <img alt="Figure 9.8 – The DVC Studio register model options" src="image/B22441_09_8.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.651.1">
     Figure 9.8 – The DVC Studio register model options
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.652.1">
     The model is now
    </span>
    <a id="_idIndexMarker476">
    </a>
    <span class="koboSpan" id="kobo.653.1">
     registered, and we can download it or assign it to life cycle stages.
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.654.1">
       Figure 9
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.655.1">
      .9
     </span>
    </em>
    <span class="koboSpan" id="kobo.656.1">
     shows
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.657.1">
      those options.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer106">
     <span class="koboSpan" id="kobo.658.1">
      <img alt="Figure 9.9 – Ways to access the model with DVC Studio" src="image/B22441_09_9.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.659.1">
     Figure 9.9 – Ways to access the model with DVC Studio
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.660.1">
     When the model is assigned to a stage, it can automatically trigger actions in your CI/CD workflows, such
    </span>
    <a id="_idIndexMarker477">
    </a>
    <span class="koboSpan" id="kobo.661.1">
     as deploying the model to a new environment.
    </span>
    <span class="koboSpan" id="kobo.661.2">
     You can learn more about that in the DVC
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.662.1">
      documentation:
     </span>
    </span>
    <a href="https://dvc.org/doc/start/model-registry/model-cicd">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.663.1">
       https://dvc.org/doc/start/model-registry/model-cicd
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.664.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-134">
    <a id="_idTextAnchor133">
    </a>
    <span class="koboSpan" id="kobo.665.1">
     Summary
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.666.1">
     In this chapter, you learned how to manage spaCy projects with Weasel.
    </span>
    <span class="koboSpan" id="kobo.666.2">
     First, you cloned a project template from spaCy’s repository and ran it on your machine.
    </span>
    <span class="koboSpan" id="kobo.666.3">
     Then, you used this same project structure to train a model for a dataset.
    </span>
    <span class="koboSpan" id="kobo.666.4">
     After that, you saw how GitOps can address some data science and ML challenges and used DVC to register the model we’ve trained to share it with teammates or add a deploy setting to it.
    </span>
    <span class="koboSpan" id="kobo.666.5">
     The goal of this chapter was to teach you how to manage NLP projects in a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.667.1">
      production setting.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.668.1">
     In the next chapter, we will explore how to train a model for coreference resolution.
    </span>
    <span class="koboSpan" id="kobo.668.2">
     This will involve understanding what coreference resolution is, why it is important in NLP, and how to implement it
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.669.1">
      using spaCy.
     </span>
    </span>
   </p>
  </div>
 </body></html>