["```py\n    AZURE_COGS_KEY = \"your-api-key\"\n    AZURE_COGS_ENDPOINT = \"your-endpoint\n    AZURE_COGS_REGION = \"your-region\" \n    ```", "```py\n    import os\n    from dotenv import load_dotenv\n    load_dotenv()\n    azure_cogs_key = os.environ[\"AZURE_COGS_KEY\"]\n    azure_cogs_endpoint = os.environ[\"AZURE_COGS_ENDPOINT\"]\n    azure_cogs_region = os.environ[\"AZURE_COGS_REGION\"]\n    openai_api_key = os.environ['OPENAI_API_KEY'] \n    ```", "```py\n    from langchain.agents.agent_toolkits import AzureCognitiveServicesToolkit\n    toolkit = AzureCognitiveServicesToolkit()\n    [(tool.name, tool.description) for tool in toolkit.get_tools()] \n    ```", "```py\n[('azure_cognitive_services_form_recognizer',\n  'A wrapper around Azure Cognitive Services Form Recognizer. Useful for when you need to extract text, tables, and key-value pairs from documents. Input should be a url to a document.'),\n ('azure_cognitive_services_speech2text',\n  'A wrapper around Azure Cognitive Services Speech2Text. Useful for when you need to transcribe audio to text. Input should be a url to an audio file.'),\n ('azure_cognitive_services_text2speech',\n  'A wrapper around Azure Cognitive Services Text2Speech. Useful for when you need to convert text to speech. '),\n ('azure_cognitive_services_image_analysis',\n  'A wrapper around Azure Cognitive Services Image Analysis. Useful for when you need to analyze images. Input should be a url to an image.')] \n```", "```py\n    from langchain.agents import initialize_agent, AgentType\n    from langchain import OpenAI\n    llm = OpenAI()\n    Model = ChatOpenAI()\n    agent = initialize_agent(\n        tools=toolkit.get_tools(),\n        llm=llm,\n        agent=AgentType.STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION,\n        verbose=True,\n    ) \n    ```", "```py\ndescription = agent.run(\"what shows the following image?:\"\n\"https://www.stylo24.it/wp-content/uploads/2020/03/fionda.jpg\")\nprint(description) \n```", "```py\n> Entering new AgentExecutor chain...\nAction:\n```", "```py\nObservation: Caption: a person holding a slingshot\nTags: person, tool, nail, hand, holding, needle\nThought: I know what the image is.\nAction:\n```", "```py\n> Finished chain.\nThe image is of a person holding a slingshot. \n```", "```py\nagent.run(\"what happens if the person lets the slingshot go?:\"\n\"https://www.stylo24.it/wp-content/uploads/2020/03/fionda.jpg\") \n```", "```py\n> Entering new AgentExecutor chain...\nAction:\n```", "```py\nObservation: Caption: a person holding a slingshot\nTags: person, tool, nail, hand, holding, needle\nThought: I know what to respond\nAction:\n```", "```py\n> Finished chain.\n'If the person lets go of the slingshot, the object being launched by it would be released and propelled forward by the tension of the stretched rubber bands.' \n```", "```py\nagent.run(\"Tell me a story related to the following picture and read the story aloud to me: https://i.redd.it/diawvlriobq11.jpg\") \n```", "```py\nThought:The human requested a story related to the picture. I will use the Azure Cognitive Services Image Analysis tool to analyze the picture and come up with a story.\nAction:\n```", "```py\nObservation: Caption: a dog standing on a snowy hill\nObjects: dog\nTags: outdoor, animal, mammal, snow, freezing, dog breed, dog, mountain, covered, winter\nThought:Based on the Azure Cognitive Services Image Analysis tool's analysis of the picture, I will come up with a story involving a dog in a snowy winter wonderland.\nAction:\n```", "```py\nObservation: C:\\Users\\vaalt\\AppData\\Local\\Temp\\tmp_cecwqht.wav\nThought:The story involving a dog in a snowy winter wonderland seems to have satisfied the human's request for a story related to the picture. I will finalize the response by providing a closing statement.\nAction:\n```", "```py \n```", "```py\nfrom IPython import display\naudio = agent.run(\"Tell me a story related to the following picture and read the story aloud to me: https://i.redd.it/diawvlriobq11.jpg\")\ndisplay.display(audio) \n```", "```py\nprint(agent.agent.llm_chain.prompt.messages[0].prompt.template) \n```", "```py\nRespond to the human as helpfully and accurately as possible. You have access to the following tools:\n{tools}\nUse a json blob to specify a tool by providing an action key (tool name) and an action_input key (tool input).\nValid \"action\" values: \"Final Answer\" or youtube_search, CustomeYTTranscribe\nProvide only ONE action per $JSON_BLOB, as shown:\n```", "```py\nFollow this format:\nQuestion: input question to answer\nThought: consider previous and subsequent steps\nAction:\n```", "```py\nBegin! Reminder to ALWAYS respond with a valid json blob of a single action. Use tools if necessary. Respond directly if appropriate. Format is Action:```", "```pythen Observation:.\nThought: \n```", "```py\nPREFIX = \"\"\"\nYou are a story teller for children. \nYou read aloud stories based on pictures that the user pass you.\n You always start your story with a welcome message targeting children, with the goal of make them laugh.\n You can use multiple tools to answer the question.\n ALWAYS use the tools.\n You have access to the following tools:\"\"\"\nagent = initialize_agent(toolkit.get_tools(), model, agent=AgentType.STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION, verbose = True,\n                         agent_kwargs={\n                            'prefix':PREFIX}) \n```", "```py\n    toolkit = AzureCognitiveServicesToolkit().get_tools()\n    #those tools are at the first and third position in the list\n    tools = [toolkit[0], toolkit[2]]\n    tools \n    ```", "```py\n[AzureCogsFormRecognizerTool(name='azure_cognitive_services_form_recognizer', description='A wrapper around Azure Cognitive Services Form Recognizer. Useful for when you need to extract text, tables, and key-value pairs from documents. Input should be a url to a document.', args_schema=None, return_direct=False, verbose=False, callbacks=None, callback_manager=None, tags=None, metadata=None, handle_tool_error=False, azure_cogs_key='', azure_cogs_endpoint='', doc_analysis_client=<azure.ai.formrecognizer._document_analysis_client.DocumentAnalysisClient object at 0x000001FEA6B80AC0>), AzureCogsText2SpeechTool(name='azure_cognitive_services_text2speech', description='A wrapper around Azure Cognitive Services Text2Speech. Useful for when you need to convert text to speech. ', args_schema=None, return_direct=False, verbose=False, callbacks=None, callback_manager=None, tags=None, metadata=None, handle_tool_error=False, azure_cogs_key='', azure_cogs_region='', speech_language='en-US', speech_config=<azure.cognitiveservices.speech.SpeechConfig object at 0x000001FEAF932CE0>)] \n```", "```py\n    agent.run(\"what are all men's skus?\"\n    \"https://www.whiteelysee.fr/design/wp-content/uploads/2022/01/custom-t-shirt-order-form-template-free.jpg\") \n    ```", "```py\n> Entering new AgentExecutor chain...\nAction:\n```", "```py\nObservation: Content: PURCHASE ORDER TEMPLATE […]\n> Finished chain.\n\"The men's skus are B222 and D444.\" \n```", "```py\n    agent.run(\"give me the following information about the invoice: women's SKUs, shipping address and delivery date.\"\n    \"https://www.whiteelysee.fr/design/wp-content/uploads/2022/01/custom-t-shirt-order-form-template-free.jpg\") \n    ```", "```py\n\"The women's SKUs are A111 Women's Tall - M. The shipping address is Company Name 123 Main Street Hamilton, OH 44416 (321) 456-7890\\. The delivery date is not mentioned in the invoice.\" \n```", "```py\n    agent.run(\"extract women's SKUs in the following invoice, then read it aloud:\"\n    \"https://www.whiteelysee.fr/design/wp-content/uploads/2022/01/custom-t-shirt-order-form-template-free.jpg\") \n    ```", "```py\n    PREFIX = \"\"\"\n    You are an AI assistant that help users to interact with invoices.\n    You extract information from invoices and read it aloud to users.\n    You can use multiple tools to answer the question.\n    Always divide your response in 2 steps:\n    1\\. Extracting the information from the invoice upon user's request\n    2\\. Converting the transcript of the previous point into an audio file\n    ALWAYS use the tools.\n    ALWAYS return an audio file using the proper tool.\n    You have access to the following tools:\n    \"\"\"\n    agent = initialize_agent(tools, model, agent=AgentType.STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION, verbose = True,\n                             agent_kwargs={\n                                'prefix':PREFIX}) \n    ```", "```py\n    agent.run(\"what are women's SKUs in the following invoice?:\"\n    \"https://www.whiteelysee.fr/design/wp-content/uploads/2022/01/custom-t-shirt-order-form-template-free.jpg\") \n    ```", "```py\n> Entering new AgentExecutor chain...\nI will need to use the azure_cognitive_services_form_recognizer tool to extract the information from the invoice.\nAction:\n```", "```py\nObservation: Content: PURCHASE ORDER TEMPLATE […]\nObservation: C:\\Users\\vaalt\\AppData\\Local\\Temp\\tmpx1n4obf3.wav\nThought:Now that I have provided the answer, I will wait for further inquiries. \n```", "```py\n    from langchain.tools import YouTubeSearchTool\n    tool = YouTubeSearchTool()\n    result = tool.run(\"Avatar: The Way of Water,1\")\n    result: \n    ```", "```py\n\"['/watch?v=d9MyW72ELq0&pp=ygUYQXZhdGFyOiBUaGUgV2F5IG9mIFdhdGVy']\" \n```", "```py\nimport openai\naudio_file = open(\"Avatar The Way of Water  Official Trailer.mp4\", 'rb')\nresult = openai.Audio.transcribe(\"whisper-1\", audio_file)\naudio_file.close()\nprint(result.text) \n```", "```py\n♪ Dad, I know you think I'm crazy. But I feel her. I hear her heartbeat. She's so close. ♪ So what does her heartbeat sound like? ♪ Mighty. ♪ We cannot let you bring your war here. Outcast, that's all I see. I see you. ♪ The way of water connects all things. Before your birth. And after your death. This is our home! I need you with me. And I need you to be strong. ♪ Strongheart. ♪ \n```", "```py\nllm = OpenAI(temperature=0)\ntools = []\ntools.append(YouTubeSearchTool())\ntools.append(CustomYTTranscribeTool())\nagent = initialize_agent(tools, llm, agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION, verbose=True)\nagent.run(\"search a video trailer of Avatar: the way of water. Return only 1 video. transcribe the youtube video and return the transcription.\" \n```", "```py\n> Entering new AgentExecutor chain...\nI need to find a specific video and transcribe it.\nAction: youtube_search\nAction Input: \"Avatar: the way of water,1\"\nObservation: ['/watch?v=d9MyW72ELq0&pp=ygUYQXZhdGFyOiB0aGUgd2F5IG9mIHdhdGVy']\nThought:I found the video I was looking for, now I need to transcribe it.\nAction: CustomeYTTranscribe\nAction Input: […]\nObservation: ♪ Dad, I know you think I'm crazy. […]\nThought:I have the transcription of the video trailer for Avatar: the way of water.\nFinal Answer: The transcription of the video trailer for Avatar: the way of water is: \"♪ Dad, I know you think I'm crazy. […]\n> Finished chain. \n```", "```py\nfrom langchain.agents import load_tools\nfrom langchain.agents import initialize_agent\ntools = load_tools(['dalle-image-generator'])\nagent = initialize_agent(tools, model, AgentType.ZERO_SHOT_REACT_DESCRIPTION, verbose=True)\nagent.run(\"Create an image of a halloween night. Return only the image url.\") \n```", "```py\n> Entering new AgentExecutor chain...\nI need to use an image generator to create an image of a halloween night.\nAction: Dall-E Image Generator\nAction Input: \"An image of a spooky halloween night with a full moon, bats flying in the sky, and a haunted house in the background.\"\nObservation: [link_to_the_blob]\nThought:I have successfully generated an image of a halloween night.\nFinal Answer: The image url is [link_to_the_blob]\n> Finished chain. \n```", "```py\nagent.run(\"search a video trailer of Avatar: the way of water. Return only 1 video. transcribe the youtube video and return a review of the trailer.\") \n```", "```py\n> Entering new AgentExecutor chain...\nI need to use both youtube_search and CustomeYTTranscribe tools to answer this question.\nAction: youtube_search\nAction Input: \"Avatar: the way of water,1\"\nObservation: ['/watch?v=d9MyW72ELq0&pp=ygUYQXZhdGFyOiB0aGUgd2F5IG9mIHdhdGVy']\nThought:I found the video I need to transcribe.\nAction: CustomeYTTranscribe\nAction Input: […]\nObservation: ♪ Dad, I know you think I'm crazy. […]\nThought:I need to write a review of the trailer.\nAction: Write a review\nAction Input: \"Avatar: The Way of Water trailer is visually stunning and captivating. The trailer gives a glimpse into the world of Pandora and the connection between the Na'vi and the way of water. The music and sound effects add to the overall immersive experience. The trailer leaves the audience wanting more and eagerly anticipating the release of the movie.\"\nObservation: Write a review is not a valid tool, try one of [youtube_search, CustomeYTTranscribe].\nThought:I need to use a different tool to write a review.\nAction: Write a review\nAction Input: N/A\nObservation: Write a review is not a valid tool, try one of [youtube_search, CustomeYTTranscribe].\n...\nThought:I can write the review manually.\nFinal Answer: Avatar: The Way of Water trailer is visually stunning and captivating. The trailer gives a glimpse into the world of Pandora and the connection between the Na'vi and the way of water. The music and sound effects add to the overall immersive experience. The trailer leaves the audience wanting more and eagerly anticipating the release of the movie.\n> Finished chain. \n```", "```py\n    tools = []\n    tools.append(YouTubeSearchTool())\n    tools.append(CustomYTTranscribeTool())\n    tools.append(load_tools(['dalle-image-generator'])[0])\n    [tool.name for tool in tools] \n    ```", "```py\n['youtube_search', 'CustomeYTTranscribe', 'Dall-E Image Generator'] \n```", "```py\n    agent = initialize_agent(tools, model, AgentType.ZERO_SHOT_REACT_DESCRIPTION, verbose=True)\n    agent.run(\"search a video trailer of Avatar: the way of water. Return only 1 video. transcribe the youtube video and return a review of the trailer. Generate an image based on the video transcription\") \n    ```", "```py\n> Entering new AgentExecutor chain...\nI need to search for a video trailer of \"Avatar: The Way of Water\" and transcribe it to generate a review. Then, I can use the transcription to generate an image based on the video content.\nAction: youtube_search\nAction Input: \"Avatar: The Way of Water trailer,1\"\nObservation: ['/watch?v=d9MyW72ELq0&pp=ygUgQXZhdGFyOiBUaGUgV2F5IG9mIFdhdGVyIHRyYWlsZXI%3D']\nThought:I found a video trailer of \"Avatar: The Way of Water\" with the given search query. Now I need to transcribe the video and generate a review.\nAction: CustomeYTTranscribe\nAction Input: '/watch?v=d9MyW72ELq0&pp=ygUgQXZhdGFyOiBUaGUgV2F5IG9mIFdhdGVyIHRyYWlsZXI%3D'[YTTRANSCIBE***], […]\nObservation: ♪ Dad, I know you think I'm crazy. […]\nThought:I have transcribed the video and now I can generate a review based on the transcription. Additionally, I can use the transcription to generate an image.\nAction: Dall-E Image Generator\nAction Input: \"Review of Avatar: The Way of Water trailer: The trailer for Avatar: The Way of Water is captivating and mysterious. It starts with a dialogue between a father and his son, discussing a connection to someone or something. The visuals are stunning, showcasing breathtaking landscapes and vibrant underwater scenes. The trailer hints at an impending war and the protagonist's role as an outcast. The theme of water and its connection to all things is also emphasized. Overall, the trailer leaves the viewer excited and intrigued about the upcoming movie.\"\nObservation: [image_url]\nThought:I have generated a review of the \"Avatar: The Way of Water\" trailer based on the transcription of the video. Additionally, I have generated an image based on the review. Now I can provide the final answer.\nFinal Answer: The \"Avatar: The Way of Water\" trailer is captivating and mysterious, featuring stunning visuals of landscapes and underwater scenes. It hints at an impending war and explores the theme of water and its connection to all things. The trailer leaves viewers excited and intrigued about the upcoming movie.\n> Finished chain. \n```", "```py\n    PREFIX = \"\"\"\n    You are an expert reviewer of movie trailer.\n    You adapt the style of the review depending on the channel the user want to use, namely Instagram, LinkedIn, Facebook.\n    You can use multiple tools to answer the question.\n    ALWAYS search for the youtube video related to the trailer. Search ONLY 1 video.\n    ALWAYS transcribe the youtube trailer and use it to generate the review.\n    ALWAYS generate an image alongside the review, based on the transcription of the trailer.\n    ALWAYS use all the available tools for the various steps.\n    You have access to the following tools:\n    \"\"\"\n    agent = initialize_agent(tools, model, agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION, verbose = True,\n                             agent_kwargs={\n                                'prefix':PREFIX})\n    agent.run(\"Generate a review of the trailer of Avatar: The Way of Water. I want to publish it on Instagram.\") \n    ```", "```py\n> Entering new AgentExecutor chain...\nTo generate a review for Instagram, I will need to search for the trailer of \"Avatar: The Way of Water\" on YouTube and transcribe it. I will also need to generate an image based on the transcription. Let's start by searching for the YouTube video.\nAction: youtube_search\nAction Input: \"Avatar: The Way of Water trailer\", 1\nObservation: ['/watch?v=d9MyW72ELq0&pp=ygUhQXZhdGFyOiBUaGUgV2F5IG9mIFdhdGVyIHRyYWlsZXIi']\nThought:I have found a YouTube video of the \"Avatar: The Way of Water\" trailer. Now I will transcribe it and generate an image based on the transcription.\nAction: CustomeYTTranscribe\nAction Input: '/watch?v=d9MyW72ELq0&pp=ygUhQXZhdGFyOiBUaGUgV2F5IG9mIFdhdGVyIHRyYWlsZXIi'[YTTRANSCIBE***],[…]\nObservation: ♪ Dad, I know you think I'm crazy.[…]\nAction: Dall-E Image Generator\nAction Input: \"A scene from the movie 'Avatar: The Way of Water' with the text 'The Way of Water connects all things. This is our home!'\"\nObservation: [image_url]\nThought:I have generated an image for the Instagram review of the trailer of \"Avatar: The Way of Water\". Now I can write the review.\nFinal Answer: \"Avatar: The Way of Water\" is an upcoming movie that promises to take us on a breathtaking journey. The trailer captivated me with its stunning visuals and powerful storytelling. The tagline \"The Way of Water connects all things. This is our home!\" resonated with me, highlighting the movie's theme of unity and the importance of preserving our planet. I can't wait to dive into this immersive cinematic experience. #AvatarTheWayOfWater #MovieReview #ComingSoon\n> Finished chain. \n```", "```py\n    from langchain.chains import SequentialChain, LLMChain\n    from langchain.prompts import PromptTemplate\n    story_template = \"\"\"You are a storyteller. Given a topic, a genre and a target audience, you generate a story.\n    Topic: {topic}\n    Genre: {genre}\n    Audience: {audience}\n    Story: This is a story about the above topic, with the above genre and for the above audience:\"\"\"\n    story_prompt_template = PromptTemplate(input_variables=[\"topic\", \"genre\", \"audience\"], template=story_template)\n    story_chain = LLMChain(llm=llm, prompt=story_prompt_template, output_key=\"story\")\n    result = story_chain({'topic': 'friendship story','genre':'adventure', 'audience': 'young adults'})\n    print(result['story']) \n    ```", "```py\nJohn and Sarah had been best friends since they were kids. They had grown up together, shared secrets, and been through thick and thin.[…] \n```", "```py\n    template = \"\"\"You are an influencer that, given a story, generate a social media post to promote the story.\n    The style should reflect the type of social media used.\n    Story:\n    {story}\n    Social media: {social}\n    Review from a New York Times play critic of the above play:\"\"\"\n    prompt_template = PromptTemplate(input_variables=[\"story\", \"social\"], template=template)\n    social_chain = LLMChain(llm=llm, prompt=prompt_template, output_key='post')\n    post = social_chain({'story': result['story'], 'social': 'Instagram'})\n    print(post['post']) \n    ```", "```py\n\"John and Sarah's journey of discovery and friendship is a must-see! From the magical world they explore to the obstacles they overcome, this play is sure to leave you with a newfound appreciation for the power of friendship. #FriendshipGoals #AdventureAwaits #MagicalWorlds\" \n```", "```py\n    from langchain.utilities.dalle_image_generator import DallEAPIWrapper\n    from langchain.llms import OpenAI\n    template = \"\"\"Generate a detailed prompt to generate an image based on the following social media post:\n    Social media post:\n    {post}\n    \"\"\"\n    prompt = PromptTemplate(\n        input_variables=[\"post\"],\n        template=template,\n    )\n    image_chain = LLMChain(llm=llm, prompt=prompt, output_key='image') \n    ```", "```py\n    from langchain.utilities.dalle_image_generator import DallEAPIWrapper\n    image_url = DallEAPIWrapper().run(image_chain.run(\"a cartoon-style cat playing piano\"))\n    import cv2\n    from skimage import io\n    image = io.imread(image_url)\n    cv2.imshow('image', image)\n    cv2.waitKey(0)  \n    cv2.destroyAllWindows() \n    ```", "```py\n    overall_chain = SequentialChain(input_variables = ['topic', 'genre', 'audience', 'social'],\n                    chains=[story_chain, social_chain, image_chain],\n                    output_variables = ['post', 'image'], verbose=True)\n    overall_chain({'topic': 'friendship story','genre':'adventure', 'audience': 'young adults', 'social': 'Instagram'}, return_only_outputs=True) \n    ```", "```py\n{'post': '\\n\\n\"John and Sarah\\'s journey of discovery and friendship is a must-see! […],\n'image': '\\nPrompt:\\n\\nCreate a digital drawing of John and Sarah standing side-by-side,[…]'} \n```", "```py\n    st.set_page_config(page_title=\"StoryScribe\", page_icon=\"![](img/Book.png)\")\n    st.header('![](img/Book.png) Welcome to StoryScribe, your story generator and promoter!')\n    load_dotenv()\n    openai_api_key = os.environ['OPENAI_API_KEY'] \n    ```", "```py\n    topic = st.sidebar.text_input(\"What is topic?\", 'A dog running on the beach')\n    genre = st.sidebar.text_input(\"What is the genre?\", 'Drama')\n    audience = st.sidebar.text_input(\"What is your audience?\", 'Young adult')\n    social = st.sidebar.text_input(\"What is your social?\", 'Instagram') \n    ```", "```py\n    story_chain = LLMChain(llm=llm, prompt=story_prompt_template, output_key=\"story\")\n    social_chain = LLMChain(llm=llm, prompt=social_prompt_template, output_key='post')\n    image_chain = LLMChain(llm=llm, prompt=prompt, output_key='image')\n    overall_chain = SequentialChain(input_variables = ['topic', 'genre', 'audience', 'social'],\n                    chains=[story_chain, social_chain, image_chain],\n                    output_variables = ['story','post', 'image'], verbose=True) \n    ```", "```py\n    if st.button('Create your post!'):\n        result = overall_chain({'topic': topic,'genre':genre, 'audience': audience, 'social': social}, return_only_outputs=True)\n        image_url = DallEAPIWrapper().run(result['image'])\n        st.subheader('Story')\n        st.write(result['story'])\n        st.subheader('Social Media Post')\n        st.write(result['post'])\n        st.image(image_url) \n    ```"]