<html><head></head><body><div id="sbo-rt-content"><div id="_idContainer118">
			<h1 id="_idParaDest-99"><em class="italic"><a id="_idTextAnchor096"/>Chapter 6</em>: Building Robot Basics – Wheels, Power, and Wiring</h1>
			<p>In this chapter, we will start building the robot. We will choose a robot chassis kit with wheels and motors, a motor controller, and some power for the robot, talking through the trade-offs and things to avoid. We'll see how to ensure that everything fits and then build the robot. By the end of the chapter, you will have your basic robot structure ready.</p>
			<p>Getting the trade-offs and plan right now gives you a robot you can build upon and experiment with, ensuring you know components are suitable before buying them.</p>
			<p>In this chapter, you will learn about the following:</p>
			<ul>
				<li>Choosing a robot chassis kit</li>
				<li>Choosing a motor controller board</li>
				<li>Powering the robot</li>
				<li>Test fitting the robot</li>
				<li>Assembling the base</li>
				<li>Connecting the motors to the Raspberry Pi</li>
			</ul>
			<h1 id="_idParaDest-100"><a id="_idTextAnchor097"/>Technical requirements</h1>
			<p>For this chapter, you will require the following:</p>
			<ul>
				<li>A computer with access to the internet.</li>
				<li>The Raspberry Pi and an SD card.</li>
				<li>A set of screwdrivers: M2.5, M3 Phillips, and some jeweler's screwdrivers.</li>
				<li>A pair of long-nose pliers. Optionally, a set of miniature metric spanners.</li>
				<li>Some electrical tape.</li>
				<li>Hook and loop or Velcro tape.</li>
				<li>Drawing software such as <a href="http://app.diagrams.net">app.diagrams.net</a>, Inkscape, Visio, or similar software.</li>
				<li>Nylon standoff kits for M2.5 and M3 threads. </li>
				<li>Some insulation tape.</li>
				<li>Four AA batteries, charged.<p class="callout-heading">Important note</p><p class="callout">You will be choosing and purchasing a chassis, motor controller, and battery compartment in this chapter, but do not buy them yet.</p></li>
			</ul>
			<p>Check out the following video to see the Code in Action: <a href="https://bit.ly/3oLofCg">https://bit.ly/3oLofCg</a></p>
			<h1 id="_idParaDest-101"><a id="_idTextAnchor098"/>Choosing a robot chassis kit</h1>
			<p>The chassis, like the <a id="_idIndexMarker229"/>controller, is a fundamental decision when making a robot. Although these can be self-made using 3D printing or toy hacking, the simplest place to start is with a chassis kit. These kits contain sets of parts to start your robot build. A chassis can be changed, but it would mean rebuilding the robot.</p>
			<p>The internet has plenty of chassis kits around – too many. So how do you choose one?</p>
			<h2 id="_idParaDest-102"><a id="_idTextAnchor099"/>Size</h2>
			<p>Getting the size of a <a id="_idIndexMarker230"/>robot right matters too. Make too small a robot and you will need miniaturization skills for electronics; too large and you will need far more serious power handling. These are both things to avoid for a beginner:</p>
			<div>
				<div id="_idContainer079" class="IMG---Figure">
					<img src="Images/B15660_06_01.jpg" alt="Figure 6.1 – Robot chassis sizes compared&#13;&#10;" width="1430" height="369"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.1 – Robot chassis sizes compared</p>
			<p>We can compare different <a id="_idIndexMarker231"/>robot sizes from the chassis photos in <em class="italic">Figure 6.1</em>:</p>
			<ul>
				<li><strong class="bold">Chassis 1</strong> has a diameter of 11 cm and just about fits a controller in but is too tiny. Being so small makes it hard to build your robot. Squeezing the controller, power, and all the sensors into this small space would need skill and experience beyond the scope of a first robot build.</li>
				<li><strong class="bold">Chassis 2</strong> is Armbot. This bigger robot is 33 cm by 30 cm wide, giving it lots of space and an arm reach of another 300 mm. It needs eight AA batteries, big motors, and a powerful motor controller. These add to the expense and may cause issues around power handling, weight, and rigidity for a new builder. Armbot is one of my most expensive robots, excluding the cost of the arm!</li>
				<li><strong class="bold">Chassis 3</strong> fits the Pi, batteries, and sensor, but without being large and bulky. It is around the right dimensions, being between 15-20 cm long and 10-15 cm wide. Those that have split levels might work for this, but no more than two levels, as three or four can make a robot top-heavy and cause it to topple. Chassis 3 has enough space and is relatively easy to build.</li>
			</ul>
			<p>Let's look at the wheel count next.</p>
			<h2 id="_idParaDest-103"><a id="_idTextAnchor100"/>Wheel count</h2>
			<p>Some <a id="_idIndexMarker232"/>chassis kits have elaborate movement methods – legs, tank tracks, Mecanum wheels, and tri-star wheels, to name a few. While these are fun and I encourage experimenting with them, this is not the place to start. I recommend thoroughly sensible and basic wheels on the your first robot.</p>
			<p>There are kits with four-wheel drive (shown in <em class="italic">Figure 6.2</em>) and six-wheel drive. These can be quite powerful and require larger motor controllers. They may also chew through batteries, and you are increasing the likelihood of overloading something. The additional motors can mean trickier wiring:</p>
			<div>
				<div id="_idContainer080" class="IMG---Figure">
					<img src="Images/B15660_06_02.jpg" alt="Figure 6.2 – Four-wheel drive robot&#13;&#10;" width="874" height="450"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.2 – Four-wheel drive robot</p>
			<p>Two-wheel <a id="_idIndexMarker233"/>drive is the simplest to wire in. It usually requires a third wheel for balance. The third wheel can be a castor wheel (shown in <em class="italic">Figure 6.3</em>), a rollerball, or just a Teflon sled for tiny robots. Two wheels are also the easiest to steer, avoiding some friction issues seen with robots using four or more wheels:</p>
			<div>
				<div id="_idContainer081" class="IMG---Figure">
					<img src="Images/B15660_06_03.jpg" alt=" Figure 6.3 – Two wheels with a castor&#13;&#10;" width="1273" height="380"/>
				</div>
			</div>
			<p class="figure-caption"> Figure 6.3 – Two wheels with a castor</p>
			<p>Two wheels won't have the pulling power of four- or six-wheel drive, but they are simple and work. They are also the least expensive.</p>
			<h2 id="_idParaDest-104"><a id="_idTextAnchor101"/>Wheels and motors</h2>
			<p>A kit for a <a id="_idIndexMarker234"/>beginner should come with the wheels and the motors. The <a id="_idIndexMarker235"/>wheels should have simple rubber tires. <em class="italic">Figure 6.4</em> shows a common style for inexpensive robot wheels. There are many kits with these in them:</p>
			<div>
				<div id="_idContainer082" class="IMG---Figure">
					<img src="Images/B15660_06_04.jpg" alt="Figure 6.4 – Common inexpensive robot wheels&#13;&#10;" width="1650" height="286"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.4 – Common inexpensive robot wheels</p>
			<p>The kit should also have two motors, one for each wheel, and include the screws or parts to mount them onto the chassis. I recommend DC gear motors, as the gearing keeps the speed usable while increasing the mechanical pushing power the robot has.</p>
			<p>Importantly, the motors should have the wires connected, like the first motor in <em class="italic">Figure 6.5</em>:</p>
			<div>
				<div id="_idContainer083" class="IMG---Figure">
					<img src="Images/B15660_06_05.jpg" alt="Figure 6.5 – Gear motors with and without wires&#13;&#10;" width="1370" height="360"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.5 – Gear motors with and without wires</p>
			<p>It is tricky to solder or attach these wires to the small tags on motors, and poorly attached ones have a frustrating habit of coming off. The kits you want to start with have these wires attached, as can be seen in <em class="italic">Figure 6.6</em>:</p>
			<div>
				<div id="_idContainer084" class="IMG---Figure">
					<img src="Images/B15660_06_06.jpg" alt="Figure 6.6 – Encoder wheel and slot close up&#13;&#10;" width="1544" height="346"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.6 – Encoder wheel and slot close up</p>
			<p>Where the <a id="_idIndexMarker236"/>motors are mounted, the <a id="_idIndexMarker237"/>kits should have some encoder wheels, and a slot to read them <a id="_idIndexMarker238"/>through. The encoder <a id="_idIndexMarker239"/>wheels are also known <a id="_idIndexMarker240"/>as odometry, tachometer, or tacho wheels.</p>
			<h2 id="_idParaDest-105"><a id="_idTextAnchor102"/>Simplicity</h2>
			<p>You don't want to <a id="_idIndexMarker241"/>use a complex or hard-to-assemble kit for your first robot build. I've repeated this throughout that with two-wheel drive, you want two motors with the wires soldered on. I steer clear of large robots, or unique and exciting locomotion systems, not because they are flawed, but because it's better to start simple. There is a limit to this, a robot kit that is a fully built and enclosed when bought leaves little room for learning or experimentation. An entirely premade robot may require toy hacking skills to customize.</p>
			<h2 id="_idParaDest-106"><a id="_idTextAnchor103"/>Cost</h2>
			<p>Related to simplicity <a id="_idIndexMarker242"/>is cost. You can buy robot chassis kits from around $15, up to thousands of dollars. Larger and more complex robots tend to be far more costly. For this book, I am aiming to keep to the less costly options or at least show where they are possible.</p>
			<h2 id="_idParaDest-107"><a id="_idTextAnchor104"/>Conclusion</h2>
			<p>So, now you can choose a chassis kit, with two wheels and a castor, two motors with wires soldered on them, slots, and <a id="_idIndexMarker243"/>encoder wheels. These laser-cut bases are not expensive, and are widely available on popular internet shopping sites as <em class="italic">Smart Car Chassis</em>, with terms like <em class="italic">2WD</em>:</p>
			<div>
				<div id="_idContainer085" class="IMG---Figure">
					<img src="Images/B15660_06_07.jpg" alt="Figure 6.7 – The robot kit I'm using&#13;&#10;" width="1040" height="465"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.7 – The robot kit I'm using</p>
			<p>The kit I'm working with looks like <em class="italic">Figure 6.7</em> when assembled without the Raspberry Pi.</p>
			<p>We've chosen a chassis kit. It is a medium-sized one that doesn't need large power handling. It has some space constraints but is not tiny. We can use these attributes to choose the motor controller.</p>
			<h1 id="_idParaDest-108"><a id="_idTextAnchor105"/>Choosing a motor controller board</h1>
			<p>The next important part <a id="_idIndexMarker244"/>you'll need is a motor controller. You cannot connect a Raspberry Pi directly to DC motors, as they require different voltages and high currents that would destroy GPIO pins. Motor controller boards can also add interfaces to other devices like sensors and other motor types.</p>
			<p>It is a vital robot component that will guide many later decisions. Much like the motors, there are some trade-offs and considerations before buying one:</p>
			<div>
				<div id="_idContainer086" class="IMG---Figure">
					<img src="Images/B15660_06_08.jpg" alt="Figure 6.8 – A selection of motor control boards&#13;&#10;" width="1286" height="406"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.8 – A selection of motor control boards</p>
			<p><em class="italic">Figure 6.8</em> shows a small <a id="_idIndexMarker245"/>sample group of motor controller boards. As we compare the requirements of our motor board, we refer to the boards pictured there as examples.</p>
			<h2 id="_idParaDest-109"><a id="_idTextAnchor106"/>Integration level</h2>
			<p>Motor controllers may <a id="_idIndexMarker246"/>only control a motor (usually 2) like the L298N, containing the barest minimum to run this chip safely. They are not designed to sit on a Raspberry Pi and must be wired into the Pi's I/O output.</p>
			<p>Controllers like the PiZMoto sit on top of the Raspberry Pi, reducing wiring. They still contain only a single circuit to control a motor. They also have pins to connect additional devices like a distance sensor and line sensor, which shift voltage levels, as we'll see later. This and the L298N require the Raspberry Pi to generate the PWM signal to move motors.</p>
			<p>At a higher level of integration is the Full Function Stepper HAT. It has a chip that specializes in PWM control and is capable of driving multiple servo motors along with DC motors. This HAT frees up Raspberry Pi I/O pins by using I2C.</p>
			<p>The PiConZero is the most integrated device here. It uses a microcontroller that is the equivalent of an Arduino to control DC motors and servo motors, to output to lights and take input from various sensors. It also uses I2C, reducing the number of pins needed.</p>
			<h2 id="_idParaDest-110"><a id="_idTextAnchor107"/>Pin usage</h2>
			<p>When buying a motor <a id="_idIndexMarker247"/>controller in Raspberry Pi HAT form, it's essential to consider which I/O pins are in use. Having boards that make use of the same pins for incompatible functions won't work.</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">Although a HAT plugs into all pins, this doesn't mean they are all used. Only a subset of the pins is usually actually connected on a HAT.</p>
			<p>To get an idea of how pins in different boards interact on the Raspberry Pi, take a look at <a href="https://pinout.xyz">https://pinout.xyz</a>, which lets <a id="_idIndexMarker248"/>you select Raspberry Pi boards and see the pin configuration for them.</p>
			<p>Using the L298N would require four I/O pins for the DC motors, and using sensors or servo motors with it requires further pins. The PIZMoto functions in a similar way to the L298N, requiring four I/O pins for DC motor control. The PiZMoto also assigns a pin for the line detector, two for distance sensing, two for LEDs, tying up a total of nine GPIO pins. The PiZMoto would also require additional support for servo motors.</p>
			<p>The PiConZero and Full Function Stepper HAT both use the I2C bus. Using the I2C or serial bus makes efficient use of pins, as they use only two pins for I2C. Multiple devices can share the I2C bus, so even the use of these pins is shared. The PiConZero assigns some other pins to functions like the Ultrasonic device. The Full Function Stepper HAT leaves all other pins free to use while supporting the DC motors and 5 servo motors from a single I2C connection, making it one of the most flexible control boards in the selection.</p>
			<h2 id="_idParaDest-111"><a id="_idTextAnchor108"/>Size</h2>
			<p>The <a id="_idIndexMarker249"/>choice of the motor controller size depends on the chassis and the size of the motors you have. In simple terms, the larger your chassis, the larger a controller you need. We specify the power handling capacity of a motor controller in amps. For a robot like the one shown in <em class="italic">Figure 6.7</em>, around 1 to 1.5 amps per channel is good.</p>
			<p>The consequence of too low a rating can range from a robot that barely moves up to catching fire. Too large a controller has consequences for space, weight, and cost. A heatsink is one way to keep a controller cool while handling current but makes the controller larger, as shown in <em class="italic">Figure 6.9</em>:</p>
			<div>
				<div id="_idContainer087" class="IMG---Figure">
					<img src="Images/B15660_06_09.jpg" alt="Figure 6.9 – An L298N with a heatsink&#13;&#10;" width="968" height="368"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.9 – An L298N with a heatsink</p>
			<p>The level of integration can also contribute to size. A tiny board that stacks on a Pi takes up less space than separate boards.</p>
			<p>Another size or shape consideration is whether the board restricts access to the Raspberry Pi camera port. Some boards, such as the Pimoroni Explorer HAT Pro, cover the camera slot <a id="_idIndexMarker250"/>entirely, making it tricky to use. Some boards have a slot for the camera port, like the Full Function Stepper HAT, and others are half-size hats (pHat) that don't cover the area, such as the PiConZero and PizMoto.</p>
			<p>As we are using the camera in this book, it is a requirement that the camera port is accessible, either through a slot or by being a half-size (PHat) board.</p>
			<h2 id="_idParaDest-112"><a id="_idTextAnchor109"/>Soldering</h2>
			<p>As you choose boards <a id="_idIndexMarker251"/>for a robot, note that some come as kits themselves, requiring you to solder parts on them. If you have experience with this, it may be an option, with a time cost. A small header is going to be a very quick and easy job. A board that comes as a bag of components with a bare board will take a chunk of an evening and could require debugging itself.</p>
			<p class="callout-heading">Tip</p>
			<p class="callout">Soldering is an essential <a id="_idIndexMarker252"/>skill for robot building but is not needed for a first robot, so for this book, I mostly recommend pre-assembled modules.</p>
			<h2 id="_idParaDest-113"><a id="_idTextAnchor110"/>Power input</h2>
			<p>Motors can require different voltages from <a id="_idIndexMarker253"/>the 5 V power supply the Raspberry Pi uses. They are also likely to consume a high current. We cover power supply choices later, but it is usually good to separate the power supply for the motor from the supply for the Raspberry Pi. All the boards in <em class="italic">Figure 6.8</em> have a separate motor power supply input.</p>
			<p>The PiConZero and L298N let the user power the Raspberry Pi from the motor supply, but this can lead to reset and dropout conditions. Some motor interface boards, such as the Adafruit Crickit and the Pimoroni Explorer HAT Pro use the same 5 V supply for the motors and the Raspberry Pi, requiring a high current capable 5 V supply. My recommendation is to ensure the motor board has a separate power input for motors.</p>
			<h2 id="_idParaDest-114"><a id="_idTextAnchor111"/>Connectors</h2>
			<p>Closely <a id="_idIndexMarker254"/>related to soldering and power input are the connectors for the motors and batteries. I tend to prefer the screw type connectors shown in <em class="italic">Figure 6.10</em>: </p>
			<div>
				<div id="_idContainer088" class="IMG---Figure">
					<img src="Images/B15660_06_10.jpg" alt="Figure 6.10 – Screw terminals for motor and battery connections&#13;&#10;" width="269" height="110"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.10 – Screw terminals for motor and battery connections</p>
			<p>Other types may require <a id="_idIndexMarker255"/>motors with special connectors, or a robot builder to have crimping skills.</p>
			<h2 id="_idParaDest-115"><a id="_idTextAnchor112"/>Conclusion</h2>
			<p>Our robot is <a id="_idIndexMarker256"/>space-constrained; for this reason, we use the Raspberry Pi HAT type form factor. We are also looking to keep the number of pins it uses low. An I2C-based HAT lets us do this. The <strong class="bold">Full Function Stepper Motor HAT</strong> is shown <a id="_idIndexMarker257"/>in <em class="italic">Figure 6.11</em>. It's also known as the Full Function Robot Expansion Board and gets us access to all the Pi pins while being a powerful motor controller:</p>
			<div>
				<div id="_idContainer089" class="IMG---Figure">
					<img src="Images/B15660_06_11.jpg" alt="Figure 6.11 – The Full Function Stepper Motor HAT&#13;&#10;" width="642" height="395"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.11 – The Full Function Stepper Motor HAT</p>
			<p>It's available in most countries, has space for the ribbon for the camera, and controls servo motors. I recommend <a id="_idIndexMarker258"/>this HAT for the robot in this book. Our code is directly compatible with boards based on the PCA9685 chip used on the Full Function board. With some minor changes in code and wiring, the 4tronix PiConZero would also be a suitable choice. </p>
			<h1 id="_idParaDest-116"><a id="_idTextAnchor113"/>Powering the robot</h1>
			<p>The robot needs power for <a id="_idIndexMarker259"/>all its parts. We must consider two major power systems: the power for all the digital parts, such as the Raspberry Pi and sensors, and then the power for the motors.</p>
			<p>Motors need a separate power system for a few reasons. First, they consume far more electrical power than most other components on the robot. They may require different voltages; I've seen low-voltage, high-current motor supplies and high-voltage supplies too. The other reason that they need their own power system is that they can cause interference. They can pull enough power that other circuitry has brownouts. A brownout is when circuitry has a voltage drop that is low or long enough to get into an inconsistent or reset state. Resets can lead to SD card corruption on a Pi. Motors can also introduce electrical noise to a power line as they are used, which could cause digital parts to misbehave.</p>
			<p>There are two primary strategies for powering a robot with motors:</p>
			<ul>
				<li><strong class="bold">Dual batteries</strong>: The motors and the <a id="_idIndexMarker260"/>rest of the robot have entirely separate sets of batteries, ensuring that their power is independent.</li>
				<li><strong class="bold">Battery eliminators</strong>: Use a single battery or <a id="_idIndexMarker261"/>are set with a BEC/regulator. A <strong class="bold">BEC</strong> is a <strong class="bold">battery eliminator circuit</strong>, shown <a id="_idIndexMarker262"/>in <em class="italic">Figure 6.12</em>: </li>
			</ul>
			<div>
				<div id="_idContainer090" class="IMG---Figure">
					<img src="Images/B15660_06_12.jpg" alt="Figure 6.12 – Picture of a BEC &#13;&#10;" width="1443" height="326"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.12 – Picture of a BEC </p>
			<p>Dual batteries are the surest option to avoid any brownout, loss of power, or interference issues. This option takes more space than a BEC. However, the dual power option, with a USB power bank for the Raspberry Pi (shown in <em class="italic">Figure 6.13</em>) is a simple and effective way to <a id="_idIndexMarker263"/>avoid power issues. Choose one with small outercase dimensions, but a high power-rating, such as 10,000 mAh, and an output of at least 2.1 A:</p>
			<div>
				<div id="_idContainer091" class="IMG---Figure">
					<img src="Images/B15660_06_13.jpg" alt="Figure 6.13 – The USB power bank from Armbot – slightly old and battered, but still effective&#13;&#10;" width="1328" height="385"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.13 – The USB power bank from Armbot – slightly old and battered, but still effective</p>
			<p>Check that the USB power bank comes with the cable to connect the Raspberry Pi – a Raspberry Pi 3 (A+ and B+) requires a USB micro connector, and the Raspberry Pi 4 requires a USB-C connector. Power bank outputs usually use a USB-A connector. If they are not included with the power bank, you will need to buy one of these cables too.</p>
			<p>Motor controller boards sometimes have power supplies to regulate power for a Pi from the motor power. These often have too low an output rating. They can be very inefficient, wasting a lot of battery power. Unless using very high current handling batteries, they are very likely to lead to brownouts.</p>
			<p>A battery eliminator circuit is lighter and takes up less space. Types include a BEC, uBEC, switching supply, or a regulator. Battery eliminators usually need high-power batteries such as Li-Ion types. By sharing a supply with motors, batteries need enough current capacity not to be vulnerable to the voltage drops that cause controller resets and line noise for the controller. This requirement affects switching power supply Pi SHIMs like the Wide Input SHIM and the power supplies built into some motor controllers.</p>
			<p>You need to ensure that <a id="_idIndexMarker264"/>the BEC output can handle at least 2.1 A, preferably more. It's common to see 3.4 A and 4.2 A power banks. UBECs with 5 A ratings are also reasonably common.</p>
			<p>To keep things simple in this robot, and not have to deal with reset issues, we use the dual battery approach and accept the cost in bulk and weight:</p>
			<div>
				<div id="_idContainer092" class="IMG---Figure">
					<img src="Images/B15660_06_14.jpg" alt="Figure 6.14 – The 4 x AA battery box we use with the motors&#13;&#10;" width="1263" height="453"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.14 – The 4 x AA battery box we use with the motors</p>
			<p>For the motors, 4 x AA batteries work. I recommend using nickel metal hydride rechargeable batteries for them. That is not just because you can recharge them, but also because they can deliver more current if needed than alkaline batteries. To save space, we use the <em class="italic">two up/two down</em> or <em class="italic">back to back</em> configuration, like the battery box shown in <em class="italic">Figure 6.14</em>.</p>
			<p>In conclusion, for our battery selection, we will use a 4 x AA metal hydride set for the motors and a USB power bank for the Raspberry Pi and logic.</p>
			<p>We have now made part selections. We know which chassis, controller, and battery configurations we will use. We have seen the size of the motors and wheels, and have, in previous chapters, selected a <a id="_idIndexMarker265"/>Raspberry Pi model to use. Before we go ahead and buy all this, we should make a further check to see that it will all fit. In the next section, let's learn about test fitting robot parts.</p>
			<h1 id="_idParaDest-117"><a id="_idTextAnchor114"/>Test fitting the robot</h1>
			<p>I recommend test <a id="_idIndexMarker266"/>fitting before actually ordering parts. The test fit helps a builder be more confident that components fit, and you'll know roughly where these parts go. This step saves you time and money later.</p>
			<p>You can use paper and a pen for test fitting, or an app such as <a href="http://diagrams.net">diagrams.net</a>. First, I find the dimensions for all the parts. <em class="italic">Figure 6.15</em> has a screenshot from Amazon showing how to spot product dimensions:</p>
			<div>
				<div id="_idContainer093" class="IMG---Figure">
					<img src="Images/B15660_06_15.jpg" alt="Figure 6.15 – Finding product specifications &#13;&#10;" width="1367" height="261"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.15 – Finding product specifications </p>
			<p>Some information-digging is needed to find these for your parts. For each, first find a shop you can buy them at, such as Amazon, several online shops, or eBay. You can then search for or ask for information about the dimensions of each board or item. Make sure you are looking at the dimensions of the part and not its packaging:</p>
			<div>
				<div id="_idContainer094" class="IMG---Figure">
					<img src="Images/B15660_06_16.jpg" alt="Figure 6.16 – A battery box product drawing with dimensions&#13;&#10;" width="763" height="310"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.16 – A battery box product drawing with dimensions</p>
			<p>You can find diagrams like the battery box in <em class="italic">Figure 6.16</em> by doing image searches on dimensions or part datasheets. In this case, the dimensions are in mm. The ± signs show the manufacturing variation of plus or minus the next number. When test fitting, err on the higher side, so take 57±1 as 58 mm for that dimension.</p>
			<p>So, the dimensions I have are as follows:</p>
			<ul>
				<li>The Raspberry Pi 3a+: 65 mm x 56 mm.</li>
				<li>The chassis: Mine suggests it is 100 mm x 200 mm. Be aware that the dimensions here are <a id="_idIndexMarker267"/>outer dimensions and include the wheels.</li>
				<li>The motor controller fits over the Pi, so it is counted here as the Pi. This controller makes things taller but is only really a concern for a multi-level robot chassis.</li>
				<li>The 4 x AA battery box: The type I suggested is 58 mm x 31.5 mm.</li>
				<li>The USB power bank: 60 mm x 90 mm.</li>
			</ul>
			<p>For this, drawing rectangles to scale is enough detail. In <a href="http://diagrams.net">diagrams.net</a>, create a new blank diagram:</p>
			<div>
				<div id="_idContainer095" class="IMG---Figure">
					<img src="Images/B15660_06_17.jpg" alt="Figure 6.17 – Using diagrams.net to create test fit parts&#13;&#10;" width="1650" height="888"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.17 – Using diagrams.net to create test fit parts</p>
			<p>You can follow the instructions <a id="_idIndexMarker268"/>to create test fit parts as shown in <em class="italic">Figure 6.17</em>:</p>
			<ol>
				<li value="1">Use the general palette on the left to drag out rectangles.</li>
				<li>It helps to label each part clearly. Double-click a rectangle and type a label into it. Press <em class="italic">Enter</em> to accept the label. I've added a text label on the <em class="italic">front</em> of the chassis.</li>
				<li>Select the item so it has a blue highlight. Click the tabs on the right to select the <strong class="bold">Arrange</strong> tab.</li>
				<li>Here, type your dimensions (swap millimeters for points) into the <strong class="bold">Width</strong> and <strong class="bold">Height</strong> boxes.</li>
				<li>You can repeat <em class="italic">steps 1</em> through <em class="italic">4</em> for all the items and then drag the parts together:</li>
			</ol>
			<div>
				<div id="_idContainer096" class="IMG---Figure">
					<img src="Images/B15660_06_18.jpg" alt="Figure 6.18 – The test fit&#13;&#10;" width="594" height="232"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.18 – The test fit</p>
			<p>The Pi should be near the front of the robot, as we'll later have sensors here, and the motor wires can go forward into it. In <em class="italic">Figure 6.18</em>, I've dragged the rectangles into place. <a href="http://Draw.io">Draw.io</a> helps you here by showing blue guidelines for centering and aligning objects. I put the power bank at the rear, with the AA batteries closer to the Pi so they can go into the motor controller easily.</p>
			<p>The parts look like <a id="_idIndexMarker269"/>they fit. It's not 100% accurate, but good enough to say this probably works.</p>
			<p>Now, it's time to buy parts. My shopping list looks like this:</p>
			<ul>
				<li>The chassis kit.</li>
				<li>The Full Function Stepper Motor HAT.</li>
				<li>4 x AA battery box.</li>
				<li>4 x metal hydride AA batteries. If you don't have one, you need a charger for these too.</li>
				<li>1 x USB power bank able to deliver 3 amps or more.</li>
			</ul>
			<p>Now you've selected your parts and made the trade-offs. You've followed that by test fitting them to see how they're laid out and check they all fit. It's time for you to go and buy your parts and chassis. Once done, come back here because then we can begin our build.</p>
			<h1 id="_idParaDest-118"><a id="_idTextAnchor115"/>Assembling the base</h1>
			<p>Assuming you <a id="_idIndexMarker270"/>bought a chassis similar to mine, you can assemble it with these steps. For a completely different chassis, I strongly recommend consulting the documentation for assembly instructions. A chassis that is very different from the recommendations here may make it harder to follow the next few chapters.</p>
			<p>Some parts may be covered in a layer of paper (shown in <em class="italic">Figure 6.19</em>). This layer prevents the plastic from getting scratches and can be safely removed. You can do this by getting a nail under it or using a craft knife. It's not essential to remove it, but a robot looks better without it:</p>
			<div>
				<div id="_idContainer097" class="IMG---Figure">
					<img src="Images/B15660_06_19.jpg" alt="Figure 6.19 – Removing the protective backing from robot parts&#13;&#10;" width="1307" height="333"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.19 – Removing the protective backing from robot parts</p>
			<p>With the laser-cut kits that use the yellow motors, there are two main ways the motors are attached. One type has plastic brackets, and the other has metal motor brackets. Given that you may buy kits of either style, let's look at how the kits could differ. The difference only matters in assembly steps, so buy what is available to you.</p>
			<p>For a kit with a plastic motor bracket, you should have the parts shown in <em class="italic">Figure 6.20</em>:</p>
			<div>
				<div id="_idContainer098" class="IMG---Figure">
					<img src="Images/B15660_06_20.jpg" alt="Figure 6.20 – Robot kit parts&#13;&#10;" width="808" height="306"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.20 – Robot kit parts</p>
			<p>In the kit, you should have the following:</p>
			<ol>
				<li value="1">Two wheels.</li>
				<li>Encoder wheels.</li>
				<li>A pair of motors with wires.</li>
				<li>A castor wheel.</li>
				<li>Bolts and brass <a id="_idIndexMarker271"/>standoffs to mount the castor wheel. I've replaced one set of bolts with non-conductive nylon ones. You should be able to do the same from the nylon standoff kit.</li>
				<li>The chassis plate.</li>
				<li>Plastic brackets to mount the motors. Your kit may have metal types, which work slightly differently and come with four extra screws.</li>
				<li>Four bolts and nuts to mount the motors.</li>
			</ol>
			<p><em class="italic">Figure 6.21</em> shows how the metal motor bracket parts differ:</p>
			<div>
				<div id="_idContainer099" class="IMG---Figure">
					<img src="Images/B15660_06_21.jpg" alt="Figure. 6.21 – Metal type motor bracket&#13;&#10;" width="1650" height="402"/>
				</div>
			</div>
			<p class="figure-caption">Figure. 6.21 – Metal type motor bracket</p>
			<p>In the kit, you should have the following:</p>
			<ol>
				<li value="1">The metal bracket <a id="_idIndexMarker272"/>replaces the plastic brackets here.</li>
				<li>Chassis to bracket bolts – instead of slotting through, these brackets need to be bolted to the chassis.</li>
				<li>The long bolts for the bracket to the motor will still be the same.<p class="callout-heading">Important note</p><p class="callout">The other components not shown are going to be very similar to this.</p></li>
			</ol>
			<p>Now, let's see how to attach encoder wheels.</p>
			<h2 id="_idParaDest-119"><a id="_idTextAnchor116"/>Attaching the encoder wheels</h2>
			<p>We'll start by <a id="_idIndexMarker273"/>attaching the encoder wheels to the motor. We need these for a later chapter on sensors:</p>
			<div>
				<div id="_idContainer100" class="IMG---Figure">
					<img src="Images/B15660_06_22.jpg" alt="Figure 6.22 – The encoder wheel is attached to the motor&#13;&#10;" width="1363" height="562"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.22 – The encoder wheel is attached to the motor</p>
			<p>Follow the steps in <em class="italic">Figure 6.22</em>:</p>
			<ol>
				<li value="1">Observe on which side the wires are connected to it. The encoder wheel should attach on the same side as the wires.</li>
				<li>Find the axle hole <a id="_idIndexMarker274"/>with flattened sides in the encoder wheel.</li>
				<li>The axles on the motors are shaped to match this hole.</li>
				<li>Line up the axle hole with the motor axle on the same side as the wires and gently push it on. It should have a little friction. Repeat this for the other motor.</li>
			</ol>
			<p>You should now have two motors with encoder wheels on them, on the same side as their wires. Next, we fit the motor brackets to the robot.</p>
			<h2 id="_idParaDest-120"><a id="_idTextAnchor117"/>Fitting the motor brackets</h2>
			<p>There are two <a id="_idIndexMarker275"/>kinds of motor brackets commonly used in the pictured laser-cut chassis. You should use the section that is most similar to the type you have.</p>
			<h3 id="_idParaDest-121">Fitting plastic motor brackets</h3>
			<p class="callout-heading">Important note</p>
			<p class="callout">If you have the metal type, skip this section.</p>
			<p>To fit the plastic <a id="_idIndexMarker276"/>type of bracket, first look for the slots to attach it, as shown in <em class="italic">Figure 6.23</em>:</p>
			<div>
				<div id="_idContainer101" class="IMG---Figure">
					<img src="Images/B15660_06_23.jpg" alt="Figure 6.23 – Plastic motor mount&#13;&#10;" width="1546" height="791"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.23 – Plastic motor mount</p>
			<p>To fit these, follow these steps:</p>
			<ol>
				<li value="1">The arrows point <a id="_idIndexMarker277"/>at the slots. Push the plastic brackets through the slots.</li>
				<li>Push the motor against the bracket. Note that the wires and the encoder wheel face the inside. The encoder should be under a cutout in the chassis body for it.</li>
				<li>There is a slot in the chassis for an outer bracket, sandwiching the motor. Push another bracket into this slot.</li>
				<li>Push the long screws through from the outside.</li>
				<li>Then, push a nut onto the screws and use a screwdriver to screw them in.</li>
				<li>For the <a id="_idIndexMarker278"/>nut closest to the chassis, one of its flattened edges should hold it in place as you tighten the screw. For the outer nut, use a spanner or pliers.</li>
				<li>You need to repeat the same steps for the other side.</li>
			</ol>
			<p>This section has covered attaching motors to a chassis with plastic brackets. If you have metal brackets, you should use the following section instead.</p>
			<h3 id="_idParaDest-122">Fitting metal motor brackets</h3>
			<p>Please skip this <a id="_idIndexMarker279"/>section if you have assembled the plastic motor brackets. The metal type of bracket is slightly different; <em class="italic">Figure 6.24</em> shows its assembly:</p>
			<div>
				<div id="_idContainer102" class="IMG---Figure">
					<img src="Images/B15660_06_24.jpg" alt="Figure 6.24 – Assembling metal motor brackets&#13;&#10;" width="1429" height="564"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.24 – Assembling metal motor brackets</p>
			<p>To do this, perform the following steps:</p>
			<ol>
				<li value="1">You should be able to see two small screw holes in the top of the bracket; these are threaded. There are two short screws per bracket.</li>
				<li>The chassis has holes in the wheel mount area that match these. Line these up, and then screw the short screws through the chassis holes into the bracket.</li>
				<li>Take the motor and ensure the wires are facing away from you. Push the long screws through the two holes in the motor.</li>
				<li>Then, take this motor assembly and push the long threads into the holes on the side of the bracket.</li>
				<li>It should fit through like this.</li>
				<li>Now, push <a id="_idIndexMarker280"/>nuts onto the threads that stick out the other end of the bracket.</li>
				<li>You can tighten the nuts furthest from the chassis with pliers, or a spanner and a screwdriver. The closer nuts catch on one flat side, so you'll only need a screwdriver.</li>
				<li>You now have the completed assembly and need to repeat these steps for the other side.</li>
			</ol>
			<p>After completing either set of steps, you should now have a motor mounted on each side. We will use these for the drive wheels. But first, we need the castor wheel.</p>
			<h2 id="_idParaDest-123"><a id="_idTextAnchor118"/>Adding the castor wheel</h2>
			<p>Next, it is time to fit the <a id="_idIndexMarker281"/>castor wheel. The castor wheel balances the robot. It is not driven, so will be dragged along by the robot. It's important that it has little friction. <em class="italic">Figure 6.25</em>, along with the steps that follow, will teach you exactly how to get this done:</p>
			<div>
				<div id="_idContainer103" class="IMG---Figure">
					<img src="Images/B15660_06_25.jpg" alt="Figure 6.25 – Fitting the castor wheel&#13;&#10;" width="1177" height="692"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.25 – Fitting the castor wheel</p>
			<p>Use these <a id="_idIndexMarker282"/>steps with the <em class="italic">Figure 6.25</em>:</p>
			<ol>
				<li value="1">This is the castor. It has four screw holes.</li>
				<li>You need to push a metal screw through the hole, so the thread is facing away from the wheel.</li>
				<li>Now, screw one of the brass standoffs into this screw.</li>
				<li>Repeat this for the four other sides.</li>
				<li>Line the other side of the standoffs with the four holes on the chassis. Note that this castor wheel is a rectangle, not a square. Make sure the wheel is facing down.</li>
				<li>Push one of the screws through and screw it down.</li>
				<li>I suggest you screw the opposite corner.</li>
				<li>This makes the remaining two screws easier to put in.</li>
				<li>The castor should <a id="_idIndexMarker283"/>now be attached to the robot like this.</li>
			</ol>
			<p>With the castors attached, the robot will balance, but it needs wheels to move anywhere, so let's add wheels.</p>
			<h2 id="_idParaDest-124"><a id="_idTextAnchor119"/>Putting the wheels on</h2>
			<p>The wheels now <a id="_idIndexMarker284"/>need to be pushed on, as shown in <em class="italic">Figure 6.26</em>:</p>
			<div>
				<div id="_idContainer104" class="IMG---Figure">
					<img src="Images/B15660_06_26.jpg" alt="Figure 6.26 – Fitting the wheels&#13;&#10;" width="1650" height="324"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.26 – Fitting the wheels</p>
			<p>Follow these steps:</p>
			<ol>
				<li value="1">First, note that they have two flattened sides in their axle hole, like the encoder wheel.</li>
				<li>Line the wheels up with the axles, taking into account the flat edges, and push them on. Do not push on the wires or the encoder disk as they may break.</li>
				<li>Sometimes, rotating the wheels until they push in helps. You should be able to push the wheel on, being sure to support the motor from the other side. After doing this, you may want to realign the encoder wheels with their slots.</li>
			</ol>
			<p>The wheels are on the <a id="_idIndexMarker285"/>motors and the robot is starting to take shape. The robot should now be able to sit on three wheels. You can roll it around manually, but it's not quite ready to drive itself yet.</p>
			<h2 id="_idParaDest-125"><a id="_idTextAnchor120"/>Bringing the wires up</h2>
			<p>A last minor <a id="_idIndexMarker286"/>step in chassis assembly is to bring the wires up. The motor controller will be on the top of the robot, so the wires need to be above the chassis too:</p>
			<div>
				<div id="_idContainer105" class="IMG---Figure">
					<img src="Images/B15660_06_27.jpg" alt="Figure 6.27 – Bringing the wires up&#13;&#10;" width="1269" height="279"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.27 – Bringing the wires up</p>
			<p>Follow the steps in <em class="italic">Figure 6.27</em>:</p>
			<ol>
				<li value="1">First, gather the two wires from one motor. Locate the small slot in the middle of the chassis.</li>
				<li>Push the wires through.</li>
				<li>Gently pull them through to the top of the chassis, so they are poking out as shown. Repeat this for the other motor.</li>
			</ol>
			<p>We should now have a robot that looks like <em class="italic">Figure 6.28</em> (motor brackets vary):</p>
			<div>
				<div id="_idContainer106" class="IMG---Figure">
					<img src="Images/B15660_06_28.jpg" alt="Figure 6.28 – The assembled chassis&#13;&#10;" width="978" height="473"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.28 – The assembled chassis</p>
			<p>With the motors in place <a id="_idIndexMarker287"/>and wheels ready, we can see how the robot will move. You've built the mechanical section of the robot. The wires are in position, and we're now ready to add the electronics. We'll start by adding the central controller, the Raspberry Pi.</p>
			<h2 id="_idParaDest-126"><a id="_idTextAnchor121"/>Fitting the Raspberry Pi</h2>
			<p>We will not fit the <a id="_idIndexMarker288"/>motor controller yet – we'll address that in the next chapter, but we can mount the Raspberry Pi now and prepare it to have other boards connected to it. We need to put standoffs on the Pi to bolt it onto the chassis, but leave room for the motor bracket mounting, and later sensors that go under the Pi:</p>
			<div>
				<div id="_idContainer107" class="IMG---Figure">
					<img src="Images/B15660_06_29.jpg" alt="Figure 6.29 – Fitting the Raspberry Pi&#13;&#10;" width="1418" height="616"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.29 – Fitting the Raspberry Pi</p>
			<p>Perform the steps shown in <em class="italic">Figure 6.29</em>:</p>
			<ol>
				<li value="1">You <a id="_idIndexMarker289"/>need a small posidrive screwdriver, a small spanner or pair of pliers, 4 x M2.5 5mm screws, 4 x M2.5 8 mm standoffs with threads, 4 x M2.5 12 mm standoffs, and the Raspberry Pi.</li>
				<li>Push an 8 mm standoff thread up through the screw hole from the bottom of the Pi.</li>
				<li>Then, screw a 10 mm standoff onto the top of these, with the thread facing upward, using the pliers/spanner to hold the standoff.</li>
				<li>Repeat for all four corners.</li>
				<li>Line two of these up with some slots or screw holes on the chassis and screw them in from underneath.</li>
				<li>On the chassis I used, there were only two holes that line up, so I screwed those in and used the other standoffs to keep the Pi level.</li>
			</ol>
			<p>This robot now has a <a id="_idIndexMarker290"/>main controller, which will be able to run code and command the robot. However, before it will do much, the controller and motors need power.</p>
			<h2 id="_idParaDest-127"><a id="_idTextAnchor122"/>Adding the batteries</h2>
			<p>There are two sets of <a id="_idIndexMarker291"/>batteries that you have bought: the 4 x AA battery holder, as in <em class="italic"> Figure 6.14</em> (with a set of rechargeable metal hydride batteries), and a USB power bank, as in <em class="italic">Figure 6.13</em>. The power bank contains a lithium-ion cell and a USB charging system.</p>
			<p>We mount these on the back of the robot, where they'll counterbalance some of the sensors that we'll add later.</p>
			<h3 id="_idParaDest-128">Setting up the USB power bank</h3>
			<p>Do <a id="_idIndexMarker292"/>not connect the power bank to the Raspberry Pi yet (or be sure to log in and shut it down properly before pulling the power cable out if you have done so):</p>
			<div>
				<div id="_idContainer108" class="IMG---Figure">
					<img src="Images/B15660_06_30.jpg" alt="Figure 6.30 – Mounting the power bank&#13;&#10;" width="1205" height="690"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.30 – Mounting the power bank</p>
			<p>To <a id="_idIndexMarker293"/>attach a USB power bank to the chassis, use the following instructions and <em class="italic">Figure 6.30</em>:</p>
			<ol>
				<li value="1">For this power bank, we use some hook and loop tape.</li>
				<li>Take a look at the power bank and note that one side has the USB connector on it. This connector should end up on the left of the robot. If it has an LED charge display, this should be on top.</li>
				<li>Measure two lengths of hook and loop tape. Stick the rough sides in two strips on the robot.</li>
				<li>Stick the soft sides to the power bank, and line these up with the robot.</li>
				<li>Push the power supply down, so the hook and loop have stuck together. This connection holds well.</li>
				<li>This is how the power bank should sit on the robot.</li>
			</ol>
			<p>Alternatives are to use <a id="_idIndexMarker294"/>sticky tack (for a cheap but flimsy connection), cable ties, double-sided tape, or rubber bands to hold the battery in place. These are suitable for different sizes of batteries.</p>
			<h3 id="_idParaDest-129">Mounting the AA battery holder</h3>
			<p>We will also use <a id="_idIndexMarker295"/>hook and loop tape to add an AA battery holder for motor power. We need the holder to be easy to remove so the batteries can be replaced. Hook and loop tape is a convenient choice for this. Adding the AA battery holder is shown in <em class="italic">Figure 6.31</em>:</p>
			<div>
				<div id="_idContainer109" class="IMG---Figure">
					<img src="Images/B15660_06_31.jpg" alt="Figure 6.31 – Mounting the AA battery holder&#13;&#10;" width="1238" height="732"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.31 – Mounting the AA battery holder</p>
			<p>To mount the AA <a id="_idIndexMarker296"/>battery holder, use <em class="italic">Figure 6.31</em> with the following steps:</p>
			<ol>
				<li value="1">Make sure that the AA battery holder does not have batteries in it yet.</li>
				<li>Cut and stick a small strip of hook and loop tape to the bottom of the battery holder.</li>
				<li>Stick the opposite hook and loop strip to the robot just in front of the power bank (removed for clarity – you do not need to remove the power bank).</li>
				<li>Attach the battery holder here using the hook and loop strips.</li>
			</ol>
			<p>At a pinch, sticky tack can be used for this, but remember that the AA battery box needs to be removable to <a id="_idIndexMarker297"/>replace the cells in it.</p>
			<h2 id="_idParaDest-130"><a id="_idTextAnchor123"/>The completed robot base</h2>
			<p>You have now <a id="_idIndexMarker298"/>completed the robot base, which should look something like <em class="italic">Figure 6.32</em>:</p>
			<div>
				<div id="_idContainer110" class="IMG---Figure">
					<img src="Images/B15660_06_32.jpg" alt="Figure 6.32 – The completed chassis&#13;&#10;" width="904" height="477"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.32 – The completed chassis</p>
			<p>You've now built your first robot chassis! Hopefully, the first of many. With the robot chassis completed, sporting wheels, a Raspberry Pi, and battery compartment, it is nearly ready to roll. It needs some wiring to a motor controller and code to really come to life.</p>
			<h1 id="_idParaDest-131"><a id="_idTextAnchor124"/>Connecting the motors to the Raspberry Pi</h1>
			<p>In this section, we will <a id="_idIndexMarker299"/>connect the motors to the Raspberry Pi. Once <a id="_idIndexMarker300"/>we have connected them, we can use code on the Raspberry Pi to control the motors and make the robot move. <em class="italic">Figure 6.33</em> is the block diagram for the robot that we are building in this chapter. We will be using the Full Function Stepper Motor HAT as the controller board, calling it the Motor HAT for short.</p>
			<p>This block diagram is similar to the type shown in <a href="B15660_03_Final_ASB_ePub.xhtml#_idTextAnchor050"><em class="italic">Chapter 3</em></a>, <em class="italic">Exploring the Raspberry Pi</em>. First, it starts with the Raspberry Pi, here in gray, as we've chosen that as our controller. Connected to the Pi is the Motor HAT, with instructions flowing from the Raspberry Pi to this board. The Motor HAT and its connections are highlighted as we are adding these parts in this chapter. As we build on this block diagram in later chapters, existing components will be in the <a id="_idIndexMarker301"/>color gray. Added components will be <a id="_idIndexMarker302"/>highlighted with red to show what is new. Finally, the two motors are added to the left and right of the Motor HAT, with arrows going from the Motor HAT to show it is controlling the motors:</p>
			<div>
				<div id="_idContainer111" class="IMG---Figure">
					<img src="Images/B15660_06_33.jpg" alt="Figure 6.33 – Block diagram of the robot&#13;&#10;" width="1215" height="453"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.33 – Block diagram of the robot</p>
			<p>The first step in connecting the motors is to fit the Motor HAT onto the Raspberry Pi. <em class="italic">Figure 6.34</em> shows the Motor HAT:</p>
			<div>
				<div id="_idContainer112" class="IMG---Figure">
					<img src="Images/B15660_06_34.jpg" alt="Figure 6.34 – The Full Function Stepper Motor HAT&#13;&#10;" width="627" height="393"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.34 – The Full Function Stepper Motor HAT</p>
			<p>Let's attach this HAT to our robot and wire it in so we can start programming our robot:</p>
			<div>
				<div id="_idContainer113" class="IMG---Figure">
					<img src="Images/B15660_06_35.jpg" alt="" width="712" height="922"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.35 – Fitting the motor controller</p>
			<p>Refer to <em class="italic">Figure 6.35</em> and follow these steps:</p>
			<ol>
				<li value="1">Line up the motor board socket with the Pi header. The four holes in the corners should also line up with the screw threads facing up.</li>
				<li>Gently and evenly push the motor board onto the Raspberry Pi, guiding the screw threads <a id="_idIndexMarker303"/>through. Continue until the board is firmly <a id="_idIndexMarker304"/>seated on the GPIO header.</li>
				<li>The robot should now look like this.</li>
			</ol>
			<p>The board is now attached to the Raspberry Pi, and we can start wiring it.</p>
			<h2 id="_idParaDest-132"><a id="_idTextAnchor125"/>Wiring the Motor HAT in</h2>
			<p>We will now <a id="_idIndexMarker305"/>wire in the Motor HAT, first to the motors, and also partially to the motor batteries. We wire the motor batteries so the motors have their own source of power and do not cause low-power reset conditions on the Raspberry Pi. The motor controller needs to be wired to the motors to power and control them.</p>
			<p><em class="italic">Figure 6.36</em> shows how we wire this up. Don't wire in the ground (black) wire on the batteries until we are ready to power it up. I suggest using a little insulation tape to tape the tip of it down to a plastic part of the chassis, so it does not catch on anything. Leaving ground unwired lets us use it as a kind of makeshift switch:</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">The black wire on a battery may be referred to as ground, GND, and negative. The red wire can be referred to as <strong class="bold">positive</strong> (<strong class="bold">+ve</strong>), <strong class="bold">vIn</strong> (<strong class="bold">voltage In</strong>), or by the voltage input rating – for example, 5 V – 12 V.</p>
			<div>
				<div id="_idContainer114" class="IMG---Figure">
					<img src="Images/B15660_06_36.jpg" alt="Figure 6.36 – How to wire up the motors and batteries" width="490" height="775"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.36 – How to wire up the motors and batteries</p>
			<p><em class="italic">Figure 6.37</em> shows the steps for the connections:</p>
			<div>
				<div id="_idContainer115" class="IMG---Figure">
					<img src="Images/B15660_06_37.jpg" alt="" width="774" height="769"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.37 – Steps for connecting the wires</p>
			<p>Perform the following steps with <a id="_idIndexMarker306"/>reference to <em class="italic">Figure 6.37</em> to connect the wires:</p>
			<ol>
				<li value="1">Loosen up the screw terminals for the 5 V – 12 V connection, GND, the two M2 connectors, and the M1 connectors.</li>
				<li>Push the red wire from the AA battery box into the screw terminal marked 5 V – 12 V, so the metal part of the wire (the core) is in the slot formed by the metal cover. </li>
				<li>Screw it down firmly, so the wire does not pull out easily. Ensure that the core is being gripped, and not the plastic outer layer (its insulation).</li>
				<li>Repeat for the motor terminals, making the connections shown in image 4.</li>
				<li>The result should look like image 5.</li>
			</ol>
			<p>We <a id="_idIndexMarker307"/>have now connected the motors to the controller, so it can drive them. We have partially connected the battery power, but we have left one connection free, so we can use this as a power switch. Let's try powering up the robot.</p>
			<h2 id="_idParaDest-133"><a id="_idTextAnchor126"/>Independent power</h2>
			<p>So far, although we <a id="_idIndexMarker308"/>have set up a headless Raspberry Pi, we have still been plugging it into the wall. Now it is time to try powering it independently. We will power up the motors from the AA batteries, and the Raspberry Pi from the USB power bank. We will see lights on the devices to tell us they are powered:</p>
			<div>
				<div id="_idContainer116" class="IMG---Figure">
					<img src="Images/B15660_06_38.jpg" alt="" width="687" height="628"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.38 – Going on to independent power</p>
			<p>Follow the steps shown in <em class="italic">Figure 6.38</em>:</p>
			<ol>
				<li value="1">Plug the Micro USB (tiny) end of the cable into the Pi in the USB micro-socket indicated by the arrow.</li>
				<li>Fit the four AA batteries; you may need to pop the battery box up and push it back down again after this.</li>
				<li>You can power up the motor board now. Connect the black wire from the battery box into the GND terminal <a id="_idIndexMarker309"/>indicated by the arrow, next to 5 V – 12 V. When you do so, a light appears on the motor board to show it is active.</li>
				<li>Turn on the Pi by plugging the USB A (wide) end into the power bank. The intention from here is to keep the micro-USB tiny end in, and only connect/disconnect the USB A (wide) end when powering the Pi.</li>
				<li>The Raspberry Pi and motor board are now powered, as shown in image 5.</li>
			</ol>
			<p>Congratulations, your robot is now running on independent power, freeing the Raspberry Pi from the wall and giving the motors power too: </p>
			<div>
				<div id="_idContainer117" class="IMG---Figure">
					<img src="Images/B15660_06_39.jpg" alt="" width="1430" height="1087"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.39 – The complete <a href="B15660_06_Final_ASB_ePub.xhtml#_idTextAnchor096"><em class="italic">Chapter 6</em></a> robot</p>
			<p>The photograph in <em class="italic">Figure 6.39</em> shows our robot so far. It has motors on the chassis, with a Raspberry Pi and a motor <a id="_idIndexMarker310"/>control board fitted. The robot has a power supply for the Raspberry Pi – currently powered up. It has a power supply for the motors, currently disconnected with the black ground wire carefully taped out of the way of the rest of the robot. The motors are wired into the control board. This is enough robot to start making things move.</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">SD cards can be corrupted by removing power from the Pi without shutting it down. When turning it off, log in with PuTTY and use <strong class="source-inline">sudo poweroff</strong> before removing the power.</p>
			<p>Your motors are ready to <a id="_idIndexMarker311"/>drive, and the Raspberry Pi is ready to run code without needing to be plugged into a wall. Combining independent power with headless Wi-Fi control means the robot can be driven around by instructions from your computer.</p>
			<h1 id="_idParaDest-134"><a id="_idTextAnchor127"/>Summary</h1>
			<p>In this chapter, you've now learned how to choose the parts for a robot by reasoning and making some important design decisions. You used a simple tool to test fit these parts and see what works before buying anything. Finally, you bought the parts and built your starting robot platform.</p>
			<p>By considering the trade-offs and test fitting again, you have gained skills for planning any hardware project, including finding dimensions on the datasheets/vendor websites, making a simple test-fit sketch, and considering how the parts will interact together. You've learned how the size of a robot affects motor and controller decisions. You've seen how to make parts easy to remove using hook and loop tape and considered other options for this.</p>
			<p>By hooking up independent power, and connecting the motors, the robot has the hardware it will need to drive itself around without being tethered to a wall. What it doesn't yet have is any code to move with. In the next chapter, we will start writing the code to get this robot moving!</p>
			<h1 id="_idParaDest-135"><a id="_idTextAnchor128"/>Exercises</h1>
			<ul>
				<li>In <a href="B15660_02_Final_ASB_ePub.xhtml#_idTextAnchor033"><em class="italic">Chapter 2</em></a>, <em class="italic">Exploring Robot Building Blocks – Code and Electronics</em>, you created block diagrams for a different robot. Consider what chassis, power, and parts it needs. Use online vendors to find suitable parts.</li>
				<li>Consider whether there is a suitable combination of Raspberry Pi hats or bonnets that fit your design. Use resources such as <a href="https://pinout.xyz">https://pinout.xyz</a> to check their pin usage is compatible.</li>
				<li>What power systems might be suitable for the Raspberry Pi and the output devices in your new design?</li>
				<li>Are there components that may need to be removed easily? How could you approach that? Can you come up with alternatives to hook and loop tape? Keep it simple.</li>
				<li>Make a test-fitting sketch for your new robot parts, checking that they fit using part dimensions.</li>
			</ul>
			<h1 id="_idParaDest-136"><a id="_idTextAnchor129"/>Further reading</h1>
			<p>Please refer to the following for more information:</p>
			<ul>
				<li>For further reading on chassis designs, consider <em class="italic">Raspberry Pi Robotic Blueprints</em>, <em class="italic">Dr. Richard Grimmett</em>, <em class="italic">Packt Publishing</em>. This includes modifying an RC car into a robot.</li>
				<li>For more robot chassis types, the community sharing w<a id="_idTextAnchor130"/>ebsite <a href="https://www.instructables.com">https://www.instructables.com</a> has many buildable examples. Some of these are very interesting and more advanced than our robot.</li>
			</ul>
		</div>
	</div></body></html>