["```py\ndef cot_prompt(question):\n    return f\"\"\"Solve the following problem step by step:\nProblem: {question}\nLet's approach this step by step:\n1) First, we need to...\n2) Next, we should...\n3) Then, we can...\n4) Finally, we...\nTherefore, the answer is...\nNow, solve this new problem using the same step-by-step approach:\nProblem: If a train travels 120 km in 2 hours, what is its average speed in km/h?\nLet's solve this step by step:\n\"\"\"\n# Example usage\nproblem = \"If a train travels 120 km in 2 hours, what is its average speed in km/h?\"\nprompt = cot_prompt(problem)\nprint(prompt)\n```", "```py\nSolve the following problem step by step:\nProblem: If a train travels 120 km in 2 hours, what is its average speed in km/h?\nLet's approach this step by step:\n1) First, we need to recall the formula for average speed, which is:\n   Average Speed = Total Distance / Total Time.\n2) Next, we should identify the total distance traveled, which is 120 km.\n3) Then, we can identify the total time taken, which is 2 hours.\n4) Now, we will apply the formula:\n   Average Speed = 120 km / 2 hours.\n5) Finally, we calculate the result:\n   Average Speed = 60 km/h.\n```", "```py\nfrom transformers import AutoModelForCausalLM, AutoTokenizer\ndef solve_math_problem(model, tokenizer, problem):\n    prompt = cot_prompt(problem)\n    inputs = tokenizer(prompt, return_tensors=\"pt\")\n    outputs = model.generate(\n        inputs, max_length=500, num_return_sequences=1\n    )\n    solution = tokenizer.decode(\n        outputs[0], skip_special_tokens=True\n    )\n    return solution\n# Example usage\nmodel_name = \"gpt2-large\"  # Replace with your preferred model\nmodel = AutoModelForCausalLM.from_pretrained(model_name)\ntokenizer = AutoTokenizer.from_pretrained(model_name)\nproblem = \"If a recipe calls for 2 cups of flour for 8 servings, how many cups of flour are needed for 12 servings?\"\nsolution = solve_math_problem(model, tokenizer, problem)\nprint(solution)\n```", "```py\ndef few_shot_cot_prompt(question, examples):\n    prompt = \"Solve the following problems step by step:\\n\\n\"\n    for example in examples:\n        prompt += f\"Problem: {example['question']}\\n\\n\"\n        prompt += f\"Solution: {example['solution']}\\n\\n\"\n    prompt += f\"Problem: {question}\\n\\nSolution:\"\n    return prompt\ndef solve_with_few_shot_cot(model, tokenizer, problem, examples):\n    prompt = few_shot_cot_prompt(problem, examples)\n    inputs = tokenizer(prompt, return_tensors=\"pt\")\n    outputs = model.generate(inputs, max_length=500,\n        num_return_sequences=1)\n    solution = tokenizer.decode(outputs[0], skip_special_tokens=True)\n    return solution\n# Example usage\nexamples = [\n    {\n        \"question\": \"If a car travels 60 miles in 2 hours, what is its average speed?\",\n        \"solution\": \"1) First, we identify the given information:\\n   - Distance traveled = 60 miles\\n   - Time taken = 2 hours\\n\\n2) We know that average speed is calculated by dividing distance by time:\\n   Average Speed = Distance / Time\\n\\n3) Let's plug in the values:\\n   Average Speed = 60 miles / 2 hours\\n\\n4) Perform the division:\\n   Average Speed = 30 miles per hour\\n\\nTherefore, the car's average speed is 30 miles per hour.\"\n    }\n]\nproblem = \"If a train travels 180 km in 3 hours, what is its average speed in km/h?\"\nsolution = solve_with_few_shot_cot(model, tokenizer, problem,\n    examples)\nprint(solution)\n```", "```py\ndef evaluate_cot_output(output, correct_answer):\n    # Extract the final answer from the CoT output\n    final_answer = extract_final_answer(output)\n    # Check if the final answer is correct\n    answer_correct = final_answer == correct_answer\n    # Evaluate the reasoning steps\n    reasoning_score = evaluate_reasoning_steps(output)\n    return {\n        \"answer_correct\": answer_correct,\n        \"reasoning_score\": reasoning_score\n    }\ndef extract_final_answer(output):\n    # Implement logic to extract the final answer from the CoT output\n    # This could involve parsing the last line or looking for specific phrases\n    pass\ndef evaluate_reasoning_steps(output):\n    # Implement logic to evaluate the quality of the reasoning steps\n    # This could involve checking for logical consistency, completeness, etc.\n    pass\n# Example usage\nproblem = \"If a train travels 180 km in 3 hours, what is its average speed in km/h?\"\ncorrect_answer = 60\ncot_output = solve_math_problem(model, tokenizer, problem)\nevaluation = evaluate_cot_output(cot_output, correct_answer)\nprint(evaluation)\n```", "```py\ndef dynamic_cot(model, tokenizer, problem, max_steps=5):\n    prompt = f\"Problem: {problem}\\n\\nLet's solve this step by step:\"\n    for step in range(1, max_steps + 1):\n        prompt += f\"\\n\\nStep {step}:\"\n        inputs = tokenizer(prompt, return_tensors=\"pt\")\n        outputs = model.generate(\n            inputs, max_length=len(prompt) + 100,\n            num_return_sequences=1\n        )\n        new_step = tokenizer.decode(\n            outputs[0][len(inputs['input_ids'][0]):],\n            skip_special_tokens=True\n        )\n        prompt += new_step\n        if \"Therefore, the final answer is\" in new_step:\n            break\n    return prompt\n# Example usage\nproblem = \"If a recipe calls for 2 cups of flour for 8 servings, how many cups of flour are needed for 12 servings?\"\nsolution = dynamic_cot(model, tokenizer, problem)\nprint(solution)\n```", "```py\ndef adaptive_cot(\n    model, tokenizer, problem, complexity_threshold=0.7\n):\n    # Assess problem complexity\n    complexity = assess_problem_complexity(problem)\n    if complexity > complexity_threshold:\n        # Use detailed CoT for complex problems\n        return detailed_cot(model, tokenizer, problem)\n    else:\n        # Use simple direct approach for simpler problems\n        return simple_solve(model, tokenizer, problem)\ndef assess_problem_complexity(problem):\n    # Implement logic to assess problem complexity\n    # This could involve keyword analysis, sentence structure, etc.\n    pass\ndef detailed_cot(model, tokenizer, problem):\n    # Implement detailed Chain-of-Thought approach\n    pass\ndef simple_solve(model, tokenizer, problem):\n    # Implement simple direct solving approach\n    pass\n# Example usage\nproblem = \"What is the result of 25 divided by 5?\"\nsolution = adaptive_cot(model, tokenizer, problem)\nprint(solution)\n```"]