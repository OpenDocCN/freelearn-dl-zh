<html><head></head><body>
		<div><div></div>
		</div>
		<div><h1 id="_idParaDest-121"><a id="_idTextAnchor122"/>5. Using Speech with the Chatbot</h1>
		</div>
		<div><p class="callout-heading">Overview</p>
			<p class="callout">In this chapter, we will learn about the basics of Amazon Connect. We'll look at how to use Amazon Connect, Lex, and Lambda to interact with a chatbot using voice. We will also demonstrate how you can create a personal call center using Amazon Connect. We'll learn how to obtain a free phone number for a personal call center. We will also learn about using Amazon Lex chatbots with Amazon Connect with contact flows and different templates. By the end of this chapter, you will be able to connect the call center to your Lex chatbot.</p>
			<h1 id="_idParaDest-122"><a id="_idTextAnchor123"/>Amazon Connect Basics</h1>
			<p><strong class="bold">Amazon Connect</strong> is a service from AWS (Amazon Web Services) that allows you to create cloud-based contact centers. This means that people can use a telephone number to contact the service and have conversations with bots or human representatives. In this chapter, we are primarily interested in autom<a id="_idTextAnchor124"/>ating interaction using the chatbot that we built in the previous chapter.</p>
			<p>Some key features of Amazon Connect are as follows:</p>
			<ul>
				<li>It is easy to set up and use Connect with workflows that are defined using a graphical editor.</li>
				<li>There is no infrastructure to deploy or manage, so contact centers can be scaled up and down quickly.</li>
				<li>It is a <strong class="bold">pay-as-you-go service</strong>, so there is no setup or monthly fees. We will be using the free tier, so we should not have to pay anything to use the service. For commercial usage, charges are based on rates per minute.</li>
				<li>Amazon Connect is deployed in 42 availability zones and within 16 geographic regions.<p class="callout-heading">Disclaimer</p><p class="callout">Unfortunately, Amazon Connect is not available for use in all regions. When setting up Amazon Connect, a local telephone number is provided, and at the time of writing this book (April 2020), this service is only available in the US, UK, Australia, Japan, Germany, and Singapore. The good news is that Amazon is constantly expanding its services. So, by the time you read this book, Amazon Connect might be available where you are. The region table at <a href="https://aws.amazon.com/about-aws/global-infrastructure/regional-product-services/">https://aws.amazon.com/about-aws/global-infrastructure/regional-product-services/</a>.</p></li>
			</ul>
			<h2 id="_idParaDest-123"><a id="_idTextAnchor125"/>Free Tier Information</h2>
			<p>Throughout this book, you will only need to use the free tier of the services presented. However, it is important to be aware of the limits of free usage and the pricing of other tiers.</p>
			<p>You should refer to the official web page at <a href="https://aws.amazon.com/connect/">https://aws.amazon.com/connect/</a>. A single contact center may include a set amount of Amazon Connect service usage and a direct-dial number including 60 minutes of inbound and outbound calls. This can change depending on your regional settings.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">You shouldn't need to go beyond the services provided by the free tier for this book. If you go beyond the limits of the free tier, you will be charged by Amazon according to the rates published at <a href="https://aws.amazon.com/connect/pricing/">https://aws.amazon.com/connect/pricing/</a>.</p>
			<h1 id="_idParaDest-124"><a id="_idTextAnchor126"/>Interacting with the Chatbot</h1>
			<p>Using Connect to interact with your chatbot by voice requires you to first set up a call center within Connect. The call center receives a free local phone number (or a US toll-free number in the United States). This number can be connected to an <code>MarketNanny</code>). The chatbot uses the Lambda serverless service to get data from an external API and relay it back to the user on the phone:</p>
			<p><em class="italic">Reference for image</em>: <a href="https://aws.amazon.com/blogs/aws/new-amazon-connect-and-amazon-lex-integration/">https://aws.amazon.com/blogs/aws/new-amazon-connect-and-amazon-lex-integration/</a></p>
			<div><div><img src="img/B16061_05_01.jpg" alt="Figure 5.1: A sample voice-based chatbot application using Amazon Connect, Lex, and Lambda&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.1: A sample voice-based chatbot application using Amazon Connect, Lex, and Lambda</p>
			<h1 id="_idParaDest-125"><a id="_idTextAnchor127"/>Talking to Your Chatbot through a Call Center Using Amazon Connect</h1>
			<p>Using Amazon Connect, we can create a call center application that will allow us to connect to the chatbot that we built in the preceding <em class="italic">Chapter 4</em>, <em class="italic">Conversational Artificial Intelligence</em> (<code>MarketNanny</code>), using voice commands rather than a textbox.</p>
			<p>To create an Amazon Connect call center, you need to make an Amazon Connect instance. Each example contains the majority of the assets and settings identified with your call center instance. You can oversee the settings for your scenario from the Amazon Connect support page.</p>
			<p>You can make various instances; however, each example is limited to solely inside the AWS area in which it has been created. The settings, clients, measurements, and details are not shared across Amazon Connect instances.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">It is mandatory to have an AWS account. Amazon Lex services can be accessed through the Console page.</p>
			<h2 id="_idParaDest-126"><a id="_idTextAnchor128"/>Exercise 5.01: Creating a Personal Call Center</h2>
			<p>In this exercise, we will create a personal call center using Amazon Connect, and we will connect your <code>MarketNanny</code> chatbot to it. Note that we have already discussed the Amazon Connect service earlier in this chapter:</p>
			<ol>
				<li>For the first step, navigate to the Amazon Connect service page in the AWS Console. You can select the link to navigate to, or you can go directly to <a href="https://console.aws.amazon.com/connect">https://console.aws.amazon.com/connect</a>:<div><img src="img/B16061_05_02.jpg" alt="Figure 5.2: The Amazon Connect welcome screen&#13;&#10;"/></div><p class="figure-caption">Figure 5.2: The Amazon Connect welcome screen</p></li>
				<li>Click the <code>Get started</code> button to create a new <code>Call Center</code> instance. In the screen that follows, keep the default option of <code>Store users within Amazon Connect</code>, and then enter a name for your application. The name is unique across AWS and duplicates are not allowed, so you may have to experiment a bit or add numbers to the name until you get a name that is unique.</li>
				<li>Click on the <code>Next step</code> button when you are done:<div><img src="img/B16061_05_03.jpg" alt="Figure 5.3: Step 1 of the Amazon Connect resource configuration screen&#13;&#10;"/></div><p class="figure-caption">Figure 5.3: Step 1 of the Amazon Connect resource configuration screen</p></li>
				<li>In the next step, add the information for a new admin, setting the email address to your email address. Again, click the <code>Next step</code> button when you are done:<div><img src="img/B16061_05_04.jpg" alt="Figure 5.4: Step 2 of the Amazon Connect resource configuration screen&#13;&#10;"/></div><p class="figure-caption">Figure 5.4: Step 2 of the Amazon Connect resource configuration screen</p></li>
				<li>In the next step, leave the <code>Incoming calls</code> checkbox checked, and uncheck the <code>Outbound calls</code> checkbox:<p class="callout-heading">Note</p><p class="callout">In this case, we have no requirement for our bot to initiate a call to anyone, but we do want it to be able to receive calls.</p><div><img src="img/B16061_05_05.jpg" alt="Figure 5.5: Step 3 of the Amazon Connect resource configuration screen&#13;&#10;"/></div><p class="figure-caption">Figure 5.5: Step 3 of the Amazon Connect resource configuration screen</p></li>
				<li>Click the <code>Next step</code> button when you are done.</li>
				<li>Next, you will be presented with an informational screen, letting you know that you are granting the call center application permissions to read and write data to or from your S3 bucket, to encrypt or decrypt data, and to read and write to and from the <code>CloudWatch</code> logs.</li>
				<li>It will also show you the location of the <code>S3 buckets</code> where your <code>data</code> and Contact flow logs will be stored. Click <code>Next step</code>.<p class="callout-heading">Note</p><p class="callout">Note that there is a <code>Customize settings</code> link to further customize these locations, but we will not use this now.</p><div><img src="img/B16061_05_06.jpg" alt="Figure 5.6: Step 4 of the Amazon Connect resource configuration screen&#13;&#10;"/></div><p class="figure-caption">Figure 5.6: Step 4 of the Amazon Connect resource configuration screen</p></li>
				<li>This will bring you to the final screen, which will provide you with a review of all of the settings for your Contact center application:<div><img src="img/B16061_05_07.jpg" alt="Figure 5.7: Step 5 of the Amazon Connect resource configuration screen&#13;&#10;"/></div><p class="figure-caption">Figure 5.7: Step 5 of the Amazon Connect resource configuration screen</p></li>
				<li>Now, click the <code>Create instance</code> button to create your application. You should see a dialog window:<div><img src="img/B16061_05_08.jpg" alt="Figure 5.8: Setting up Amazon Connect&#13;&#10;"/></div><p class="figure-caption">Figure 5.8: Setting up Amazon Connect</p></li>
				<li>In a minute or two, it will complete the setup process and take you to a <code>Success!</code> screen, where you can click on the <code>Get started</code> button to go directly to your application:<div><img src="img/B16061_05_09.jpg" alt="Figure 5.9: The Success! screen&#13;&#10;"/></div></li>
			</ol>
			<p class="figure-caption">Figure 5.9: The Success! screen</p>
			<p class="callout-heading">Note</p>
			<p class="callout">It may take up to 15 minutes for the application to get set up. So, if you do not succeed in getting to the application page initially, have some patience and try again every once in a while, until it does succeed.</p>
			<p>Typically, it should not take very long, and generally, the application page will be accessible right away.</p>
			<p>So, you have created a customer contact center, in minutes, that would previously take anywhere between 3 to 6 months. While the creation interface looked very simple, it has masked all the complexity of the underlying infrastructure. This is the power of Amazon AWS Connect.</p>
			<p>As you will see in the next exercise, you can actually get a physical phone number in order to call your very own contact center.</p>
			<h2 id="_idParaDest-127"><a id="_idTextAnchor129"/>Exercise 5.02: Obtaining a Free Phone Number for Your Call Center</h2>
			<p>In this exercise, we will acquire a free number for our custom call center. The free telephone number can be acquired by the free tier services provided by Amazon Connect. The following are the steps to perform to obtain a free number:</p>
			<ol>
				<li value="1">The welcome screen for your personal call center should be visible. If it is not, you can access it easily at the URL displayed on the previous screen, right before you click the <code>Get Started</code> button:<div><img src="img/B16061_05_10.jpg" alt="Figure 5.10: The Amazon Connect welcome screen&#13;&#10;"/></div><p class="figure-caption">Figure 5.10: The Amazon Connect welcome screen</p></li>
				<li>At this point, you can click the <code>Let's go</code> button in order to initiate the first step, which is to claim a local phone number for your call center application. On this screen, you can select your country:<div><img src="img/B16061_05_11.jpg" alt="Figure 5.11: The Claim phone number screen&#13;&#10;"/></div><p class="figure-caption">Figure 5.11: The Claim phone number screen</p></li>
				<li>Leave the <code>Type</code> as the default (<code>Direct Dial</code>) option. Then, from the <code>Phone number</code> drop-down menu, select a phone number. This should be, in most cases, a number that is local to you. If you choose one that is not, you may be charged based on the cost to dial the number:<div><img src="img/B16061_05_12.jpg" alt="Figure 5.12: Phone number selection&#13;&#10;"/></div><p class="figure-caption">Figure 5.12: Phone number selection</p></li>
				<li>Click the <code>Next</code> button when you are done. This will allow you to test your new phone number by dialing it. You should hear a message that starts with <em class="italic">Hello, thanks for calling</em></li>
				<li>This will be followed by a list of options; you can try them for yourself to see what they do when you have some time. For now, click the <code>Continue</code> button, which will bring you to the <code>Dashboard</code> screen:<div><img src="img/B16061_05_13.jpg" alt="Figure 5.13: The Amazon Connect Dashboard screen&#13;&#10;"/></div></li>
			</ol>
			<p class="figure-caption">Figure 5.13: The Amazon Connect Dashboard screen</p>
			<p>You now have a working call center application on Amazon Connect.</p>
			<h1 id="_idParaDest-128"><a id="_idTextAnchor130"/>Using Amazon Lex Chatbots with Amazon Connect</h1>
			<p>With Amazon Lex, you can create intelligent chatbots. This can be done by converting contact flows into regular conversations. The Amazon Connect service compliments the previously mentioned feature by enabling the creation of a contact center (cloud-based) along with the generation of dynamic flows. This delivers a personalized experience to your callers. Additionally, <strong class="bold">Dual-tone multi-frequency</strong> (<strong class="bold">DTMF</strong>) digits entered by callers during a call can be easily recognized by these chatbots.</p>
			<p>With both Amazon Lex and Amazon Connect working in sync, the chatbot can gauge the caller's intent. Furthermore, you can use the AWS Lambda function along with your chatbot to process caller requests, provide information to callers, and query applications. These chatbots are capable of maintaining context by intelligently managing dialogue and reviewing replies based on caller responses on the fly.</p>
			<p>In the next section, we will connect your <em class="italic">MarketNanny</em> chatbot to the call center. This is so that the user can speak into the phone and have their speech automatically converted into a text utterance that will be sent to the Lex chatbot.</p>
			<h2 id="_idParaDest-129"><a id="_idTextAnchor131"/>Understanding Contact Flows</h2>
			<p>A <strong class="bold">contact flow</strong> defines each step of the experience that customers have when they interact with your call center. Amazon connect has templates for you to create simple and efficient contact flows. You can also create new contact flows using the visual contact flow editor. The editor is a very intuitive and simple tool to create contact flows. But do not let the simplicity fool you—you can create very complex and detailed flows.</p>
			<p>The contact flow designer screen provides a way to create contact flows in a drag and drop environment. Contact flows are made of nodes that can be accessed in the left panel, within the designer area (under the <code>Show additional flow information</code> link).</p>
			<p>Nodes are categorized under the <code>Interact</code>, <code>Set</code>, <code>Branch</code>, <code>Integrate</code>, and <code>Terminate</code>/<code>Transfer</code> categories. Nodes in each category can be hidden or revealed by clicking on the drop-down icon next to the section name. You will explore some of the nodes that are available by creating the contact flow for your chatbot.</p>
			<p>Contact flows are a way for users (typically, supervisors) to progressively refresh the settings for each call entering the framework and ensure that the users hear customized and pertinent choices. While there are a number of predesigned contact flows, you will create a new one for your <code>MarketNanny</code> chatbot.</p>
			<h2 id="_idParaDest-130"><a id="_idTextAnchor132"/>Contact Flow Templates</h2>
			<p>The following lists the various templates that are available. Just for information, the complete list is shown in the following screenshot. The ones you create will also show up in the template list. You can click each flow to get more details and learn from them:</p>
			<div><div><img src="img/B16061_05_14.jpg" alt="Figure 5.14: Amazon Connect contact flow templates&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.14: Amazon Connect contact flow templates</p>
			<p>In the next topic, we will set up your call center so that it can accept incoming calls, connect your <code>MarketNanny</code> chatbot to the call center so that the user can speak into the phone, and have the user's speech automatically converted into a text utterance that will be sent to the Lex chatbot.</p>
			<p>The chatbot then continues with processing the utterance, finding the intent and slots, and fulfilling the user request through the Lambda function that you set up in the preceding section.</p>
			<p>To connect your call center instance with your chatbot, you will need to go back to the main screen and navigate to the Connect dashboard, as shown in the following screenshot.</p>
			<p>Select <code>Services </code>&gt; <code>Customer Engagement </code>&gt; <code>Amazon Connect</code>:</p>
			<div><div><img src="img/B16061_05_15.jpg" alt="Figure 5.15: Selecting Amazon Connect from the AWS Management Console&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.15: Selecting Amazon Connect from the AWS Management Console</p>
			<p>Select your Connect instance:</p>
			<div><div><img src="img/B16061_05_16.jpg" alt="Figure 5.16: Amazon Connect console&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.16: Amazon Connect console</p>
			<h2 id="_idParaDest-131"><a id="_idTextAnchor133"/>Exercise 5.03: Connecting the Call Center to Your Lex Chatbot</h2>
			<p>In this exercise, you will set up your call center so that it can accept incoming calls, and so that you can connect your <code>MarketNanny</code> chatbot to the call center. The following are the steps to complete:</p>
			<ol>
				<li value="1">From the Amazon Management Console, navigate via <code>Services</code> to <code>Amazon Connect</code> under <code>Customer Engagement</code>. You will see the <code>Amazon Connect</code> virtual contact center instances screen; click your instance. Choose <code>Contact flows</code> from the left toolbar. Click <code>Bot</code>; then click the drop-down menu to find the <code>MarketNanny</code> bot entry, select it, and then select the <code>Add Lex Bot</code> link to save it:<div><img src="img/B16061_05_17.jpg" alt="Figure 5.17: The Contact flow screen with the Lex bot's selection drop-down&#13;&#10;"/></div><p class="figure-caption">Figure 5.17: The Contact flow screen with the Lex bot's selection drop-down</p><p>The following screenshot shows <code>MarketNanny</code> added to the Lex bot:</p><div><img src="img/B16061_05_18.jpg" alt="Figure 5.18: Showing the Lex bot under Lex bots&#13;&#10;"/></div><p class="figure-caption">Figure 5.18: Showing the Lex bot under Lex bots</p></li>
				<li>Now, you can navigate back to the <code>Dashboard</code> screen by selecting the <code>Overview</code> link and clicking on the <code>Login URL</code> button and then enter the credentials for your Amazon Connect instance. The <code>Dashboard</code> screen will open in a new browser tab:<div><img src="img/B16061_05_19.jpg" alt="Figure 5.19: The Login overview screen&#13;&#10;"/></div><p class="figure-caption">Figure 5.19: The Login overview screen</p></li>
				<li>On the <code>Dashboard</code> screen, select the <code>View Contact Flows</code> icon under <code>5. Create contact flows</code>:<div><img src="img/B16061_05_20.jpg" alt="Figure 5.20: Selecting routing and contact flows from the Left Panel screen&#13;&#10;"/></div><p class="figure-caption">Figure 5.20: Selecting routing and contact flows from the Left Panel screen</p></li>
				<li>This will bring you to a <code>Contact flows</code> screen that is similar to the one we were just on previously. This is the <code>Contact flow designer</code> screen, where you can design and create new contact flows:<div><img src="img/B16061_05_21.jpg" alt="Figure 5.21: Contact flows screen&#13;&#10;"/></div><p class="figure-caption">Figure 5.21: Contact flows screen</p></li>
				<li>Click the <code>Create contact flow</code> button in the upper-right corner of the page to create a new contact flow. Name it <code>MarketNannyFlow</code>:<div><img src="img/B16061_05_22.jpg" alt="Figure 5.22: The Contact flow designer screen&#13;&#10;"/></div><p class="figure-caption">Figure 5.22: The Contact flow designer screen</p></li>
				<li>The first node that you will use for your chatbot's contact flow is the <code>Set voice</code> node. You can find it under the <code>Set</code> category and drag it to the graphical view to the right of the <code>Entry point</code> node, which is already in the view.</li>
				<li>Connect the output of the <code>Entry point</code> node to the input of the <code>Set voice</code> node by clicking the output circle and dragging it, with your mouse, to the input bump on the left of the <code>Set voice</code> node:<div><img src="img/B16061_05_23.jpg" alt="Figure 5.23: The Contact flow designer screen with the Set voice node&#13;&#10;"/></div><p class="figure-caption">Figure 5.23: The Contact flow designer screen with the Set voice node</p></li>
				<li>Next, you can set the <em class="italic">properties of the node</em> by clicking at the top of the node. This will bring up a panel on the right-hand side of the screen, with the relevant properties that you can set.</li>
				<li>For this component, it provides <code>Language</code> and <code>Voice</code> properties, both of which can be set by selecting a value from the dropdown under each property label. You can set the values that are appropriate to your scenario, and then click the <code>Save</code> button:<div><img src="img/B16061_05_24.jpg" alt="Figure 5.24: Properties for the Set Voice node&#13;&#10;"/></div><p class="figure-caption">Figure 5.24: Properties for the Set Voice node</p></li>
				<li>The next node to add is the <code>Get customer input</code> node, which you will find under the <code>Interact</code> tab. You can connect the input of this node to the output of the <code>Set voice</code> node, just like when you connected <code>Set voice</code> to the <code>Entry point</code> node:<div><img src="img/B16061_05_25.jpg" alt="Figure 5.25: Adding the Get customer input node&#13;&#10;"/></div><p class="figure-caption">Figure 5.25: Adding the Get customer input node</p></li>
				<li>First, click on the properties icon on the <code>Get customer input</code> block, select the <code>Text to speech (Ad hoc)</code> option, and then click <code>Enter text</code> under it. In the input textbox, enter a greeting such as the following:<pre>Hi this is the Market Nanny chatbot. How may I help you today?</pre><p class="callout-heading">Note</p><p class="callout">Feel free to replace this with some other text that may be more interesting or appropriate for you.</p></li>
				<li>This is the text that will be converted into a voice greeting when the <code>Contact center</code> application first answers the phone:<div><img src="img/B16061_05_26.jpg" alt="Figure 5.26: Get customer input properties&#13;&#10;"/></div><p class="figure-caption">Figure 5.26: Get customer input properties</p></li>
				<li>Next, scroll down the settings pane and select the <code>Amazon Lex</code> subsection, not the <code>DTMF</code> section. Here, you will be able to configure the node to work with your chatbot.<p class="callout-heading">Note</p><p class="callout">The <code>DTMF</code> section provides a way to specify interactions with the caller via button presses on their phone, but we will not cover that here. We are much more interested in having our chatbot interact with the caller.</p></li>
				<li>In this section, under <code>Lex bot</code>, you can enter the name and alias for your chatbot. Under <code>Name</code>, enter <code>MarketNanny</code>, and under <code>Alias</code>, enter <code>$LATEST</code>:</li>
				<li><code>$LATEST</code> is a system-defined alias, which specifies that the contact center will always access the most recently published version of the <code>MarketNanny</code> chatbot:<div><img src="img/B16061_05_27.jpg" alt="Figure 5.27: Amazon Lex properties in the Get customer input properties&#13;&#10;"/></div><p class="figure-caption">Figure 5.27: Amazon Lex properties in the Get customer input properties</p></li>
				<li>Finally, specify the <code>GetQuote</code> intent under the <code>Intents</code> section. Since that is the only intent we are currently working with, click on the <code>Save</code> button:<div><img src="img/B16061_05_28.jpg" alt="Figure 5.28: The GetQuote intent in the Get customer input node&#13;&#10;"/></div><p class="figure-caption">Figure 5.28: The GetQuote intent in the Get customer input node</p></li>
				<li>You can now see that the <code>Get customer input</code> node has changed to display the intent that we specified in its properties pane:<div><img src="img/B16061_05_29.jpg" alt="Figure 5.29: Full contact center flow&#13;&#10;"/></div><p class="figure-caption">Figure 5.29: Full contact center flow</p></li>
				<li>You can finish the flow by adding two more nodes:<ul><li><code>Play prompt</code> from the <code>Interact</code> section: Set the <code>Prompt</code> property to <code>Text to speech (Ad hoc)</code> in the property pane, and enter text in the textbox under <code>Enter text</code> as follows:<pre>"Thanks for using MarketNanny" Feel free to ask me something else.</pre></li><li><code>Disconnect/hang up</code> from the <code>Terminate</code>/<code>Transfer</code> section. Do not set any properties.</li></ul></li>
				<li>Connect the nodes as shown previously. Connect the outputs of the <code>Default</code> and <code>Error</code> states in <code>Get customer input</code> to the input of the <code>Disconnect/Hang up</code> node.</li>
				<li>Connect the <code>GetQuote</code> output to the <code>Play prompt</code> node.</li>
				<li>Connect the output from <code>Play prompt</code> to the input of <code>Set voice</code>. This ensures that you can interact with your chatbot for as long as you keep asking the right questions.</li>
				<li>Finally, click the <code>Save</code> button in the top-right corner of the screen, and then select the <code>Publish</code> button to publish the contact flow:<div><img src="img/B16061_05_30.jpg" alt="Figure 5.30: The Save and Publish buttons&#13;&#10;"/></div><p class="figure-caption">Figure 5.30: The Save and Publish buttons</p></li>
				<li>As the final step, you will connect your call center phone number to the new contact flow you have just created.</li>
				<li>From the menu panel on the left-hand side of the screen, select the <code>Routing</code> menu. Then, from that, select the <code>Phone numbers</code> item:<div><img src="img/B16061_05_31.jpg" alt="Figure 5.31: Selecting Routing and Phone numbers from the Dashboard&#13;&#10;"/></div><p class="figure-caption">Figure 5.31: Selecting Routing and Phone numbers from the Dashboard</p></li>
				<li>This will bring up the <code>Manage Phone</code> numbers screen, where you can select the phone number that you wish to use for <code>MarketNanny</code>.</li>
				<li>Selecting the phone number will bring you to the <code>Edit Phone number</code> page:<div><img src="img/B16061_05_32.jpg" alt="Figure 5.32: The Edit Phone number page&#13;&#10;"/></div><p class="figure-caption">Figure 5.32: The Edit Phone number page</p></li>
				<li>Here, click the dropdown under <code>Contact flow/IVR</code> and select or type in the name of your new contact flow: <code>MarketNannyFlow</code>.</li>
				<li>Call your contact center phone number to verify that you can interact with your <code>MarketNanny</code> chatbot by speaking to it.</li>
				<li>You can see the logs in the S3 bucket. You can also see the logs in <code>CloudWatch</code> &gt; <code>Log groups</code>. In our case, we could see <code>jarvis42</code>, as shown in the following screenshot:<div><img src="img/B16061_05_33.jpg" alt="Figure 5.33: Amazon CloudWatch console&#13;&#10;"/></div></li>
			</ol>
			<p class="figure-caption">Figure 5.33: Amazon CloudWatch console</p>
			<p>In this exercise, we set up our very own call center and we even connected our MarketNanny chatbot to the call center. Now, let's test what we've learned so far through an interesting activity. </p>
			<h2 id="_idParaDest-132"><a id="_idTextAnchor134"/>Activity 5.01: Creating a Custom Bot and Connecting the Bot with Amazon Connect</h2>
			<p>In this activity, we are going to create an <strong class="bold">Amazon Lex</strong> bot to check a user's <strong class="bold">Account Balance</strong>. The bot will be controlled via <strong class="bold">Automatic Speech Recognition</strong> (<strong class="bold">ASR</strong>) and <strong class="bold">Natural Language Understanding</strong> (<strong class="bold">NLU</strong>) capacities, which are similar innovations that power Amazon's Alexa.</p>
			<p>For this activity, we will consider the following user story: as a user, you can check your account balance via the voice user interface using your phone.</p>
			<p>Extrapolating, we can see that we need Amazon Connect, a phone number, a Lex bot, and a Lambda to look up the account balance. We will make a simplifying assumption that the user has only one account—otherwise, we would need more prompts to select an account and so on.</p>
			<p>The steps to create the Account Balance service via Amazon Connect are as follows:</p>
			<div><div><img src="img/B16061_05_34.jpg" alt="Figure 5.34: Steps to create the Account Balance service via Amazon Connect&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.34: Steps to create the Account Balance service via Amazon Connect</p>
			<ol>
				<li value="1">We will store the account balance in an S3 bucket for simplicity. In real life, the call to a bucket will be replaced by a SQL call to a database, for example, <code>SELECT account_balance from balance_table WHERE account_number = &lt;account Number&gt;</code> or something similar.</li>
				<li>Then, we will create a Lambda to access the bucket and return the balance value.</li>
				<li>We will then create a Lex bot to get the account balance. That way, we can be omnichannel—a customer can get their account balance via a chatbot or by calling our contact center.</li>
			</ol>
			<p>Then, of course, we create a contact flow in Amazon Connect to activate the bot via a call and get the balance via phone.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The solution for this activity can be found on page 312.</p>
			<p>Hope this activity and this chapter was interesting and that you are motivated to try even more complex and exciting bots that can answer all kind of questions.</p>
			<h1 id="_idParaDest-133"><a id="_idTextAnchor135"/>Summary</h1>
			<p>In this chapter, we ventured into the world of voice—we learned about the basics of Amazon Connect, and even looked at the free tier version of Amazon Connect. Later, we explored the sample voice-based chatbot application using Amazon Connect, Lex, and Lambda. Then, we created a personal call center.</p>
			<p>You have also learned how to obtain a free phone number for a personal call center, and about using Amazon Lex chatbots with Amazon Connect with contact flows and different templates. Finally, you learned how to connect the call center to your Lex chatbot.</p>
			<p>In the next chapter, you will learn how to analyze images with computer vision using Amazon Rekognition services. Amazon Rekognition services are used to detect objects, scenes, and text in images. It is also used to match faces in different images and to compare how closely images are interlinked with each other.</p>
		</div>
		<div><div></div>
		</div>
	</body></html>