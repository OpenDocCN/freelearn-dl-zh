<html><head></head><body>
  <div id="_idContainer044">
   <h1 class="chapter-number" id="_idParaDest-56">
    <a id="_idTextAnchor058">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     3
    </span>
   </h1>
   <h1 id="_idParaDest-57">
    <a id="_idTextAnchor059">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Presenting the Unreal Engine Navigation System
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     The Unreal Engine
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.4.1">
      Navigation System
     </span>
    </strong>
    <span class="koboSpan" id="kobo.5.1">
     is a
    </span>
    <a id="_idIndexMarker112">
    </a>
    <span class="koboSpan" id="kobo.6.1">
     sophisticated framework that enables AI-controlled entities to navigate and interact seamlessly within game levels.
    </span>
    <span class="koboSpan" id="kobo.6.2">
     It provides a set of tools and algorithms that allow game developers to define and create paths, obstacles, and movement behaviors.
    </span>
    <span class="koboSpan" id="kobo.6.3">
     By using the Navigation System, you will be able to simulate realistic movement and behavior patterns of AI-controlled entities, enhancing the immersion and believability of your virtual environments.
    </span>
    <span class="koboSpan" id="kobo.6.4">
     As this system incorporates
    </span>
    <a id="_idIndexMarker113">
    </a>
    <span class="koboSpan" id="kobo.7.1">
     advanced features
    </span>
    <a id="_idIndexMarker114">
    </a>
    <span class="koboSpan" id="kobo.8.1">
     such as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.9.1">
      pathfinding algorithms
     </span>
    </strong>
    <span class="koboSpan" id="kobo.10.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.11.1">
      collision avoidance
     </span>
    </strong>
    <span class="koboSpan" id="kobo.12.1">
     , and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.13.1">
      dynamic obstacle handling
     </span>
    </strong>
    <span class="koboSpan" id="kobo.14.1">
     , understanding
    </span>
    <a id="_idIndexMarker115">
    </a>
    <span class="koboSpan" id="kobo.15.1">
     its full potential is a crucial skill for aspiring
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.16.1">
      AI programmers.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.17.1">
     By the time you reach the end of this chapter, you will possess a strong comprehension of how this specific part of the Gameplay Framework operates.
    </span>
    <span class="koboSpan" id="kobo.17.2">
     Equipped with this knowledge, you will be fully prepared to embark on your journey of actively working with the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.18.1">
      system itself.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.19.1">
     In this chapter, we will be covering the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.20.1">
      following topics:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.21.1">
      Introducing
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.22.1">
       AI movement
      </span>
     </span>
    </li>
    <li>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.23.1">
       Understanding pathfinding
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.24.1">
      Testing the Navigation System with a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.25.1">
       project template
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-58">
    <a id="_idTextAnchor060">
    </a>
    <span class="koboSpan" id="kobo.26.1">
     Technical requirements
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.27.1">
     There are no technical requirements to follow for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.28.1">
      this chapter.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-59">
    <a id="_idTextAnchor061">
    </a>
    <span class="koboSpan" id="kobo.29.1">
     Introducing AI movement
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.30.1">
     When it comes to moving
    </span>
    <a id="_idIndexMarker116">
    </a>
    <span class="koboSpan" id="kobo.31.1">
     AI entities in a virtual environment, we face numerous challenges, and there is no universal solution.
    </span>
    <span class="koboSpan" id="kobo.31.2">
     The approach to solving each problem depends on each unique characteristic that will be faced in the type of game being developed.
    </span>
    <span class="koboSpan" id="kobo.31.3">
     For example, is the AI’s destination something stationary – for instance, a pickup – or is it something that is moving unpredictably, such as the player character?
    </span>
    <span class="koboSpan" id="kobo.31.4">
     Furthermore, will the AI just need to wander around without a specific destination, or will it have a pre-defined pattern – for instance, as a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.32.1">
      patrolling sentinel?
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.33.1">
     Also, as a developer, you will need to consider factors such as different terrains, obstacles, and dangerous zones.
    </span>
    <span class="koboSpan" id="kobo.33.2">
     Deciding between an easier or a more dangerous – but quicker – path can have a significant impact at runtime.
    </span>
    <span class="koboSpan" id="kobo.33.3">
     These are just a few of the considerations involved in moving AIs within a level and, as you encounter different scenarios, you will be likely to face different issues.
    </span>
    <span class="koboSpan" id="kobo.33.4">
     Understanding and properly addressing all pertinent variables is essential for an optimal
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.34.1">
      player experience.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.35.1">
     So, what are the main entities involved in AI movement and, specifically, in pathfinding?
    </span>
    <span class="koboSpan" id="kobo.35.2">
     How do they cooperate to make a player’s experience flawless?
    </span>
    <span class="koboSpan" id="kobo.35.3">
     I will tell you all about it in a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.36.1">
      few seconds!
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-60">
    <a id="_idTextAnchor062">
    </a>
    <span class="koboSpan" id="kobo.37.1">
     Understanding the Navigation Mesh
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.38.1">
     In Unreal Engine, the Navigation System
    </span>
    <a id="_idIndexMarker117">
    </a>
    <span class="koboSpan" id="kobo.39.1">
     is based on a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.40.1">
      navigation mesh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.41.1">
     – or
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.42.1">
      nav mesh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.43.1">
     – that
    </span>
    <a id="_idIndexMarker118">
    </a>
    <span class="koboSpan" id="kobo.44.1">
     works by dividing the navigable space into polygons, which are subsequently divided into triangles for efficiency.
    </span>
    <span class="koboSpan" id="kobo.44.2">
     Each triangle is then considered a node of a graph to reach a specific location and when two triangles are adjacent, their respective nodes are connected.
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.45.1">
       Figure 3
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.46.1">
      .1
     </span>
    </em>
    <span class="koboSpan" id="kobo.47.1">
     depicts a game level with the aforementioned mesh, divided
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.48.1">
      by triangles:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer030">
     <span class="koboSpan" id="kobo.49.1">
      <img alt="Figure 3.1 – A nav mesh example" src="image/B31016_03_1.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.50.1">
     Figure 3.1 – A nav mesh example
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.51.1">
     Using this
    </span>
    <a id="_idIndexMarker119">
    </a>
    <span class="koboSpan" id="kobo.52.1">
     graph, you can apply any type of pathfinding algorithm – such as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.53.1">
      A-star
     </span>
    </strong>
    <span class="koboSpan" id="kobo.54.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.55.1">
      A*
     </span>
    </strong>
    <span class="koboSpan" id="kobo.56.1">
     ), which I will explain later in this chapter – and the resulting process will generate a path among these triangles that the AI character
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.57.1">
      can traverse.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.58.1">
     Fortunately, unless
    </span>
    <a id="_idIndexMarker120">
    </a>
    <span class="koboSpan" id="kobo.59.1">
     you truly need to delve into the intricacies of altering the core structure of the Navigation System, there is no immediate need to venture into such detail.
    </span>
    <span class="koboSpan" id="kobo.59.2">
     Understanding that the collection of generated triangles forms a cohesive graph, which serves as the foundation for pathfinding algorithms, is sufficient for getting the best out of the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.60.1">
      Navigation System.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.61.1">
     To generate a nav mesh in Unreal Engine, all you have to do is add one or more
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.62.1">
      Nav Mesh Bounds Volume
     </span>
    </strong>
    <span class="koboSpan" id="kobo.63.1">
     actors
    </span>
    <a id="_idIndexMarker121">
    </a>
    <span class="koboSpan" id="kobo.64.1">
     in the level and change their size to suit your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.65.1">
      own needs.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.66.1">
     Note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.67.1">
     In Unreal Engine, a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.68.1">
      Volume
     </span>
    </strong>
    <span class="koboSpan" id="kobo.69.1">
     class
    </span>
    <a id="_idIndexMarker122">
    </a>
    <span class="koboSpan" id="kobo.70.1">
     refers to a special type of actor that can influence the behavior of other actors within its area of effect.
    </span>
    <span class="koboSpan" id="kobo.70.2">
     Volumes are used to define various effects, such as lighting, and can modify how players or other objects interact with the game world.
    </span>
    <span class="koboSpan" id="kobo.70.3">
     Some common types of volumes in Unreal Engine include Trigger Volumes, Lightmass Importance Volumes, Post-Processing Volumes, and, obviously, Nav Mesh
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.71.1">
      Bounds Volumes.
     </span>
    </span>
   </p>
   <p>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.72.1">
       Figure 3
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.73.1">
      .2
     </span>
    </em>
    <span class="koboSpan" id="kobo.74.1">
     shows a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.75.1">
      Nav Mesh Bounds Volume
     </span>
    </strong>
    <a id="_idIndexMarker123">
    </a>
    <span class="koboSpan" id="kobo.76.1">
     actor added to a level; the yellow lines mark the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.77.1">
      volume itself.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer031">
     <span class="koboSpan" id="kobo.78.1">
      <img alt="Figure 3.2 – A Nav Mesh Bounds Volume" src="image/B31016_03_2.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.79.1">
     Figure 3.2 – A Nav Mesh Bounds Volume
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.80.1">
     This actor is pretty straightforward, and the only possible action you can take with it is to adjust its extension.
    </span>
    <span class="koboSpan" id="kobo.80.2">
     From the previous image, you may have noticed a green mesh, made of two triangles; this fairly simple shape has been generated by another actor: the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.81.1">
      Recast Nav Mesh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.82.1">
     one, which
    </span>
    <a id="_idIndexMarker124">
    </a>
    <span class="koboSpan" id="kobo.83.1">
     is usually auto-generated the very first time Nav Mesh Bounds Volume is added to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.84.1">
      the level.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.85.1">
     This actor oversees the walkable area generation for AI entities that will use it to make their own efficient and accurate calculations on pathfinding; an instance of it is usually auto-generated once you add a Nav Mesh Bounds Volume in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.86.1">
      your level.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.87.1">
     It should be noted that most of the settings available for the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.88.1">
      RecastNavMesh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.89.1">
     actor can be set with predefined values in your editor’s
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.90.1">
      Project Settings
     </span>
    </strong>
    <span class="koboSpan" id="kobo.91.1">
     – this can be opened from the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.92.1">
      File
     </span>
    </strong>
    <span class="koboSpan" id="kobo.93.1">
     menu – by selecting the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.94.1">
      Engine - Navigation Mesh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.95.1">
     section, as depicted in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.96.1">
       Figure 3
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.97.1">
       .3
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.98.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer032">
     <span class="koboSpan" id="kobo.99.1">
      <img alt="Figure 3.3 – The Navigation Mesh settings section" src="image/B31016_03_3.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.100.1">
     Figure 3.3 – The Navigation Mesh settings section
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.101.1">
     Now that you understand how a nav mesh is created in Unreal Engine, it is important to know that you can adjust it to enhance its interest and realism using navigation modifiers by using the available
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.102.1">
      modifier system.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-61">
    <a id="_idTextAnchor063">
    </a>
    <span class="koboSpan" id="kobo.103.1">
     Modifying the nav mesh
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.104.1">
     The Navigation System comprises various actors
    </span>
    <a id="_idIndexMarker125">
    </a>
    <span class="koboSpan" id="kobo.105.1">
     and components that alter the generation of the nav mesh, such as the cost of traversing a polygon.
    </span>
    <span class="koboSpan" id="kobo.105.2">
     These adjustments influence how AI agents move through
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.106.1">
      your level.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.107.1">
     The Nav Modifier Volume
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.108.1">
     The simplest one is the
    </span>
    <a id="_idIndexMarker126">
    </a>
    <strong class="bold">
     <span class="koboSpan" id="kobo.109.1">
      Nav Modifier Volume
     </span>
    </strong>
    <span class="koboSpan" id="kobo.110.1">
     actor, whose task is… well, to modify a nav mesh!
    </span>
    <span class="koboSpan" id="kobo.110.2">
     Once you have positioned this volume in your level, you will have the choice to modify how an AI agent will perceive it for pathfinding – you can designate it as an impassable terrain, a difficult terrain, or even an obstacle.
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.111.1">
       Figure 3
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.112.1">
      .4
     </span>
    </em>
    <span class="koboSpan" id="kobo.113.1">
     shows three modifier volumes set with the three different
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.114.1">
      cost settings:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer033">
     <span class="koboSpan" id="kobo.115.1">
      <img alt="Figure 3.4 – Three navigation modifiers in action" src="image/B31016_03_4.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.116.1">
     Figure 3.4 – Three navigation modifiers in action
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.117.1">
     If you are
    </span>
    <a id="_idIndexMarker127">
    </a>
    <span class="koboSpan" id="kobo.118.1">
     thinking about creating your own nav mesh modifiers, well, that’s possible; you will just need to extend the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.119.1">
      UNavArea
     </span>
    </strong>
    <span class="koboSpan" id="kobo.120.1">
     class, set its parameters, and you are ready
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.121.1">
      to go!
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.122.1">
     Navigation Query Filters
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.123.1">
     As an additional method for tailoring the behavior of the Navigation System when generating paths for AI agents, you can take advantage
    </span>
    <a id="_idIndexMarker128">
    </a>
    <span class="koboSpan" id="kobo.124.1">
     of
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.125.1">
      Navigation Query Filters
     </span>
    </strong>
    <span class="koboSpan" id="kobo.126.1">
     .
    </span>
    <span class="koboSpan" id="kobo.126.2">
     This method encompasses information pertaining to one or more specific areas and provides the flexibility to override the cost values assigned to the areas themselves, if necessary.
    </span>
    <span class="koboSpan" id="kobo.126.3">
     By implementing query filters, you will gain the ability to customize the navigation patterns of AI agents as they traverse various regions within your game world, and this will let you fine-tune and optimize the movement of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.127.1">
      AI entities.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.128.1">
     Navigation Link Proxies
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.129.1">
     When you begin designing your
    </span>
    <a id="_idIndexMarker129">
    </a>
    <span class="koboSpan" id="kobo.130.1">
     walkable terrain, you will most probably be introducing gaps or areas with varying altitudes; and I guess you’ll need your AI character to jump from one side to the other.
    </span>
    <span class="koboSpan" id="kobo.130.2">
     That’s exactly why the Nav Link Proxy has been created; this actor will connect two areas of the nav mesh that lack a direct navigation path.
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.131.1">
       Figure 3
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.132.1">
      .5
     </span>
    </em>
    <span class="koboSpan" id="kobo.133.1">
     shows such a link, connecting two zones at
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.134.1">
      different heights:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer034">
     <span class="koboSpan" id="kobo.135.1">
      <img alt="Figure 3.5 – Nav link proxy" src="image/B31016_03_5.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.136.1">
     Figure 3.5 – Nav link proxy
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.137.1">
     With such a
    </span>
    <a id="_idIndexMarker130">
    </a>
    <span class="koboSpan" id="kobo.138.1">
     useful tool at your disposal, you will be able to make your character jump, fall down, and execute breathtaking acrobatics, seamlessly transitioning from one gravity-defying move
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.139.1">
      to another.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.140.1">
     Runtime nav mesh generation
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.141.1">
     By default, Unreal Engine
    </span>
    <a id="_idIndexMarker131">
    </a>
    <span class="koboSpan" id="kobo.142.1">
     is set to generate nav meshes statically – this means that the mesh is generated offline and cannot be changed at runtime.
    </span>
    <span class="koboSpan" id="kobo.142.2">
     However, if you need a more flexible way of generating a nav mesh, you can opt for the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.143.1">
      dynamic mesh generation
     </span>
    </strong>
    <span class="koboSpan" id="kobo.144.1">
     system
    </span>
    <a id="_idIndexMarker132">
    </a>
    <span class="koboSpan" id="kobo.145.1">
     that will let you update the mesh under different circumstances – for example, by adding moving entities.
    </span>
    <span class="koboSpan" id="kobo.145.2">
     The runtime generation can be enabled for the whole project by opening
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.146.1">
      Project Settings
     </span>
    </strong>
    <span class="koboSpan" id="kobo.147.1">
     , and then going to the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.148.1">
      Engine - Navigation Mesh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.149.1">
     section, and selecting the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.150.1">
      Runtime Generation
     </span>
    </strong>
    <span class="koboSpan" id="kobo.151.1">
     option in the
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.152.1">
       Runtime
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.153.1">
      category:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer035">
     <span class="koboSpan" id="kobo.154.1">
      <img alt="Figure 3.6 – Enabling Runtime Generation" src="image/B31016_03_6.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.155.1">
     Figure 3.6 – Enabling Runtime Generation
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.156.1">
     Alternatively, you can
    </span>
    <a id="_idIndexMarker133">
    </a>
    <span class="koboSpan" id="kobo.157.1">
     enable it for just a single level, by changing the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.158.1">
      Runtime Generation
     </span>
    </strong>
    <span class="koboSpan" id="kobo.159.1">
     attribute in the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.160.1">
      Recast Nav
     </span>
    </strong>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.161.1">
       Mesh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.162.1">
      actor.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.163.1">
     Invokers
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.164.1">
     A
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.165.1">
      Navigation Invoker
     </span>
    </strong>
    <span class="koboSpan" id="kobo.166.1">
     is an
    </span>
    <a id="_idIndexMarker134">
    </a>
    <span class="koboSpan" id="kobo.167.1">
     actor component that will generate the nav mesh around an AI agent at runtime.
    </span>
    <span class="koboSpan" id="kobo.167.2">
     It is used to remove the need for pre-computing the mesh, and it allows for dynamic navigation in the game world.
    </span>
    <span class="koboSpan" id="kobo.167.3">
     This feature is particularly useful when you have extensive terrains – for instance, an open world – that will take a huge amount of time to generate the nav mesh; through an Invoker, the system will generate the mesh itself at runtime, but just in a limited space, around
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.168.1">
      the actor.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.169.1">
     You now have a grasp of how a nav mesh is created and tweaked, so let’s explore who – or what – will be moving
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.170.1">
      through it.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-62">
    <a id="_idTextAnchor064">
    </a>
    <span class="koboSpan" id="kobo.171.1">
     AI agents
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.172.1">
     In Unreal Engine’s Navigation System, an
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.173.1">
      agent
     </span>
    </strong>
    <span class="koboSpan" id="kobo.174.1">
     is an
    </span>
    <a id="_idIndexMarker135">
    </a>
    <span class="koboSpan" id="kobo.175.1">
     AI character or entity that is capable of navigating the game world by means of the nav mesh.
    </span>
    <span class="koboSpan" id="kobo.175.2">
     An agent will use the nav mesh data to compute paths, avoid obstacles, and move around the environment intelligently.
    </span>
    <span class="koboSpan" id="kobo.175.3">
     Each agent in a level typically represents a specific type of character, such as a player character – for instance, in a point-and-click game – an enemy AI, or any other entity that needs to move within the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.176.1">
      game world.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.177.1">
     To move an agent within a
    </span>
    <a id="_idIndexMarker136">
    </a>
    <span class="koboSpan" id="kobo.178.1">
     level, you will typically be using a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.179.1">
      Pawn
     </span>
    </strong>
    <span class="koboSpan" id="kobo.180.1">
     or a
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.181.1">
       Character
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.182.1">
      actor.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.183.1">
     One of the easiest ways to move an agent toward a location or an actor is by using the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.184.1">
      Simple Move to Location
     </span>
    </strong>
    <span class="koboSpan" id="kobo.185.1">
     or
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.186.1">
      Simple Move to Actor
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.187.1">
      Blueprint nodes.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer036">
     <span class="koboSpan" id="kobo.188.1">
      <img alt="Figure 3.7 – The Simple Move nodes" src="image/B31016_03_7.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.189.1">
     Figure 3.7 – The Simple Move nodes
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.190.1">
     Alternatively, you can use the corresponding C++ methods called, respectively,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.191.1">
      SimpleMoveToLocation()
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.192.1">
      and
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.193.1">
       SimpleMovetoActor()
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.194.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.195.1">
     Obviously, in Unreal Engine, you can create more complex behaviors than just moving an agent to a single point; this is something we will explore starting from
    </span>
    <a href="B31016_08.xhtml#_idTextAnchor148">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.196.1">
        Chapter 8
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.197.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.198.1">
      Setting Up a
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.199.1">
       Behavior Tree
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.200.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-63">
    <a id="_idTextAnchor065">
    </a>
    <span class="koboSpan" id="kobo.201.1">
     Avoidance
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.202.1">
     Basic pathfinding algorithms are effective for finding routes around stationary objects; however, when it comes to moving obstacles – such as player characters or other AI agents – a more suitable system is needed.
    </span>
    <span class="koboSpan" id="kobo.202.2">
     That’s why Unreal Engine provides two
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.203.1">
      avoidance
     </span>
    </strong>
    <span class="koboSpan" id="kobo.204.1">
     systems, to prevent
    </span>
    <a id="_idIndexMarker137">
    </a>
    <span class="koboSpan" id="kobo.205.1">
     collision between
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.206.1">
      moving entities:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.207.1">
      The
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.208.1">
       Reciprocal Velocity Obstacles
      </span>
     </strong>
     <span class="koboSpan" id="kobo.209.1">
      (
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.210.1">
       RVO
      </span>
     </strong>
     <span class="koboSpan" id="kobo.211.1">
      ) system
     </span>
     <a id="_idIndexMarker138">
     </a>
     <span class="koboSpan" id="kobo.212.1">
      computes the
     </span>
     <a id="_idIndexMarker139">
     </a>
     <span class="koboSpan" id="kobo.213.1">
      velocity vectors for each agent, considering nearby agents and assuming they are moving at a constant velocity in each time step of the calculation.
     </span>
     <span class="koboSpan" id="kobo.213.2">
      The chosen optimal velocity vector is the closest match to the agent’s desired velocity in the direction of its destination.
     </span>
     <span class="koboSpan" id="kobo.213.3">
      This system is included in the character movement component.
     </span>
     <span class="koboSpan" id="kobo.213.4">
      RVO does not use the nav mesh for
     </span>
     <a id="_idIndexMarker140">
     </a>
     <span class="koboSpan" id="kobo.214.1">
      avoidance, so it
     </span>
     <a id="_idIndexMarker141">
     </a>
     <span class="koboSpan" id="kobo.215.1">
      can be used separately from the Navigation System for
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.216.1">
       any character.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.217.1">
      The
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.218.1">
       Detour Crowd Manager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.219.1">
      computes a
     </span>
     <a id="_idIndexMarker142">
     </a>
     <span class="koboSpan" id="kobo.220.1">
      rough sample of velocities that lean
     </span>
     <a id="_idIndexMarker143">
     </a>
     <span class="koboSpan" id="kobo.221.1">
      toward the agent’s direction, resulting in a substantial enhancement in avoidance quality compared to the standard RVO approach.
     </span>
     <span class="koboSpan" id="kobo.221.2">
      This system can be used by any actor extending the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.222.1">
       Pawn
      </span>
     </strong>
     <span class="koboSpan" id="kobo.223.1">
      class by using the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.224.1">
        ADetourCrowdAIController
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.225.1">
       class.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.226.1">
     You will be introduced to avoidance in
    </span>
    <a href="B31016_05.xhtml#_idTextAnchor099">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.227.1">
        Chapter 5
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.228.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.229.1">
      Improving
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.230.1">
       Agent Navigation
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.231.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.232.1">
     In this section, you have been introduced to the main elements involved in pathfinding and how they interact with
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.233.1">
      the environment.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.234.1">
     In the following section, I will provide you with further details on how
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.235.1">
      pathfinding works.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-64">
    <a id="_idTextAnchor066">
    </a>
    <span class="koboSpan" id="kobo.236.1">
     Understanding pathfinding
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.237.1">
     As you are aware, Unreal Engine uses
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.238.1">
      pathfinding
     </span>
    </strong>
    <span class="koboSpan" id="kobo.239.1">
     for
    </span>
    <a id="_idIndexMarker144">
    </a>
    <span class="koboSpan" id="kobo.240.1">
     moving an agent around a level; in this section, I will go a bit deeper into detail on how things work under the hood.
    </span>
    <span class="koboSpan" id="kobo.240.2">
     Unreal Engine takes advantage of a generalized version of the A* algorithm, a widely employed graph traversal and pathfinding algorithm in computer science.
    </span>
    <span class="koboSpan" id="kobo.240.3">
     Known for its completeness, optimality, and efficiency, its main goal is to determine the shortest path between a designated source node and a specified goal node in a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.241.1">
      weighted graph.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.242.1">
     This graph is a node-based representation of the level, where nodes represent walkable areas that are interconnected and have information on neighbor nodes and traversal costs to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.243.1">
      reach them.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.244.1">
     A* uses a heuristic function to estimate the cost from each node to the target location; this trial-by-error system helps guide the search toward the most promising paths,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.245.1">
      improving efficiency.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.246.1">
     During the pathfinding process, the algorithm maintains two lists: one of them contains nodes that are yet to be evaluated, while the other contains nodes that have already been evaluated.
    </span>
    <span class="koboSpan" id="kobo.246.2">
     The algorithm evaluates each node by considering its cost, and the cost of reaching it from the previous node.
    </span>
    <span class="koboSpan" id="kobo.246.3">
     It selects the node with the lowest total cost from the open list for further evaluation.
    </span>
    <span class="koboSpan" id="kobo.246.4">
     Once the target node is reached, the algorithm reconstructs the path by backtracking from the target node to the start node, following the connections
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.247.1">
      between nodes.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.248.1">
     Unreal Engine’s version often includes post-smoothing operations to improve the quality of the generated path.
    </span>
    <span class="koboSpan" id="kobo.248.2">
     Post-smoothing adjusts the path to make it more natural and avoid obstacles
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.249.1">
      more effectively.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.250.1">
     If you want to take a deep dive into how the nav mesh generation works and how pathfinding is computed, my suggestion is to check the Unreal Engine source code available on GitHub (
    </span>
    <a href="https://github.com/EpicGames/UnrealEngine">
     <span class="koboSpan" id="kobo.251.1">
      https://github.com/EpicGames/UnrealEngine
     </span>
    </a>
    <span class="koboSpan" id="kobo.252.1">
     ); in particular, you should look for the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.253.1">
      NavigationSystem
     </span>
    </strong>
    <span class="koboSpan" id="kobo.254.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.255.1">
      NavMesh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.256.1">
     modules, which are located in the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.257.1">
       Engine/Source/Runtime
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.258.1">
      folder.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.259.1">
     Note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.260.1">
     To access the Unreal Engine source code, you will need to be part of the Epic Games GitHub organization.
    </span>
    <span class="koboSpan" id="kobo.260.2">
     Subscription is free and there’s no reason why you shouldn’t take part
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.261.1">
      in it.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.262.1">
     As an example, by
    </span>
    <a id="_idIndexMarker145">
    </a>
    <span class="koboSpan" id="kobo.263.1">
     checking the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.264.1">
      DetourNavMeshQuery
     </span>
    </strong>
    <span class="koboSpan" id="kobo.265.1">
     class in the Unreal Engine source code, you will get an insight into how the A* pathfinding algorithm is used and how cost is computed or how to find a tile on
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.266.1">
      a path.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.267.1">
     It seems you have gained some insight into how pathfinding is handled within Unreal Engine, so I guess it’s time to delve into a practical example by exploring a real case scenario; we will begin by creating a project from
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.268.1">
      a template.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-65">
    <a id="_idTextAnchor067">
    </a>
    <span class="koboSpan" id="kobo.269.1">
     Testing the Navigation System with a project template
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.270.1">
     In this section, we will look at a project that uses the Unreal Engine Navigation System and do it with a
    </span>
    <a id="_idIndexMarker146">
    </a>
    <span class="koboSpan" id="kobo.271.1">
     project template – using a pre-made project such as a template presents a valuable chance for you to acquire practical experience on a particular topic, saving you the time and effort required to build a project from the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.272.1">
      ground up.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.273.1">
     Once the project has been created, we will quickly analyze the nav mesh generation system and how the template handles the character movement
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.274.1">
      at runtime.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.275.1">
     Here, you will
    </span>
    <a id="_idIndexMarker147">
    </a>
    <span class="koboSpan" id="kobo.276.1">
     start by creating a game prototype by using the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.277.1">
      Top Down
     </span>
    </strong>
    <span class="koboSpan" id="kobo.278.1">
     project, one of the templates available in the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.279.1">
      GAMES
     </span>
    </strong>
    <span class="koboSpan" id="kobo.280.1">
     category of
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.281.1">
      Unreal
     </span>
    </strong>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.282.1">
       Project Browser
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.283.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-66">
    <a id="_idTextAnchor068">
    </a>
    <span class="koboSpan" id="kobo.284.1">
     Setting up the project
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.285.1">
     Once you are ready, you can fire up the Epic Games Launcher
    </span>
    <a id="_idIndexMarker148">
    </a>
    <span class="koboSpan" id="kobo.286.1">
     and follow
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.287.1">
      these steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.288.1">
      Select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.289.1">
       GAMES
      </span>
     </strong>
     <span class="koboSpan" id="kobo.290.1">
      |
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.291.1">
       Top Down
      </span>
     </strong>
     <span class="koboSpan" id="kobo.292.1">
      from the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.293.1">
       available templates.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.294.1">
      Set the project to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.295.1">
       Blueprint
      </span>
     </strong>
     <span class="koboSpan" id="kobo.296.1">
      or
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.297.1">
       C++
      </span>
     </strong>
     <span class="koboSpan" id="kobo.298.1">
      depending on your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.299.1">
       personal preferences.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.300.1">
      Name your project – any name
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.301.1">
       will do.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.302.1">
      Leave the other settings with their
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.303.1">
       default values.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.304.1">
      Click the
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.305.1">
        Create
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.306.1">
       button.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer037">
     <span class="koboSpan" id="kobo.307.1">
      <img alt="Figure 3.8 – Project setup" src="image/B31016_03_8.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.308.1">
     Figure 3.8 – Project setup
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.309.1">
     Once the project has been created and opened, you are ready to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.310.1">
      analyze it.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-67">
    <a id="_idTextAnchor069">
    </a>
    <span class="koboSpan" id="kobo.311.1">
     Analyzing the nav mesh
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.312.1">
     We are now going to get a
    </span>
    <a id="_idIndexMarker149">
    </a>
    <span class="koboSpan" id="kobo.313.1">
     brief tour of the generated level and of the actors that contribute to the nav
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.314.1">
      mesh generation.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.315.1">
     In the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.316.1">
      Outliner
     </span>
    </strong>
    <span class="koboSpan" id="kobo.317.1">
     view, you will notice that there is a folder named
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.318.1">
      Navigation
     </span>
    </strong>
    <span class="koboSpan" id="kobo.319.1">
     , including
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.320.1">
      three actors:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.321.1">
       NavMesh
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.322.1">
        Bounds Volume
       </span>
      </strong>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.323.1">
       Recast
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.324.1">
        Nav Mesh
       </span>
      </strong>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.325.1">
       Nav
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.326.1">
        Link Proxy
       </span>
      </strong>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.327.1">
     Let’s analyze each element
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.328.1">
      in detail.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.329.1">
     Nav Mesh Bounds Volume
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.330.1">
     As you already know from the previous
    </span>
    <a id="_idIndexMarker150">
    </a>
    <span class="koboSpan" id="kobo.331.1">
     sections in this chapter, the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.332.1">
      NavMeshBoundsVolume
     </span>
    </strong>
    <span class="koboSpan" id="kobo.333.1">
     actor is responsible for defining the area where the nav mesh will be computed.
    </span>
    <span class="koboSpan" id="kobo.333.2">
     By selecting it, you will notice that a yellow-edged area is shown, wrapping all the game levels, as shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.334.1">
       Figure 3
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.335.1">
       .9
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.336.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer038">
     <span class="koboSpan" id="kobo.337.1">
      <img alt="Figure 3.9 – Nav Mesh Bounds Volume" src="image/B31016_03_9.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.338.1">
     Figure 3.9 – Nav Mesh Bounds Volume
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.339.1">
     You cannot do much with this actor; just resize it and the nav mesh will
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.340.1">
      be recomputed.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.341.1">
     Recast Nav Mesh
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.342.1">
     The
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.343.1">
      RecastNavMesh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.344.1">
     actor will take
    </span>
    <a id="_idIndexMarker151">
    </a>
    <span class="koboSpan" id="kobo.345.1">
     care of the nav mesh generation; by default, it does not have a visible representation within the Unreal Engine Editor.
    </span>
    <span class="koboSpan" id="kobo.345.2">
     However, if you press the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.346.1">
      P
     </span>
    </em>
    <span class="koboSpan" id="kobo.347.1">
     key on your keyboard, the nav mesh will become visible and accessible within the editor interface.
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.348.1">
       Figure 3
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.349.1">
      .10
     </span>
    </em>
    <span class="koboSpan" id="kobo.350.1">
     shows the level once this actor has been
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.351.1">
      made visible:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer039">
     <span class="koboSpan" id="kobo.352.1">
      <img alt="Figure 3.10 – Recast Nav Mesh" src="image/B31016_03_10.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.353.1">
     Figure 3.10 – Recast Nav Mesh
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.354.1">
     In
    </span>
    <a href="B31016_06.xhtml#_idTextAnchor116">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.355.1">
        Chapter 6
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.356.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.357.1">
      Optimizing the Navigation System
     </span>
    </em>
    <span class="koboSpan" id="kobo.358.1">
     , I will be presenting you some techniques on how to optimize mesh generation with this actor.
    </span>
    <span class="koboSpan" id="kobo.358.2">
     For now, you can just check the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.359.1">
      Display
     </span>
    </strong>
    <span class="koboSpan" id="kobo.360.1">
     category in the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.361.1">
      Details
     </span>
    </strong>
    <span class="koboSpan" id="kobo.362.1">
     window; here, you will have access to a plethora of visualization utilities that will come in handy later in this book.
    </span>
    <span class="koboSpan" id="kobo.362.2">
     As an example, in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.363.1">
       Figure 3
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.364.1">
      .11
     </span>
    </em>
    <span class="koboSpan" id="kobo.365.1">
     , I am showing the
    </span>
    <a id="_idIndexMarker152">
    </a>
    <span class="koboSpan" id="kobo.366.1">
     sections of the level – named
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.367.1">
      tiles
     </span>
    </strong>
    <span class="koboSpan" id="kobo.368.1">
     – along with their labels and the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.369.1">
      generated polygons:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer040">
     <span class="koboSpan" id="kobo.370.1">
      <img alt="Figure 3.11 – Some display settings for the Recast Nav Mesh actor" src="image/B31016_03_11.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.371.1">
     Figure 3.11 – Some display settings for the Recast Nav Mesh actor
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.372.1">
     You may have observed
    </span>
    <a id="_idIndexMarker153">
    </a>
    <span class="koboSpan" id="kobo.373.1">
     that the blue cube actors on the level are not affecting the nav mesh in any way.
    </span>
    <span class="koboSpan" id="kobo.373.2">
     This is because they have been configured not to impact the navigation; since they are movable objects, we do not intend for them to create non-navigable areas
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.374.1">
      around them.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.375.1">
     As a simple test, in the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.376.1">
      Details
     </span>
    </strong>
    <span class="koboSpan" id="kobo.377.1">
     panel, you can look for the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.378.1">
      Can Ever Affect Navigation
     </span>
    </strong>
    <span class="koboSpan" id="kobo.379.1">
     property and enable it; the nav mesh will be immediately recomputed and the cube will carve a hole in it, as depicted in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.380.1">
       Figure 3
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.381.1">
       .12
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.382.1">
      :
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer041">
     <span class="koboSpan" id="kobo.383.1">
      <img alt="Figure 3.12 – The blue cube actor carving the nav mesh" src="image/B31016_03_12.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.384.1">
     Figure 3.12 – The blue cube actor carving the nav mesh
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.385.1">
     The aforementioned property states that the object will be an obstruction in the navigation area and that the generated hole will be a non-navigable area in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.386.1">
      the mesh.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.387.1">
     Please note that letting such a movable object carve the nav mesh may produce undesired results; by default, the nav mesh is static and cannot be altered at runtime.
    </span>
    <span class="koboSpan" id="kobo.387.2">
     This implies that even if the object is moved, the non-navigable area will remain fixed and – though unseen – will hinder the player character from moving into or
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.388.1">
      through it.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.389.1">
     Nav Link Proxy
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.390.1">
     The last nav mesh entity in this
    </span>
    <a id="_idIndexMarker154">
    </a>
    <span class="koboSpan" id="kobo.391.1">
     example is a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.392.1">
      NavLinkProxy
     </span>
    </strong>
    <span class="koboSpan" id="kobo.393.1">
     actor that, in our level, will let the player character jump down from
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.394.1">
      a platform.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer042">
     <span class="koboSpan" id="kobo.395.1">
      <img alt="Figure 3.13 – The Nav Link Proxy in the level" src="image/B31016_03_13.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.396.1">
     Figure 3.13 – The Nav Link Proxy in the level
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.397.1">
     Now that you comprehend how the nav mesh is structured, let’s examine the character controller to understand how the player character
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.398.1">
      is maneuvered.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-68">
    <a id="_idTextAnchor070">
    </a>
    <span class="koboSpan" id="kobo.399.1">
     Analyzing the character controller
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.400.1">
     Depending on your choice in creating the
    </span>
    <a id="_idIndexMarker155">
    </a>
    <span class="koboSpan" id="kobo.401.1">
     project – Blueprints or C++ – you will have two slightly different versions of the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.402.1">
      character controller.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.403.1">
     The Blueprint character controller
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.404.1">
     The code for moving the controller
    </span>
    <a id="_idIndexMarker156">
    </a>
    <span class="koboSpan" id="kobo.405.1">
     character is pretty straightforward and can be found in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.406.1">
      BP_TopDownController
     </span>
    </strong>
    <span class="koboSpan" id="kobo.407.1">
     – located in the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.408.1">
       Content/TopDown/Blueprints
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.409.1">
      folder.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.410.1">
     Once the Blueprint class is opened, locate the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.411.1">
      MoveTo
     </span>
    </strong>
    <span class="koboSpan" id="kobo.412.1">
     function in the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.413.1">
      Functions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.414.1">
     tab and open it; you will find the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.415.1">
      Simple Move to Location
     </span>
    </strong>
    <span class="koboSpan" id="kobo.416.1">
     node that is used to make the player character move through the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.417.1">
      nav mesh.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer043">
     <span class="koboSpan" id="kobo.418.1">
      <img alt="Figure 3.14 – The MoveTo function" src="image/B31016_03_14.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.419.1">
     Figure 3.14 – The MoveTo function
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.420.1">
     This is all you need to use to move your player character to a predefined location in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.421.1">
      the level.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.422.1">
     The C++ character controller
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.423.1">
     The same logic can be found inside
    </span>
    <a id="_idIndexMarker157">
    </a>
    <span class="koboSpan" id="kobo.424.1">
     a C++-generated project; just open the generated
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.425.1">
      .cpp
     </span>
    </strong>
    <span class="koboSpan" id="kobo.426.1">
     class for the player controller and look for the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.427.1">
      OnSetDestinationReleased()
     </span>
    </strong>
    <span class="koboSpan" id="kobo.428.1">
     method; you will find this line
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.429.1">
      of code:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.430.1">
UAIBlueprintHelperLibrary::SimpleMoveToLocation(this, CachedDestination);</span></pre>
   <p>
    <span class="koboSpan" id="kobo.431.1">
     This helper function will start the navigation process for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.432.1">
      your agent.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-69">
    <a id="_idTextAnchor071">
    </a>
    <span class="koboSpan" id="kobo.433.1">
     Testing the project
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.434.1">
     Now that you know all the actors involved in this project, you can simply hit the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.435.1">
      Play
     </span>
    </strong>
    <span class="koboSpan" id="kobo.436.1">
     button and start testing how the Navigation System works.
    </span>
    <span class="koboSpan" id="kobo.436.2">
     In particular, you will notice that the character will move to the destination point by selecting the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.437.1">
      shortest path.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.438.1">
     Additionally, once on the raised platform on the left, it will be able to jump down thanks to the Nav Link Proxy that has been added at
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.439.1">
      that location.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-70">
    <a id="_idTextAnchor072">
    </a>
    <span class="koboSpan" id="kobo.440.1">
     Summary
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.441.1">
     In this chapter, I introduced you to the key components of the Unreal Engine Navigation System.
    </span>
    <span class="koboSpan" id="kobo.441.2">
     We started by discussing the process of generating the nav mesh, which is essential for AI agents to navigate the environment.
    </span>
    <span class="koboSpan" id="kobo.441.3">
     Then, I provided a brief explanation of how the pathfinding algorithm works, enabling AI characters to find their way efficiently.
    </span>
    <span class="koboSpan" id="kobo.441.4">
     Lastly, I highlighted the benefits of using the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.442.1">
      Top Down
     </span>
    </strong>
    <span class="koboSpan" id="kobo.443.1">
     project template, which effectively utilizes the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.444.1">
      Navigation System.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.445.1">
     By now, you should have a good understanding of the capabilities offered by the Unreal Engine AI Navigation System.
    </span>
    <span class="koboSpan" id="kobo.445.2">
     I imagine you are eager to dive in and start coding on your keyboard, and that is exactly what we will be doing in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.446.1">
      next chapter!
     </span>
    </span>
   </p>
  </div>
 </body></html>